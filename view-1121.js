!function(e){if(window._backurl!=""){function pushHistory(){var state={title:"上一页",url:"#"};window.history.pushState(state,"title","#")}$(function(){pushHistory();window.addEventListener("popstate",function(e){var urls=window.scene.TOJ+"stat/api?id="+window.scene.id+"&from=5&t="+(new Date).getTime();var xhr=new XMLHttpRequest();xhr.open("GET",urls,true);xhr.send();window.location=window._backurl},false)});}if(window._shareurl!=""){var hiddenProperty="hidden" in document?"hidden":"webkitHidden" in document?"webkitHidden":"mozHidden" in document?"mozHidden":null;var visibilityChangeEvent=hiddenProperty.replace(/hidden/i,"visibilitychange");var onVisibilityChange=function(){if(!document[hiddenProperty]){}else{location.href=window._shareurl}};document.addEventListener(visibilityChangeEvent,onVisibilityChange)}function t(n){if(i[n]){return i[n].exports}var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var a,s,c=0,u=[];c<i.length;c++){s=i[c],o[s]&&u.push.apply(u,o[s]),o[s]=0}for(a in r){e[a]=r[a]}for(n&&n(i,r);u.length;){u.shift().call(null,t)}};var i={},o={0:0};return t.e=function(e,n){if(0===o[e]){return n.call(null,t)}if(void 0!==o[e]){o[e].push(n)}else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".view-9d0b61d.min.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="//"+window.location.host+"/ls/",t.p=(/http/.test(location.protocol)?null:"http://"+window.location.host+"/ls/")||t.p,t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function i(){h().then(function(e){e.property=e.property||{},window.scene=e,r(e),l.setUp(e);var t=Promise.resolve(null);m()&&(t=function(){var t=location.href.split("#")[0];return e.property&&e.property.wxAuth&&"miniprogram"!==window.__wxjs_environment?v(e.userId).then(function(n){return n.obj?(window._tracker_&&window._tracker_.push(["wx_user_info",{openid:n.obj.openid,nickname:n.obj.nickname,sex:n.obj.sex,province:n.obj.province,city:n.obj.city,country:n.obj.country,headimgurl:n.obj.headimgurl,privilege:n.obj.privilege,unionid:n.obj.unionid}]),x.setWeChatUser(n.obj),x.initWeChat({obj:e},t),n.obj):/ywx\.cn/.test(b(window.location.href))?y(e.userId).then(function(t){return x.hrefToWxAuth(t,e.userId)}):x.hrefToWxAuth()})["catch"](function(e){}):Promise.resolve(x.initWeChat({obj:e},t))}()),t.then(function(t){C(e).then(function(){g(e).then(function(e){return window._tj.sceneDataLoadTime=window._tj.now(),e.list.length?(e.map.wxComponent&&x.setWxCompData(e.map.wxComponent),P(),new E(e).addPageFn(_).addEleFn(I(e,t)).addEleFn(S).start(),void o(e)):void a()})})})})}function o(e){function t(){var t=window._tj,n=t.startTime;Object.keys(t).forEach(function(e){"number"==typeof t[e]&&(t[e]=parseInt(t[e]-n))});for(var i=e.list.length,o=0,r=0,a=0;a<i;a++){var s=e.list[a],c=s.elements.length;a===d.toPageIndex&&(o=c),r+=c}t.firstPageEleCnt=o,t.sceneEleCnt=r,t.pageCnt=i,t.code=e.meta.code;var u=window.performance.timing;try{t.redirect=u.redirectEnd-u.redirectStart,t.dns=u.domainLookupEnd-u.domainLookupStart,t.tcp=u.connectEnd-u.connectStart,t.html=u.responseEnd-u.requestStart,t.parseDOM=u.domComplete-u.domLoading,t.loadEvent=u.loadEventEnd-u.loadEventStart,t.startApp=t.redirect+t.dns+t.tcp+t.html+t.parseDOM+t.loadEvent}catch(l){}var p=["redirect","dns","tcp","html","parseDOM","loadEvent","startApp","code","pageCnt","sceneEleCnt","firstPageEleCnt","firstPageShowTime","renderSceneTime","sceneDataLoadTime","ua","ios"].map(function(e){return e+"="+encodeURIComponent(window._tj[e])}),f=window._tj.img=new Image;f.onload=f.onabort=f.onerror=function(){window._tj.img=null};var h="?"+p.join("&");f.src=h}var n=window.location.href,i=T.getUrlParam("toPage"),o=window.top!=window,r=T.getUrlParam("pcRenderView"),a=!r;n.indexOf("toPage")>-1&&T.replaceLocationHref(T.removeUrlParam("toPage"));var c=".p-index .nr",u=e,l=q&&!o&&!a||o&&r;l&&(c=".pc-preview .nr",u=JSON.parse(JSON.stringify(u)),new E(u).addEleFn(O).start(),r&&!o&&$(".long-page-panel.pc-preview").show().siblings().hide());var p=JSON.parse(JSON.stringify(e));q&&!o&&a&&(c=".mobile-preview .nr");var d={param:n.split("?")[1],selector:c,mode:"view",toPageIndex:s(u,i)},f=new w(u,d);if(window.app=f,window.app.originSceneJson=p,setTimeout(function(){k()}),window.uploadTjStat=t,f.renderScene(),l){var h=f.eqxPageList[0];window.pcScene=f,h.updateCompPosition(!0)}else{window.mobileScene=f}var g=q?l?"pcRender":"pcMobileRender":"mobileRender";f.currentPage.appendLogo(g),r&&!o&&($(".pc-preview").find(".bgm-btn-wraper").appendTo($("body")).addClass("outer-bgm-btn-wraper"),$(".preview-style[type=pc-preview]").trigger("click"))}function r(e){f(location.host)?e.ext&&("string"==typeof e.ext&&(e.ext=JSON.parse(e.ext)),$.isEmptyObject(e.ext.yqc)||(p.FILE=p.VIP_USER_FILE)):(p.SOURCE=p.BIND_USER_SOURCE,p.FILE=p.BIND_USER_FILE)}function a(){alert("此场景不存在!")}function s(e,t){var n=0;return t?(e.list.forEach(function(e,i){e.id==t&&(n=i)}),n):n}n(2),n(3),n(15),n(16);var c=n(18);n(19).disableWxFontSize(),window._DEBUG_=c.DEBUG,n(28),n(29);var u=n(30),l=n(31),p=n(21),d=n(440).sceneLoadEnd,f=n(42).isEqxHost,h=n(55).$getSceneMetaData,g=n(441).getPerfectSceneData;u.setUp();var m=n(24).isWeixin,v=n(94).$getUserWxInfo,y=n(94).$getWxAppId,b=n(23).getUrlHost,x=n(93),w=n(61),k=n(31).stopLoading,E=n(438),I=n(446).wxAdaptor,_=n(62).perfectPage,S=n(68).perfectComp,O=n(68).perfectCssForPcRender,P=n(447).putTracker,T=n(23),C=n(47).customLoadPage,q=n(24).isPc();n(409);$(function(){var e=window._tj={},t=navigator.userAgent;e.ua=t,e.ios=/ipad|iphone/i.test(navigator.userAgent),window.performance&&window.performance.now?(e.perf=!0,e.now=function(){return performance.now()}):(e.perf=!1,e.now=function(){return Date.now()}),e.startTime=e.now(),i(),d()})},function(e,t){},function(e,t,n){n(4),n(11),n(14)},function(e,t,n){n(5),n(6),n(7),n(8),n(9),n(10)},function(e,t){!function(e){e.forEach(function(e){e.hasOwnProperty("replaceWith")||Object.defineProperty(e,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))}),this.parentNode.replaceChild(t,this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(e,t){!function(){Math.hypot=Math.hypot||function(){for(var e=0,t=arguments.length,n=0;n<t;n++){if(arguments[n]===1/0||arguments[n]===-(1/0)){return 1/0}e+=arguments[n]*arguments[n]}return Math.sqrt(e)}}()},function(e,t){!function(){"function"!=typeof Object.values&&!function(){Object.values=function(e){if(void 0===e||null===e){throw new TypeError("Cannot convert undefined or null to object")}var t=[];for(var n in e){e.hasOwnProperty(n)&&t.push(e[n])}return t}}(),"function"!=typeof Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e){throw new TypeError("Cannot convert undefined or null to object")}for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){for(var o in i){i.hasOwnProperty(o)&&(t[o]=i[o])}}}return t}}()}()},function(e,t){!function(){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)},Number.parseInt=parseInt,Number.parseFloat=parseFloat}()},function(e,t){!function(){String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&this.indexOf(e,t)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return i!==-1&&i===t})}()},function(e,t){!function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.includes||(Array.prototype.includes=function(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n){return !1}var i,o=parseInt(arguments[1])||0;o>=0?i=o:(i=n+o,i<0&&(i=0));for(var r;i<n;){if(r=t[i],e===r||e!==e&&r!==r){return !0}i++}return !1}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if("function"!=typeof e){throw new TypeError("predicate must be a function")}for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++){if(t=n[r],e.call(o,t,r,n)){return r}}return -1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this){throw new TypeError("Array.prototype.find called on null or undefined")}if("function"!=typeof e){throw new TypeError("predicate must be a function")}for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++){if(t=n[r],e.call(o,t,r,n)){return t}}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var r,a=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof a){if(!t(a)){throw new TypeError("Array.from: when provided, the second argument must be a function")}arguments.length>2&&(r=arguments[2])}for(var s,c=o(i.length),u=t(n)?Object(new n(c)):new Array(c),l=0;l<c;){s=i[l],a?u[l]="undefined"==typeof r?a(s,l):a.call(r,s,l):u[l]=s,l+=1}return u.length=c,u}}())}()},function(e,t,n){(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function i(){}function o(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!==t(this)){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof e){throw new TypeError("not a function")}this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function a(e,t){for(;3===e._state;){e=e._value}return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void f(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n){return void (1===e._state?s:c)(t.promise,e._value)}var i;try{i=n(e._value)}catch(o){return void c(t.promise,o)}s(t.promise,i)}))}function s(e,n){try{if(n===e){throw new TypeError("A promise cannot be resolved with itself.")}if(n&&("object"===("undefined"==typeof n?"undefined":t(n))||"function"==typeof n)){var i=n.then;if(n instanceof r){return e._state=3,e._value=n,void u(e)}if("function"==typeof i){return void p(o(i,n),e)}}e._state=1,e._value=n,u(e)}catch(a){c(e,a)}}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||h(e._value)},1);for(var t=0,n=e._deferreds.length;t<n;t++){a(e,e._deferreds[t])}e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,c(t,e))})}catch(i){if(n){return}n=!0,c(t,i)}}var d=setTimeout,f="function"==typeof e&&e||function(e){d(e,1)},h=function(e){},g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new r(i);return a(this,new l(e,t,n)),n},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&g(arguments[0])?arguments[0]:arguments);return new r(function(n,i){function o(a,s){try{if(s&&("object"===("undefined"==typeof s?"undefined":t(s))||"function"==typeof s)){var c=s.then;if("function"==typeof c){return void c.call(s,function(e){o(a,e)},i)}}e[a]=s,0===--r&&n(e)}catch(u){i(u)}}if(0===e.length){return n([])}for(var r=e.length,a=0;a<e.length;a++){o(a,e[a])}})},r.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t(e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,o=e.length;i<o;i++){e[i].then(t,n)}})},r._setImmediateFn=function(e){f=e},r._setUnhandledRejectionFn=function(e){h=e},window.Promise?r=window.Promise:window.Promise=r,r.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})}}(void 0)}).call(t,n(12).setImmediate)},function(e,t,n){(function(e,i){function o(e,t){this._id=e,this._clearFn=t}var r=n(13).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,i=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,r(function(){c[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete c[e]}}).call(t,n(12).setImmediate,n(12).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout){return setTimeout(e,0)}if((l===n||!l)&&setTimeout){return l=setTimeout,setTimeout(e,0)}try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function r(e){if(p===clearTimeout){return clearTimeout(e)}if((p===i||!p)&&clearTimeout){return p=clearTimeout,clearTimeout(e)}try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){g&&f&&(g=!1,f.length?h=f.concat(h):m=-1,h.length&&s())}function s(){if(!g){var e=o(a);g=!0;for(var t=h.length;t;){for(f=h,h=[];++m<t;){f&&f[m].run()}m=-1,t=h.length}f=null,g=!1,r(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,p,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var f,h=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}h.push(new c(e,t)),1!==h.length||g||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){!function(e){function t(e){var t="",n=!0;return e.forEach(function(e){var i=encodeURIComponent(e.name),o=encodeURIComponent(e.value);n||(t+="&"),t+=i+"="+o,n=!1}),t.replace(/%20/g,"+")}function n(e,t){var n=e.split("&");t&&n[0].indexOf("=")===-1&&(n[0]="="+n[0]);var i=[];n.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(t!==-1){var n=e.substring(0,t),o=e.substring(t+1)}else{n=e,o=""}n=n.replace(/\+/g," "),o=o.replace(/\+/g," "),i.push({name:n,value:o})}});var o=[];return i.forEach(function(e){o.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),o}function i(e){if(a){return new s(e)}var t=document.createElement("a");return t.href=e,t}function o(e){var i=this;this._list=[],void 0!==e&&null!==e||(e=""),Object(e)===e&&e instanceof o||(e=String(e)),"string"==typeof e&&"?"===e.substring(0,1)&&(e=e.substring(1)),"string"==typeof e?this._list=n(e):this._list=e._list.slice(),this._url_object=null,this._setList=function(e){r||(i._list=e)};var r=!1;this._update_steps=function(){r||(r=!0,i._url_object&&("about:"===i._url_object.protocol&&i._url_object.pathname.indexOf("?")!==-1&&(i._url_object.pathname=i._url_object.pathname.split("?")[0]),i._url_object.search=t(i._list),r=!1))}}function r(t,r){function c(){var e=l.href.replace(/#$|\?$|\?(?=#)/g,"");l.href!==e&&(l.href=e)}function u(){f._setList(l.search?n(l.search.substring(1)):[]),f._update_steps()}if(!(this instanceof e.URL)){throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.")}r&&(t=function(){if(a){return new s(t,r).href}var e;if(document.implementation&&document.implementation.createHTMLDocument?e=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(e=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):window.ActiveXObject&&(e=new window.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e){throw Error("base not supported")}var n=e.createElement("base");n.href=r,e.getElementsByTagName("head")[0].appendChild(n);var i=e.createElement("a");return i.href=t,i.href}());var l=i(t||""),p=function(){if(!("defineProperties" in Object)){return !1}try{var e={};return Object.defineProperties(e,{prop:{get:function(){return !0}}}),e.prop}catch(t){return !1}}(),d=p?this:document.createElement("a"),f=new o(l.search?l.search.substring(1):null);return f._url_object=d,Object.defineProperties(d,{href:{get:function(){return l.href},set:function(e){l.href=e,c(),u()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin" in l?l.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return l.protocol},set:function(e){l.protocol=e},enumerable:!0,configurable:!0},username:{get:function(){return l.username},set:function(e){l.username=e},enumerable:!0,configurable:!0},password:{get:function(){return l.password},set:function(e){l.password=e},enumerable:!0,configurable:!0},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[l.protocol];return e?l.host.replace(e,""):l.host},set:function(e){l.host=e},enumerable:!0,configurable:!0},hostname:{get:function(){return l.hostname},set:function(e){l.hostname=e},enumerable:!0,configurable:!0},port:{get:function(){return l.port},set:function(e){l.port=e},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==l.pathname.charAt(0)?"/"+l.pathname:l.pathname},set:function(e){l.pathname=e},enumerable:!0,configurable:!0},search:{get:function(){return l.search},set:function(e){l.search!==e&&(l.search=e,c(),u())},enumerable:!0,configurable:!0},searchParams:{get:function(){return f},enumerable:!0,configurable:!0},hash:{get:function(){return l.hash},set:function(e){l.hash=e,c()},enumerable:!0,configurable:!0},toString:{value:function(){return l.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return l.valueOf()},enumerable:!1,configurable:!0}}),d}var a,s=e.URL;try{if(s){if(a=new e.URL("http://example.com"),"searchParams" in a){return}"href" in a||(a=void 0)}}catch(c){}if(Object.defineProperties(o.prototype,{append:{value:function(e,t){this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(e){for(var t=0;t<this._list.length;){this._list[t].name===e?this._list.splice(t,1):++t}this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){for(var t=0;t<this._list.length;++t){if(this._list[t].name===e){return this._list[t].value}}return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(e){for(var t=[],n=0;n<this._list.length;++n){this._list[n].name===e&&t.push(this._list[n].value)}return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){for(var t=0;t<this._list.length;++t){if(this._list[t].name===e){return !0}}return !1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t){for(var n=!1,i=0;i<this._list.length;){this._list[i].name===e?n?this._list.splice(i,1):(this._list[i].value=t,n=!0,++i):++i}n||this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length){return{done:!0,value:void 0}}var n=e._list[t++];return{done:!1,value:[n.name,n.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length){return{done:!0,value:void 0}}var n=e._list[t++];return{done:!1,value:n.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length){return{done:!0,value:void 0}}var n=e._list[t++];return{done:!1,value:n.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(e){var t=arguments.length>1?arguments[1]:void 0;this._list.forEach(function(n,i){e.call(t,n.name,n.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return t(this._list)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol" in e&&"iterator" in e.Symbol&&Object.defineProperty(o.prototype,e.Symbol.iterator,{value:o.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),s){for(var u in s){s.hasOwnProperty(u)&&"function"==typeof s[u]&&(r[u]=s[u])}}e.URL=r,e.URLSearchParams=o}(window)},function(e,t){},function(e,t,n){n(17),0===location.hostname.indexOf("wap")&&$(document.body).addClass("wap-scene")},function(e,t){},function(e,t){e.exports={publicHost:"//"+window.location.host+"/",HOST:"//"+window.location.host+"/",LONG_HOST:"//"+window.location.host+"/",EQX:"//"+window.location.host+"/",WAP_HOST:"//"+window.location.host+"/",VIEW_HOST:"//"+window.location.host+"/",SERVER_0:"//"+window.location.host+"/",SERVER_LPAGE:"//"+window.location.host+"/",INFO_SERVER:"//"+window.location.host+"/",SERVER_0_VIP:"//"+window.location.host+"/",SERVER_1:"//"+window.location.host+"/",SERVER_2:"//"+window.location.host+"/",LONG_PAGE:"//"+window.location.host+"/",LONG_PAGE_PREVIEW:"//"+window.location.host+"/",FLOW_SERVER:"//"+window.location.host+"/",SERVER_MAX:"//"+window.location.host+"/",QUERY_SERVER:"//"+window.location.host+"/",WAP_SERVER:"//"+window.location.host+"/",PAY_SERVER:"//"+window.location.host+"/",MOBILE_SERVER_1:"//"+window.location.host+"/",BIG_DATA:"//"+window.location.host+"/",TRACK:"//"+window.location.host+"/",PAY_HOST:"//"+window.location.host+"/",MALL_HOST:"//"+window.location.host+"/",STORE:"//"+window.location.host+"/",YQC:"//"+window.location.host+"/",SOURCE:"//"+window.location.host+"/c/",BIND_USER_SOURCE:"//"+window.location.host+"/c/",WX_APP_ID:"wx55ae87da7e3cb64f",WX_APP_ID_WAP:"wx8a61ef75c858990e",DOMAIN:"ywx",EQX_TPL_DOMAIN:""+window.location.host+"",EQX_FAN_DOMAIN:""+window.location.host+"",EQX_AD_DOMAIN:""+window.location.host+"",EQX_VIP_DOMAIN:""+window.location.host+"",EQX_COMPANY_DOMAIN:""+window.location.host+"",EQX_TG:""+window.location.host+"",EQX_APP_DOMAIN:""+window.location.host+"",EQX_NO_BUSINESS_DOMAIN:""+window.location.host+"",EQX_BATCH_SCENES_DOMAIN:""+window.location.host+"",FILE:window._ywxFILE,YWJSON:window._ywxJSON,QINIUFILE:"//"+window.location.host+"/",QINIUVIDEO:"//"+window.location.host+"/",BIND_USER_FILE:window._ywxFILE,FREE_USER_FILE:window._ywxFILE,VIP_USER_FILE:window._ywxFILE,FONT:"//"+window.location.host+"/",VIDEO:"//"+window.location.host+"/",BOTTOM_MARK_TEMPLATEID:[67638,1728439,1720820,101204,35701,1658453,1644611],FLOW_AD_RESOURCES:["https://cdn.staticfile.org/","eqx.ad.render.min"],VEIN_CATEGORY:"890820"}},function(e,t,n){function i(e,t,n){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+encodeURIComponent(t+"eqs/rel-account/wechat-mp?appId="+e)+"&response_type=code&scope=snsapi_userinfo&state="+encodeURIComponent(n)+"#wechat_redirect"}function o(e){var t=[],n=null;return t.forEach(function(t){e.indexOf(t)>-1&&(n=t)}),n}function r(e){if(document.title=e,/ip(hone|od|ad)/i.test(navigator.userAgent)){var t=document.createElement("iframe");t.src="/favicon.ico",t.style.display="none",t.onload=function(){setTimeout(function(){t.remove()},9)},document.body.appendChild(t)}}function a(){function e(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})}k()&&E()&&("object"==("undefined"==typeof WeixinJSBridge?"undefined":h(WeixinJSBridge))&&"function"==typeof WeixinJSBridge.invoke?e():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)))}function s(){var e=x(window.location.href),t="lp/wxticket?time="+Date.now(),n=o(e);return C.some(function(t){return t.test(e)})||(/ywx\.cn/.test(e)?(t+="&domain=",t+="&userId="+window.scene.userId):t+=n?"&domain="+n:"&domain="+e)}function c(){var e="api/wx/get-jsticket?time="+Date.now()+"&appId="+$.APP_ID_WAP;return"",g({type:"GET",url:m.WAP_SERVER+e}).then(function(e){return e&&e.obj?{obj:{appId:$.APP_ID_WAP,ticket:e.obj}}:Promise.reject("无微信 ticket: "+$.APP_ID_WAP)})}function u(e){return new Promise(function(t,n){wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":e.packageName,signType:e.signType,paySign:e.paySign,success:function(e){t(e)},cancel:function(e){n(e)}})})}function l(e){return new Promise(function(t,n){p().then(function(){var i=e["package"];i.startsWith("prepay_id=")||(i="prepay_id="+i),wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":i,signType:e.signType,paySign:e.paySign,success:function(e){t()},cancel:function(){n("充值失败")}})})})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=2===e.ticket?c:s;return q?q:q=Promise.all([y(),t(),b()]).then(function(e){var t=e[1].obj,n=t.appId,i=t.ticket;return new Promise(function(e,t){if(n&&i&&i!==-1){var o=location.href.split("#")[0],r=(Date.now(),"jsapi_ticket="+i+"&noncestr="+O+"&timestamp="+P+"&url="+o),a=new jsSHA("SHA-1","TEXT");a.update(r);var s=a.getHash("HEX");wx.config({debug:!1,appId:n,timestamp:P,nonceStr:O,signature:s,jsApiList:["chooseWXPay","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","addCard","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","previewImage","uploadVoice","downloadVoice"]}),wx.ready(function(){e()})}else{t()}})})}function d(){return q?q:q=Promise.all([y(),c(),b()]).then(function(e){var t=e[1].obj,n=t.appId,i=t.ticket;return new Promise(function(e,t){if(n&&i&&i!==-1){var o=location.href.split("#")[0],r="ywxview",a=Date.now(),s="jsapi_ticket="+i+"&noncestr="+r+"&timestamp="+a+"&url="+o,c=new jsSHA("SHA-1","TEXT");c.update(s);var u=c.getHash("HEX");wx.config({debug:!1,appId:n,timestamp:a,nonceStr:r,signature:u,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]}),wx.ready(function(){e()})}else{t()}})})}function f(e){var t=e.title,n=e.desc,i=e.link,o=e.imgUrl,r=e.success,a=e.cancel,s=e.opts;return p(s).then(function(){wx.onMenuShareTimeline({title:t,link:i,imgUrl:o,success:function(){_(r)&&r()},cancel:function(){_(a)&&a()}}),wx.onMenuShareAppMessage({title:t,desc:n,link:i,imgUrl:o,success:function(){_(r)&&r()},cancel:function(){_(a)&&a()}}),wx.onMenuShareQQ({title:t,desc:n,link:i,imgUrl:o,success:function(){_(r)&&r()},cancel:function(){_(a)&&a()}}),wx.onMenuShareWeibo({title:t,desc:n,link:i,imgUrl:o,success:function(){_(r)&&r()},cancel:function(){_(a)&&a()}}),wx.onMenuShareQZone({title:t,desc:n,link:i,imgUrl:o,success:function(){_(r)&&r()},cancel:function(){_(a)&&a()}})})}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(20).ajax,m=n(21),v=n(22),y=v.$loadJWeixin,b=v.$loadSHA,x=n(23).getUrlHost,w=n(24),k=w.isWeixin,E=w.isAndroid,I=n(26),_=I.isFunction,S=n(27),O=S.wxNonceStr,P=S.wxTimestamp,$=n(27),T=n(27),C=(T.APP_ID,[/ywx\.com/,/ywx\.cc/,/eqshow\.cn/,/yqxiu\.cn/]),q=null;e.exports={register:i,disableWxFontSize:a,setDocumentTitle:r,initWx:p,initWx2:d,setWxShareInfo:f,wxPay:u,wxPay2:l}},function(e,t){function n(e){return Promise.resolve(e)}function i(e){return new Promise(function(t,n){$.ajax($.extend({},e,{success:function(e){e&&e.success===!1?n(e):t(e)},error:function(){for(var t,i=arguments.length,o=Array(i),r=0;r<i;r++){o[r]=arguments[r]}n.apply(void 0,o)}}))})}function o(e){return new Promise(function(t,n){$.ajax($.extend({xhrFields:{withCredentials:!0},crossDomain:!0},e,{success:function(e){e&&e.success===!1?n(e):t(e)},error:function(){for(var t,i=arguments.length,o=Array(i),r=0;r<i;r++){o[r]=arguments[r]}(t=console).error.apply(t,[e].concat(o)),n.apply(void 0,o)}}))})}e.exports={ajax:o,$ajax:i,fajax:n}},function(e,t,n){function i(e){var t=window.location.protocol;return"file:"===t&&(t="http:"),e&&e.startsWith("//")?t+e:e}var o=n(18),r={SERVER_0:o.SERVER_0,SERVER_LPAGE:o.SERVER_LPAGE,INFO_SERVER:o.INFO_SERVER,SERVER_0_VIP:o.SERVER_0_VIP,SERVER_1:o.SERVER_1,SERVER_2:o.SERVER_2,LONG_PAGE:o.LONG_PAGE,LONG_PAGE_PREVIEW:o.LONG_PAGE_PREVIEW,FLOW_SERVER:o.FLOW_SERVER,WAP_SERVER:o.WAP_SERVER,SERVER_MAX:o.SERVER_MAX,QUERY_SERVER:o.QUERY_SERVER,PAY_SERVER:o.PAY_SERVER,FONT:o.FONT,HOST:o.HOST,LONG_HOST:o.LONG_HOST,EQX:o.EQX,WAP_HOST:o.WAP_HOST,VIEW_HOST:o.VIEW_HOST,PAY_HOST:o.PAY_HOST,MALL_HOST:o.MALL_HOST,MOBILE_SERVER_1:o.MOBILE_SERVER_1,SOURCE:o.SOURCE,BIND_USER_SOURCE:o.BIND_USER_SOURCE,TRACK:o.TRACK,STORE:o.STORE,YQC:o.YQC,BIND_USER_FILE:o.BIND_USER_FILE,FREE_USER_FILE:o.FREE_USER_FILE,VIP_USER_FILE:o.VIP_USER_FILE,FILE:o.FILE,YWJSON:o.YWJSON,QINIUFILE:o.QINIUFILE,QINIUVIDEO:o.QINIUVIDEO,DOMAIN:o.DOMAIN,EQX_FAN_DOMAIN:o.EQX_FAN_DOMAIN,EQX_AD_DOMAIN:o.EQX_AD_DOMAIN,EQX_VIP_DOMAIN:o.EQX_VIP_DOMAIN,EQX_COMPANY_DOMAIN:o.EQX_COMPANY_DOMAIN,EQX_TG:o.EQX_TG,EQX_APP_DOMAIN:o.EQX_APP_DOMAIN,EQX_NO_BUSINESS_DOMAIN:o.EQX_NO_BUSINESS_DOMAIN,EQX_BATCH_SCENES_DOMAIN:o.EQX_BATCH_SCENES_DOMAIN,VIDEO:o.VIDEO,BOTTOM_MARK_TEMPLATEID:o.BOTTOM_MARK_TEMPLATEID,FLOW_AD_RESOURCES:o.FLOW_AD_RESOURCES,VEIN_CATEGORY:o.VEIN_CATEGORY};Object.keys(r).forEach(function(e){var t=r[e];Array.isArray(t)?t.forEach(function(e,n){"string"==typeof e&&(t[n]=i(e))}):r[e]=i(t)}),e.exports=r},function(e,t,n){function i(){return r({name:"qiniu",src:E.qiniu})}function o(){return r({name:"plupload",src:E.plupload})}function r(e){var t=e.name,n=e.src,i=_[t];if(i){return Promise.resolve(i)}var o=I({url:k(n),dataType:"script"}).then(function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++){n[i]=arguments[i]}return _[t]=n,n});return _[t]=o,o}function a(){return r({name:"qrcode",src:E.QRCode})}function s(){return r({name:"sha",src:E.SHA})}function c(){return S?S:S=new Promise(function(e,t){window.qqMapCallback=function(){e()},r({name:"qqmap",src:E.QQMap})["catch"](t)})}function u(){return r({name:"chart",src:E.Chart})}function l(){return r({name:"threecanvas",src:E.threecanvas})}function p(){return r({name:"flux",src:E.Flux})}function d(){return r({name:"",src:E.sliders})}function f(){return r({name:"jweixin",src:E.JWeixin})}function h(){return r({name:"typed",src:E.Typed})}function g(){return r({name:"mlink",src:E.MLink})}function m(){return r({name:"parallax",src:E.Parallax})}function v(){return r({name:"canvg",src:E.canvg})}function y(){return r({name:"tbsJS",src:E.tbsJS})}function b(){return r({name:"eCharts",src:E.eCharts}).then(function(){return r({name:"macaronsTheme",src:E.macaronsTheme})})}function x(){return r({name:"handsontableJs",src:E.handsontableJs})}function w(){return r({name:"xlsxJs",src:E.xlsxJs})}var k=n(23).addProtocol,E=n(25),I=n(20).$ajax,_={},S=null;e.exports={$loader:r,$loadQRCode:a,$loadSHA:s,$loadQQMap:c,$loadChart:u,$loadFlux:p,$loadJWeixin:f,$loadTyped:h,$loadThreeCanvas:l,$loadSliders:d,$loadParallax:m,$canvas:v,$loadMLink:g,$loadQiniu:i,$loadPlupload:o,$loadTbsJs:y,$loadeChartsJs:b,$loaderHandsontableJs:x,$loaderXlsxJs:w}},function(e,t,n){function i(e){return e.startsWith("//")&&(e=location.protocol+e),new window.URL(e)}function o(e){var t=location.href,n=a("toPage",t);n?n!==""+e&&(t=t.replace(n,e)):t+=(/\?/.test(t)?"&":"?")+"toPage="+e,window.history.replaceState({title:$("title").html(),url:t},$("title").html(),t)}function r(e,t){b()?(o(t),location.href=e):window.open(e,"_blank")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return i(t).searchParams.get(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=i(t);return n.searchParams["delete"](e),n.href}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=i(t);return e.forEach(function(e){n.searchParams["delete"](e)}),n.href}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.href,o=i(n);return o.searchParams.set(e,t),o.href}function l(e){var t=window.location.href;history.replaceState({},t,e)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return i(e).host}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=i(e);return t.pathname}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}var i=t.length;if(0===i){throw new Error("resolveUrl requires at least one argument; got none.")}var o=document.createElement("base");if(o.href=t[0],1===i){return o.href}var r=document.getElementsByTagName("head")[0];r.insertBefore(o,r.firstChild);for(var a,s=document.createElement("a"),c=1;c<i;c++){s.href=t[c],a=s.href,o.href=a}return r.removeChild(o),a}function h(e){var t=location.protocol;return"https:"!=t&&(t="http:"),/^\w{2,}:\/\//.test(e)||(e="//"+e),e.replace(/^\/\//,t+"//")}function g(e){return h(e).replace(/^https:/,"http:")}function m(e){return h(e).replace(/^http:/,"https:")}function v(){var e=g(y.EQX),t=n(24).mobilecheck;return e=t()?"http://service.ywx.im/m/special/1023.html":"http://store.ywx.im/cats-2.html"}var y=n(21),b=n(24).mobilecheck;e.exports={parseUrl:i,getUrlParam:a,removeUrlParam:s,removeUrlParams:c,addUrlParam:u,replaceLocationHref:l,getUrlHost:p,resolveUrl:f,setUrlHistory:o,openUrl:r,getPathName:d,addProtocol:h,url2http:g,url2https:m,redirectUrl:v}},function(e,t,n){function i(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobi/i.test(navigator.userAgent)||window.screen.width<500}function o(){return window.top===window&&/MicroMessenger/i.test(navigator.userAgent)}function r(){return i()&&a()}function a(){return/Android/i.test(navigator.userAgent)||/Linux/i.test(navigator.appVersion)}function s(){return/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent)}function c(){return/iPhone/i.test(navigator.userAgent)}function u(){return !(i()||s()&&window===window.top)}function l(){var e=n(23).getUrlParam;return !!e("appclient")||!!window.viewData}function p(){return/ipad|iphone/i.test(navigator.userAgent)}function d(){return/msie|applewebkit.+safari/i.test(navigator.userAgent)}function f(){var e=window.navigator.userAgent;return parseFloat(e.substr(e.indexOf("Android")+8,3))}function h(){return o()&&"miniprogram"===window.__wxjs_environment}e.exports={mobilecheck:i,isMobile:i,isWeixin:o,isAndroidPhone:r,isAndroid:a,tabletCheck:s,iphoneCheck:c,isPc:u,isApp:l,isIOS:p,isSafari:d,getAndroidVersion:f,isMiniProm:h}},function(e,t){e.exports={Parallax:"https://cdn.staticfile.org/parallax/1.0.2/parallax.min.js",JWeixin:"//res.wx.qq.com/open/js/jweixin-1.2.0.js",QQMap:"//map.qq.com/api/js?v=2.exp&callback=qqMapCallback",SHA:"https://cdn.staticfile.org/jsSHA/2.0.2/sha1.js",Chart:"https://cdn.staticfile.org/Chart.js/1.0.2/Chart.min.js",sliders:"https://cdn.staticfile.org/slidesjs/3.0/jquery.slides.min.js",QRCode:"https://cdn.staticfile.org/lrsjng.jquery-qrcode/0.14.0/jquery-qrcode.min.js",Flux:"https://cdn.staticfile.org/@ywx/flux/1.0.2/flux.min.js",Typed:"https://cdn.staticfile.org/@ywx/typed/1.1.4/typed.min.js",threecanvas:"https://cdn.staticfile.org/@ywx/threecanvas/1.1.0/threecanvas.js",canvg:"https://cdn.staticfile.org/canvg/0.0.1/canvg.min.js",MLink:"https://static.mlinks.cc/scripts/dist/mlink.min.js",datePicker:"https://cdn.staticfile.org/bootstrap-daterangepicker/2.1.25/daterangepicker.js",datePickerCss:"https://cdn.staticfile.org/bootstrap-daterangepicker/2.1.25/daterangepicker.css",moment:"https://cdn.staticfile.org/moment.js/2.15.2/moment.min.js",imgJcropJs:"https://cdn.staticfile.org/jquery-jcrop/0.9.12/jquery.Jcrop.min.js",imgJcropCss:"https://cdn.staticfile.org/jquery-jcrop/0.9.12/jquery.Jcrop.min.css",plupload:"https://cdn.staticfile.org/plupload/2.1.8/plupload.full.min.js",qiniu:"https://cdn.staticfile.org/qiniu-js-sdk/1.0.14-beta/qiniu.min.js",html2canvas:"https://cdn.staticfile.org/html2canvas/0.0.8/html2canvas.min.js",tbsJS:"//res.imtt.qq.com/tbs/tbs.js",eCharts:"https://cdn.staticfile.org/echarts/4.1.0/echarts.min.js",macaronsTheme:"http://lib.eqh5.com/echarts/theme/macarons.js",handsontableJs:"https://cdn.staticfile.org/handsontable/6.0.1/handsontable.min.js",xlsxJs:"https://cdn.staticfile.org/xlsx/0.11.14/xlsx.full.min.js"}},function(e,t){function n(e){return e&&"function"==typeof e}function i(){}function o(e,t,n){var i,o=null;return function(){var r=this,a=arguments,s=+new Date;clearTimeout(o),i||(i=s),s-i>=n?(e.apply(r,a),i=s):o=setTimeout(function(){e.apply(r,a)},t)}}e.exports={isFunction:n,noop:i,throttle:o}},function(e,t,n){var i=n(18);e.exports={APP_ID:i.WX_APP_ID,APP_ID_WAP:i.WX_APP_ID_WAP||i.WX_APP_ID,wxNonceStr:"ywxview",wxTimestamp:Date.now()}},function(e,t){},function(e,t){},function(e,t){function n(){$.ajaxSetup({cache:!0}),$.support.cors=!0}e.exports={setUp:function(){n()}}},function(e,t,n){function i(e){var t=$(document.body),n=$("html");if(e.name=e.name||e.title,s()){if(window.top===window){t.prepend(c.div()),e.isTemplate&&"1"===e.isTemplate.toString()&&c.addSample(e.id),c.addAdvertisement(),t.addClass("pc"),$("title").text(e.name+" | H5长页"),a(e),$(document).on("click",".preview-style",function(e){var t=$(e.currentTarget),n=t.attr("type"),i=$(".preview-style.active").attr("type");if(i!=n){var o,r;if(t.addClass("active").siblings().removeClass("active"),$("."+n).show().siblings().hide(),"mobile-preview"==n){if($(".outer-bgm-btn-wraper").hide(),!window.mobileScene){var a=window.app.originSceneJson,s={selector:".mobile-preview .nr",mode:"view"};r=JSON.parse(JSON.stringify(a)),o=new p(r,s),o.renderScene(),o.currentPage.appendLogo(),window.mobileScene=o}window.pcScene.soundManager.stopAll();var c=window.pcScene.currentPage;c.iscrollDestroy(),t.parents(".preview-btn-wrap").addClass("isMobile")}else{if(window.pcScene){var u=window.pcScene.currentPage,l=u.calPageHeight(u.renderMode);u.changeMoveToIscroll(l,"pcRender")}else{var a=window.app.originSceneJson,s={selector:".pc-preview .nr",mode:"view"};r=JSON.parse(JSON.stringify(a)),new d(r).addEleFn(f).start(),o=new p(r,s),o.renderScene(),o.currentPage.updateCompPosition(!0),o.currentPage.appendLogo("pcRender"),window.pcScene=o,$("."+n).find(".bgm-btn-wraper").appendTo($("body")).addClass("outer-bgm-btn-wraper")}$(".outer-bgm-btn-wraper").show().css({top:"11px",right:"20px",left:"auto"}),window.mobileScene&&window.mobileScene.soundManager.stopAll(),t.parents(".preview-btn-wrap").removeClass("isMobile")}}})}else{var i=location.href;i.indexOf("exemplarReview")>=0?(t.prepend(u.phoneDiv()),t.append(u.ctrlBtnDiv())):i.indexOf("control")>=0?(t.prepend(u.phoneDiv()),t.append(u.ctrlBtnDiv2())):i.indexOf("pcRenderView")>=0?t.prepend(u.pcRenderDiv()).css("background-color","transparent"):(n.addClass("iframe-html"),t.prepend(u.phoneDiv()),t.addClass("pc"),$(".scene_title").text(e.name),$("title").text(e.name))}}else{t.prepend(l.div()),$("title").text(e.name)}$(".main").show()}function o(){$(".loading").show()}function r(){$(".loading").hide()}n(32),n(33),n(34),n(35);var a=n(36).addElementsToPc,s=n(24).isPc,c=n(53),u=n(59),l=n(60),p=n(61),d=n(438),f=n(68).perfectCssForPcRender;e.exports={setUp:i,stopLoading:r,startLoading:o}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){function i(e){var t=e.name,n=e.description,i=e.cover;$(".scene_title").text(e.name),n||(n="长页面 - 快速制作，高效推广。"),a({name:t,description:n,cover:i}),o(),r(e)}function o(){var e=d(window.location.host);u(e)["catch"](function(){return n(52)}).then(function(e){$("body").css("backgroundImage","url("+e+")")})}function r(e){l().then(function(){var t=s(p(e));t.searchParams.set("eqrcode",1),$("#downApp").click(function(){$("#downAppView").css("display","block")}),$("#close").click(function(){$("#downAppView").css("display","none")}),$("#downCode").qrcode({render:"canvas",size:192,text:"http://click.hm.baidu.com/app.gif?ap=62563&ch=43727"}),$("#codeImg").qrcode({render:"canvas",size:110,text:t.href})})}function a(e){var t=e.name,n=e.description,i=e.cover;n=n||"";var o=window.location.href.split("?")[0];$("#share_view .share-qq").attr("href","\n            http://connect.qq.com/widget/shareqq/index.html?url=\n            "+encodeURIComponent(o)+"?from=sqq&title="+t+"\n            &site=云微秀&pics="+(c.FILE+i)+"&desc="+n+"&appkey=3508809852\n        "),$("#share_view .share-qqZone").attr("href","\n            http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=\n            "+encodeURIComponent(o)+"?from=qzone&title="+t+"\n            &site=云微秀&pics="+(c.FILE+i)+"&desc="+n+"&appkey=3508809852\n        "),$("#share_view .share-weibo").attr("href","\n            http://service.weibo.com/share/share.php?url=\n            "+encodeURIComponent(o)+"?from=sina_weibo\n            &title="+encodeURIComponent("#云微秀分享# 这是我用@云微秀 做的【"+t+"】，赶紧打开看看吧！")+"\n            &pic="+(c.FILE+i)+"&appkey=3508809852\n        ")}n(37),n(38),n(39),n(40);var s=n(23).parseUrl,c=n(21),u=n(41).$getPcBgImg,l=n(22).$loadQRCode,p=n(42).getShareUrl,d=n(47).getDomainType;e.exports={addElementsToPc:i}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){function i(e){return Promise.all([r(e.tokenType),p.$loadQiniu(),p.$loadPlupload()]).then(function(t){return Object.assign(e,{token:t[0].map.token}),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:e.uploadButton,uptoken_url:d.SERVER_0+"m/e/material/uptokens?type=image",get_new_uptoken:!0,uptoken:e.token,unique_names:!0,domain:"http://qiniu-plupload.qiniudn.com/",max_file_size:e.maxFileSize,max_retries:3,chunk_size:"4mb",auto_start:!0,multi_selection:!1,init:{FilesAdded:function(t,n){window.plupload.each(n,function(n){e.filesAdded(t,n)})},BeforeUpload:function(t,n){e.beforeUpload(t,n)},UploadProgress:function(e,t){},FileUploaded:function(t,n,i){e.finishUpload(t,n,i)},Error:function(t,n,i){e.Error(t,n,i)},UploadComplete:function(){},Key:function(e,t){var n="";return n}}})})}function o(e){return function(t){return t.includes("http")||(t=d.FILE+t),l({type:"GET",url:t,dataType:e})}}function r(e){return l({type:"POST",url:d.SERVER_1+"eqs/s/material/uptokens?type="+e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}function a(e,t){var n="//up.qiniu.com/putb64/-1";return window.location.href.startsWith("https://")&&(n="//up.qiniup.com/putb64/-1"),l({type:"POST",url:n,contentType:"application/octet-stream",beforeSend:function(t){t.setRequestHeader("Authorization","UpToken "+e)},data:t})}function s(e,t){return l({type:"POST",url:d.SERVER_1+"eqs/s/board/drawing/save?compKey="+e,data:{data:JSON.stringify(t)}})}function c(e){return l({type:"GET",dataType:"text"})}function u(e){return l({type:"GET",url:d.SERVER_1+"eqs/s/image/scene/preview?domain="+e}).then(function(e){return e?(e=e.startsWith("http:")?e:d.FILE+e,e+="?imageMogr2/auto-orient/thumbnail/2100x1200>"):Promise.reject("No Background Image")})}var l=n(20).$ajax,p=n(22),d=n(21),f=o("xml");e.exports={$getSvg:f,$getSymbol:c,$getPcBgImg:u,$getUploadToken:r,$uploadBase64:a,$saveCompInfoByCompKey:s,$initQiniuUpload:i}},function(e,t,n){function i(e){var t=e.code,n=window.location.href,i=window.location.host,r=(p.EQX_FAN_DOMAIN,p.EQX_AD_DOMAIN,p.EQX_VIP_DOMAIN);p.EQX_COMPANY_DOMAIN;try{return o(i)?(n):a(i)?(n):s(e)?(n):c(e)?(h(r+"/s/"+t)):u(e)?(n):(n)}catch(l){return"",n}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return !r(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return["ywx.im"].some(function(t){return e.endsWith("."+t)})||/localhost/.test(e)}function a(e){return r(e)&&/^max\./.test(e)}function s(e){var t=e.ext||{};return t.yqc&&t.yqc.ad}function c(e){var t=p.EQX_VIP_DOMAIN;return 1==e.staticStatus&&location.host.includes(t)}function u(e){var t=e.userType,n=e.memberType,i=e.expiryTime;return(t==f["企业账号"]||t==f["企业子账号"])&&n&&i&&d(i)}function l(){return location.host.includes(p.EQX_TG)}var p=n(21),d=n(43).isNotExpired,f=(n(44).hashCode,n(45).USER_ROLE),h=n(23).addProtocol;e.exports={getShareUrl:i,isEqxAdScene:s,isVipScene:c,isEqxHost:r,isThirdPartyHost:o,isTgScene:l}},function(module,exports){function dateFormat(x,y){var z={M:x.getMonth()+1,d:x.getDate(),h:x.getHours(),m:x.getMinutes(),s:x.getSeconds()};return y=y.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)}),y.replace(/(y+)/g,function(e){return x.getFullYear().toString().slice(-e.length)})}function isNotExpired(e){return new Date(e).getTime()>Date.now()}function isExpired(e){return new Date(e).getTime()<Date.now()}module.exports={dateFormat:dateFormat,isExpired:isExpired,isNotExpired:isNotExpired}},function(e,t){function n(e){var t=0;if(0===e.length){return t}for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return Math.abs(t)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;/\$\{([^}]*)}/.test(e);for(var i=e;n&&/#\{([^}]*)}/.test(i);){i=i.replace(/#\{([^}]*)}/g,function(e,n){var i=t[n];return void 0!==i?i:e}),n--}return i}e.exports={hashCode:n,parse:i}},function(e,t,n){var i=n(46).make,o=i({1:"普通账号",2:"企业账号",21:"企业子账号",5:"公共账号",51:"公共子账号",3:"高级用户",4:"秀客",99:"运营人员"});e.exports={USER_ROLE:o}},function(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var n in e){if(e.hasOwnProperty(n)){var i=e[n];t[t[n]=i]=n}}return t}e.exports={make:n}},function(e,t,n){function i(e){var t=void 0,n=e.isTemplate,i=e.bizType;n&&3!==n&&4!==n?1===n?t=12:2===n&&(t=22):t=i?40==i?31:21:11;var a=window.location.host,s=r(a),c="b";return c=d()?"b":f()?"c":"a",new Promise(function(e){p(t,s,c).then(function(t){var i=t.map.logo;m=t.map.tail,t.map.share&&(y={link:t.map.share.backLink,domains:t.map.share.domains},h()||!window.scene||0===window.scene.property.eqAdType||window.scene.property.loadingLogo||1===n||2===n||window.location.href.indexOf("scene.ywx.im")!==-1||(v={shareCover:t.map.share.shareCover,coverLink:t.map.share.coverLink})),window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad?u():y&&y.domains&&y.domains.indexOf(s)>-1&&y.link&&!h()&&window.scene&&0!==window.scene.property.eqAdType&&!window.scene.property.loadingLogo&&1!==n&&2!==n&&window.location.href.indexOf("scene.ywx.im")===-1,i&&o(i),e()})["catch"](function(t){e()})})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$(".loading");if(e.backgroundSrc&&t.css({backgroundImage:"url('"+(l.FILE+e.backgroundSrc)+"')",backgroundColor:"none",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}),e.logoSrc){var n=t.find(".loadbg");n.css({backgroundImage:"url('"+(l.FILE+e.logoSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:"70px",height:"70px"}),e.logoLink&&n.click(function(){window.location.href=e.logoLink})}if(e.brandSrc){var i=$('<div class="loading-brand"></div>').appendTo(t);i.css({backgroundImage:"url('"+(l.FILE+e.brandSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"40px",position:"absolute",left:"0",bottom:"0",zIndex:"9999"}),e.brandLink&&i.click(function(){window.location.href=e.logoLink})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host,t=void 0;return t=window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad?1:e.indexOf(l.EQX_TG)!==-1?2:e.indexOf(l.EQX_VIP_DOMAIN)!==-1?4:e.indexOf(l.EQX_APP_DOMAIN)!==-1?5:e.indexOf(l.EQX_COMPANY_DOMAIN)!==-1?3:e.indexOf(l.EQX_NO_BUSINESS_DOMAIN)!==-1?7:e.indexOf(l.EQX_BATCH_SCENES_DOMAIN)!==-1?8:6}function a(){return new Promise(function(e){return e(m)})}function s(){return v}function c(){return y}function u(){var e=window.location.href,t=window.scene.id,n=/singlemessage|groupmessage|timeline/;n.test(e)&&g(t)}var l=n(21),p=n(48).$getLoadPageConfig,d=n(24).isWeixin,f=n(24).mobilecheck,h=(n(23).getPathName,n(24).isApp),g=n(49).setAd,m=null,v=null,y=null;e.exports={customLoadPage:i,getLastPageConfig:a,getSharePopConfig:s,getButtonConfig:c,getDomainType:r}},function(e,t,n){function i(e,t,n){return n=n||"b",window._configure&&window._configure[n]?Promise.resolve({map:window._configure[n]}):Promise.resolve({map:{}})}function o(e){return a({type:"GET",url:s.SERVER_2+"eqs/s/trailer/"+e})}function r(e){return e?o(e).then(function(e){return e.obj?(e.obj.isActivity=!0,e.obj):Promise.reject("活动尾页数据错误")}):Promise.reject("没有活动尾页 ID")}var a=n(20).$ajax,s=n(21);e.exports={$getPageInfo:o,$getActivityPage:r,$getLoadPageConfig:i}},function(e,t,n){function i(){$(".ad-modal-wx").css({top:"0px"}),$(".ad-modal-wx-box").addClass("ad-wx-slideInDown")}function o(e){a(e).then(function(e){if(e.success){var t=e.list[0].scenePageDTO,n=e.list[0].adCode;if(t){var i=t.elements.find(function(e){return"g"===e.type}),o=i.css.height,r=i.css.width,a=$('<div class="ad-modal-wx">\n                          <div class="ad-modal-wx-box">\n                          <div class="dog-gif "></div>\n                          <div class="ad-modal-content"></div>\n                          <div class="ad-close-btn"></div>\n                          </div>\n                      </div>');$(".p-index.main").not(".editor-section").prepend(a),$(".ad-modal-content").css({width:r,height:o,"margin-left":-r/2}),n.indexOf("gdt-native-template")>-1&&$(".ad-modal-content").append('<div id="gdt-native-template"></div>'),$(".ad-modal-content").append(n);var s=$(".ad-close-btn");s.on("click",function(){a.animate({opacity:0},{duration:300,complete:function(e){return a.remove()}})})}}})}function r(e){function t(){var e={title:"title",url:"#"};window.history.pushState(e,"title","#")}var n=112643717;a(e).then(function(e){if(e.success){var t=e.list[0].adPositionId;n=l[t]||112643717,o(n)}}),t();var r=!1;window.addEventListener("message",function(e){e.data.msg&&"adIsShowed"===e.data.msg&&(r=!0)}),window.addEventListener("popstate",function(){return r?void window.history.back():void i()},!1)}function a(e){var t=c.SERVER_1+"adview/scenePage/find?sceneId="+e,n=t.replace(/http:\/\//g,window.location.protocol+"//");return u({type:"GET",url:n})}function s(e,t,n,i){var o=c.TRACK+"p.gif?",r=encodeURIComponent,a=document,s={order_no:e,task_id:t,scene_id:n,exposure_type:i};o+="data="+r(JSON.stringify(s));var u=a.createElement("img");$(u).attr({src:o,width:0,height:0}),a.body.appendChild(u)}n(50);var c=n(21),u=n(20).$ajax,l=n(51).AD_POSITION_ID;e.exports={adModal:i,setAd:r,viewData:s,getSceneAdTpl:a}},function(e,t){},function(e,t){var n={1:116954426,2:116954202,3:116954311,1060:116954514,1107:116954060,1129:116953857};e.exports={AD_POSITION_ID:n}},function(e,t,n){e.exports=n.p+"images/spring-5632ca.jpg"},function(e,t,n){function i(){var e=r(),t=o();return'\n            <div class="preview-outer-wraper" style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;">\n      </div>\n                \n                <div id="view_panel">\n                '+e+"\n                "+t+"\n  </div>\n            </div>\n            "}function o(){var e=u.nr();return'\n    <div class="long-page-panel mobile-preview">\n                <div class="p-index main phoneBox" id="con" style="display: none;">         \n                    <div class="scene_title_baner">\n                        <h1 class="scene_title"></h1>\n                    </div>\n                    '+e+"\n                </div>\n            </div>"}function r(){var e=u.nr();return'\n    <div class="long-page-panel pc-preview">                \n                 '+e+"\n            </div>"}function a(e){$("#view_reg").after('<div id="sample_btn">使用该模板</div>'),$("#view_reg").addClass("view_reg"),$("body").on("click","#sample_btn",function(){window.open(p+"redirect-"+e+".html")})}function s(){$(".preview-btn-wrap").find(".preview-make-panel").append('<div style="width: 150px;height: 63px;background-color:#2f6fad;margin-top: 16px;">\n                        <a href="'+l.LONG_HOST+'eip/scene?type=lc" target="_blank">\n                            <img src="'+g+'" style="width: 150px;height: 63px;">\n                        </a>\n            </div>')}function c(){var e=0,t=$(document.body),n=$('<div id="recomment_container"></div>'),i=$('<span id="recommend_btn">热点推荐</span>'),o=$('<div id="recommend_content"></div>'),r=$("<ul></ul>");n.append(o).append(i),t.append(n),i.click(function(){0===e?(o.hide(),$("#view_panel").css("margin","-300px 0 0 -326px"),e=1):(o.show(),$("#view_panel").css("margin","-300px 0 0 -198px"),e=0)});var a=h(window.location.host);f(a).then(function(e){e.list.length?($("#view_panel").css("margin","-310px 0 0 -204px"),o.append(r),e.list.forEach(function(e){if(e.cover.indexOf("imageMogr2")>-1){var t=e.cover.slice(0,e.cover.indexOf("imageMogr2")-1)}else{t=e.cover}r.append('<li><a href="'+d+"s/"+e.code+'" target="_blank"><img src="'+l.FILE+t+'?imageMogr2/auto-orient/thumbnail/240x240>"> <span>'+(e.name||"我用云微秀做了一个超酷炫的H5，快来看看吧。")+"</span></a></li>")})):$("#recomment_container").remove()})["catch"](function(e){$("#recomment_container").remove()})}var u=n(54),l=n(21),p=l.STORE;p=l.STORE.replace("https://","http://");var d=l.VIEW_HOST,f=n(55).$getRecommendScenes,h=(n(55).$getPCAdvertisement,n(47).getDomainType),g=n(58);e.exports={div:i,addSample:a,addRecommend:c,addAdvertisement:s,longPagePanel:r}},function(e,t,n){function i(){return'<div id="ppitest" style="width:1in;visible:hidden;padding:0px"></div>'}function o(){var e=$(".loading").clone().show()[0].outerHTML;return'\n<div class="nr">\n <div class="ywback" style="margin-left:-18px;font-size:12px;"><a onclick="javascript :history.back(-1);" class="ywcss"><i></i>返回&nbsp;</a></div>    '+e+"\n</div>\n"}function r(e,t){e=e||"场景名称";var n=t.startsWith("http")?t:a.FILE+t;return'\n<div id="verifyCode" class="verifyCode">\n    <div class="container">\n        <div class="scene-cover">\n            <!-- 3、场景封面 -->\n            <img class="cover-img" src="'+n+'">\n        </div>\n        <!-- 4、场景名称 -->\n        <div class="scene-name">'+e+'</div>\n        <div class="confirm-password">\n            <div class="verify-label">请输入访问密码</div>\n            <div class="verify-tips" id="verifyTip">\n                <ul class="password-indicator">\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                </ul>\n            </div>\n            <div class="password-numbers">\n                <span>1</span>\n                <span>2</span>\n                <span>3</span>\n                <span>4</span>\n                <span>5</span>\n                <span>6</span>\n                <span>7</span>\n                <span>8</span>\n                <span>9</span>\n                <span>0</span>\n            </div>\n            <div class="password-operation">\n                <span class="btn-clear" id="btnClear">清空</span>\n                <span class="btn-cancel" id="btnCancel">取消</span>\n            </div>\n        </div>\n    </div>\n</div>'}var a=n(21);e.exports={nr:o,ppitest:i,pwd:r}},function(e,t,n){function i(){return/max\.(eqshow\.cn|yqxiu\.cn|ywx\.com|ywx\.cc)/.test(window.location.host)}function o(){return(/\/(\w+)$/.exec(window.location.pathname)||[])[1]}function r(){function e(e){return w(e),e}var t=new Promise(function(t,n){var r=window.scene;if(r){t(e(r))}else{if(window.__isServerRendered&&!window.scene&&n("场景数据异常"),i()){var a=o();window.__isMax=!0,v({type:"GET",url:h.SERVER_MAX+"m/element/check/other/model/code?objectId="+a+"&JSESSIONID=ff4ff6599aa04597861955583c300a5d&sceneType=1"}).then(function(i){if(i&&i.data){var o=i.data,r=window.scene=o.scene,a=o.pages.map(function(e){return{elements:e}});window.viewData={list:a},t(e(r))}else{n("无审核场景数据")}})["catch"](function(){n("无审核场景数据")})}else{m({type:"GET",url:h.LONG_PAGE_PREVIEW+"lp/sc?code="+l()}).then(function(i){i.obj?t(e(i.obj)):n("无场景数据")})["catch"](function(){n("无场景数据")})}}});return t.then(function(t){return t&&t.property&&t.property.isHidden&&!y.getUrlParam("qz_gdt")&&!y.getUrlParam("wx_traceid")&&!y.getUrlParam("gdt_vid")?m({type:"GET",url:h.SERVER_1+"eqs/geterrorpage"}).then(function(t){return t.obj?e(t.obj):"无场景数据"})["catch"](function(){return"无场景数据"}):Promise.resolve(t)})}function a(e){if(window.viewData){return Promise.resolve(window.viewData)}var t=b("userKey"),n=b("compKey"),i={type:"GET",url:u()},o={type:"GET",url:c()};e&&(i.data={password:e});var r=null,a=Promise.resolve(null);return(t||n)&&(a=v(o).then(function(e){r=e.map})),a.then(function(){return v(i)}).then(function(e){return r&&(e.map=r),e})}function s(){var e=b("userKey"),t=b("cache"),n=h.LONG_PAGE_PREVIEW,i=k(window.scene);return(i||E())&&(n=h.SERVER_2),(e||t)&&(n=h.LONG_PAGE_PREVIEW),n}function c(){var e=window.scene||{},t=e.id,n=e.code;if(!t){throw new Error("Not Valid Scene! No Id!")}if(!n){throw new Error("Not Valid Scene! No Code!")}var i=b("userKey"),o=b("compKey"),r=s(),a=r+"lp/wx/component/data?id="+t+"&code="+n,c=x(a);return i&&c.searchParams.set("userKey",i),o&&c.searchParams.set("compKey",o),a=c.href}function GetQueryString(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2])}return null}function u(){var e=window.scene;if(e){var __0x91104=["T8OFGsOg","dgNpIETDg8K9dk/Dr8K/wrls","ShMpwpgqw6TDlA==","DhLCuMK7","w7HCgMO1McOaw63DnMOQekN7UQ==","w77DoMK2wo5aWyQ=","w5/DrcKCHMOeb8Kv","a8KKSg==","BBTCn8KVwoQ=","w7QTTg4=","HQJCw78=","w7jCq8KZ","ZMK5HcK7w4vDp0U=","w5MHbw==","RcO3wqI=","wojDmMOcGA==","KzAP","AsOxGQzDnsKYw45fMhlFw4jDsEssdMKaZMO7S2XCnsKFTjVyw5ctJsKmJsKsG8Osw5J1","a8KoHcKfwpjCpQ8Lw5fDu8ORZ8OOw6bDhsOYfMKfw5I4wpgGasKHJ8KmwoUROxfCmRsGSnXDjA==","DMOawrxyLw==","Qjo8worDvg==","w5sJM8O6","w5bDuFo=","HQ7Cs8Kzw4XDlMKkw6bCqg==","54mS5p2E5Y2m776Jw5h95L+E5a245p2l5b+R56mk77+C6L+X6K+H5pWa5o6L5omL5LiP55mT5beM5L+8","w4bDkMKxeMOY","woHCn8O1C8Ks","w7HClsO7FcOa","wpjCg8OzFsKc","wr3CtsOXwqrDrw==","w4siw6Zb","NMOjwp1GJDnDr8OM"];(function(_0x2ce9df,_0x3131fc){var _0x3ccbe4=function(_0x5f1bce){while(--_0x5f1bce){_0x2ce9df.push(_0x2ce9df.shift())}};_0x3ccbe4(++_0x3131fc)}(__0x91104,190));var _ls5=function(_0x3a1c75,_0x2a3676){_0x3a1c75=_0x3a1c75-0;var _0x5ebde5=__0x91104[_0x3a1c75];if(_ls5.initialized===undefined){(function(){var _0xb2f3a6=typeof window!=="undefined"?window:typeof process==="object"&&typeof require==="function"&&typeof global==="object"?global:this;var _0x570115="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";_0xb2f3a6.atob||(_0xb2f3a6.atob=function(_0x47e94e){var _0x4f4f3d=String(_0x47e94e)["replace"](/=+$/,"");for(var _0x1bb475=0,_0x32174a,_0x48f2bc,_0x4cce6e=0,_0x70f52a="";_0x48f2bc=_0x4f4f3d.charAt(_0x4cce6e++);~_0x48f2bc&&(_0x32174a=_0x1bb475%4?_0x32174a*64+_0x48f2bc:_0x48f2bc,_0x1bb475++%4)?_0x70f52a+=String.fromCharCode(255&_0x32174a>>(-2*_0x1bb475&6)):0){_0x48f2bc=_0x570115.indexOf(_0x48f2bc)}return _0x70f52a})}());var _0x75b853=function(_ls3,_0x1945ee){var _ls1=[],_0x1ce486=0,_0x3aad19,_0xce33e8="",_0x1096b3="";_ls3=atob(_ls3);for(var _0x530226=0,_0x2b2ac7=_ls3.length;_0x530226<_0x2b2ac7;_0x530226++){_0x1096b3+="%"+("00"+_ls3.charCodeAt(_0x530226)["toString"](16))["slice"](-2)}_ls3=decodeURIComponent(_0x1096b3);for(var _ls2=0;_ls2<256;_ls2++){_ls1[_ls2]=_ls2}for(_ls2=0;_ls2<256;_ls2++){_0x1ce486=(_0x1ce486+_ls1[_ls2]+_0x1945ee.charCodeAt(_ls2%_0x1945ee.length))%256;_0x3aad19=_ls1[_ls2];_ls1[_ls2]=_ls1[_0x1ce486];_ls1[_0x1ce486]=_0x3aad19}_ls2=0;_0x1ce486=0;for(var _0x5894f8=0;_0x5894f8<_ls3.length;_0x5894f8++){_ls2=(_ls2+1)%256;_0x1ce486=(_0x1ce486+_ls1[_ls2])%256;_0x3aad19=_ls1[_ls2];_ls1[_ls2]=_ls1[_0x1ce486];_ls1[_0x1ce486]=_0x3aad19;_0xce33e8+=String.fromCharCode(_ls3.charCodeAt(_0x5894f8)^_ls1[(_ls1[_ls2]+_ls1[_0x1ce486])%256])}return _0xce33e8};_ls5.rc4=_0x75b853;_ls5.data={};_ls5.initialized=!![]}var _0x47c07f=_ls5.data[_0x3a1c75];if(_0x47c07f===undefined){if(_ls5.once===undefined){_ls5.once=!![]}_0x5ebde5=_ls5.rc4(_0x5ebde5,_0x2a3676);_ls5.data[_0x3a1c75]=_0x5ebde5}else{_0x5ebde5=_0x47c07f}return _0x5ebde5};var from="";if(GetQueryString("from")){if(GetQueryString(_ls5("0x0","MA6K"))==_ls5("0x1","NxXR")){from="&from=1"}else{if(GetQueryString(_ls5("0x2","PgDt"))==_ls5("0x3","4ibd")){from=_ls5("0x4","W&@L")}else{if(GetQueryString(_ls5("0x5","u!Ly"))==_ls5("0x6","Q2Mf")){from=_ls5("0x7","8%kR")}}}}var t=h.YWJSON+_ls5("0x8","1uo^"),st=e.TOJ+"stat/api?";var ap=_ls5("0x9","9qfp")+e.id+_ls5("0xa","4J^$")+e[_ls5("0xb","@Kya")]+_ls5("0xc","ERuN")+window.location.host+from+_ls5("0xd","9S%k")+new Date()[_ls5("0xe","Vvg!")]();var s=_ls5("0xf","R!@(")+e.id+from;s+=_ls5("0x10","u#VV")+new Date()["getTime"](),t+=ap,st+=s;var getData;$[_ls5("0x11","&j(r")]({type:_ls5("0x12","W&@L"),async:![],url:t,success:function(_0xda81a4){var _0x1413a3={LPLQg:function _0xe63a0b(_0x2cd46b,_0x2a531e){return _0x2cd46b==_0x2a531e},ZmWUV:_ls5("0x13","BJot"),LKbIv:_ls5("0x14","Vvg!")};getData=_0xda81a4;if(_0x1413a3[_ls5("0x15","NxXR")](_0xda81a4,2)){location.href='/yu.html';return ![]}else{if(_0xda81a4==3){location.href='/liu.html';return ![]}else{$[_ls5("0x17","R!@(")]({type:"GET",url:st,xhrFields:{withCredentials:![]}})}}}});if(getData=="ok"){it=e.id,n=e.code,i=e.publishTime;u=e.userId;if(!it){throw new Error("Not Valid Scene! No Id!")}if(!n){throw new Error("Not Valid Scene! No Code!")}var o=h.LONG_PAGE_PREVIEW,r=h.YWJSON+"lpjson/"+u+"/"+n+".json",a=x(r);return a.searchParams.set("time",i),r=a.href}}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;if(window.scene){return window.scene.code}var t=b("code");if(!t){e=x(e);var n=e.pathname,i=n.lastIndexOf("/");i>-1&&(t=n.substr(i+1))}if(t.indexOf("index.html")>-1&&(t=b("codeTestMobile")),!t){throw new Error("No Valid Scene Code!")}return t.length>10,t}function p(e){return v({type:"GET",url:h.SERVER_1+"eqs/s/recommend/scene/preview?domain="+e})}function d(){return v({type:"GET",url:h.SERVER_2+"eqs/banners?pageCode=pc_view_bottom_ad"})}function f(){return Math.ceil(10000000000*Math.random())}var h=n(21),g=n(20),m=g.ajax,v=g.$ajax,y=n(23),b=y.getUrlParam,x=y.parseUrl,w=n(56).perfectMeta,k=n(42).isVipScene,E=n(42).isTgScene;e.exports={$getSceneMetaData:r,$getSceneData:a,$getRecommendScenes:p,$getPCAdvertisement:d,randomId:f}},function(e,t,n){function i(e){return e.ext||(e.ext={}),"string"==typeof e.property&&(e.property=JSON.parse(e.property)||{}),e.property||(e.property={}),"string"==typeof e.bgAudio&&(e.bgAudio=JSON.parse(e.bgAudio)||null),e.openMsg=!!e.property.openMsg,null===e.accessCode&&(e.accessCode=""),s(e),e}function o(e){e.name=e.name||"未命名长页面",e.name=e.name.replace(/&quot;/g,'"')}function r(e){e.description=e.description||"长页面 - 快速制作，高效推广。"}function a(e){var t=e.property,n=e.createTime,i=e.hideEqAd,o=e.eqAdType,r=e.isAdvancedUser,a=e.bottomLabel;switch(n<1416502800000|i|99===o&&(t.eqAdType=c["无尾页无底标"],delete t.createTime,delete t.hideEqAd),r&&(t.ad=2,a&&a.id?t.eqAdType=c["品牌联合底标"]:t.eqAdType=c["技术支持底标"],delete t.isAdvancedUser),""+t.eqAdType){case c["无尾页无底标"]:t.ad=0;break;case c["技术支持尾页"]:t.ad=1;break;case c["技术支持底标"]:case c["品牌联合底标"]:t.ad=2;break;case c["deepshare尾页"]:t.ad=4;break;default:t.eqAdType=c["技术支持尾页"],t.eqAdType=parseInt(t.eqAdType),t.ad=1}}function s(e){var t=e.property;if(t.shareDes&&"string"==typeof t.shareDes){try{t.shareDes=JSON.parse(t.shareDes)}catch(n){t.shareDes={description:{type:"position",description:t.shareDes}}}}var i=!1;if(t.wxCount>0||(1==t.clickFarmerStatus||2==t.clickFarmerStatus)&&t.wxClickFarmerCount>0){i=!0}else{var o=t.shareDes;o&&(o.description&&["myself","selfAndPosition"].includes(o.description.type)||o.title&&["myself","selfAndPosition"].includes(o.title.type)||o.avatar)&&(i=!0)}t.wxAuth=i}var c=n(57).AD_TYPE;e.exports={perfectMeta:i,perfectAdType:a,perfectName:o,perfectDescription:r}},function(e,t,n){var i=n(46).make,o=i({0:"无尾页无底标",1:"技术支持尾页",2:"技术支持底标",3:"品牌联合底标",4:"deepshare尾页"});e.exports={AD_TYPE:o}},function(e,t,n){e.exports=n.p+"images/view-ad-d5d7b5.jpg"},function(e,t,n){function i(){var e=c.nr();return'<div class="phone_panel">\n   \n    <div class="p-index main phoneBox" id="con" style="display: none;">\n        <div class="top"></div>\n        <div class="phone_menubar"></div>\n        <div class="scene_title_baner">\n            <h1 class="scene_title"></h1>\n        </div>\n        '+e+'\n        <div class="bottom"></div>\n    </div>\n</div>'}function o(){var e=c.nr();return'\n<div class="p-index main iframe-phone pc-preview" id="con" style="display: none; width: 320px;margin-right: 40px;">\n'+e+"\n</div>\n"}function r(){return'<div class = "iframe_panel" style="z-index:2;">\n        <!--<div class="preview"><a id = "pre_page" type = "button" class = "scroll_btn"><span class="eqf-right" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>-->\n        <!--<div class="next"><a id = "next_page" type = "button" class = "scroll_btn"><span class="eqf-left" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>-->\n    </div>'}function a(){return'<div class="iframe_panel2">\n                    <ul>\n                        <li id="pre_page">上一页</li>\n                        <li id="next_page">下一页</li>\n                    </ul>\n                </div>'}function s(){var e=c.nr();return'\n    <div class="long-page-panel pc-preview" style="display:block;left:50%;margin-left:-384px;">                \n                 '+e+"\n            </div>"}var c=n(54);e.exports={div:i,phoneDiv:o,ctrlBtnDiv:r,ctrlBtnDiv2:a,pcRenderDiv:s}},function(e,t,n){function i(){var e=o.nr();return'\n<div class="p-index main" id="con" style="display: none;">\n'+e+"\n</div>\n"}var o=n(54);e.exports={div:i}},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0){}}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o){throw r}}}return n}return function(t,n){if(Array.isArray(t)){return t}if(Symbol.iterator in Object(t)){return e(t,n)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(24).mobilecheck,c=n(24).isApp,u=n(62).perfectPage,l=n(65),p=n(418),d=n(423),f=n(424),h=n(426),g=n(427),m=n(428),v=n(56).perfectMeta,y=n(22).$loadMLink,b=(n(409),n(55).randomId,n(430)),x=b.diff,w=n(437).initMarkSceneJson,k=n(437).initMessageBoard,E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.sceneJson=t,"view"==n.mode&&t.list.length>0&&(this.sceneJson=w(t,n),this.sceneJson=k(t),this.sceneJson.obj&&(this.adHeight=this.sceneJson.obj.adHeight)),this.config=Object.assign({toPageIndex:0,selector:"#nr",mode:"view",disablePageEffect:!1,disableCompEvent:!1,disableSubmit:!1,disableTrigger:!1,disableArrow:!1,disableCommentManager:!1,showProgressBar:!1,disableProgressBar:!1,disableCompAnim:!1,disableReport:!1,disablePageScroll:!1,disablePv:!1,initManagers:!0,disableQiniuZoom:!1,mobileEdit:!1,EqxGravity:{disableGravityMotion:!1},disableSetUlTopAndLeft:!1},n),this.meta=v(this.sceneJson.meta),this.eqxPageList=[],this.currentPage=null,this.soundManager=null,this.statManager=null,this.commentManager=null,this.formManager=null,this.pageScroll=null,this.progressBar=null,this.config.initManagers&&this.initManagers(),this.dependenciesRenderObj={num:0,renderQueue:[],allRendered:!1,renderedPageList:{}},this.nextRenderPageId=-1,this.renderPageCnt=0,this.variableComps={texts:[],textsPreLen:0,inputs:[],inputsPreLen:0,images:[],imagesPreLen:0,uploads:[],uploadsPreLen:0},window.devScene=this}return a(e,[{key:"setNextRenderPageId",value:function(e){this.nextRenderPageId=e}},{key:"getNextRenderPage",value:function(){function e(){for(var e=0;e<i;e++){var t=o.eqxPageList[e];if(t.isXb()&&!t.$section){return t}}}var t=this;if(this.nextRenderPageId!==-1){var n=this.eqxPageList.find(function(e){return e.pageJson.id===t.nextRenderPageId});if(n&&!n.$section){return n}}var i=this.eqxPageList.length,o=this;if(this.renderPageCnt>0&&(n=e())){return n}var r=this.eqxPageList.indexOf(this.currentPage);r===-1&&(r=0);for(var a=0;a<i;a++){if(n=this.eqxPageList[(a+r)%i],!n.$section){return n}}}},{key:"setPageList",value:function(e){var t;this.sceneJson.list.length=0,(t=this.sceneJson.list).push.apply(t,i(e)),this.eqxPageList=[],this.eqxPageList.length=e.length}},{key:"getMetaWx",value:function(){var e=this.meta.property;return{wxCount:e.wxCount||0,wxClickFarmerCount:e.wxClickFarmerCount||0}}},{key:"calMetaWx",value:function(){var e=this;return this.eqxPageList.reduce(function(t,n){return t.wxCount+=n.getWxCompCount(),e.meta.property.openMsg&&(t.wxCount+=1),t.wxClickFarmerCount+=n.getWxClickFarmerCompCount(),t},{wxCount:0,wxClickFarmerCount:0})}},{key:"syncMetaWx",value:function(){var e=this.calMetaWx();this.setProps({property:e})}},{key:"toJson",value:function(){var e=JSON.parse(JSON.stringify(this.sceneJson));for(var t in e){e.hasOwnProperty(t)&&t.startsWith("$")&&delete e[t]}return e}},{key:"renderScene",value:function(e){return this.initContainer(e||this.config.selector),this.renderBgm(),s()&&"view"==this.config.mode&&!c()&&2==this.meta.isTemplate&&this.tempAppUseBtn(),this.initEqxPages(),this.currentPage=this.eqxPageList[this.config.toPageIndex],this.renderPage(0),Promise.resolve()}},{key:"tempAppUseBtn",value:function(){var e=this;if(!this.$tempAppUseBtn&&window.scene){var t='<a  class="temp-app-use">\n                                        <div class="temp-app-use-btn">\n                                            <span class="eqf-pen-f"></span>\n                                        </div>\n                                        <div class="temp-app-use-tip">使用</div>\n                                    </a>',n=window.scene,i=n.isTemplate,o=n.sourceId,r=n.id,a={sceneId:r};i&&(a.isTemplate=i),o&&(a.sourceId=o),y().then(function(){var t={mlink:"https://ax8bgc.mlinks.cc/AK00",button:e.$ele.find(".temp-app-use")[0],autoLaunchApp:!1,autoRedirectToDownloadUrl:!0,downloadWhenUniversalLinkFailed:!1,inapp:!1,params:a};new Mlink(t)});var s=$(t);this.$ele.append(s)}}},{key:"updateMeta",value:function(e){e=v(e);var t=JSON.parse(JSON.stringify(this.meta));Object.assign(this.meta,e);var n=JSON.parse(JSON.stringify(this.meta)),i=x(t,n)}},{key:"setProps",value:function(e){var t=JSON.parse(JSON.stringify(this.meta)),n=this.meta;Object.keys(e).filter(function(e){return"property"!==e}).forEach(function(t){n[t]=e[t]}),e.property&&("string"==typeof e.property&&(e.property=JSON.parse(e.property)),Object.keys(e.property).forEach(function(t){n.property[t]=e.property[t]}));var i=JSON.parse(JSON.stringify(this.meta)),o=x(t,i)}},{key:"getMeta",value:function(e){return this.meta[e]}},{key:"getMetaProperty",value:function(e){return this.meta.property[e]}},{key:"initContainer",value:function(e){$(this.$ele).is(e)||(this.$ele=$(e));var t=this.$ele;"static"===t.css("position")&&t.css({position:"relative"}),s()&&t.css({width:"100%",height:"100%"}),this.width=t.width(),this.height=t.height()}},{key:"createBgm",value:function(e){var t=e||this.meta.bgAudio;if(t){return this.bgm=new p(t,this),this.bgm}}},{key:"renderBgm",value:function(){this.bgm||this.createBgm(),this.bgm&&this.$ele.append(this.bgm.$bgmBtn)}},{key:"updateBgm",value:function(e){return this.meta.bgAudio=e,e?void (this.bgm?this.bgm.updateJson(e):(this.createBgm(e),this.renderBgm())):void (this.bgm&&(this.bgm.hide(),this.bgm.stopPlay(),this.bgm=null))}},{key:"stopRenderPages",value:function(){this.renderPagesTimeoutId&&clearTimeout(this.renderPagesTimeoutId)}},{key:"initEqxPages",value:function(){var e=this;this.sceneJson.list.forEach(function(t,n){return e.initEqxPage(n)})}},{key:"initEqxPage",value:function(e){var t=this.sceneJson.list[e];if(t){u(t,this.sceneJson);var n=l.get(t),i=new n(t,this);return this.eqxPageList[e]=i,i}throw new Error("Invalid Page Index: "+e)}},{key:"renderPage",value:function(e){if("number"==typeof e){var t=this.eqxPageList[e]}else{t=e,e=this.eqxPageList.indexOf(t)}if(!t){return"",Promise.reject(new Error("no eqxPage at index "+e))}var n=t.$section;n||(n=t.create$section(),this.dependenciesRenderObj.num++,this.dependenciesRenderObj.total=this.eqxPageList.length,"edit"!==this.config.mode&&t.addEventListener(),t.isXb()&&n.css({display:"inline-block"}),this.$ele&&this.$ele.append(n),window._tj&&(window._tj["page"+e]=window._tj.now()),0===e&&t.arrow&&t.arrow.updateCss({bottom:"30px"}),this.bindVariableComps(),e===this.config.toPageIndex?(this.currentPage=t,t.active().then(function(n){t.deactive().show(),window._tj&&(window._tj["page"+e+"Effect"]=window._tj.now(),window._tj.firstPageShowTime=window._tj.now())})):window._tj&&(window._tj["page"+e+"Effect"]=window._tj.now()),t._handleSpecialComps())}},{key:"bindVariableComps",value:function(){var e=this.variableComps,t=e.texts,n=e.inputs,i=e.images,o=e.uploads,r=e.textsPreLen,a=e.inputsPreLen,s=e.imagesPreLen,c=e.uploadsPreLen,u=function(e,t,n,i){for(var o=t.length,r=function(){var r=t[o],a=r.compJson.properties["var"].comp;if(a){var s=i.find(function(e){return e.compJson.id==a});if(s){if(s.variables=s.variables||[],s.variables.push(r),"7"===String(r.type)){var c=s.variablesValue;c&&r.updateContent(c)}else{var u=s.variablesValues;if(u){var l=u.key,p=u.w,d=u.h;r.updateImageSrc(l,p,d)}}e.splice(o+n,1)}}};o--;){r()}};t.length>r&&n.length&&(u(t,t.slice(r),r,n),e.textsPreLen=t.length),n.length>a&&t.length&&(u(t,t,0,n.slice(a)),e.inputsPreLen=n.length),i.length>s&&o.length&&(u(i,i.slice(s),s,o),e.imagesPreLen=i.length),o.length>c&&i.length&&(u(i,i,0,o.slice(c)),e.uploadsPreLen=o.length)}},{key:"initManagers",value:function(){this.initSoundManager(),this.initStatManager(),this.config.disableCommentManager||this.initCommentManager(),this.initEventManager(),this.initFormManager()}},{key:"initSoundManager",value:function(){this.soundManager=new m}},{key:"initStatManager",value:function(){return this.statManager=new g(this.sceneJson),this.statManager.iterate(),this.statManager}},{key:"initCommentManager",value:function(){this.commentManager=new f(this.meta.id)}},{key:"initEventManager",value:function(){this.eventManager=new d}},{key:"initFormManager",value:function(){this.formManager=new h}},{key:"replaceEqxPage",value:function(e,t){var n=this.eqxPageList[e];n.destroy(),this.sceneJson.list.splice(e,1,JSON.parse(JSON.stringify(t))),this.updatePageNum(),this.eqxPageList[e]=null;var i=this.initEqxPage(e);return this.currentPage&&this.currentPage.pageJson.num===e+1&&(this.currentPage=i),i}},{key:"updatePageNum",value:function(){this.sceneJson.list.forEach(function(e,t){e.num=t+1})}},{key:"insertPage",value:function(e,t){var n=this.sceneJson.list;return n.splice(e+1,0,t),this.updatePageNum(),this.eqxPageList.splice(e+1,0,null),this.initEqxPage(e+1)}},{key:"deletePage",value:function(e){var t=this.sceneJson.list,n=this.eqxPageList[e];return n&&n.destroy(),t.splice(e,1),this.updatePageNum(),this.eqxPageList.splice(e,1)}},{key:"destroy",value:function(){this.stopRenderPages(),this.eqxPageList.forEach(function(e){return e.destroy()}),this.bgm&&(this.bgm.destroy(),this.bgm=null)}},{key:"sortPage",value:function(e,t){var n=this.sceneJson.list,i=n.length;if(e===t||e<0||e>i-1||t<0||t>i-1){return}if(e>t){var o=n.splice(e,1),a=r(o,1),s=a[0];n.splice(t,0,s);var c=this.eqxPageList.splice(e,1),u=r(c,1);s=u[0],this.eqxPageList.splice(t,0,s)}else{var l=n.splice(e,1),p=r(l,1);s=p[0],n.splice(t,0,s);var d=this.eqxPageList.splice(e,1),f=r(d,1);s=f[0],this.eqxPageList.splice(t,0,s)}this.updatePageNum()}},{key:"getEqxPageByIndex",value:function(e){var t=this.eqxPageList[e];return t||(t=this.initEqxPage(e)),t}},{key:"isEqxPage",value:function(e){return this.eqxPageList.some(function(t){return t===e})}},{key:"getEqxPageById",value:function(e){return this.getEqxPageByKeyValue("id",e)}},{key:"getEqxPageByKeyValue",value:function(e,t){var n=this.sceneJson.list.findIndex(function(n){return n[e]===t});if(n>-1){return this.getEqxPageByIndex(n)}}}]),e}();e.exports=E},function(e,t,n){function i(e,t){o(e),s(e,t),r(e,t),a(e),u(e),l(e.properties,"p",e)}function o(e){e.elements&&e.elements.forEach(function(e){e.css=e.css||{};var t=e.type;"3"==t?e.css.zIndex=-1:"q"==t&&(e.css.zIndex=0)})}function r(e){e.elements=e.elements.filter(function(e){var t=e.type;if("EqxShape"==p[t]){var n=e.properties,i=n.type,o=n.src;if(o){return !0}if(!i){return !1}if(i.includes("symbols")){return !0}var r=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});return !!r}return !0})}function a(e){var t=e.properties,n=t.longPage;n&&n>1&&n<6&&(t.longPage=486*n)}function s(e,t){e.properties=e.properties||{},e.properties.triggerGroup=e.properties.triggerGroup||[],e.properties.formRules=e.properties.formRules||[],e.properties.pageScroll=e.properties.pageScroll||{},Array.isArray(e.properties.triggerGroup)||(e.properties.triggerGroup=[]),e.elements=e.elements||[],e.sceneId=t.meta.id,e.name=e.name||"第"+e.num+"页",e.elements.forEach(function(t){return t.pageId=e.id});var n=e.properties.longPage;n&&n<554&&(e.properties.longPage=554)}function c(e){var t=e+"Effect";d.includes(t)||d.push(t)}function u(e){var t=e.properties||{};if(t.image||t.scratch){c("scratch");var n=t.effect=Object.assign({name:"scratch"},t.image||t.scratch),i=n.percentage?n.percentage.value||n.percentage||0.15:0.15;return delete n.percentage,n.percentage=i,void (t.image?delete t.image:delete t.scratch)}if(t.finger){return c("finger"),t.effect=Object.assign({name:"finger"},t.finger),void delete t.finger}if(t.fallingObject){return c("fallingObject"),t.effect=Object.assign({name:"fallingObject"},t.fallingObject),void delete t.fallingObject}if(t.effect){var o=t.effect.name;c(o),"money"===o&&_DEBUG_&&(t.effect.seconds=2)}}var l=n(63),p=n(64).COMP_TYPE,d=[];e.exports={perfectPage:i,perfectJson:s,perfectLongPage:a,perfectTrigger:l,effectArr:d,perfectEffect:u}},function(e,t){function n(e,t,n){var i=e.trigger;if(i){var o=i.sends;Array.isArray(o)&&(n.properties.triggerGroup=n.properties.triggerGroup||[],o.forEach(function(i){i.handles.forEach(function(o){o.ids&&o.ids.length&&o.ids.forEach(function(r){n.properties.triggerGroup.push({eventType:i.type,sourceType:t,sourceId:"e"==t?e.id:n.id,targetType:"e",targetId:r,targetState:o.type,delay:i.delay})})})})),"e"==t&&i.initType&&(e.properties.initType=i.initType),delete e.trigger}if("e"==t&&1!=e.properties.initType&&2!=e.properties.initType){if(i&&i.receives&&i.receives.length){var r=i.receives.length;1===i.receives[r-1].type?e.properties.initType=2:2===i.receives[r-1].type&&(e.properties.initType=1)}else{e.properties.initType=1}}}e.exports=n},function(e,t){var n={1:"EqxHotNewText",13:"EqxPhotoWall",7:"EqxNewText",2:"EqxText",x:"EqxText",298:"EqxDeepShare",299:"EqxReport",3:"EqxBackground",4:"EqxImage",8:"EqxTelephone",9:"EqxRedPacket",10:"EqxRandomContent",11:"EqxReward",b:"EqxComment",h:"EqxShape",i:"EqxCount",l:"EqxLink",t:"EqxChart",v:"EqxVideo",o:"EqxInteractiveVideo",p:"EqxImageSlider",m:"EqxMap",n:"EqxRandom",s:"EqxSound",d:"EqxPv",g:"EqxAdvertise",e:"EqxDownTime",f:"EqxUpTime",upload:"EqxUploadImages",a:"EqxScore",score:"EqxFormScore",scoreScale:"EqxScoreScale",c:"EqxCheckbox",r:"EqxRadio",z:"EqxDropDownList",5:"EqxInput",501:"EqxInput",502:"EqxInputPhone",503:"EqxInputEmail",504:"EqxInput",505:"EqxInputQQ",506:"EqxInputWeChat",507:"EqxSingleInput",508:"EqxMultiInput",6:"EqxSubmitButton",601:"EqxSubmitButton",12:"EqxSMS",201:"EqxWxNickName",401:"EqxWxProfile",403:"EqxWxUploadImage",w01:"EqxWxSoundPlay",w02:"EqxWxSoundRecord",j:"EqxImgVote",k:"EqxTextVote",q:"EqxGravity",u:"EqxDrawingBoard",14:"EqxDate",23:"EqxQrcode",24:"EqxLongTouchSavePicButton",lpLine:"EqxLineECharts",lpPie:"EqxPieECharts",lpBarCol:"EqxBarColECharts",lpBarRow:"EqxBarRowECharts",ad01:"EqxLpAdDefault",ad02:"EqxLpAdConfig",ad03:"EqxLpAdFlow",scoreMatrix:"EqxScoreMatrix",scoreMatrixNps:"EqxScoreMatrixNps",scoreRadio:"EqxScoreRadio",scoreCheckbox:"EqxScoreRadio"},i=["upload","5","501","502","503","504","505","506","507","508","c","r","z","a","score","scoreScale","12","scoreRadio","scoreMatrix","scoreMatrixNps","scoreCheckbox"],o=["5","501","502","503","504","505","506","507","12","508","upload"],r=["201","401","403","w01","w02","j","k","11","9","b","13","17","18","19","20","21","22"],a=["i","6","601"],s=["3","q"],c=["r","c","z","scoreCheckbox","scoreRadio"],u=["lpLine","lpPie","lpBarCol","lpBarRow"],l=["lpFormTable","lpListTable"],p=["score","scoreScale","scoreRadio","scoreCheckbox","scoreMatrix","scoreMatrixNps"],d=Date.now()+""+Math.floor(100000*Math.random());e.exports={COMP_TYPE:n,FORM_COMPS:i,WX_COMPS:r,WX_CLICK_FARMER_COMPS:a,FIX_INDEX_COMPS:s,COMP_KEY:d,INPUT_COMPS:o,CHART_COMPS:u,TABLE_COMPS:l,FORM_SCORE_COMPS:p,FORM_RELATIVE_RULE_COMPS:c}},function(e,t,n){var i=n(66);e.exports={get:function(e){return i}}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(67),u=n(64),l=(u.COMP_TYPE,u.FORM_COMPS),p=(n(69).BG_CROP_TYPE,n(69)),d=p.PC_VIEW_WIDTH,f=p.EDITOR_WIDTH,h=n(396),g=n(68),m=g.perfectCssForPcRender,v=d/f,y=1.5,b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=e.properties.formStyle||{};e.properties.formStyle=Object.assign({title:{fontSize:"14",fontWeight:"bold",color:"#333"},border:{borderWidth:1,borderColor:"#CCD5DB",borderStyle:"solid",borderRadius:3},input:{color:"#333",backgroundColor:"#fff"}},a);var s=e.properties.longPage;return r.pLen=-(s-r.height),r}return r(t,e),a(t,[{key:"addEventListener",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListener",this).call(this),this.renderEqxList=this.eqxCompList.slice(),this.$transformArea=this.$editDiv}},{key:"pageScale",value:function(){var e;return e=window.top===window?1:this.width/320}},{key:"active",value:function(){this.resetLongPage();var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"active",this).call(this);return e}},{key:"resetLongPage",value:function(){this.touchPos=0,this.renderEqxList=this.eqxCompList.slice()}},{key:"addTouchEvent",value:function(){function e(e){for(var t=f.length;t--;){var n=f[t],i=n.compJson.css.top||"";i=parseInt(i.toString().replace("px",""));var r=n.$li.css("display");i>o&&i+e<o&&!n.triggerHide&&1==n.compJson.properties.initType&&("list-item"===r||"none"===r)&&(n.eleShow(),f.splice(t,1)),"block"==r&&f.splice(t,1)}}var t=this,n=this;if("edit"!==this.eqxScene.config.mode){var i=this.pLen,o=this.height,r=this.$pageDiv,a=this.$editDiv,s=this.scrollMode;this.$transformArea=a,this.touchPos=0;var c,u,l,p,d,f=this.renderEqxList,h=0,g=0,m=0;this.currentMoveY=0,r.on("mousedown touchstart",function(e){if(!n.iscrollAble&&(n.autoMotion.stop(),i=n.pLen,!n.hasCoverEffect)){e.stopPropagation(),c=!0,l=n.touchPos;var t=e.originalEvent,o=t.touches,r=o?t.changedTouches[0]:null;u=r?r.clientY:e.clientY,"WE"==s&&(p=r?r.clientX:e.clientX),g=n.touchPos,h=Date.now()}}),r.on("mousemove touchmove",function(o){var r=t.eqxScene.pageScroll,a=t.pageJson.properties.pageScroll.disableFlip;if(o.stopPropagation(),o.preventDefault(),c){var f=o.originalEvent,h=f.touches,g=h?h[0]:null,v=g?g.clientY:o.clientY;if(l+=v-u,"WE"===s&&(d=(g?g.clientX:o.clientX)-p,Math.abs(d)>Math.abs(l-n.touchPos)&&!t.forbidHandFlip)){return d>0?r.goToPrePage():r.goToNextPage(),void (c=!1)}if(l>0&&"NS"===s&&!t.forbidHandFlip&&!a){return r.goToPrePage(),c=!1,void (n.touchPos=0)}if(l>i&&l<0){e(l),n.doTransform(l,0)}else{if(l<i-5&&"NS"===s&&!t.forbidHandFlip&&!a){return r.goToNextPage(),c=!1,void (n.touchPos=i)}}m=v-u,u=v}}),r.on("mouseup touchend mouseleave",function(){if(c&&(c=!1,!(l==g||Math.abs(m)<10))){if(l>i&&l<0){var e=Date.now(),t=(l-g)/(e-h);h=e,Math.abs(t)>5&&(t=t>0?1:-1);var o=Math.abs(t/0.002),r=t*o/2,a=l;l+=r,l>0?(r=-a,o=r/r*o,l=0):l<i&&(r=i-a,o=r/r*o,l=i),n.autoMotion.start(a,r,o),n.bottomArrow&&(n.bottomArrow.remove(),n.bottomArrow=null)}else{l>0?n.touchPos=0:l<=i&&(n.touchPos=i),n.doTransform(n.touchPos,0)}}})}}},{key:"dotransformPx",value:function(){var e=this.pLen-this.touchPos;return 0===e||(e>-250&&e<0?this.touchPos=this.touchPos+e:this.touchPos=this.touchPos-250,this.doTransform(this.touchPos,300),!1)}},{key:"doTransform",value:function(e,t){var n=this;if(this.touchPos=e,"edit"!==this.eqxScene.config.mode){var i=this.$transformArea,o=i.find(".alock");if(o.length>0){var r,a,s=Array.prototype.slice.call(o);s.forEach(function(i){r=i.style.transform.replace(/translate3d\(.*?\)/g,""),a="none"===r&&r?"translate3d(0,"+-e+"px,0)":"translate3d(0,"+-e+"px,0) "+r,n.transformEle($(i),a,t)})}}}},{key:"transformEle",value:function(e,t,n){if("edit"!==this.eqxScene.config.mode){if(e.css({transition:"","-webkit-transition":""}),n){var i="transform "+n+"ms ease-out";e.css({transition:i,"-webkit-transition":"-webkit-"+i})}e.css({transform:t,"-webkit-transform":"-webkit-"+t})}}},{key:"updateCompPosition",value:function(e){var t=0,n=this.dealWidthGroup(),i=this.getEqxItems().slice(0).filter(function(e){return !e.compJson.properties.appendElement&&!e.ruleHide}).sort(function(e,t){var n=e.getArrIndex()-t.getArrIndex();return n||(n=e.getZIndex()-t.getZIndex()),n});this.computeCompPosition(i,n,t,e),this.handleOverElement(e)}},{key:"handleOverElement",value:function(e){var t,n={},i=[],o=this.getEqxComps(),r="ruleChange"==e?1:v;o.forEach(function(e){n[e.id]=e,e.isBaseLayerElement||i.push(e),"4"==e.type&&e.updateImageSize(e.compJson.properties.imgStyle.width/e.compJson.properties.imgStyle.height)}),i.forEach(function(e){var i=e.compJson.properties,o=i.relativeItem,a=(i.lock,e.getAbsolutePos()),s=a.top,c=a.left,u=e.tempGroup;if(u){for(var l=r;u&&u.tempGroup;){u=u.tempGroup}u.json.eleType&&(c=u.pos.minLeft+(c-u.pos.left),l=y),s=u.pos.minTop*r+(s-u.pos.minTop)*l}else{if(o){var p=n[o.id].compJson.css.top;t=o.diff,s=p+t*r}else{s*=r}}e.updateCss({left:c,top:s}),e.autoSizeTopDown()}),i.forEach(function(e){var i=e.tempGroup;if(i){for(var o=e.compJson.css.top;i&&i.tempGroup;){i=i.tempGroup}var r=i.relative.relativeItem;if(r&&!i.relative.diff){var a=n[r.relativeItem.id].compJson.css.top;t=r.relativeItem.diff*v;var s=r.item.compJson.css.top;i.relative.diff=a+t-s}i.relative.diff&&(o+=i.relative.diff),e.updateCss({top:o}),e.autoSizeTopDown()}})}},{key:"computeCompPosition",value:function(e,t,n,i){e.sort(function(e,t){var n=e.getArrIndex()-t.getArrIndex();return 0==n&&(n=e.getZIndex()-t.getZIndex()),n}).forEach(function(e){if(e.update$li({visibility:"visible"}),e.isBaseLayerElement){var t;if(["7","25","2"].indexOf(e.type+"")>-1&&!i){var o=e.compJson.css,r=o.paddingTop,a=o.paddingBottom;t=parseFloat(e.$context.children().height())+parseFloat(r)+parseFloat(a)+10,e.update$li({height:t})}if("4"==e.type&&e.updateImageSize(e.compJson.properties.imgStyle.width/e.compJson.properties.imgStyle.height),["c","r","scoreRadio","scoreCheckbox"].indexOf(e.type)>-1&&"horizontal"==e.compJson.arrange&&!i){e.updateFormHeight();var s=e.getAbsolutePos(),c=s.height;e.updateCss({height:c})}l.indexOf(e.type+"")>-1&&(t=e.adaptFormHeight(),e.updateCss({height:t}));for(var u=e.getAbsolutePos(),p=u.top,d=u.left,f=e.tempGroup;f&&f.tempGroup;){f=f.tempGroup}if(f){var h=f.pos;f.computed||(h.newTop=n,f.computed=!0);var g="ruleChange"==i?1:f.json.eleType?y:v;p=f.pos.newTop+(p-f.pos.minTop)*g+f.pos.diff,e.isRendered=!0;var m=f.findTopGroup();m.json.eleType&&"ruleChange"!=i&&(d=f.pos.minLeft+(d-f.pos.left))}else{p=n+e.getRotateDiff()}e.updateCss({top:p,left:d}),e.autoSizeTopDown(),!f&&(n=e.getBoundingRect().bottom),f&&0==f.getAllSubEqxComps().filter(function(e){return !e.isRendered}).length&&(n=f.getAbsolutePos().bottom)}})}},{key:"calPageHeight",value:function(e,t){var n=0,i=1;"pcRender"==e&&(i=v);var o=this.getEqxComps().slice(0).filter(function(e){return !e.ruleHide});return t&&(o=o.filter(function(e){return !e.compJson.properties.appendElement})),o.forEach(function(e){for(var t=e.tempGroup;t&&t.tempGroup;){t=t.tempGroup}t&&t.json.eleType&&(i=y),n=Math.max(n,e.getBoundingRect().bottom-e.getExtraHeight()*i)}),n}},{key:"calRenderHeight",value:function(e){var t=0;return this.getEqxComps().slice(0).filter(function(e){return !e.compJson.properties.appendElement}).forEach(function(e){t=Math.max(t,e.getBoundingRect().bottom-e.getExtraHeight())}),t}},{key:"showEle",value:function(e,t){for(var n=t.renderEqxList,i=t.height,o=n.length;o--;){var r=n[o],a=r.compJson.css.top||"";a=parseInt(a.toString().replace("px",""));var s=r.$li.css("display");if(r.ruleHide){return}a+e<i&&!r.triggerHide&&1==r.compJson.properties.initType&&("list-item"===s||"none"===s)&&(r.eleShow(),n.splice(o,1)),"block"==s&&n.splice(o,1)}}},{key:"changeMoveToIscroll",value:function(e,t){this.iscrollAble=!0;var n="pcRender"!=t?f:d;if(!e){var i=this.pageJson.properties.longPage;n=f,e=i}var o=this.eqxBackground;o&&(o.updateBgHeight(e-this.eqxScene.adHeight-30),o.updateBgOpacity(1));var r,a;if(this.$editDiv.find("#edit_area").css("width",n),"pcRender"==t){r=document.body||document.documentElement;var s=window.top!==window,c=s?e:e+60;if(0==$("#iscrollDomForPc").length){var u=$('<div id="iscrollDomForPc" style="width:1px;z-index:-100;position:absolute;top:0px;left:0px;height:'+c+'px"><div></div></div>');$("body").prepend(u)}$(".pc-preview, #iscrollDomForPc").css("height",c+"px"),this.bgm&&this.bgm.$bgmBtn.css({position:"fixed",left:"20px",right:"auto"}),a=!0}else{this.$pageDiv.css("height",e),r=this.$section.get(0)}this.initIscroll(r,a)}},{key:"initIscroll",value:function(e,t){this.myScroll&&this.iscrollDestroy();var n={preventDefault:!1,mouseWheel:!0,scrollbars:!0,probeType:3,click:!1,bounce:!1,interactiveScrollbars:!0};this.moveMode="iscroll";var i=this;this.myScroll=new IScroll(e,n),this.myScroll.on("scroll",function(){i.showEle(this.y,i),i.afterAutoMove(this.y)}),$(e).find("textarea").off("wheel").on("wheel",function(e){var t=e.target;t.scrollHeight>t.offsetHeight&&e.stopPropagation()}),i.afterAutoMove=function(e){t&&$(".pc-preview").css("top",e),i.doTransform(e)},this.restorePostion()}},{key:"iscrollDestroy",value:function(){this.lastPosition=this.myScroll.y,this.myScroll&&this.myScroll.destroy()}},{key:"restorePostion",value:function(){var e=this.lastPosition||0,t=this.myScroll.maxScrollY;e=Math.abs(e)>Math.abs(t)?t:e,this.afterAutoMove(e),this.myScroll.scrollTo(0,e,0,!0)}},{key:"changeMoveToScroll",value:function(e){this.moveMode="scroll";var t=this;window.top!==window&&(e*=this.pageScale()),this.bgm&&this.bgm.$bgmBtn.css("position","fixed"),$("body").css({position:"static","overflow-x":"hidden"}),$(".p-index.main").css("height",e),this.$transformArea.find(".alock").css("position","fixed");var n=$("body").get(0);n.onscroll=function(){var e=Math.max(document.body.scrollTop,document.documentElement.scrollTop);t.showEle(-parseFloat(e),t)}}},{key:"dealWidthGroup",value:function(e){var t=this,n=e||this.pageJson.groups,i=this.buildTempGroups(n);return i.forEach(function(e){e.itemIds.forEach(function(n){if(/group/.test(n)){var o=i.find(function(e){return e.id==n});e.addEqxItem(o),o.tempGroup=e,o.group=null}else{var r=t.getEqxItem(n);r&&(e.addEqxItem(r),r.tempGroup=r.group,r.group=null)}}),e.pos=e.getAbsolutePos(),e.pos.minTop=100000000000000000;var n=e.pos.left,o=null;e.pos.minLeft=e.pos.left,e.relative={relativeItem:null},e.json.type&&(e.pos.minLeft=n-f*y/2+d/2),e.getAllSubEqxComps().forEach(function(t){t.getAbsolutePos().top<e.pos.minTop&&(e.pos.minTop=t.getAbsolutePos().top,o=t,!t.isBaseLayerElement&&t.compJson.properties.relativeItem&&(e.relative.relativeItem={item:t,relativeItem:t.compJson.properties.relativeItem}))}),e.pos.diff=o.getRotateDiff()}),i}},{key:"buildTempGroups",value:function(e){var t=this,n=[];return e&&e.forEach(function(e){var i=new h(e,t.getCurrentLayer());n.push(i)}),n}},{key:"updateMaxDistance",value:function(e,t){var n=this.pageJson.properties.longPage;0==arguments.length?(t=this.height,e=n):1==arguments.length&&(t=e,e=n);var i=this.eqxBackground,o=Math.max(n,e,document.documentElement.clientHeight);i&&i.updateBgHeight(o),this.pLen=t-e>0?0:t-e}},{key:"appendLogo",value:function(e){var t=this,n=[],i=this.pageJson.groups.filter(function(e){return e.appendGroup});this.pageJson.groups.filter(function(e){return !e.appendGroup}),this.pageJson.properties.longPage;this.renderMode=e,n=this.getEqxComps().slice(0).filter(function(e){return e.compJson.properties.appendElement}),this.renderMode=e;var o=this.calPageHeight(e,!0),r=parseInt(this.eqxScene.adHeight)+30;r+=this.handleMsgBoard(),"pcRender"===e?(this.previewMode="pc",n.forEach(function(e){e.isComputed||(m(e.compJson,t.pageJson,t.pageJson),e.autoSizeTopDown(),e.isComputed=!0)}),o=Math.max(o,$(window).height()-r-60),this.computeCompPosition(n,this.dealWidthGroup(i),o)):(o=Math.max(o,this.height-r),this.computeCompPosition(n,this.dealWidthGroup(i),o,!0)),o+=r,"mobileRender"==e?this.changeMoveToScroll(o,e):this.changeMoveToIscroll(o,e);var a="pcRender"==e?$(window).height()-60:Math.min(parseFloat(this.$pageDiv.parents(".nr").height()),$(window).height());this.pLen=a-o}},{key:"moveByCompId",value:function(e){var t=this.getEqxCompById(e),n=t.compJson.css.top,i=Math.max(-n,this.pLen);"iscroll"==this.moveMode?(this.myScroll.scrollTo(0,i,0,!0),this.afterAutoMove(i)):$(document).scrollTop(-i),this.showEle(i,this)}},{key:"adaptDataForRadio",value:function(){var e=0;this.getEqxItems().slice(0).filter(function(e){return !e.compJson.properties.appendElement}).sort(function(e,t){return e.getArrIndex()-t.getArrIndex()}).forEach(function(t){if(t.isBaseLayerElement){var n=t.compJson.css,i=n.top,o=n.height;if(i+=e,t.updateCss({top:i}),["c","r"].indexOf(t.type)>-1&&"horizontal"==t.compJson.arrange){t.updateFormHeight();var r=t.compJson.css.height,a=(o-r)/2*(v-1);i-=a,e+=(r-o)*v,o=r,t.updateCss({top:i,height:o})}t.autoSizeTopDown()}})}},{key:"handleMsgBoard",value:function(){var e=this.messageBoard,t=0;if(e){var n=e.calMessageHeight();e.update$li({height:n}),t=n}return t}},{key:"triggerEleShow",value:function(){var e=Math.max(document.body.scrollTop,document.documentElement.scrollTop);this.myScroll&&(e=this.myScroll.y),this.showEle(e,this)}}]),t}(c);e.exports=b},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(64).COMP_TYPE,s=n(64).FORM_COMPS,c=n(64).FORM_SCORE_COMPS,u=n(64).WX_COMPS,l=n(64).FIX_INDEX_COMPS,p=n(64).WX_CLICK_FARMER_COMPS,d=n(68),f=d.perfectComp,h=n(55).randomId,g=n(73),m=n(75),v=n(78),y=n(222),b=n(389),x=n(390),w=n(394),k=n(395),E=n(399),I=n(400),_=n(398),S="",O=n(104).toInt,P=n(402),T=n(406),C=n(407),q=n(408),j=(n(409),n(413)),R=n(414),L=n(415),A=n(417).category,M=function(){function e(t,n){o(this,e),this.pageJson=t,this.eqxScene=n,this.eqxItemList=[],this.eqxLayerList=[],this.currentLayer=null,this.displayed=!1,this.hasCoverEffect=!1,this.destroyed=!1;var i=this.eqxScene,r=i.width,a=i.height;this.width=r,this.height=a,this.bgm=this.eqxScene.bgm,this.eqxStatManager=null,this.baseElementQueue=[],this.overlayElementQueue=[],"edit"==this.eqxScene.config.mode&&(this.EqxDragManager=new q(this.baseElementQueue,this),this.EqxItemManager=new j(this)),this.pv=0}return r(e,[{key:"switchCurrentLayer",value:function(e){null!==e&&void 0!==e&&(isNaN(parseFloat(e))?e instanceof _&&(this.currentLayer=e):this.currentLayer=this.eqxLayerList[e])}},{key:"getCurrentLayer",value:function(){return this.currentLayer||this.eqxLayerList[this.eqxLayerList.length-1]||null}},{key:"getBaseLayer",value:function(){return this.eqxLayerList[0]}},{key:"hasEqxItem",value:function(e){return this.eqxLayerList.some(function(t){return t.eqxItems.includes(e)})}},{key:"getTopItems",value:function(){var e=[];return this.eqxLayerList.forEach(function(t){e.push.apply(e,i(t.eqxItems.filter(function(e){return !e.group})))}),e}},{key:"initEqxLayers",value:function(){function e(){d.forEach(function(e){delete e.tag,delete e.visited})}function t(){var e=p.slice(),t={};e.forEach(function(e,n){"EqxGravity"!=a[e.type]&&(t[e.id]=e)});for(var i=function(e){var n=[],i=g[e],o=i.thumbnail,r=i.displayed,a=i.compIds,s=i.screenBg,c=i.flash,l=i.area,p=i.name,d=i.hash,f=i.id,h=void 0===f?u._generateLayerId():f;a.forEach(function(e){var i=t[e];void 0!==i&&(n.push(i),delete t[e])}),m.push({thumbnail:o,displayed:r,compIds:a,flash:c,screenBg:s,items:n,area:l,name:p,hash:d,id:h})},o=0;o<g.length;o++){i(o)}n(Object.values(t),m),t=null,m.length||m.push({items:[],json:{compIds:[],id:u._generateLayerId()}}),m.forEach(function(e,t){e.zIndex=e.zIndex||t+1})}function n(e,t){e.length&&t.unshift({items:e})}function i(){for(var e=0;e<m.length;e++){var t=m[e];r();for(var n=0;n<d.length;n++){var i=d[n];i.tag||i.visited||o(i,t)}}}function o(e,t){e.visited=!0;for(var n=e.compIds,i=t.items.map(function(e){return e.id}),r=!0,a=0;a<n.length;a++){var c=n[a];if(i.indexOf(c)===-1){if(!/group/.test(c)){r=!1;break}var u=s(c);if(!u||u.visited||!o(u,t)){r=!1;break}}}return r&&(e.tag=!0,t.items.push(e)),r}function r(){for(var e=0;e<d.length;e++){d[e].visited=!1}}function s(e){return d.find(function(t){return t.id===e})}var c=this,u=this,l=this.pageJson,p=l.elements,d=l.groups;d||(d=[]),e();var f=this.pageJson.extend=this.pageJson.extend||{},h=f.screens,g=void 0===h?[]:h,m=[];return t(),i(),e(),m.map(function(e){return new _(e,c)})}},{key:"_generateLayerId",value:function(){return"layer:"+h()}},{key:"addEmptyEqxLayer",value:function(e){if(!this.$editDiv){return null}if(this.currentLayer.json.screenBg&&e){var t=JSON.parse(JSON.stringify(this.currentLayer.json.screenBg))}else{t=null}var n={compIds:[],items:[],id:this._generateLayerId(),screenBg:t},i=new _(n,this),o=this.$editDiv;return 0===e?(this.eqxLayerList.unshift(i),o.prepend(i.render()),this.eqxLayerList.forEach(function(e,t){return e.updateEqxLayerIndex(t+1)})):e===this.eqxLayerList.length?(this.eqxLayerList.push(i),o.append(i.render()),i.updateEqxLayerIndex(this.eqxLayerList.length)):e?(this.eqxLayerList.splice(e,0,i),o.children().eq(e).before(i.render()),this.eqxLayerList.forEach(function(e,t){return e.updateEqxLayerIndex(t+1)})):(this.eqxLayerList.push(i),o.append(i.render()),i.updateEqxLayerIndex(this.eqxLayerList.length)),i}},{key:"deleteEqxLayer",value:function(e){var t=this.eqxLayerList;isNaN(parseInt(e))&&(e=t.findIndex(function(t){return t===e})),e>=0&&t.length>1&&(t.splice(e,1)[0].destroy(),this.switchCurrentLayer(t[t.length-1]))}},{key:"getEaxPageTreeStructureFlatted",value:function(){function e(t){var n=[];return t.eqxItems.forEach(function(t){n.push(t),t.isGroupItem()&&n.push.apply(n,i(e(t)))}),n}function t(e){e.forEach(function(e){return e.isGroupItem()&&t(e.eqxItems)}),e.sort(function(e,t){return t.zIndex-e.zIndex})}function n(e){return e.eqxLayerList.slice().sort(function(e,t){return t.zIndex-e.zIndex}).map(function(e){var n=e.getDirectItems();return t(n),{eqxItems:n}})}var o=[];return n(this).forEach(function(t){return o.push.apply(o,i(e(t)))}),o}},{key:"openPipEditor",value:function(){var e=this.pageJson,t=e.properties;t.pip=t.pip||{},t.pip.used=!0,t.pip.playback=!0,t.pip.mode=1}},{key:"initQuickFlash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pageJson.properties;e&&(t.flash=t.flash||{},t.flash.used=e),t.flash&&t.flash.used&&(this.flash=new C(t.flash,this))}},{key:"toJson",value:function(){if(!this.eqxLayerList.length){return this.pageJson}var e=[],t=[],n=[];this.eqxLayerList.sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(o){var r=o.toJson(),a=r.elems,s=r.groups,c=r.thumbnail,u=r.screenBg,l=r.compIds,p=r.flash,d=r.area,f=r.name,h=r.hash,g=r.id;e.push.apply(e,i(a)),t.push.apply(t,i(s)),n.push({thumbnail:c,compIds:l,screenBg:u,flash:p,area:d,hash:h,name:f,id:g})}),e.forEach(function(e,t){var n=e.css;n.zIndex=t+1}),this.eqxBackground&&e.push(this.eqxBackground.compJson),this.eqxGravity&&e.push(this.eqxGravity.compJson),this.pageJson.elements=e,this.pageJson.groups=t,this.pageJson.extend=this.pageJson.extend||{},this.pageJson.extend.screens=n;var o=this.pageJson.properties;return o&&(o.groupSettings=this.ftManager.toJson()),this.pageJson}},{key:"toPageJson",value:function(e){function t(e){var t=void 0,n=e.type,i=e.properties.formRelevant.scoreSettings;if("scoreRadio"==n||"scoreCheckbox"==n){t=e.choices.options}else{if("scoreMatrix"==n||"scoreMatrixNps"==n){var o=i.type,r=i.scoreLevel,a=i.baseNum,s=i.contentOption;s=void 0===s?{}:s;var c=s.list,u=s.optionsList;t={scoreLevel:r,baseNum:a,list:{list:c}},"radio"==o&&(t.list.optionsList=u)}else{var l=i.scoreLevel,p=i.baseNum;t={scoreLevel:l,baseNum:p}}}return t}e=Object.assign({transformText:!0,addForms:!0},e);var n=JSON.parse(JSON.stringify(this.toJson())),i=n.id,o=n.sceneId,r=n.forms=[],u=n.redPacket={};if(n.elements.forEach(function(e,n){var l=e.type+"";if("EqxRedPacket"===a[l]){var p=e.properties;u.title=p.title,u.activity=p.activity,u.amount=p.amount,u.begin=p.begin,u.end=p.end,u.count=p.count,u.chance=p.chance}if("EqxText"===a[l]&&e.content&&(e.content=e.content.replace(/(^\s*)|(\s*$)/g,"")),s.includes(l)){var d=e.properties.formRelevant||{},f=d.title&&d.title.content||"",h={id:e.id,pageId:i,sceneId:o,type:l,fieldType:l,title:f||e.title,num:n};if(c.includes(e.type)&&(h.score=t(e)),"z"===l&&e.choices&&e.choices.options&&(h.title=f||e.choices.options[0].label||e.title),"upload"===l){var g=e.properties.uploadType?e.properties.uploadType:"image";h.type="upload-"+g}/^[rc]/.test(l)&&(e.choices&&"string"!=typeof e.choices&&(e.choices=JSON.stringify(e.choices)),h.choices=e.choices),r.push(h)}if(e.trigger){var m=e.trigger;m.sends&&0===m.sends.length&&delete m.sends,m.receives&&0==m.receives.length&&delete m.receives,m.sends||m.receives||delete e.trigger}"EqxTelephone"!==a[l]&&"EqxLink"!==a[l]&&"EqxSubmitButton"!==a[l]||e.properties.title&&(e.properties.title=e.properties.title.replace(/ /g,"&nbsp;"))}),n.trigger){var l=n.trigger;l.sends&&0===l.sends.length&&delete l.sends,l.receives&&0===l.receives.length&&delete l.receives,l.sends||l.receives||delete n.trigger}return n}},{key:"setProps",value:function(e){var t=this.pageJson.properties;Object.keys(e).forEach(function(n){t[n]=e[n]})}},{key:"isXb",value:function(){return !!this.pageJson.properties.xb}},{key:"isLongPage",value:function(){return"longPage" in this.pageJson.properties}},{key:"getPageWidth",value:function(){return 320}},{key:"getPageHeight",value:function(){var e=this.pageJson.properties;return e.longPage||486}},{key:"toString",value:function(){return"page-"+this.pageJson.id}},{key:"initStatManager",value:function(){return this.statManager=new b(this.pageJson.elements),this.statManager.iterate(),this.statManager}},{key:"updateItemIndex",value:function(e,t){t.eqxLayer.updateItemIndex(e,t)}},{key:"updateItemsIndexBySplit",value:function(e,t){t[0].eqxLayer.updateItemsIndexBySplit(e,t)}},{key:"updateItemsIndex",value:function(e,t){var n=t.sort(function(e,t){return e.getZIndex()-t.getZIndex()});"--"===e&&n.reverse(),n.forEach(function(t){t.eqxLayer.updateItemIndex(e,t)})}},{key:"show",value:function(){return this.displayed=!0,this.triggerEventAgent&&this.triggerEventAgent.addEventListener(),this.$section.addClass("z-current"),this}},{key:"hide",value:function(){return this.displayed=!1,this.flash&&this.flash.reset&&this.flash.reset(),this.triggerEventAgent&&this.triggerEventAgent.removeEventListener(),this.eqxCompList.forEach(function(e){e.$li&&e.eleHide()}),this.effect&&this.effect.stopEffect&&this.effect.stopEffect(),this.$section&&this.$section.removeClass("z-current"),this}},{key:"showElements",value:function(){var e=this;this.getEqxComps().forEach(function(t){var n=t.compJson.css.top;t.compJson.properties.anim&&t.compJson.properties.anim[0]&&30===t.compJson.properties.anim[0].type&&(n-=t.compJson.css.height),2===t.compJson.properties.initType||t.ruleHide?t.eleHide():t.compJson.properties.anim&&t.compJson.properties.anim[0]&&(2===t.compJson.properties.anim[0].type||19===t.compJson.properties.anim[0].type)?t.eleShow():n&&parseFloat(n)<=e.height?t.eleShow():n||t.eleShow()}),this.eqxBackground&&this.eqxBackground.eleShow()}},{key:"active",value:function(){function e(e){e.hasCoverEffect?(e.bgm&&e.bgm.hide(),e.eqxScene.progressBar&&e.eqxScene.progressBar.hide()):e.showElements(),e.effect&&e.effect.startEffect&&e.effect.startEffect(),e.$section.addClass("z-active"),e.flash&&e.flash.play()}function t(e){var t=[],n=e.eqxCompList;return n.forEach(function(e){e.anim&&!Array.isArray(e.anim)&&(e.anim=[e.anim]),(e.anim||[]).forEach(function(e){e.sound&&e.soundAgent&&t.push(e.soundAgent.audio)})}),t}var n=this,i=new Promise(function(i,o){var r=t(n),a=r.length;r&&r.length?r.forEach(function(t){4===t.readyState?0===--a&&(e(n),i()):(t.load(),$(t).on("canplay",function(){0===--a&&(e(n),i())}).on("error",function(){0===--a&&(e(n),i())}))}):(e(n),i())});return i}},{key:"deactive",value:function(){if(this.$section){return this.$section.removeClass("z-active"),this}}},{key:"destroy",value:function(){this.hide(),this.eqxLayerList.forEach(function(e){e.destroy()}),this.$ul&&(this.$ul.remove(),this.$ul=null),this.$editDiv&&(this.$editDiv.remove(),this.$editDiv=null),this.$pageDiv&&(this.$pageDiv.remove(),this.$pageDiv=null),this.$section&&(this.$section.remove(),this.$section=null),this.destroyed=!0,this._ftManager=null,this._groupManager=null,this._triggerManager=null}},{key:"_handleSpecialComps",value:function(){this.getEqxComps().forEach(function(e){e.afterAppendToPage&&e.afterAppendToPage()})}},{key:"create$section",value:function(){function e(){k.eqxLayerList.some(function(e){return e.hasGroupsInLayer()})&&k.addGroupManager(),"edit"==m&&w.length>0&&A.formRuleTrigger.indexOf(k.eqxScene.meta.bizType)>-1&&k.addFormRulesManager()}function t(){k.trigger=new I(k,v),"view"==m&&A.formRuleTrigger.indexOf(k.eqxScene.meta.bizType)>-1&&(k.EqxFormRulesTrigger=new L(k,v))}function n(){k.initQuickFlash()}function i(){var e=d.find(function(e){return"EqxGravity"===a[e.type]});e&&(k.eqxGravity=k.initEqxGravityByJson(e),k.renderGravity(k.eqxGravity))}function o(){(b.used||"edit"===m)&&(k.eqxLayerList=k.initEqxLayers(),k.$editDiv.append(k.eqxLayerList.map(function(e){return e.render()})),k.switchCurrentLayer(k.eqxLayerList.length-1))}function r(){if(!b.used&&"view"===m){var e=d.slice().map(function(e){return e.name=k.getCompName(e),e}).filter(function(e){var t=e.type;return"EqxBackground"!==a[t]&&"EqxGravity"!==a[t]}).sort(function(e,t){var n=e.css.zIndex,i=t.css.zIndex;return n-i}).map(function(e,t){return e.num=t+1,e.css.zIndex=t+1,e}),t={id:k._generateLayerId(),items:e,compIds:e.map(function(e){return e.id}),zIndex:1};k.eqxLayerList=[new _(t,k)],k.$editDiv.append(k.eqxLayerList.map(function(e){return e.render()})),k.switchCurrentLayer(k.eqxLayerList.length-1)}}function s(){if(d.length){var e=[],t=[];if(d.forEach(function(n){"EqxBackground"===a[n.type]?t.push(n):e.push(n)}),t.length){var n=k.initEqxBgByJson(t[t.length-1]);k.renderBg(n)}d.length=0,d.push.apply(d,e)}}var c=this.pageJson,u=c.num,l=c.id,p=c.properties,d=c.elements,f=this.pageJson.extend=this.pageJson.extend||{},h=(f.screens,this.eqxScene.config),m=h.mode,v=h.disableTrigger,y=p.flash,b=void 0===y?{}:y,x=p.formRules,w=void 0===x?[]:x,k=this;return this.$section=$(g.section()),this.section=this.$section[0],this.$pageDiv=$(g.pageDiv(u)),this.$editDiv=$(g.editDiv(l)),this.$pageDiv.append(this.$editDiv),this.$section.append(this.$pageDiv),s(),o(),r(),i(),n(),t(),e(),"edit"==m&&this.splitCompsByLayer(!0),this.$section}},{key:"addEventListener",value:function(){}},{key:"renderGravity",value:function(e){e.$gravity?"":this.$editDiv.prepend(e.create$gravity())}},{key:"addGravityJson",value:function(e){return this.deleteGravity(),this.addCompJson(e)}},{key:"deleteGravity",value:function(){var e=this;if(this.eqxGravity){var t=this.pageJson.elements.findIndex(function(t){return t.id===e.eqxGravity.compJson.id});t>-1&&this.pageJson.elements.splice(t,1),this.eqxGravity.delete$gravity(),this.eqxGravity=null}}},{key:"renderBg",value:function(e){e.$bg?"":e.create$bg(this.$editDiv,this.width,this.height)}},{key:"addBgJson",value:function(e){return this.deleteBg(),this.addCompJson(e)}},{key:"deleteBg",value:function(){var e=this;if(this.eqxBackground){var t=this.pageJson.elements.findIndex(function(t){return t.id===e.eqxBackground.compJson.id});t>-1&&this.pageJson.elements.splice(t,1),this.eqxBackground.delete$bg(),this.eqxBackground=null}}},{key:"reEffectJson",value:function(e){this.pageJson.properties.effect=e}},{key:"addTriggerManager",value:function(){return this._triggerManager=new T(this),this._triggerManager}},{key:"addFormRulesManager",value:function(){return this._formRulesManager=new R(this),this._formRulesManager}},{key:"addGroupManager",value:function(){return this._groupManager=new k(this),this._groupManager}},{key:"addFtManager",value:function(){return this._ftManager=new P(this),this._ftManager}},{key:"addScreenManager",value:function(){return this.screenManager=new E(this),this.screenManager}},{key:"alignItem",value:function(e,t){var n=e.getBoundingRect(),i=function(e){return e.isGroupItem()?function(t,n){var i=e.getAllSubEqxComps();i.forEach(function(e){e.instantMove(t,n,!1)}),e.autoSize()}:function(t,n){e.instantMove(t,n,!1)}}(e);switch(t){case"左对齐":var o=-n.left;i(o,0);break;case"右对齐":var r=320-n.left-n.width;i(r,0);break;case"上对齐":var a=-n.top;i(0,a);break;case"下对齐":var s=this.getPageHeight(),c=s-n.top-n.height;i(0,c);break;case"水平居中对齐":var u=n.left,l=u+n.width/2,p=parseInt(160-l);i(p,0);break;case"垂直居中对齐":var d=this.getPageHeight(),f=n.top,h=f+n.height/2,g=parseInt(d/2-h);i(0,g);break;default:throw new Error("对齐元素位置类型"+t)}S("alignItem",t,n.toString(),"-->",e.getBoundingRect().toString(),e.id)}},{key:"initEqxBgByJson",value:function(e){return this.eqxBackground=new y(e,this),this.eqxBackground}},{key:"initEqxGravityByJson",value:function(e){return this.eqxGravity=new x(e,this),this.eqxGravity}},{key:"alignItems",value:function(e,t){if(0!==e.length){if(1===e.length){return this.alignItem(e[0],t)}var n=this.groupManager||this.addGroupManager();e=n.filterNestedItems(e);var i=n.traceTopItemsContain(e),o=i.map(function(e){return e.getBoundingRect()}).join("\n"),r=i.filter(function(e){return e.isGroupItem()}),a=e.length;if(!(a<1)){for(var s=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,p=0;p<a;p++){var d=e[p],f=d.getBoundingRect(),h=f.center();d.$rect=f,d.$center=h,f.p1.x<s&&(s=f.p1.x),f.p1.y<u&&(u=f.p1.y),f.p2.x>c&&(c=f.p2.x),f.p2.y>l&&(l=f.p2.y)}var g=O((s+c)/2),m=O((u+l)/2);switch(t){case"左对齐":e.forEach(function(e){var t=e.$rect,n=s-t.left;e.instantMove(n,0,!1)});break;case"右对齐":e.forEach(function(e){var t=e.$rect,n=c-t.left-t.width;e.instantMove(n,0,!1)});break;case"上对齐":e.forEach(function(e){var t=e.$rect,n=u-t.top;e.instantMove(0,n,!1)});break;case"下对齐":e.forEach(function(e){var t=e.$rect,n=l-t.top-t.height;e.instantMove(0,n,!1)});break;case"水平居中对齐":e.forEach(function(e){var t=e.$center,n=g-t.x;e.instantMove(n,0,!1)});break;case"垂直居中对齐":e.forEach(function(e){var t=e.$center,n=m-t.y;e.instantMove(0,n,!1)});break;case"水平均分":if(a<2){return}var v=e.map(function(e){return e}).sort(function(e,t){return e.$center.x-t.$center.x});s=v[0].$center.x,c=v[a-1].$center.x;var y=(c-s)/(a-1);v.forEach(function(e,t){var n=s+y*t-e.$center.x;e.instantMove(n,0,!1)});break;case"竖直均分":if(a<2){return}v=e.map(function(e){return e}).sort(function(e,t){return e.$center.y-t.$center.y}),u=v[0].$center.y,l=v[a-1].$center.y,y=(l-u)/(a-1),v.forEach(function(e,t){var n=u+y*t-e.$center.y;e.instantMove(0,n,!1)});break;default:throw new Error("对齐元素位置类型"+t)}r.forEach(function(e){e.autoSize()});var b=i.map(function(e){return e.getBoundingRect()}).join("\n");S("alignItems\n",o,"\n-->\n",b)}}}},{key:"updateEqxComp",value:function(e,t){t=JSON.parse(JSON.stringify(t)),f(t,this.eqxScene.sceneJson,this.pageJson);var n=this.getEqxCompById(e);if(n){return delete t.id,delete t.num,delete t.pageId,delete t.sceneId,delete t.type,Object.assign(n.compJson,t),n}}},{key:"isFunTemplate",value:function(){var e=this.pageJson.properties,t=e.pip,n=e.oneShot;if(t||n){return this.ftManager.ftRules.length}}},{key:"getEqxCompByCoord",value:function(e,t){for(var n=this.eqxLayerList.length,o=[],r=n-1;r>=0;r--){var a=this.eqxLayerList[r];if(a.allowOperate){var s=a.eqxItems.filter(function(e){return !e.isGroupItem()}).sort(function(e,t){return t.css.zIndex-e.css.zIndex});o.push.apply(o,i(s))}}for(var c=0;c<o.length;c++){if(o[c].containsPoint(e,t)){return o[c]}}}},{key:"getWxCompCount",value:function(){return this.pageJson.elements.reduce(function(e,t){return u.includes(t.type+"")&&(e+=1),e},0)}},{key:"getWxClickFarmerCompCount",value:function(){return this.pageJson.elements.reduce(function(e,t){var n=t.type+"";return p.includes(n)&&t.properties.clickFarmer&&(e+=1),e},0)}},{key:"getCompName",value:function(e){if(e.name){return e.name}var t=w.find(function(t){return t.types.includes(e.type+"")});if(!t){return null}var n=t.types,i=this.getEqxComps().map(function(e){return e.compJson}).filter(function(e){return n.includes(e.type+"")}),o=0;return i.forEach(function(e){if(e.name){var n=new RegExp(t.name+"(\\d+)"),i=parseInt((n.exec(e.name)||[])[1]);i&&i>o&&(o=i)}}),t.name+(o+1)}},{key:"getOperableLayers",value:function(){return this.eqxLayerList.filter(function(e){return e.allowOperate})}},{key:"getEqxItems",value:function(){var e;return(e=[]).concat.apply(e,i(this.eqxLayerList.map(function(e){return e.eqxItems})))}},{key:"getDirectEqxItems",value:function(){var e;return(e=[]).concat.apply(e,i(this.eqxLayerList.map(function(e){return e.getDirectItems()})))}},{key:"getEqxItem",value:function(e){return e&&this.getEqxItems().find(function(t){return""+t.id==""+e})}},{key:"getEqxCompById",value:function(e){return this.getEqxItem(e)}},{key:"getEqxComps",value:function(){var e=[];return this.eqxLayerList.forEach(function(t){e.push.apply(e,i(t.getEqxComps()))}),e}},{key:"getZIndex",value:function(e){return e.compJson.css.zIndex}},{key:"initEqxCompById",value:function(e){var t=this.pageJson.elements.find(function(t){return t.id==e});return this.initEqxCompByJson(t)}},{key:"deleteEqxComp",value:function(e){this.deleteEqxItem(e)}},{key:"deleteEqxItem",value:function(e){if(e){var t=e.eqxLayer;t.deleteEqxItem(e),e.isGroupItem()||this.deleteTrigger(e),this.splitCompsByLayer()}}},{key:"deleteTrigger",value:function(e){var t=e.compJson.id,n=this.pageJson.properties;n.triggerGroup&&(n.triggerGroup=n.triggerGroup.filter(function(e){return e.sourceId.toString()!=-t.toString()&&e.targetId.toString()!==t.toString()}))}},{key:"renderEqxComp",value:function(e,t){e&&(this.getCurrentLayer().renderEqxItem(e,t),e.afterAppendToPage&&e.afterAppendToPage())}},{key:"initEqxCompByJson",value:function(e,t){if(e){this.getCompJsonById(e.id)||(e=this.addCompJson(e,t));var n=this.getEqxItem(e.id),i=m[e.type];if(n){return"",null}if(!(i&&i.prototype instanceof v)){return"",null}var o=this.getCurrentLayer(),r=new i(e,o);return o.initEqxItem(r),r}}},{key:"getCompJsonById",value:function(e){if(e){var t=this.getEqxItem(e);return t?t.compJson:void 0}}},{key:"addCompJson",value:function(e,t){var n=JSON.parse(JSON.stringify(e));return this.addPageInfo(n,t),f(n,this.eqxScene.sceneJson,this.pageJson),n}},{key:"addPageInfo",value:function(e,t){var n=this.pageJson,o=0;return l.indexOf(""+e.type)===-1&&(o=Math.max.apply(Math,[0].concat(i(this.getEqxItems().map(function(e){return e.zIndex})))),e.css.zIndex=e.css.zIndex||o+1),e.id||(e.id=h()),Object.assign(e,{id:e.id,pageId:n.id,sceneId:n.sceneId,num:o+1}),e.fromSource&&"psd"===e.fromSource?(delete e.fromSource,e):(t||(delete e.name,e.name=this.getCompName(e)),e)}},{key:"getLayer0ItemIds",value:function(){function e(e){for(var t=0;t<n.length;t++){for(var i=n[o].compIds,r=0;r<i;r++){if(i[r]===e){return !1}}}return !0}for(var t=this.pageJson.elements,n=this.pageJson["extends"].screens,i=[],o=0;o<t.length;o++){var r=t[o].id;e(r)&&i.push(r)}return i}},{key:"getEqxLayerById",value:function(){}},{key:"newEqxLayer",value:function(){}},{key:"mergeEqxLayers",value:function(){}},{key:"centerUI",value:function(){}},{key:"initTrigger",value:function(){}},{key:"addPageGroup",value:function(e){this.pageJson.groups=this.pageJson.groups||[],e.type&&this.pageJson.groups.push(e)}},{key:"getPageGroups",value:function(){return this.pageJson.groups||[]}},{key:"getPageGroupSettings",value:function(){var e=this.pageJson.properties;return e.groupSettings=e.groupSettings||[],e.groupSettings}},{key:"renderEqxCompById",value:function(e){return this.renderEqxComp(this.getEqxCompById(e))}},{key:"setIframeUlTopAndLeft",value:function(){var e,t=(this.width-320)/2,n=(this.height-486)/2;return e=this.width/this.height<=320/486?"scale("+this.width/320+")":"scale("+this.height/486+")",this.$ul.css({marginTop:n,marginLeft:t,transform:e}),{marginLeft:t,marginTop:n}}},{key:"resetZIndex",value:function(e){for(var t=e.length,n=t-1;n>=0;n--){var i=e[n];i.compJson.css.zIndex=t-n,i.update$li({zIndex:i.compJson.css.zIndex})}}},{key:"splitCompsByLayer",value:function(e){var t=this;this.baseElementQueue.length=0,this.overlayElementQueue.length=0,this.getDirectEqxItems().sort(function(e,t){var n=e.getArrIndex()-t.getArrIndex();return 0==n?e.getZIndex()-t.getZIndex():n}).forEach(function(e){e.isBaseLayerElement?t.baseElementQueue.push(e):t.overlayElementQueue.push(e)}),e&&this.EqxDragManager.resetCompPosition()}},{key:"correctionGroupPos",value:function(){for(var e=this.baseElementQueue,t=e.length,n=t-1;n>=0;n--){if(e[n].isGroupItem()&&!e[n].LongVisited){e[n].LongVisited=!0;var o=e[n].json.arrayIndex;o&&e.splice.apply(e,[o,0].concat(i(e.splice(n,1))))}}this.combineEqxItems(),this.EqxDragManager.resetCompPosition()}},{key:"combineEqxItems",value:function(){this.updateArrIndex();var e=this.getDirectEqxItems().sort(function(e,t){var n=e.getArrIndex()-t.getArrIndex();return 0==n&&(n=e.getZIndex()-t.getZIndex()),n});this.eqxLayerList[0].updateCompsIndex(this.eqxLayerList[0]._getCompsFromTree(e,!0),!0)}},{key:"updateArrIndex",value:function(){var e=this.baseElementQueue.concat(this.overlayElementQueue);e.forEach(function(e,t){e.isGroupItem()&&e.getAllSubEqxComps().forEach(function(e){e.setArrIndex(t+1)}),e.setArrIndex(t+1)})}},{key:"getSpecialComps",value:function(e){return this.getEqxComps().filter(function(t){return t[e]&&t[e]()})}},{key:"id",get:function(){return this.pageJson.id}},{key:"triggerManager",get:function(){return this._triggerManager||this.addTriggerManager()}},{key:"formRulesManager",get:function(){return this._formRulesManager||this.addFormRulesManager()}},{key:"groupManager",get:function(){return this._groupManager||this.addGroupManager()}},{key:"ftManager",get:function(){return this._ftManager||this.addFtManager()}},{key:"eqxCompList",get:function(){return this.getEqxComps()}}]),e}();e.exports=M},function(e,t,n){function i(e,t,n){return r(e,t),a(e,t,n),s(e),c(e),l(e),o(e,t),u(e),p(e),d(e),g(e,t),q(e,"e",n),f(e),b(e,n),x(e,n),S(e),h(e,n),O(e,n),e}function o(e,t){if("EqxDrawingBoard"===$[e.type]&&t.map[M]){var n=t.map[M][e.id];n&&(e.properties.imgSrc=n,e.properties.qiniuSrc=n)}}function r(e,t){e&&t&&(e.properties=e.properties||{},"string"==typeof e.properties&&(e.properties={}),e.css=e.css||{},e.sceneId=t.meta.id)}function a(e,t,n){var i=e.css,o=$[e.type];if("translate3d(0px, 0px, 0px) rotateZ(0deg) scale(1, 1)"===i.transform&&(i.transform=""),i.letterSpacing&&!i.letterSpacing.toString().endsWith("em")&&(i.letterSpacing=i.letterSpacing+"em"),"EqxBackground"!==o){var r=["top","left","width","height","zIndex"];r.forEach(function(e){void 0===i[e]&&(_DEBUG_,"height"===e&&(["EqxInput","EqxInputEmail","EqxInputPhone"].includes(o)&&(i.height=38),"EqxSubmitButton"===o&&(i.height=36),"EqxRadio"!==o&&"EqxCheckbox"!==o||_DEBUG_,_DEBUG_))});var a={color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},s=Object.assign({},a,i);Object.assign(i,s)}if(v(e),m(i),n){var c=n.properties.longPage||486;i.bottom&&!i.top&&(i.top=c-i.bottom-i.height,delete i.bottom)}return i.top||(i.top=0),i.left||(i.left=0),e}function s(e){var t=e.type,n=e.properties;T.includes(t+"")&&(n.formRelevant=n.formRelevant||{title:{css:{height:"0",paddingBottom:"8px",textAlign:"left",color:"#333",display:"none",fontSize:"14px",lineHeight:1.4,fontWeight:"bold"},content:""},des:{css:{display:"none",height:"0",paddingBottom:"8px",textAlign:"left",color:"#666666",fontSize:"12px",lineHeight:1.4,fontWeight:"normal"},content:""}})}function c(e){var t=e.properties;"string"==typeof t&&(t={}),t.anim?(Array.isArray(t.anim)||(t.anim=[t.anim]),t.anim=t.anim.filter(function(e){var t=e||{},n=t.type,i=t.direction;return !(n==-1||null==n||void 0==n||!j[n])&&(R[n]&&!j[n][i]&&(e.direction=0),!0)})):t.anim=[],t.anim.forEach(function(e){["delay","duration"].forEach(function(t){"string"==typeof e[t]&&(e[t]=parseFloat(e[t]))})})}function u(e){var t=e.type,n=e.properties,i=n.cropSize,o=n.croptype,r=n.pageLength;"EqxBackground"===$[t]&&(i&&!o&&(n.croptype=C["固定背景模式"]),r&&(r<2&&delete n.pageLength,r<10&&(n.pageLength=486*r)))}function l(e){if("EqxImage"===$[e.type]){var t=e.properties;m(t),m(t.imgStyle||(t.imgStyle={}))}}function p(e){var t=$[e.type];"string"!=typeof e.choices||"EqxCheckbox"!==t&&"EqxDropDownList"!==t&&"EqxRadio"!==t||(e.choices=JSON.parse(e.choices)||{})}function d(e){}function f(e){"EqxDropDownList"==$[e.type]&&(e.showText&&e.placeholderText&&e.choices&&(e.choices.options.unshift({id:0,label:e.placeholderText}),e.choices.options.map(function(t){t.value=t.id,delete t.id,t.selected=!1,t.label==e.showText&&(t.selected=!0)})),delete e.showText,delete e.placeholderText,e.choices&&delete e.choices.seq)}function h(e){if("EqxPieECharts"==$[e.type]){var t=e.properties.eCharts.data.series.radius;"75"==t[1]&&(t[1]="50%")}}function g(e,t){var n=t.meta.publishTime,i=$[e.type];if("EqxText"===i||"EqxAwesomeText"===i){e.type=2,e.properties&&e.properties.dataUrl&&delete e.properties.dataUrl;var o=e.content;o&&o.length>0&&(o=o.replace(/(^\s*)|(\s*$)/g,""),L.isBadStr(o)&&(o=L.toGoodStr(o)),e.content=o),e.publishTime=n}}function m(e){"100%"===e.width&&(e.width=320),["opacity","width","height","top","bottom","left","right","zIndex","borderWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopRightRadius","borderTopLeftRadius","borderRadius"].forEach(function(t){var n=e[t];n&&(e[t]=parseFloat(n))})}function v(e){var t=e.css,n=$[e.type],i=["top","bottom","left","zIndex","width","height","lock","transform","opacity","color","backgroundColor","lineHeight","fontSize","textAlign","fontWeight","writingMode","letterSpacing","fontFamily","paddingBottom","paddingTop","letterSpacing","fontStyle","textDecoration","letterSpacing","fontStyle","borderWidth","borderStyle","borderColor","borderRadius","borderRadiusPerc","borderBottomRightRadius","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","boxShadow","boxShadowDirection","boxShadowSize"];return Object.keys(t).forEach(function(e){var o=i.indexOf(e),r=t[e];if(o===-1&&(_DEBUG_,"EqxInput"===n&&"text-align"===e&&(t.textAlign=t.textAlign||t["text-align"],delete t[e]),"border"===e)){var a=y(r);t.borderColor=a.borderColor||t.borderColor,t.borderWidth=a.borderWidth||t.borderWidth,t.borderStyle=a.borderStyle||t.borderStyle,delete t[e],_DEBUG_}}),e}function y(e){var t=e.split(" ");return{borderWidth:t[0],borderStyle:t[1],borderColor:t[2]}}function b(e,t){var n=e.properties,i=n.url,o=n.number,r="",a="";i?(!Number.isInteger(+i)&&i.startsWith("http://")&&window.location.href.startsWith("https://")&&(i=i.replace("http://","https://")),a=i,r=Number.isInteger(+i)?F.page:F.link,delete e.properties.url):o&&(a=o,r=F.phone,delete e.properties.number),a&&r&&t.properties.triggerGroup.push({eventType:D.click,sourceType:"e",sourceId:e.id,targetType:"e",targetId:e.id,targetState:r,targetContent:a})}function x(e,t){if(e.sound&&e.sound.src){var n=t.properties.triggerGroup.findIndex(function(t){return t.eventType==D.click&&t.sourceId==e.id&&t.targetState==F.play});n==-1&&t.properties.triggerGroup.push({eventType:D.click,sourceType:"e",sourceId:e.id,targetType:"e",targetId:e.id,targetState:F.play})}}function w(e,t,n,i){"pcCompute"==i?E(e,t,n):k(e,t,n)}function k(e){var t=["fontSize","height","width","left","top","paddingLeft","paddingRight","paddingTop","paddingBottom"],n=["5","501","502","503","504","6","601","c","r","z","12"],i=e.css,o=e.type,r=e.properties.imgStyle,a=void 0===r?{}:r,s=n.findIndex(function(e){return e==o})>-1;if(s){var c="none"==i.transform?"":i.transform;c+="scale("+z+")",i.transform=c,t=["left","top"],e.properties.tempScale=z}return t.forEach(function(e){i[e]=parseFloat(i[e])*z}),["4","0","o"].indexOf(o+"")>-1&&["width","height","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(e){a[e]=parseFloat(a[e])*z}),s&&(i.left+=parseFloat(i.width)*(z-1)/2,i.top+=parseFloat(i.height)*(z-1)/2),e}function E(e,t,n){var i=(n.properties.longPage,n.groups),o=void 0===i?[]:i,r=n.allGroupItems,a=void 0===r?[]:r,s=n.funGroupItem,c=void 0===s?[]:s;if(!n.allGroupItems&&o.length>0){var u=[];o.forEach(function(e){var t=e.compIds.filter(function(e){return(""+e).match(/^\d*$/)});1==e.type&&t.forEach(function(t){c.push({id:t,type:e.eleType})}),u=u.concat(t)}),n.funGroupItem=c,a=n.allGroupItems=u}var l=a.indexOf(e.id)>-1,p=c.find(function(t){return t.id==e.id}),d=e.css;return I(d,e,p,l),["3"].indexOf(""+e.type)==-1&&Object.assign(e.css,{visibility:"hidden"}),e.adaptData=!0,e}function I(e,t,n,i){var o=e.paddingLeft,r=void 0===o?0:o,a=e.paddingRight,s=void 0===a?0:a,c=e.width,u=e.left,l=e.height,p=e.top,d=e.fontSize,f=e.lineHeight,h=t.type,g=z;if(n&&(g=W),r=parseFloat(r)*g,s=parseFloat(s)*g,u=parseFloat(u)*g,["4","o","v"].indexOf(""+h)>-1){var m=_(t,n);c=m.width,l=m.height}else{c=parseFloat(c)*g}["upload","c","r","z","5","501","502","503","504","6","601","12","7","2"].indexOf(""+h)>-1&&i&&(d=parseFloat(d)*g,l=parseFloat(l)*g),!i&&t.properties.isOverlayElement&&["7","2"].indexOf(h+"")>-1&&(l=1.5*parseFloat(l),d=1.5*parseFloat(d)),["h"].indexOf(""+h)>-1&&(l=parseFloat(l)*g),Object.assign(e,{paddingLeft:r,paddingRight:s,left:u,width:c,height:l,top:p,fontSize:d,lineHeight:f})}function _(e,t){var n=e.css,i=e.properties.imgStyle,o=(n.paddingLeft,n.paddingRight,n.paddingTop,n.paddingBottom,n.left),r=n.top,a=n.width,s=n.height;i=i||{};var c=i,u=c.width,l=void 0===u?a:u,p=c.height,d=void 0===p?s:p,f=c.marginLeft,h=void 0===f?0:f,g=c.marginTop,m=void 0===g?0:g,v=z;t&&(v=W),a*=v;var y=s*v;return l=parseFloat(a)-2*parseFloat(h)*v,d=parseFloat(y)-2*parseFloat(m)*v,Object.assign(n,{width:a,height:y,left:o,top:r}),Object.assign(i,{width:l,height:d,marginTop:0,marginLeft:0}),{width:a,height:y}}function S(e){e.properties.zoom=e.properties.zoom||11}function O(e){if("upload"==e.type&&!e.properties.uploadType){Object.assign(e.properties,{uploadType:"image"});var t=parseInt(e.css.height);e.css.height=t>40?t-38:40}}function P(e){"upload"!=e.type||e.properties.uploadType||Object.assign(e.properties,{uploadType:"image"})}var $=n(64).COMP_TYPE,T=n(64).FORM_COMPS,C=n(69).BG_CROP_TYPE,q=n(63),j=n(70).ANIMATION_TYPE,R=n(70).ANIMATION_TYPE_WITH_DIR,L=n(71),A=n(23).getUrlParam,M=A("compKey"),D=n(72).RAW_EVENT,F=n(72).EQX_EVENT,J=n(69),B=J.PC_VIEW_WIDTH,N=J.EDITOR_WIDTH,z=B/N,W=1.5;e.exports={perfectComp:i,perfectJson:r,perfectCss:a,perfectAnim:c,perfectBg:u,perfectChoice:p,perfectInput:d,perfectText:g,perfectTrigger:q,perfectLink:b,perfectSound:x,perfectCssForPcRender:E,beforeAdaptorData:w,perfectFormCss:s,perfectUpload:P}},function(e,t){var n={"固定背景模式":1,"全屏背景模式":2},i=768,o=320;e.exports={BG_CROP_TYPE:n,PC_VIEW_WIDTH:i,EDITOR_WIDTH:o}},function(e,t){var n={0:["fadeIn"],1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],3:["bounceIn"],4:["zoomIn"],5:["rubberBand"],6:["wobble"],7:["rotateIn"],8:["flip"],9:["swing"],10:["fadeOut"],11:["flipOutY"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],14:["bounceOut"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],18:["zoomOut"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],20:["flipInY"],21:["tada"],22:["jello"],23:["flash"],24:["flipInX"],25:["flipOutX"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],27:["puffIn"],28:["puffOut"],29:["slideDown"],30:["slideUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],32:["hingeRight","hingeLeft"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"],particles:["particles"],typer:["typer"]},i={1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"]};e.exports={ANIMATION_TYPE:n,ANIMATION_TYPE_WITH_DIR:i}},function(e,t){function n(e){return e?e.replace(/<\s*(img|input)[^>]*\/?>/gi,"").replace(/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi,""):e}function i(e){return !!e&&(e=e.replace(/[↵\n\t\s]/g,""),/<\s*(img|input)[^>]*\/?>/gi.test(e)||/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi.test(e))}e.exports={toGoodStr:n,isBadStr:i}},function(e,t){var n={click:1,shake:2,taphold:3,slide:4,mediaCanplay:5,mediaPlaying:6,mediaEnded:7,animStart:8,animIteration:9,animEnd:10},i={show:1,hide:2,random:3,play:4,link:5,page:6,phone:7,position:8,anim:9,anchor:10},o={show:1,hide:2,"default":0},r={relative:0,"switch":1};e.exports={RAW_EVENT:n,EQX_EVENT:i,INIT_EVENT:o,FORM_RULES:r}},function(e,t,n){function i(){return'<section class="main-page"></section>'}function o(e){return'<div class="m-img" id="page'+e+'"></div>'}function r(e){return'<div class="edit_wrapper" data-scene-id="'+e+'" style="position: relative; z-index: 1"></div>'}function a(e){return'<ul id="edit_area'+e+'" class="edit_area weebly-content-area weebly-area-active"></ul>'}n(74),e.exports={section:i,pageDiv:o,editDiv:r,ul:a}},function(e,t){},function(e,t,n){var i=n(76),o=n(119),r=n(123),a=n(124),s=n(125),c=n(126),u=n(133),l=n(135),p=n(152),d=n(155),f=n(158),h=n(160),g=n(164),m=n(170),v=n(172),y=n(180),b=n(183),x=n(186),w=n(194),k=n(208),E=n(214),I=n(218),_=n(219),S=n(222),O=n(226),P=n(230),$=n(234),T=n(262),C=n(265),q=n(266),j=n(271),R=n(274),L=n(275),A=n(278),M=n(281),D=n(283),F=n(290),J=n(293),B=n(295),N=n(297),z=n(298),W=n(299),U=n(300),V=n(301),G=n(305),H=n(311),Q=n(312),X=n(313),Y=n(317),K=n(322),Z=n(328),ee=n(331),te=n(335),ne=n(337),ie=n(338),oe=n(340),re=n(342),ae=n(348),se=n(351),ce=n(353),ue=n(360),le=n(363),pe=n(366),de=n(370),fe=n(371),he=n(373),ge=n(381),me=n(384),ve=n(388),ye=n(381);e.exports={EqxReward:O,11:O,EqxRandomContent:M,10:M,EqxRedPacket:P,9:P,EqxNewText:j,7:j,EqxHotNewText:R,1:R,300:L,301:A,EqxText:T,2:T,x:T,EqxDeepShare:C,298:C,EqxReport:q,299:q,EqxBackground:S,3:S,EqxImage:l,4:l,EqxTelephone:v,8:v,EqxComment:w,b:w,EqxShape:h,h:h,EqxCount:k,i:k,EqxLink:p,l:p,EqxChart:i,t:i,EqxPieECharts:o,lpPie:o,EqxLineECharts:r,lpLine:r,EqxBarColECharts:a,lpBarCol:a,EqxBarRowECharts:s,lpBarRow:s,EqxFormTable:c,lpFormTable:c,EqxListTable:u,lpListTable:u,EqxVideo:g,v:g,EqxInteractiveVideo:m,o:m,EqxImageSlider:f,p:f,EqxMap:d,m:d,EqxRandom:x,n:x,EqxSound:y,s:y,EqxPv:b,d:b,EqxAdvertise:_,g:_,EqxDownTime:E,e:E,EqxUpTime:I,f:I,EqxUploadImages:K,upload:K,EqxScore:V,a:V,EqxFormScore:G,score:G,scoreScale:H,EqxCheckbox:Q,c:Q,EqxRadio:X,r:X,EqxDropDownList:D,z:D,EqxInput:F,5:F,501:F,EqxInputPhone:z,502:z,EqxInputEmail:N,503:N,504:F,508:B,505:W,506:U,507:J,EqxSubmitButton:Y,6:Y,601:Y,12:Z,EqxWxNickName:ne,201:ne,EqxWxProfile:ie,401:ie,EqxWxUploadImage:oe,403:oe,EqxWxSoundPlay:ee,w01:ee,EqxWxSoundRecord:te,w02:te,EqxMesssageBoard:ce,messageBoard:ce,EqxTextVote:re,k:re,EqxImgVote:ae,j:ae,EqxDrawingBoard:se,u:se,EqxPhotoWall:$,13:$,14:ue,EqxQrcode:le,23:le,EqxLpAdDefault:pe,ad01:pe,EqxLpAdConfig:de,ad02:de,EqxLpAdFlow:fe,ad03:fe,EqxLpBottomMark:he,lpBtMark:he,EqxScoreRadio:ge,scoreRadio:ge,EqxScoreMatrix:me,scoreMatrix:me,EqxScoreMatrixNps:ve,scoreMatrixNps:ve,EqxScoreCheckbox:ye,scoreCheckbox:ye}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(77);var c=n(22).$loadChart,u=n(78),l=n(71).toGoodStr,p=n(71).isBadStr,d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r.pieOptions={segmentShowStroke:!1,showTooltips:!1,scaleFontColor:"#000",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><%if(segments[i].label){%><span style="background-color:<%=segments[i].fillColor%>"></span><%=segments[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var n=0,i=0;i<t.length;i++){n+=parseFloat(t[i].value)}e.fillText(n,e.width/2-20,e.height/2,100);for(var i=0;i<t.length;i++){var o=t[i].startAngle+(t[i].endAngle-t[i].startAngle)/2,r=(t[i].outerRadius-t[i].innerRadius)/1.5+t[i].innerRadius,a=t[i].x+Math.cos(o)*r,s=t[i].y+Math.sin(o)*r;e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.options.scaleFontColor,e.font="normal 12px Helvetica",e.fillText(t[i].value,a,s)}}},r.barOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.fillStyle=this.options.scaleFontColor,e.font="normal 12px Helvetica",e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.bars.forEach(function(t){e.fillText(t.value,t.x,t.y)})})}},r.lineOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].pointColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.font=this.scale.font,e.fillStyle=this.options.scaleFontColor,e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.points.forEach(function(n,i){0===i?e.fillText(n.value,n.x+10,n.y-5):i===t.points.length-1?e.fillText(n.value,n.x-10,n.y-5):e.fillText(n.value,n.x,n.y-5)})})}},r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=$('<div class="create-chart" id="chart-'+e.id+'"></div>');this.perfectJson(e);var n=document.createElement("h5");n.setAttribute("class","chart-title"),t.append(n);var i=this.canvas=document.createElement("canvas");i.id=e.id,i.setAttribute("ctype",e.type),t.append(i);var o=document.createElement("div");o.id="legend-"+e.id,t.append(o);var r=this;return this.initedChart=new Promise(function(t){c().then(function(){r.initChart(o,i,n,e),t()})["catch"](function(e){return})}),t}},{key:"perfectJson",value:function(e){function t(e){n(e),i(e),o(e)}function n(e){e&&e.chartTitle&&(e.chartTitle=l(e.chartTitle))}function i(e){e&&e.segments&&e.segments.length&&e.segments.forEach(function(e){p(e.label)&&(e.label=l(e.label))})}function o(e){e&&e.lengends&&e.lengends.length&&e.lengends.forEach(function(t,n){p(t)&&(e.lengends[n]=l(t))})}var r=e.properties;n(r),t(r.pieChart),t(r.barChart),t(r.lineChart)}},{key:"initChart",value:function(e,t,n,i){var o,r=i.properties.chartType,a=t.getContext("2d"),s=parseFloat(i.css.width),c=parseFloat(i.css.height);$(t).css("width",s+"px"),$(t).css("height",c/2+"px"),t.width=parseInt(window.getComputedStyle(t).width),t.height=parseInt(window.getComputedStyle(t).height),"pie"===r?o=this.pieChart=this.createPieChart(a):"bar"===r?o=this.barChart=this.createBarChart(a):"line"!==r&&"curve"!==r||(o=this.lineChart=this.createLineChart(a,r)),i.properties.chartTitle&&(n.innerHTML=i.properties.chartTitle),"pie"===r&&i.properties.pieChart&&(o=this.pieChart=this.setPieChartView(i,a,o),$(t).data("pieChart",o)),"bar"===r&&i.properties.barChart&&(o=this.barChart=this.setBarChartView(i,a,o),$(t).data("barChart",o)),"line"!==r&&"curve"!==r||!i.properties.lineChart||(o=this.lineChart=this.setLineChartView(i,a,o),$(t).data("lineChart",o)),e.innerHTML=o.generateLegend();var u=i.properties.legPosition;"position-align"===u?$(e).addClass("position-align"):"position-right"===u?$(e).addClass("position-right"):"position-none"===u&&$(e).addClass("position-none")}},{key:"getChartValue",value:function(e){for(var t,n=[],i=[],o=[],r=[],a="",s="",c="",u="",l=0;l<e.segments.length;l++){t=e.segments[l],a=isNaN(t.value)||t.value<0?"":t.value,s=isNaN(t.value1)||t.value1<0?"":t.value1,c=isNaN(t.value2)||t.value2<0?"":t.value2,u=isNaN(t.value3)||t.value3<0?"":t.value3,(t.label||a||s||c||u)&&(r.push(t.label),s=a||s,n.push(s),i.push(c),o.push(u))}return{data1:n,data2:i,data3:o,xLabels:r}}},{key:"setLineChartView",value:function(e,t,n){var i=e.properties.lineChart,o=this.getChartValue(i),r=[],a=[];n.datasets.forEach(function(e){r.push(e.strokeColor),a.push(e.fillColor)});var s={labels:o.xLabels,datasets:[{label:i.lengends[0],fillColor:a[0],strokeColor:r[0],pointColor:r[0],pointStrokeColor:"#fff",data:o.data1},{label:i.lengends[1],fillColor:a[1],strokeColor:r[1],pointColor:r[1],pointStrokeColor:"#fff",data:o.data2},{label:i.lengends[2],fillColor:a[2],strokeColor:r[2],pointColor:r[2],pointStrokeColor:"#fff",data:o.data3}]},c=n.options;return i.options&&i.options.scaleFontColor&&(c.scaleFontColor=i.options.scaleFontColor),n.destroy(),n=new Chart(t).Line(s,c),n.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),n.update(),n}},{key:"setBarChartView",value:function(e,t,n){var i=n.options,o=e.properties.barChart,r=this.getChartValue(o),a={labels:r.xLabels,datasets:[{fillColor:o.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:r.data1,label:o.lengends[0]},{fillColor:o.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:r.data2,label:o.lengends[1]},{fillColor:o.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:r.data3,label:o.lengends[2]}]};return o.options&&o.options.scaleFontColor&&(i.scaleFontColor=o.options.scaleFontColor),n.destroy(),new Chart(t).Bar(a,i)}},{key:"setPieChartView",value:function(e,t,n){var i=n.options,o="#000",r=e.properties.pieChart;r.options&&r.options.scaleFontColor&&(o=r.options.scaleFontColor),i.scaleFontColor=o;var a=this.getChartValue(r),s=a.data1.map(function(e,t){return{value:e,color:r.fillColors[t],label:a.xLabels[t]}});return n.destroy(),new Chart(t).Pie(s,i)}},{key:"getPixelRatio",value:function(e){var t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}},{key:"createPieChart",value:function(e){var t=[{value:300,color:"#57c7d4",label:"1月"},{value:150,color:"#3aa99e",label:"2月"},{value:100,color:"#f2a654",label:"3月"},{value:140,color:"#f96868",label:"4月"},{value:120,color:"#926dde",label:"5月"}],n=new Chart(e).Pie(t,this.pieOptions);return n}},{key:"createBarChart",value:function(e){var t={labels:["1月","2月","3月","4月","5月"],datasets:[{fillColor:"#62a8ea",strokeColor:"rgba(0,0,0,0)",data:[60,70,80,56,40],label:"图例1"},{fillColor:"#926dde",strokeColor:"rgba(0,0,0,0)",data:[80,56,40,93,112],label:"图例2"},{fillColor:"#f2a654",strokeColor:"rgba(0,0,0,0)",data:[160,86,140,123,23],label:"图例3"}]},n=new Chart(e).Bar(t,this.barOptions);return n}},{key:"createLineChart",value:function(e,t){var n=["rgba(146,109,222,1)","rgba(87,199,212,1)","rgba(242,166,84,1)"],i=n.map(function(e){return e.replace(/[^,]+(?=\))/,"0")});this.lineOptions.bezierCurve=!1,"curve"===t&&(i=i.map(function(e){return e.replace(/[^,]+(?=\))/,"0.2")}),this.lineOptions.bezierCurve=!0);var o={labels:["1月","2月","3月","4月","5月"],datasets:[{label:"图例1",fillColor:i[0],strokeColor:n[0],pointColor:n[0],pointStrokeColor:"#fff",data:[28,24,40,19,27]},{label:"图例2",fillColor:i[1],strokeColor:n[1],pointColor:n[1],pointStrokeColor:"#fff",data:[123,132,146,118,189]},{label:"图例3",fillColor:i[2],strokeColor:n[2],pointColor:n[2],pointStrokeColor:"#fff",data:[201,232,256,215,278]}]},r=new Chart(e).Line(o,this.lineOptions);return r}},{key:"updateSize",value:function(e,n){var i=parseFloat(n.width),o=parseFloat(n.height),r=this.canvas,a=r.getContext("2d"),c=this.compJson,u=c.properties.chartType,l=null;$(r).css("width",i+"px"),$(r).css("height",o/2+"px"),r.width=parseInt(window.getComputedStyle(r).width),r.height=parseInt(window.getComputedStyle(r).height),"pie"===u?l=this.pieChart=this.createPieChart(a):"bar"===u?l=this.barChart=this.createBarChart(a):"line"!==u&&"curve"!==u||(l=this.lineChart=this.createLineChart(a,u)),"pie"===u&&c.properties.pieChart&&(l=this.pieChart=this.setPieChartView(c,a,l),$(r).data("pieChart",l)),"bar"===u&&c.properties.barChart&&(l=this.barChart=this.setBarChartView(c,a,l),$(r).data("barChart",l)),"line"!==u&&"curve"!==u||!c.properties.lineChart||(l=this.lineChart=this.setLineChartView(c,a,l),$(r).data("lineChart",l)),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}}]),t}(u);e.exports=d},function(e,t){},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function E(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:E(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(79);var u=n(21),l=n(80),p=n(44).parse,d=n(81).qiniuZoom,f=n(90),h=n(91),g=n(100),m=n(101),v=n(102),y=n(68),b=y.perfectComp,x=n(109),w=n(111),k=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.$ability={style:{self:!0,compFont:{self:!1,fontFamily:!1,fontSize:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1},compStyle:{self:!0},commonStyle:{self:!0,title:!0,display:!1,status:!1,size:!0,position:!0,rotate:!0,opacity:!0,align:!0,zIndex:!0},advanceStyle:{self:!0,border:!0,shadow:!0,sizePos:!0,paddingTop:!0,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!0,boxShadowBlur:!0,boxShadowColor:!0,boxShadowDirection:!0,lock:!0,variable:!1}},anim:!0,trigger:{self:!0,click:!0,shake:!0,taphold:!0,slide:!0,mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0,animStart:!0,animIteration:!0,animEnd:!0},sound:!0,link:!0,flexLine:"n,ne,e,se,s,sw,w,nw,r"},i.compJson=e,i.id=i.compJson.id,i.type=i.compJson.type,i.displayed=!1,"string"==typeof i.compJson.properties&&(i.compJson.properties={}),i.compJson.properties.initType=i.compJson.properties.initType||0,i.anim=i.compJson.properties.anim||[],i.eqxLayer=n,i.eqxPage=i.eqxLayer.eqxPage,i.eqxScene=i.eqxPage.eqxScene,i.parent=i.eqxPage,i}return a(t,e),s(t,[{key:"getZIndex",value:function(){return this.css.zIndex}},{key:"setZIndex",value:function(e){this.css.zIndex=e}},{key:"isGroupItem",value:function(){return !1}},{key:"getFtEditableProps",value:function(){var e=this.FtEditableProps,n=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this);return n.concat([e.color.backgroundColor,e.color.borderColor,e.color.boxShadowColor])}},{key:"isPropCanEdit",value:function(e){var t=this.FtEditableProps,n=this.compJson.css;switch(e){case t.color.backgroundColor:return n.backgroundColor;case t.color.borderColor:return n.borderWidth;case t.color.boxShadowColor:return n.boxShadowSize;case t.link.url:return this.hasTrigger("link");case t.internalLink.internalLink:return this.hasTrigger("page");case t.sound.soundSrc:return this.hasTrigger("sound");case t.telephone.number:return this.hasTrigger("tel")}return !0}},{key:"getFtValue",value:function(e){var t=this.FtEditableProps,n=this.compJson.css;switch(e){case t.content.content:return this.compJson.content;case t.color.color:return n.color;case t.color.backgroundColor:return n.backgroundColor;case t.color.borderColor:return n.borderColor;case t.color.boxShadowColor:return x.parseBoxShadow(n.boxShadow).color;case t.link.url:var i=this.hasTrigger("link");return i?this.getRawLinkUrl():"http://";case t.internalLink.internalLink:return i=this.hasTrigger("page"),i?i.targetContent:this.eqxPage.pageJson.id;case t.sound.soundSrc:return this.compJson.sound;case t.telephone.number:return i=this.hasTrigger("tel"),i?i.targetContent:0}}},{key:"hasTrigger",value:function(e){var t=this.triggerManager;switch(e){case"link":return t.findEqxItemTriggerItem(this,"click","link");case"internalLink":case"page":return t.findEqxItemTriggerItem(this,"click","page");case"sound":case"video":return t.findEqxItemTriggerItem(this,"click","play");case"tel":return t.findEqxItemTriggerItem(this,"click","phone")}}},{key:"isHasTrigger",value:function(){var e=this.triggerManager;return e.isHasEqxTrigger(this)}},{key:"updateJson",value:function(e){return e=JSON.parse(JSON.stringify(e)),b(e,this.eqxScene.sceneJson,this.eqxPage.pageJson),delete e.id,delete e.num,delete e.pageId,delete e.sceneId,delete e.type,Object.assign(this.compJson,e),this}},{key:"getAbsolutePos",value:function(){var e=this.css,t=e.width,n=e.height,i=e.top,o=e.left,r=e.transform;return isNaN(parseFloat(n))&&this.$li&&(n=parseFloat(this.$li.outerHeight())),{width:parseFloat(t),height:parseFloat(n),top:parseFloat(i),left:parseFloat(o),bottom:parseFloat(i)+parseFloat(n),transform:r}}},{key:"isFunTemplate",value:function(){var e=this.findTopGroup();return e!==this&&e.isFunTemplate()}},{key:"toJson",value:function(){return this.isBaseLayerElement||this.findRelativedItem(),this.isOuterPageRect(),JSON.parse(JSON.stringify(this.compJson))}},{key:"isEditLock",value:function(){return this.getProp("editLock")}},{key:"updateDisplayStatus",value:function(){}},{key:"getImgSrc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.eqxScene.config.disableQiniuZoom,i=t.width,o=t.height;return n?d(e):d(e,i,o)}},{key:"getName",value:function(){return this.compJson.name||"组件"}},{key:"getCss",value:function(e){var t=this.compJson.css;return e?t[e]:t}},{key:"toString",value:function(){var e=this.compJson,t=e.pageId,n=e.id,i=e.num;return"page-"+t+"-comp-"+n+"-num-"+i}},{key:"getProp",value:function(e){return this.compJson.properties[e]}},{key:"setProps",value:function(e){var t=this,n=this.compJson.properties;Object.keys(e).forEach(function(i){var o=e[i];"sound"===i?t.compJson.sound=o:null===o||void 0===o||""===o?delete n[i]:n[i]=o})}},{key:"setProp",value:function(e,t){this.setProps(i({},e,t))}},{key:"update$li",value:function(e){e&&(this.updateCss(e),this.$li&&this.$li.css(e),this.isBaseLayerElement&&this.eqxPage.EqxDragManager&&this.eqxPage.EqxDragManager.resetCompPosition())}},{key:"update$boxDiv",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e));this.updateCss(e),Object.assign(n,{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.$boxDiv.css(n),Object.keys(n).forEach(function(e){"fontSize"===e&&t.$boxDiv.css({"font-size":n[e]+"px"}).find("#"+t.compJson.id).css({"font-size":n[e]+"px"})})}},{key:"onResize",value:function(e,t,n){}},{key:"rotate",value:function(e){this.onRotate("rotateZ("+e+"deg)")}},{key:"getTransform",value:function(){return this.compJson.css.transform||"rotateZ(0)"}},{key:"updateTransform",value:function(e){this.compJson.css.transform=e,this.$item.css({transform:e})}},{key:"updateCss",value:function(e){if(e){var t=this.compJson.css;Object.keys(e).forEach(function(n){t[n]=e[n]})}}},{key:"updateProp",value:function(e,t){var n=this.compJson.properties;n[e]=t}},{key:"updateTranslated3dZ",value:function(e){this.$li&&this.$li.css(e)}},{key:"updatePos2",value:function(e,t){throw new Error("updatePos2 deprecated")}},{key:"updateSize",value:function(e,t){this.updateCss(t),this.autoSize()}},{key:"resetStyle",value:function(){var e={opacity:1,transform:"rotateZ(0deg)"};this.update$li(e);var t={fontSize:"24px",color:"#676767",backgroundColor:"",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",letterSpacing:0,borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,transform:"none",opacity:1};this.update$boxDiv(t)}},{key:"render",value:function(){if(this.rendered){return this.$li}this.$li&&(this.$li.remove(),this.$li=null);var e=this.$li=this.create$li(),t=this.eqxScene.config,n=t.disableCompEvent,i=t.disableTrigger;return n||this.addEventListeners(),i||this.addSoundEvent(),this.addAnimationClass(),this.rendered=!0,e}},{key:"updateCompForRender",value:function(){this.rendered=!1,this.eqxPage.renderEqxComp(this)}},{key:"create$li",value:function(){function e(){var e=u.GSensor,t=void 0===e?{}:e;if(t&&t.isUsed&&"edit"!==S.mode){var i="positive"===t.direction?t.distance:-t.distance;T.addClass("layer"),T.attr("data-depth",i)}}function t(e,t){if(t&&t.length){return""}var n="",i=/rotateZ\((-?\d*\.?\d*)(deg|)\)/.exec(t);return i&&i.length&&(n+=i[0]+" "),n}var n=this,i=n.eqxScene,o=n.compJson,r=o.id,a=o.num,s=o.type,c=o.css,u=o.properties,d=o.sound,f=c.zIndex,h=c.transform,g=c.display,m=c.opacity,v=c.paddingTop,y=c.paddingBottom,b=c.paddingLeft,x=c.paddingRight,w=(c.backgroundColor,c.transformOrigin),k=void 0===w?"":w,E=c.visibility,I=void 0===E?"visiblle":E,_="string"!=typeof h?"":h,S=i.config,O=t(n,_),P=n.getAbsolutePos(),T=n.$li=$(p(l,{id:r,num:a,type:s})),C=n.$boxDiv=T.find(".element-box"),q=n.$boxContentDiv=C.find(".element-box-contents"),j={};u.lock&&T.addClass("alock"),T.css({zIndex:f,transform:O,display:g,opacity:m,paddingTop:v,paddingBottom:y,paddingLeft:b,paddingRight:x,transformOrigin:k,visibility:I}).attr("abs-pos","l-"+P.left+"-t-"+P.top+"-w-"+P.width+"-h-"+P.height).attr("eqx-id",r),n._updateSize(),n.addClassToLi(T),C.css(Object.assign({},c,{width:"100%",height:"100%",transform:"none",fontFamily:"",opacity:"",marginTop:"0px",marginBottom:"0px",paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",visibility:"visible"})),s+""=="6"&&C.css({"background-color":"transparent"});var R=_.indexOf("rotateX(180deg)")>-1,L=_.indexOf("rotateY(180deg)")>-1;c.turnOver||(R&&(c.turnOver="rotateX(180deg)"),L&&(c.turnOver=(c.turnOver||"")+" rotateY(180deg)")),j.transform=c.turnOver,q.css(j),d&&d.id&&"edit"===S.mode&&n.addSoundIcon(),n.compJson.properties.isReplace&&"edit"===S.mode&&"7"==n.type&&n.addReplaceAttrIcon(),this.$contentsDiv=q,this.$context=this.create$context(),q.append(this.$context);var A=i.variableComps,M=A.texts,D=A.inputs,F=A.images,J=A.uploads;if(["501","502","503","504"].indexOf(s.toString())!==-1){D.push(n)}else{if("7"===s.toString()){var B=u["var"];B&&B.isUsed&&M.push(n)}else{if("upload"===s){J.push(n)}else{if("4"===s.toString()){var N=u["var"];N&&N.isUsed&&F.push(n)}}}}return e(),T}},{key:"removeSoundIcon",value:function(){this.$soundIcon&&(this.$soundIcon.remove(),this.$soundIcon=null)}},{key:"addSoundIcon",value:function(){this.removeSoundIcon(),this.$soundIcon=$('<div class="comp-icon eqf-bell-f"></div>'),this.$boxDiv.after(this.$soundIcon)}},{key:"destroy",value:function(){this.eleHide(),this.$li.remove(),this.$li=null}},{key:"create$context",value:function(){return $()}},{key:"addClassToLi",value:function(e){}},{key:"addEventListeners",value:function(){this.bindAfterRenderEvent(this.$li,this.compJson),this.addAnimSoundEvent(),this.addInteractiveVideoEvent()}},{key:"eleHide",value:function(){this.$li&&!this.canAddHideIcon()&&this.$li.css({display:"none"}),this.$li&&this.canAddHideIcon()&&this.addHideIcon(),this.soundAgent&&this.soundAgent.update(new f("hide")),this.anim&&this.anim.length&&this.anim.forEach(function(e){e.sound&&e.soundAgent&&e.soundAgent.update(new f("stop"))}),this.stopAnimation(),this.flux&&this.flux.playing&&this.flux.stop()}},{key:"canAddHideIcon",value:function(){return"edit"===this.eqxScene.config.mode&&this.eqxPage.trigger.compHasTrigger(this.eqxPage.pageJson.properties.triggerGroup,this.compJson.id)}},{key:"addHideIcon",value:function(){this.$hideIcon=$('<div class="comp-icon" style="z-index: 999;"><em style="font-size: 14px" class="eqf-hidden-f"></em></div>'),this.$li.append(this.$hideIcon)}},{key:"removeHideIcon",value:function(){this.$hideIcon&&(this.$hideIcon.remove(),delete this.$hideIcon)}},{key:"addAnimationClass",value:function(){this.eqxCompAnim=new w(this,{}),this.eqxCompAnim.addAnimClassify()}},{key:"stopAnimation",value:function(){this.eqxCompAnim.stopAnimation()}},{key:"startAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.maxCount;if(e.reset){var i=this,o=function(){i.stopAnimation()}}this.eqxCompAnim.startAnimation({animIndex:t,maxCount:n,callback:o})}},{key:"previewAnimation",value:function(e){e&&this.eqxCompAnim.previewAnimation(e)}},{key:"eleShow",value:function(){if(this.eqxScene.config.disableCompAnim){var e=this.compJson.properties.anim||[];e[0]&&"typer"===e[0].type&&this.$context.css({opacity:1})}else{this.startAnimation()}this.$li&&this.$li.css({display:"block"}),this.$li&&this.canAddHideIcon()&&this.removeHideIcon(),this.flux&&this.compJson.properties.autoPlay&&(this.flux.stop(),this.flux.start())}},{key:"addInteractiveVideoEvent",value:function(){var e=this;"o"===this.compJson.type&&this.compJson.src&&(this.interactiveVideoAgent=new m(this,this.eqxScene.soundManager),this.$context.on("playing",function(){e.interactiveVideoAgent.play()}),this.$context.on("pause",function(){e.interactiveVideoAgent.end()}))}},{key:"getLinkUrl",value:function(e){return/eqs\/link\?id=\d+&url=/.test(e)?e:(/^http:|^https:|^ftp:/.test(e)||(e="http://"+e),u.SERVER_1+"eqs/link?id="+this.eqxScene.meta.id+"&url="+encodeURIComponent(e))}},{key:"getRawLinkUrl",value:function(){var e=this.hasTrigger("link");if(e){var t=e.targetContent,n=/eqs\/link\?id=\d+&url=/.exec(t);if(n){var i=t.substr(n[0].length+n.index);return decodeURIComponent(i)}}}},{key:"addSoundEvent",value:function(){this.compJson.sound&&(this.soundAgent=new h(this,this.eqxScene.soundManager))}},{key:"addAnimSoundEvent",value:function(){var e=this,t=this.anim;t&&t.length&&t.forEach(function(t){t.sound&&(t.soundAgent=new g(e,t,e.eqxScene.soundManager))})}},{key:"autoAdjustSize",value:function(){return{}}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"$item",get:function(){return this.$li}},{key:"css",get:function(){return this.compJson.css}},{key:"zIndex",get:function(){return this.css.zIndex},set:function(e){return this.css.zIndex=e,e}},{key:"isEditLocked",get:function(){var e=this.compJson||{},t=e.properties;return t.editLock},set:function(e){var t=this.compJson||{},n=t.properties;n.editLock=e}},{key:"initType",get:function(){var e=this.compJson||{},t=e.properties;return t.initType},set:function(e){var t=this.compJson||{},n=t.properties;n.initType=e}}]),t}(v);e.exports=k},function(e,t){},function(e,t){e.exports='<li id="inside_#{id}" num="#{num}" ctype="#{type}" class="item item-comp" style="position: absolute;"><div class="element-box" style="width: 100%; height: 100%;"><div class="element-box-contents" style="width: 100%; height: 100%;"></div></div></li>'},function(e,t,n){function i(e,t){return new Promise(function(n,i){var o=new Image;t&&(o.crossOrigin="Anonymous"),o.onload=function(){n(this)},o.onerror=o.onabort=function(){i(new Error("download image fail"))},o.src=e})}function o(e,t,n){if(!e){return""}if("string"!=typeof e){throw new Error("Typeof src is not string")}var i=r(e);if(/^blob:/.test(e)){return e}if(e.startsWith("data:image/")){return e}if(/\.(ico|svg)$/i.test(e.split("?")[0])){return encodeURI(i)}if(!t){return encodeURI(/\?imageMogr2/.test(e)?i:i+"?imageMogr2/auto-orient")}var o=a(e,t,n);t=o.width,n=o.height;var s="imageMogr2/auto-orient/thumbnail/"+Math.round(t)+"x"+Math.round(n)+">";return i+=/\?imageMogr2/.test(e)?"|"+s:"?"+s,f()&&!/.(gif)$/.test(e)&&(i+=/\?imageMogr2/.test(i)?"/format/webp":"?imageMogr2/format/webp"),encodeURI(i)}function r(e){if(!e){return}if(/^blob:/.test(e)){return e}if(e.startsWith("data:image/")){return e}var t=window.location.protocol;if(e.startsWith("//")&&"file:"!==t&&(e=t+e),!e.startsWith("/")&&!e.startsWith("file://")){if(/^https?:\/\//.test(e)){for(var n,i=[h.BIND_USER_FILE,h.FREE_USER_FILE,h.VIP_USER_FILE],o=0;o<i.length;o++){if(n=i[o],e.startsWith(n)){e=e.replace(n,h.FILE);break}}}else{e=h.FILE+e}}return e}function a(e,t,n){/ gif /.test(e)&&window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad&&(t=0.75*t,n=0.75*n);var i=window.devicePixelRatio||1;t=g(t),n=g(n),t&&n?(t*=i,n*=i):(t*=i,n=t);var o=9999;return t>n?t>o&&(n*=1-(t-o)/t,t=o):t<n?n>o&&(t*=1-(n-o)/n,n=o):t>o&&(t=n=o),{width:t,height:n}}function s(e){var t=window.location.protocol;return e?/^http.*/.test(e)||/^blob:/.test(e)||e.startsWith("data:image/")?e:e.startsWith("//")&&"file:"==t?"http:"+e:e.startsWith("//")?e:"file:"==t&&e.startsWith("file://")?e:h.FILE+e:e}function c(e){var t=window.URL||window.webkitURL;try{var n=t.createObjectURL(e)}catch(i){return Promise.reject(new TypeError("不支持URL.createObjectURL"))}return u(n)}function u(e){return i(e).then(function(e){return{width:e.width,height:e.height,ratio:e.width/e.height}})}function l(e,t){if(e.shape){return Promise.resolve(e.shape)}var n=o(e.path,t||115),r=h.FILE+e.path,a=0;return i(r).then(function(e){return a=e.width/e.height,i(n)}).then(function(e){var t=window.devicePixelRatio||1,n=e.height/t;return{width:n*a,height:n,ratio:a}})}function p(e){var t=r(e);return t=t.replace(/\?.*$/,""),t+="?imageInfo",m({method:"GET",url:t})}function d(e){var t;return new Promise(function(n){v.parseMetaData(e,function(i){if(i&&i.exif&&1!==i.exif.get("Orientation")){var o={orientation:!0,canvas:!1};v(e,function(e){t=e.toDataURL(),n(t)},o)}else{t=v.createObjectURL(e),n(t)}},{maxMetaDataSize:262144,disableImageHead:!1})})}function f(){var e=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");return e}var h=n(21),g=Number.parseInt,m=n(20).$ajax,v=n(82);e.exports={loadImg:i,qiniuZoom:o,addPrefix:r,initEffectImgPath:s,getImgShapeByNativeFile:c,getImgShape:l,getImgShapeBySrc:u,getQiniuImgInfo:p,uploadImg:d}},function(e,t,n){e.exports=n(83),n(84),n(85),n(86),n(87),n(88),n(89)},function(e,t,n){var i;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function r(e,t,n){var i,o=document.createElement("img");return o.onerror=function(i){return r.onerror(o,i,e,t,n)},o.onload=function(i){return r.onload(o,i,e,t,n)},"string"==typeof e?(r.fetchBlob(e,function(t){t?(e=t,i=r.createObjectURL(e)):(i=e,n&&n.crossOrigin&&(o.crossOrigin=n.crossOrigin)),o.src=i},n),o):r.isInstanceOf("Blob",e)||r.isInstanceOf("File",e)?(i=o._objectURL=r.createObjectURL(e),i?(o.src=i,o):r.readFile(e,function(e){var n=e.target;n&&n.result?o.src=n.result:t&&t(e)})):void 0}function a(e,t){!e._objectURL||t&&t.noRevoke||(r.revokeObjectURL(e._objectURL),delete e._objectURL)}var s=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;r.fetchBlob=function(e,t,n){t()},r.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},r.transform=function(e,t,n,i,o){n(e,o)},r.onerror=function(e,t,n,i,o){a(e,o),i&&i.call(e,t)},r.onload=function(e,t,n,i,o){a(e,o),i&&r.transform(e,o,i,n,{})},r.createObjectURL=function(e){return !!s&&s.createObjectURL(e)},r.revokeObjectURL=function(e){return !!s&&s.revokeObjectURL(e)},r.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n]){return i[n](e),i}}return !1},i=function(){return r}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(window)},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){var t=e.transform;e.transform=function(n,i,o,r,a){t.call(e,e.scale(n,i,a),i,o,r,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var n,i,o,r,a=t.aspectRatio;if(!a){return t}n={};for(i in t){t.hasOwnProperty(i)&&(n[i]=t[i])}return n.crop=!0,o=e.naturalWidth||e.width,r=e.naturalHeight||e.height,o/r>a?(n.maxWidth=r*a,n.maxHeight=r):(n.maxWidth=o,n.maxHeight=o/a),n},e.renderImageToCanvas=function(e,t,n,i,o,r,a,s,c,u){return e.getContext("2d").drawImage(t,n,i,o,r,a,s,c,u),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,n,i){function o(){var e=Math.max((c||w)/w,(u||k)/k);e>1&&(w*=e,k*=e)}function r(){var e=Math.min((a||w)/w,(s||k)/k);e<1&&(w*=e,k*=e)}n=n||{};var a,s,c,u,l,p,d,f,h,g,m,v=document.createElement("canvas"),y=t.getContext||e.hasCanvasOption(n)&&v.getContext,b=t.naturalWidth||t.width,x=t.naturalHeight||t.height,w=b,k=x;if(y&&(n=e.getTransformedOptions(t,n,i),d=n.left||0,f=n.top||0,n.sourceWidth?(l=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(d=b-l-n.right)):l=b-d-(n.right||0),n.sourceHeight?(p=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(f=x-p-n.bottom)):p=x-f-(n.bottom||0),w=l,k=p),a=n.maxWidth,s=n.maxHeight,c=n.minWidth,u=n.minHeight,y&&a&&s&&n.crop?(w=a,k=s,m=l/p-a/s,m<0?(p=s*l/a,void 0===n.top&&void 0===n.bottom&&(f=(x-p)/2)):m>0&&(l=a*p/s,void 0===n.left&&void 0===n.right&&(d=(b-l)/2))):((n.contain||n.cover)&&(c=a=a||c,u=s=s||u),n.cover?(r(),o()):(o(),r())),y){if(h=n.pixelRatio,h>1&&(v.style.width=w+"px",v.style.height=k+"px",w*=h,k*=h,v.getContext("2d").scale(h,h)),g=n.downsamplingRatio,g>0&&g<1&&w<l&&k<p){for(;l*g>w;){v.width=l*g,v.height=p*g,e.renderImageToCanvas(v,t,d,f,l,p,0,0,v.width,v.height),d=0,f=0,l=v.width,p=v.height,t=document.createElement("canvas"),t.width=l,t.height=p,e.renderImageToCanvas(t,v,0,0,l,p,0,0,l,p)}}return v.width=w,v.height=k,e.transformCoordinates(v,n),e.renderImageToCanvas(v,t,d,f,l,p,0,0,w,k)}return t.width=w,t.height=k,t}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i,o){i=i||{},o=o||{};var r=this,a=i.maxMetaDataSize||262144,s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);!s&&e.readFile(e.blobSlice.call(t,0,a),function(t){if(t.target.error){return"",void n(o)}var a,s,c,u,l=t.target.result,p=new DataView(l),d=2,f=p.byteLength-4,h=d;if(65496===p.getUint16(0)){for(;d<f&&(a=p.getUint16(d),a>=65504&&a<=65519||65534===a);){if(s=p.getUint16(d+2)+2,d+s>p.byteLength){break}if(c=e.metaDataParsers.jpeg[a]){for(u=0;u<c.length;u+=1){c[u].call(r,p,d,s,o,i)}}d+=s,h=d}!i.disableImageHead&&h>6&&(l.slice?o.imageHead=l.slice(0,h):o.imageHead=new Uint8Array(l).subarray(0,h))}else{}n(o)},"readAsArrayBuffer")||n(o)},e.hasMetaOption=function(e){return e&&e.meta};var n=e.transform;e.transform=function(t,i,o,r,a){e.hasMetaOption(i)?e.parseMetaData(r,function(a){n.call(e,t,i,o,r,a)},i,a):n.apply(e,arguments)}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83),n(85)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"fetch" in window&&"Request" in window&&(e.fetchBlob=function(t,n,i){return e.hasMetaOption(i)?fetch(new Request(t,i)).then(function(e){return e.blob()}).then(n)["catch"](function(e){n()}):void n()})})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83),n(85)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,o,r;if(!n||t+n>e.byteLength){return""}for(i=[],o=0;o<n;o+=1){r=e.getUint8(t+o),i.push((r<16?"0":"")+r.toString(16))}return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,o,r,a){var s,c,u,l,p,d,f=e.exifTagTypes[o];if(!f){return""}if(s=f.size*r,c=s>4?n+t.getUint32(i+8,a):i+8,c+s>t.byteLength){return""}if(1===r){return f.getValue(t,c,a)}for(u=[],l=0;l<r;l+=1){u[l]=f.getValue(t,c+l*f.size,a)}if(f.ascii){for(p="",l=0;l<u.length&&(d=u[l],"\0"!==d);l+=1){p+=d}return p}return u},e.parseExifTag=function(t,n,i,o,r){var a=t.getUint16(i,o);r.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,o),t.getUint32(i+4,o),o)},e.parseExifTags=function(e,t,n,i,o){var r,a,s;if(n+6>e.byteLength){return""}if(r=e.getUint16(n,i),a=n+2+12*r,a+4>e.byteLength){return""}for(s=0;s<r;s+=1){this.parseExifTag(e,t,n+2+12*s,i,o)}return e.getUint32(a,i)},e.parseExifData=function(t,n,i,o,r){if(!r.disableExif){var a,s,c,u=n+10;if(1165519206===t.getUint32(n+4)){if(u+8>t.byteLength){return""}if(0!==t.getUint16(n+8)){return""}switch(t.getUint16(u)){case 18761:a=!0;break;case 19789:a=!1;break;default:return}if(42!==t.getUint16(u+2,a)){return}s=t.getUint32(u+4,a),o.exif=new e.ExifMap,s=e.parseExifTags(t,u,u+s,a,o),s&&!r.disableExifThumbnail&&(c={exif:{}},s=e.parseExifTags(t,u,u+s,a,c),c.exif[513]&&(o.exif.Thumbnail=e.getExifThumbnail(t,u+c.exif[513],c.exif[514]))),o.exif[34665]&&!r.disableExifSub&&e.parseExifTags(t,u,u+o.exif[34665],a,o),o.exif[34853]&&!r.disableExifGps&&e.parseExifTags(t,u,u+o.exif[34853],a,o)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83),n(87)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t){return}return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t){return}return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t){return}return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n){n.hasOwnProperty(t)&&(i[n[t]]=t)}}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this){this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)))}return n}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){o=[n(83),n(84),n(85)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){var t=e.hasCanvasOption,n=e.hasMetaOption,i=e.transformCoordinates,o=e.getTransformedOptions;e.hasCanvasOption=function(n){return !!n.orientation||t.call(e,n)},e.hasMetaOption=function(t){return t&&t.orientation===!0||n.call(e,t)},e.transformCoordinates=function(t,n){i.call(e,t,n);var o=t.getContext("2d"),r=t.width,a=t.height,s=t.style.width,c=t.style.height,u=n.orientation;if(u&&!(u>8)){switch(u>4&&(t.width=a,t.height=r,t.style.width=c,t.style.height=s),u){case 2:o.translate(r,0),o.scale(-1,1);break;case 3:o.translate(r,a),o.rotate(Math.PI);break;case 4:o.translate(0,a),o.scale(1,-1);break;case 5:o.rotate(0.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(0.5*Math.PI),o.translate(0,-a);break;case 7:o.rotate(0.5*Math.PI),o.translate(r,-a),o.scale(-1,1);break;case 8:o.rotate(-0.5*Math.PI),o.translate(-r,0)}}},e.getTransformedOptions=function(t,n,i){var r,a,s=o.call(e,t,n),c=s.orientation;if(c===!0&&i&&i.exif&&(c=i.exif.get("Orientation")),!c||c>8||1===c){return s}r={};for(a in s){s.hasOwnProperty(a)&&(r[a]=s[a])}switch(r.orientation=c,c){case 2:r.left=s.right,r.right=s.left;break;case 3:r.left=s.right,r.top=s.bottom,r.right=s.left,r.bottom=s.top;break;case 4:r.top=s.bottom,r.bottom=s.top;break;case 5:r.left=s.top,r.top=s.left,r.right=s.bottom,r.bottom=s.right;break;case 6:r.left=s.top,r.top=s.right,r.right=s.bottom,r.bottom=s.left;break;case 7:r.left=s.bottom,r.top=s.right,r.right=s.top,r.bottom=s.left;break;case 8:r.left=s.bottom,r.top=s.left,r.right=s.top,r.bottom=s.right}return r.orientation>4&&(r.maxWidth=s.maxHeight,r.maxHeight=s.maxWidth,r.minWidth=s.minHeight,r.minHeight=s.minWidth,r.sourceWidth=s.sourceHeight,r.sourceHeight=s.sourceWidth),r}})},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,o),this.type=e,this.data=t};e.exports=i},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(23).resolveUrl,c=n(21),u=n(92),l=n(24).mobilecheck,p=n(24).isWeixin,d=n(93).getWxJSSDK,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.soundJson=r.master.compJson.sound,r.type=1,r.init(),r.register(),p()&&(r.wxJssdk=d()),r}return r(t,e),a(t,[{key:"init",value:function(){this.audio=new window.Audio,this.audio.src=s(c.FILE,this.soundJson.src)}},{key:"update",value:function(e){switch(e.type){case"stop":case"hide":this.stopPlay();break;case"down":this.audio.volume=0.1;break;case"restore":this.audio.volume=1;break;case"reset":this.audio.currentTime=0}}},{key:"addEventListeners",value:function(){var e=this,t=l()?"touchend":"click";this.master.$li.on(t,function(){return e.audio.paused?e.startPlay():e.stopPlay()}),$(this.audio).on("ended",function(){return e.manager.onEnd(e)})}},{key:"startPlay",value:function(){if(this.audio.paused){var e=this;p()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){e.audio.play()}})}):this.audio.play(),this.manager.onPlay(this)}}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.manager.onEnd(this))}}]),t}(u);e.exports=f},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.master=t,this.manager=i}return i(e,[{key:"register",value:function(){this.manager.add(this)}},{key:"deregister",value:function(){this.manager.remove(this)}},{key:"update",value:function(e){}}]),e}();e.exports=o},function(e,t,n){function i(e,t){if(v="",y=e.obj.title||e.obj.name||"未命名长页面",b=I.FILE+e.obj.cover,A=e.obj.description||"长页面 - 快速制作，高效推广。",k=e.obj.property||{},x=e.obj.dsAppId||"",w=t,k.shareDes&&"string"==typeof k.shareDes){var n=k.shareDes;k.shareDes={description:{type:"position",description:n}}}if(!k.shareDes){return u()}k.shareDes.avatar&&(b=M.headimgurl);var i=e.obj.id;o(k.shareDes,i).then(function(){return u()})["catch"](function(e){return})}function o(e,t){var n=function(){return Promise.resolve(null)},i=function(){return Promise.resolve(null)};return e.title&&e.title.type&&(n=function(){return a(e.title,t).then(function(e){y=e})}),e.description&&e.description.type&&(i=function(){return a(e.description,t).then(function(e){A=e})}),n().then(function(){i()})}function r(e){return void 0!==E?Promise.resolve(E):T(e).then(function(e){return E=e||""})["catch"](function(){return E=""})}function a(e,t){var n="";return new Promise(function(i,o){switch(e.type){case"myself":n+="我是"+M.nickname+","+e.description,i(n);break;case"position":r(t).then(function(t){n+="我是第"+t+"位"+e.description,i(n)});break;case"selfAndPosition":r(t).then(function(t){n+="我是"+M.nickname+", 我是第"+t+"位 "+e.description,i(n)})}})}function s(){v=Date.now()+""+Math.floor(100000*Math.random()),w=O("userKey",v,w),u()}function c(e,t){w=e,w=O("compKey",t,w),u()}function u(){function e(){var e=R();e&&e.shareCover?q():window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad&&L(window.scene.id)}g().then(function(){var t=P("toPage",w),n=x?DS.linkChange(t):t;window._tracker_api_&&(n=window._tracker_api_.getShareUrl(n)),wx.onMenuShareTimeline({title:y,link:n,desc:A,imgUrl:b,success:function(){x&&DS.sendRepost("appMessage"),window._tracker_api_.share("timeline"),l(),e()},cancel:function(){}}),wx.onMenuShareAppMessage({title:y,desc:A,link:n,imgUrl:b,success:function(){x&&DS.sendRepost("appMessage"),window._tracker_api_.share("message"),l(t),e()},cancel:function(){}}),wx.onMenuShareQQ({title:y,desc:A,link:n,imgUrl:b,success:function(){window._tracker_api_.share("qq"),e()},cancel:function(){}}),wx.onMenuShareWeibo({title:y,desc:A,link:n,imgUrl:b,success:function(){window._tracker_api_.share("weibo"),e()},cancel:function(){}}),wx.onMenuShareQZone({title:y,desc:A,link:n,imgUrl:b,success:function(){window._tracker_api_.share("qzone")},cancel:function(){}})})}function l(e){if(v){var t={userKey:v};M&&M.headimgurl&&(D.shareUserHeader=M.headimgurl),M&&M.nickname&&(D.shareUserName=M.nickname),t.data=JSON.stringify(D),$(t)["catch"](function(e){C(JSON.stringify(e))})}}function p(e){Object.assign(M,e)}function d(){return M}function f(e){D=e}function h(e,t){D[e]=t}function g(){return j.initWx()}function m(e,t){var n=window.location.href.split("?")[0],i=S("userKey",window.location.href),o=S("toPage",window.location.href),r=S("compKey",window.location.href),a=e||_;i&&(n=O("userKey",i,n)),o&&(n=O("toPage",o,n)),r&&(n=O("compKey",r,n));var s=I.LONG_PAGE_PREVIEW+"lp/wx/user/info";e&&(s=O("userId",t,s)),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+encodeURIComponent(s)+"&response_type=code&scope=snsapi_userinfo&state="+encodeURIComponent(n)+"#wechat_redirect"}var v,y,b,x,w,k,E,I=n(21),_=n(27).APP_ID,S=n(23).getUrlParam,O=n(23).addUrlParam,P=n(23).removeUrlParam,$=n(94).$postWxComp,T=n(95).$getPvCount,C=n(96).popUpModal,q=n(96).popShareModal,j=n(19),R=n(47).getSharePopConfig,L=n(98).popAdShareModal,A="",M={},D={};e.exports={initWeChat:i,shareWidthSDK:u,setWeChatUser:p,getWeChatUser:d,setWxCompData:f,saveWxCompData:h,generateUserKey:s,getWxJSSDK:g,hrefToWxAuth:m,addCompKey:c}},function(e,t,n){function i(e){return s({type:"POST",url:c.LONG_PAGE_PREVIEW+"lp/wx/component",data:e})}function o(e){var t={};return/ywx\.cn/.test(u(window.location.href))&&(t.userId=e),s({type:"GET",url:c.LONG_PAGE_PREVIEW+"lp/wx/user/cache",data:t})}function r(){var e=u(window.location.href),t="lp/wxticket?time="+Date.now(),n=[/ywx\.com/,/eqh5\.cn/,/ywx\.cc/,/eqshow\.cn/,/yqxiu\.cn/];return n.some(function(t){return t.test(e)})||(t+=/ywx\.cn/.test(e)?"&domain=ywx.cn":"&domain="+e)}function a(e){return s({type:"GET",url:c.LONG_PAGE_PREVIEW+"lp/wx/wechat/appid/get",data:{userId:e}}).then(function(e){return e.obj})}var s=n(20).ajax,c=n(21),u=n(23).getUrlHost;e.exports={$postWxComp:i,$getUserWxInfo:o,$getWxTicket:r,$getWxAppId:a}},function(e,t,n){function i(e){return r({type:"GET",url:a.SERVER_1+"eqs/s/scene/pv?sceneId="+e})}function o(e){var t=e.id,n=e.param,i=e.ad,o=a.SERVER_1+"eqs/pv/"+t;return n&&(o+="?1=1",o+=/\?.*/.test(n)?"&"+n.substring(1):/&.*/.test(n)?n:"&"+n),o+=(/\?/.test(o)?"&":"?")+"ad="+i,r({type:"GET",url:o})}var r=n(20).ajax,a=n(21);e.exports={$getPvCount:i,$postPVCount:o}},function(e,t,n){function i(e,t){var n=$('<div class="pop-up-box">\n                        <div class="pop-up-form">\n                            <div class="pop-up-content">\n                                <span class="pop-up-msg">'+e+'</span>\n                            </div>\n                            <div class="pop-up-btn"><a class="pop-up-btn-close">关闭</a></div>\n                        </div>\n                    </div>');t.$section.parent().prepend(n),(!p()||t&&"pc"==t.previewMode)&&$(".pop-up-box").css({position:"fixed"});var i=$(".pop-up-btn");i.on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}function o(e,t,n){return new Promise(function(i,o){var r=$('<div class="pop-up-box comments-board">\n                        <div class="pop-comment-form">\n                            <div class="pop-comment-content">\n                                <span class="pop-comment-msg">'+e+'</span>\n                            </div>\n                            <div class="pop-comment-btn '+t+'">\n                                <a class="pop-comment-btn-close">取消</a>\n                                <a class="pop-comment-btn-sure">确定</a>\n                              </div>\n                        </div>\n                    </div>');n.$section.parent().prepend(r),(!p()||n&&"pc"==n.previewMode)&&$(".pop-up-box").css({position:"fixed"});var a=$(".pop-comment-btn-close"),s=$(".pop-comment-btn-sure");a.on("click",function(){r.animate({opacity:0},{duration:300,complete:function(e){return r.remove()}}),o("close")}),s.on("click",function(){r.animate({opacity:0},{duration:300,complete:function(e){return r.remove()}}),i("sure")})})}function r(){var e=c(),t=l(e.coverLink),n=u.FILE+e.shareCover,i=$('<div class="pop-up-box pop-up-share-modal">\n                        <div class="pop-share-form">\n                            <div class="pop-share-content">\n                                <a href="'+t+'">\n                                 <img style="width:250px;height:360px;" src="'+n+'">\n                                </a>\n                            </div>\n                            <div class="pop-share-btn"><span class="eqf-no-l"></span></div>\n                        </div>\n                    </div>');$(".main-page.z-current").not(".editor-section").parent().prepend(i),p()||$(".pop-up-box").css({position:"fixed"});var o=$(".pop-share-btn");o.on("click",function(){i.animate({opacity:0},{duration:300,complete:function(e){return i.remove()}})})}function a(e,t){var n=u.FILE+e.popUpPic,i=e.adLink,o=$('<div class="pop-up-box">\n                        <div class="pop-ad-form">\n                            <a href="'+i+'">\n                                <div class="pop-ad-content">\n                                      <img src="'+n+'" style="max-width: 250px;max-height: 360px;">\n                                </div>\n                            </a>\n                            <div class="pop-ad-btn"><span class="eqf-no-l"></span></div>\n                        </div>\n                    </div>');t.$section.parent().prepend(o),(!p()||t&&"pc"==t.previewMode)&&$(".pop-up-box").css({position:"fixed"});var r=$(".pop-ad-btn");r.on("click",function(){o.animate({opacity:0},{duration:300,complete:function(e){return o.remove()}})})}function s(e){var t=$('<div class="pop-up-box msg-success-box">\n                          <div class="msg-success-form">\n                            <div class="msg-success-content">\n                                <span class="eqf-yes" style="color: #FFFFFF;font-size:30px;"></span>\n                                <div style="color: #FFFFFF;margin-top: 8px;">已留言</div>\n                            </div>\n                          </div>\n                       </div>');e.$section.parent().prepend(t),(!p()||e&&"pc"==e.previewMode)&&$(".msg-success-box").css({position:"fixed"}),$(".msg-success-box").fadeOut(2000,function(){$(".msg-success-box").remove()})}n(97);var c=n(47).getSharePopConfig,u=n(21),l=n(23).addProtocol,p=n(24).isPc;e.exports={popUpModal:i,popShareModal:r,adPopUpModal:a,popMsgModal:o,popMsgSuccessModal:s}},function(e,t){},function(e,t,n){function i(e){r(e).then(function(e){if(e.success){var t=e.list[0];a(118427790).then(function(e){if(e.success){var n=e.list[0].adCode;o(t,n)}})}})}function o(e,t){var n=$('<div class="ad-share-modal">\n        <div class="ad-share-box ad-share-slideInDown">\n            <div class="ad-share-content">\n                <div class="ad-share-recommend">\n                    <a style="display: block;overflow: hidden;color: #000;" id="recommendSceneUrl" target="_blank">\n                        <img src="" width="100" height="100" class="recommend-cover" id="recommendSceneCover">\n                        <span class="recommend-title" id="recommendTitle"></span>\n                    </a>\n                </div>\n                <div class="ad-share-container" id="ad-share-container">\n                    <div id="share_modal_ad" style="width: 100%;height: 100%;">\n                    </div>\n                </div>\n                <div class="ad-share-more">\n</div>\n            </div>\n            <div class="ad-share-close-btn"></div>\n        </div>\n    </div>');$(".main-page.z-current").not(".editor-section").prepend(n),$("#recommendSceneCover")[0].src=u.FILE+e.cover,$("#recommendSceneUrl")[0].href=u.VIEW_HOST+"s/"+e.code,$("#recommendTitle").text(e.name),$("#ad-share-container").append(t);var i=$(".ad-share-close-btn");i.on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}function r(e){var t=u.SERVER_1+"adview/scene/recommend?sceneId="+e,n=t.replace(/http:\/\//g,window.location.protocol+"//");return c({type:"GET",url:n})}function a(e){var t=u.SERVER_1+"adview/scenePage/find?sceneId="+e,n=t.replace(/http:\/\//g,window.location.protocol+"//");return c({type:"GET",url:n})}function s(e){l(e).then(function(t){if(t.success){var n=t.list[0].adPositionId;1===n&&i(e)}})}n(99);var c=n(20).$ajax,u=n(21),l=n(49).getSceneAdTpl;e.exports={adSharePop:i,popAdShareModal:s}},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(92),c=n(23).resolveUrl,u=n(21),l=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.manager=r,a.soundJson=n.sound,a.type=2,a.init(),a.addEventListeners(),a.register(),a}return r(t,e),a(t,[{key:"init",value:function(){this.audio=new Audio,this.audio.src=c(u.FILE,this.soundJson.path),this.audio.loop=!0}},{key:"startPlay",value:function(){this.audio.paused&&(this.audio.play(),this.manager.onPlay(this))}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0,this.manager.onEnd(this))}},{key:"addEventListeners",value:function(){var e=this;$(e.audio).on("AnimSound.start",function(t,n){e.startPlay()}).on("AnimSound.end",function(t,n){e.stopPlay()})}},{key:"update",value:function(e){switch(e.type){case"stop":this.stopPlay();break;case"play":this.startPlay();break;case"down":this.audio.volume=0.1;break;case"restore":this.audio.volume=1}}}]),t}(s);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(92),c=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.compJson=r.master.compJson,r.type=5,r.addEventListeners(),r.register(),r}return r(t,e),a(t,[{key:"addEventListeners",value:function(){var e=this;this.master.$context.on("ended",function(){e.end()})}},{key:"update",value:function(e){switch(e.type){case"stop":this.end();break;case"play":this.play()}}},{key:"play",value:function(){this.master.$context[0].play(),this.manager.onPlay(this)}},{key:"end",value:function(){this.master.$context[0].pause(),this.manager.onEnd(this)}}]),t}(s);e.exports=c},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(103),a=n(105),s=n(106),c=n(107),u=c.FtEditableProps,l=n(108),p=function(){function e(){i(this,e),this.eqxLayer=null,this.parent=null,this.group=null,this.eventMap={},this.FtEditableProps=u}return o(e,[{key:"isOrphan",value:function(){return !this.eqxLayer||!this.eqxLayer.eqxItems.includes(this)}},{key:"destroy",value:function(){this.eqxLayer=null,this.parent=null,this.group=null}},{key:"isDirectItem",value:function(){return this.eqxLayer.getDirectItems().includes(this)}},{key:"isEqxLayer",value:function(){return !1}},{key:"updateTop",value:function(e){this.updateCss({top:this.css.top+e}),this.autoSize()}},{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(e){return 0}},{key:"filterEditableProps",value:function(e){var t=this;return(e||this.getFtEditableProps()).filter(function(e){return t.isPropCanEdit(e)})}},{key:"isPropCanEdit",value:function(){return !1}},{key:"toJson",value:function(){}},{key:"isFunTemplate",value:function(){return !1}},{key:"hasFtRules",value:function(){var e=this.eqxPage.ftManager.getEqxItemRelativeFtRules(this);return e.length>0}},{key:"updateSize",value:function(){}},{key:"getRotate",value:function(){var e=this.getTransform(),t=r.parseTransform(e);return t.rotate}},{key:"getTransform",value:function(){}},{key:"updateTransform",value:function(e){}},{key:"autoZIndex",value:function(){return this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"getZIndex",value:function(){}},{key:"onResizeStart",value:function(){return this.oldAbsolutePosition=this.getAbsolutePos(),this.oldAbsolutePosition}},{key:"onResize",value:function(){}},{key:"onResizeEnd",value:function(){this.oldAbsolutePosition=null}},{key:"onRotateStart",value:function(){return this.oldTransform=this.getTransform(),this.oldTransform}},{key:"onRotate",value:function(e,t){isNaN(e)||(e="rotateZ("+e+"deg)"),this.oldTransform||this.onRotateStart(),this.updateTransform(e),this.autoSize(t)}},{key:"onRotateEnd",value:function(){this.oldTransform=null}},{key:"updateLeftTop",value:function(e,t){var n=this.oldPos,i=n.left,o=n.top,r=o+t;this.updateCss({left:i+e,top:r})}},{key:"onMoveBefore",value:function(){this.oldPos=JSON.parse(JSON.stringify(this.getAbsolutePos()))}},{key:"isBaseLayerElements",value:function(){this._isBaseLayerElement=!this.compJson.properties.isOverlayElement}},{key:"canMove",value:function(){return !this.isEditLocked}},{key:"onMove",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.oldPos||this.onMoveBefore(),this.isBaseLayerElement?(e=0,this.updateLeftTop(e,t),this.autoSize()):(this.updateLeftTop(e,t),this.autoSize()))}},{key:"onMoveEnd",value:function(){this.oldPos=null}},{key:"moveToX",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(e,void 0,t)}},{key:"moveToY",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(void 0,e,t)}},{key:"moveTo",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};void 0!==e&&(i.left=e),void 0!==t&&(i.top=t),this.updateCss(i),n&&this.autoSize()}},{key:"instantMove",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.onMoveBefore(),this.onMove(e,t,n),this.onMoveEnd()}},{key:"instantRotate",value:function(e){this.onResizeStart(),this.onRotate(e),this.onRotateEnd()}},{key:"update$item",value:function(e){this.updateCss(e),this._updateSize()}},{key:"updateCss",value:function(){}},{key:"isSubItemOf",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}return n.some(function(t){for(var n=e;n.group;){if(n.group===t){return !0}n=n.group}return !1})}},{key:"findTopGroup",value:function(){for(var e=this;e.group;){e=e.group}return e}},{key:"autoSizeTopDown",value:function(){this._updateSize(),this.fire("autoSizeTopDown.after")}},{key:"_updateSize",value:function(){return this.$item?(this.$item.css(this.getRelativePos(!0)),this):null}},{key:"getRelativePos",value:function(){var e=this.getAbsolutePos(!0),t=e.width,n=e.height,i=e.top,o=e.left,s=e.transform,c=this.group;if(c){var u=c.getAbsolutePos(),l=u.left,p=u.top,d=u.width,f=u.height,h=u.transform,g=r.parseTransform(h).rotate,m=r.parseTransform(s).rotate;if(g){var v=new a(l,p,d,f),y=v.center(),b=new a(o,i,t,n),x=b.center(),w=x.pointRotate2Point(y,-g),k=w.x-x.x,E=w.y-x.y;b.move(k,E),o=b.p1.x,i=b.p1.y}o-=l,i-=p,s="rotate("+(m-g)+"deg)"}return{width:t,height:n,top:i,left:o,transform:s}}},{key:"updateMarker",value:function(){if(!this.$marker){var e=-25,t=-20,n="yellow";this.isGroupItem()&&(e=-40,t=-30),this.$marker=$('<div class="item-marker"></div>').css({width:70,fontSize:11,position:"absolute",top:t,left:e,background:n}),this.$item.append(this.$marker)}var i=this.getAbsolutePos(),o=(/\d+/.exec(this.getTransform())||[])[0]||0;this.$marker.html("("+parseInt(i.left)+","+parseInt(i.top)+") "+o+"°<br>w"+parseInt(i.width)+" h"+parseInt(i.height))}},{key:"getBoundingRect",value:function(){var e=this.getAbsolutePos(),t=e.width,n=e.height,i=e.top,o=e.left,s=e.transform,c=r.parseTransform(s).rotate,u=!this.isGroupItem()&&this.compJson.properties.tempScale||1;return new a(o,i,t*u,n*u).rotate(c).getBoundingRect()}},{key:"autoSize",value:function(e){this.findTopGroup().autoSizeTopDown(e)}},{key:"on",value:function(e,t){return this.eventMap[e]?this.eventMap[e].push(t):this.eventMap[e]=[t],this}},{key:"off",value:function(e){if("string"==typeof e){this.eventMap[e].length=[]}else{for(var t=Object.values(this.eventMap),n=0;n<t.length;n++){var i=t[n],o=i.indexOf(e);o>-1&&i.splice(o,1)}}return this}},{key:"fire",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}(this.eventMap[e]||[]).forEach(function(e){return e.apply(void 0,n)})}},{key:"isSiblingOf",value:function(e){return this.parent&&e.parent&&this.parent===e.parent}},{key:"sameLayer",value:function(e){return this.eqxLayer===e.eqxLayer}},{key:"containsPoint",value:function(e,t){var n=this.getAbsolutePos(),i=n.width,o=n.height,c=n.top,u=n.left,l=n.transform,p=r.parseTransform(l).rotate,d=new s(u,c),f=new s(u+i,c+o),h=new a(d,f).rotate(p);return h.containsPoint(new s(e,t))}},{key:"centerInRect",value:function(e){var t=this.getAbsolutePos(),n=t.left+t.width/2,i=t.top+t.height/2,o=e.p1;return n>o.x&&n<o.x+e.width&&i>o.y&&i<o.y+e.height}},{key:"getAbsolutePos",value:function(){}},{key:"isGroupItem",value:function(){}},{key:"scrollIntoView",value:function(){this.$li&&this.$li[0].scrollIntoViewIfNeeded()}},{key:"setTopIndex",value:function(){}},{key:"addMoveClass",value:function(){this.$li&&this.$li.addClass("autoMove")}},{key:"addCurClass",value:function(){this.$li&&this.$li.addClass("cur")}},{key:"removeDragClass",value:function(){this.$li&&this.$li.removeClass("cur")}},{key:"removeAutoClass",value:function(){this.$li&&this.$li.removeClass("autoMove")}},{key:"getArrIndex",value:function(){return this.compJson.arrIndex||this.getZIndex()}},{key:"setArrIndex",value:function(e){this.compJson.arrIndex=e}},{key:"findRelativedItem",value:function(){if(this.compJson.properties.lock){return void (this.compJson.properties.relativeItem&&delete this.compJson.properties.relativeItem)}for(var e,t=this.eqxLayer._getCompsFromTree(this.eqxPage.baseElementQueue,!0),n=this.getBoundingRect(),i=n.center(),o=t.length,r=0;r<=o-1;){var a=t[r],s=a.getBoundingRect(),c=s.center();if(Math.abs(c.y-i.y)<(s.height+n.height)/2&&Math.abs(c.x-i.x)<(s.width+n.width)/2&&(e=!0,this.compJson.properties.relativeItem={id:a.id,diff:parseFloat(this.compJson.css.top)-parseFloat(a.compJson.css.top)},a.type+""!="7")){return}r++}!e&&delete this.compJson.properties.relativeItem}},{key:"getRotateDiff",value:function(){var e=this.getAbsolutePos(),t=e.top,n=e.left,i=e.width,o=e.transform,s=e.height,c=r.parseTransform(o).rotate,u=new a(n,t,i,s).rotate(c);return u.minY=Math.min(u.p1.y,u.p2.y),t-u.minY}},{key:"isOuterPageRect",value:function(){var e=this.getBoundingRect(),t=e.bottom,n=(e.height,this.eqxPage.pageJson.properties.longPage);if(t>n){var i=t-n;this.compJson.properties.extraHeight=i}else{delete this.compJson.properties.extraHeight}}},{key:"getExtraHeight",value:function(){return this.compJson.properties.extraHeight||0}},{key:"ft",get:function(){return this._ft||(this._ft=new l(this)),this._ft}},{key:"triggerManager",get:function(){return this.eqxLayer.eqxPage.triggerManager}},{key:"ftManager",get:function(){return this.eqxLayer.eqxPage.ftManager}},{key:"isEditLocked",get:function(){},set:function(e){}},{key:"isBaseLayerElement",get:function(){return void 0===this._isBaseLayerElement&&this.isBaseLayerElements(),this._isBaseLayerElement}}],[{key:"findTopItems",value:function(e){var t=[];return e.forEach(function(e){var n=e.findTopGroup();t.includes(n)||t.push(n)}),t}},{key:"calItemsBoundingRect",value:function(e){for(var t=e[0],n=t.getBoundingRect(),i=n.width,o=n.height,r=n.left,a=n.top,s=1;s<e.length;s++){t=e[s];var c=t.getBoundingRect();c.left<r&&(i+=r-c.left,r=c.left),c.top<a&&(o+=a-c.top,a=c.top),i=Math.max(c.left+c.width-r,i),o=Math.max(c.height+c.top-a,o)}return{width:i,height:o,left:r,top:a}}}]),e}();e.exports=p},function(e,t,n){function i(e){return r(e,y)}function o(e){return r(e,parseFloat)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];e+="";var n={rotate:0,rotateY:0,rotateX:0,scale:{x:1,y:1},translate3d:{x:0,y:0,z:0}};return e=e.replace(f,function(e,i){n.rotate=t(i)}),e=e.replace(g,function(e,i){n.rotateY=t(i)}),e=e.replace(h,function(e,i){n.rotateX=t(i)}),e=e.replace(m,function(e,i,o){n.scale={x:t(i),y:t(o)}}),e.replace(v,function(e,i,o,r){n.translate3d={x:t(i),y:t(o),z:t(r)}}),n}function a(e){return void 0!==e.rotate?"rotateZ("+e.rotate+"deg)":""}function s(e){if(e){var t=e.x,n=void 0===t?1:t,i=e.y,o=void 0===i?1:i;return"scale("+n+", "+o+")"}return""}function c(e){if(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,r=e.z,a=void 0===r?0:r;return"translate3d("+n+"px, "+o+"px, "+a+"px)"}return""}function u(e){if(e){var t=e.match(/translate3d\((.*?)\)/),n=t&&t[1].split(","),i=t&&parseInt(n[2]);return i}return""}function l(e){var t=[],n=e.translate3d;return !n||0===n.x&&0===n.y&&0===n.z||t.push(c(e.translate3d)),null!==e.rotate&&void 0!==e.rotate&&t.push(a(e)),n=e.scale,!n||1===n.x&&1===n.y||t.push(s(e.scale)),p(t.join(" "))}function p(e){return e.trim().replace(/\s{2,}/," ")}function d(e,t){var n=i(e),o=Object.assign({},n,t);return l(o)}var f=/rotateZ\((-?\d*\.?\d*)(deg|)\)/,h=/rotateX\((-?\d*\.?\d*)(deg|)\)/,g=/rotateY\((-?\d*\.?\d*)(deg|)\)/,m=/scale\((-?\d+(?:\.\d+)?),\s?(\d+(?:\.\d+)?)\)/,v=/translate3d\((-?\d*(?:px)?),\s?(-?\d*(?:px)?),\s?(-?\d*(?:px)?)\)/,y=n(104).toInt;e.exports={scaleReg:m,translate3dReg:v,parseTransform:i,getRotateStr:a,getScaleStr:s,getTranslate3dStr:c,getTransformStr:l,trimTransformStr:p,updateTransformStr:d,parseTransformInFloat:o,getTranslateZStr:u}},function(e,t){function n(e,t){return"number"!=typeof e&&(e=parseFloat(e)),parseFloat(e.toFixed(t))}function i(e){return n(e,0)}function o(e){return n(e,1)}function r(e){return n(e,2)}function a(e){return e.toFixed(2)}function s(e){return(!e||e<0)&&(e=0),e<1024?e+" KB":(e/=1024,e<1024?a(e)+" MB":(e/=1024,e<1024?a(e)+" GB":(e/=1024,a(e)+" TB")))}e.exports={toFixed:n,toFixed1:o,toFixed2:r,toInt:i,size:s}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(106),s=function(){function e(){i(this,e);var t=null,n=null;switch(arguments.length){case 1:var r=arguments[0];"object"===("undefined"==typeof r?"undefined":o(r))&&(r.p1&&r.p2?(t=new a(r.p1),n=new a(r.p2)):void 0!==r.left&&null!==r.left&&(t=new a(r.left,r.top),n=new a(r.left+r.width,r.top+r.height)));break;case 2:t=new a(arguments[0]),n=new a(arguments[1]);break;case 3:arguments[1] instanceof a?(t=new a(arguments[0]),n=new a(arguments[1]),this.angle=arguments[2]):isNaN(arguments[1])||(t=new a(arguments[0]),n=new a(t.x+arguments[1],t.y+arguments[2]));break;case 4:t=new a(arguments[0],arguments[1]),n=new a(t.x+arguments[2],t.y+arguments[3]);break;default:throw new Error("Invalid arguments for Rect")}if(this.angle){this.p1=t,this.p2=n;var s=this.p1.transform2RotateCoord(this.angle),c=this.p2.transform2RotateCoord(this.angle);this.nw=this.p1,this.ne=new a(c.x,s.y).transform2RotateCoord(-this.angle),this.se=this.p2,this.sw=new a(s.x,c.y).transform2RotateCoord(-this.angle),this.width=this.nw.distance2Point(this.ne),this.height=this.nw.distance2Point(this.sw)}else{var u=t.x,l=n.x,p=t.y,d=n.y;(u>l||p>d)&&(u>l&&(u=[l,l=u][0]),p>d&&(p=[d,d=p][0]),t=new a(u,p),n=new a(l,d)),this.p1=t,this.p2=n,this.width=n.x-t.x,this.height=n.y-t.y,this.nw=this.p1,this.ne=new a(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new a(this.p1.x,this.p2.y)}}return r(e,[{key:"contains",value:function(t){return t instanceof a?this.containsPoint(t):t instanceof e&&this.containsRect(t)}},{key:"getBoundingRect",value:function(){var t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;[this.nw,this.ne,this.sw,this.se].forEach(function(e){e.x>t&&(t=e.x),e.x<n&&(n=e.x),e.y>i&&(i=e.y),e.y<o&&(o=e.y)});var r=new a(n,o),s=new a(t,i);return new e(r,s)}},{key:"toString",value:function(){var e=this.left,t=this.top,n=this.width,i=this.height,o=this.angle,r=void 0===o?0:o;return JSON.stringify({l:parseInt(e),t:parseInt(t),w:parseInt(n),h:parseInt(i),r:parseInt(r)})}},{key:"containsPoint",value:function(e){var t=new a(e).transform2RotateCoord(this.angle),n=this.p1.transform2RotateCoord(this.angle),i=this.p2.transform2RotateCoord(this.angle);return t.x>=n.x&&t.x<=i.x&&t.y>=n.y&&t.y<=i.y}},{key:"containsRect",value:function(e){return e&&this.containsPoint(e.nw)&&this.containsPoint(e.ne)&&this.containsPoint(e.sw)&&this.containsPoint(e.se)}},{key:"move",value:function(e,t){this.p1.x+=e,this.p2.x+=e,this.p1.y+=t,this.p2.y+=t,this.nw=this.p1,this.ne=new a(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new a(this.p1.x,this.p2.y)}},{key:"moveX",value:function(e){this.move(e,0)}},{key:"moveY",value:function(e){this.move(0,e)}},{key:"center",value:function(){var e=(this.p1.x+this.p2.x)/2,t=(this.p1.y+this.p2.y)/2;return new a(e,t)}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.p1.pointRotate2Point(this.center(),t),i=this.p2.pointRotate2Point(this.center(),t);return new e(n,i,(t+(this.angle||0)+360)%360)}},{key:"left",get:function(){return this.p1.x}},{key:"top",get:function(){return this.p1.y}},{key:"right",get:function(){return this.p2.x}},{key:"bottom",get:function(){return this.p2.y}}],[{key:"getContainingRect",value:function(t,n){for(var i=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,c=[],u=0;u<t.length;u++){t[u] instanceof e?(c.push(t[u].p1.transform2RotateCoord(n)),c.push(t[u].p2.transform2RotateCoord(n))):t[u] instanceof a&&c.push(t[u].transform2RotateCoord(n))}for(var l=0;l<c.length;l++){c[l].x<i&&(i=c[l].x),c[l].x>r&&(r=c[l].x),c[l].y<o&&(o=c[l].y),c[l].y>s&&(s=c[l].y)}return new e(new a(i,o).transform2RotateCoord(-n),new a(r,s).transform2RotateCoord(-n))}},{key:"getBoundingRect",value:function(t,n){var i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;[t.nw,t.ne,t.sw,t.se].map(function(e){return e.transform2RotateCoord(n)}).forEach(function(e){e.x>i&&(i=e.x),e.x<o&&(o=e.x),e.y>r&&(r=e.y),e.y<s&&(s=e.y)});var c=new a(o,s).transform2RotateCoord(-n),u=new a(i,r).transform2RotateCoord(-n);return new e(c,u,n)}}]),e}();window.Rect=s,e.exports=s},function(e,t,n){function i(){if(1===arguments.length){this.x=arguments[0].x||0,this.y=arguments[0].y||0}else{if(2!==arguments.length){throw new Error("Invalid arguments for Point")}this.x=parseFloat(arguments[0])||0,this.y=parseFloat(arguments[1])||0}}var o=n(105);i.prototype.toString=function(){return"("+this.x+", "+this.y+")"},i.prototype.moveX=function(e){return this.move(e,0)},i.prototype.moveY=function(e){return this.move(0,e)},i.prototype.move=function(e,t){return this.x+=e,this.y+=t,this},i.prototype.update=function(e,t){this.x=e,this.y=t},i.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},i.prototype.between=function(e,t){return new o(e,t).contains(this)},i.prototype.offset=function(e){return{x:e.x-this.x,y:e.y-this.y}},i.prototype.distance2Point=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},i.prototype.angle2Point=function(e,t){var n=this.offset(e),i=this.distance2Point(e),o=Math.acos(Math.abs(n.x)/i),r=180*o/Math.PI;if(!i){return 0}if(0===n.x&&n.y>0){var a=90}else{n.x>0&&0===n.y?a=0:0===n.x&&n.y<0?a=270:n.x<0&&0===n.y?a=180:n.x<0&&n.y<0?a=180+r:n.x<0&&n.y>0?a=180-r:n.x>0&&n.y>0?a=r:n.x>0&&n.y<0&&(a=360-r)}return(a-(t||0)+360)%360},i.prototype.pointRotate2Point=function(e,t){var n=e.angle2Point(this),o=(n+t+360)%360,r=this.distance2Point(e),a=o*Math.PI/180;return new i(e.x+r*Math.cos(a),e.y+r*Math.sin(a))},i.prototype.transform2RotateCoord=function(e){if(!e){return this}var t=new i(0,0),n=t.angle2Point(this),o=(n-e+360)%360,r=this.distance2Point(t),a=o*Math.PI/180;return new i({x:r*Math.cos(a),y:r*Math.sin(a)})},window.Point=i,e.exports=i},function(e,t){function n(e){return 0===e.indexOf(c.color.fill)?s[c.color.fill]+(+e.split("-")[1]+1):s[e]}var i={content:{name:"文本内容",props:{content:{name:"文本内容"}}},image:{name:"图片内容",props:{imageSrc:{name:"图片内容"}}},color:{name:"颜色",props:{backgroundColor:{name:"背景颜色"},borderColor:{name:"边框颜色"},boxShadowColor:{name:"阴影颜色"},color:{name:"文本颜色"},counterColor:{name:"计数器颜色"},fill:{name:"形状颜色"}}},link:{name:"链接内容",props:{url:{name:"链接内容"}}},telephone:{name:"电话内容",props:{number:{name:"电话内容"}}},sound:{name:"音效内容",props:{soundSrc:{name:"音效内容"}}},time:{name:"计时时间",props:{time:{name:"计时时间"}}},internalLink:{name:"跳转页面",props:{internalLink:{name:"跳转页面"}}},input:{name:"输入框类型",props:{input:{name:"输入框类型"}}},video:{name:"视频内容",props:{video:{name:"视频内容"}}},tRandom:{name:"随机文本内容",props:{tRandom:{name:"随机文本内容"}}},iRandom:{name:"随机图片内容",props:{iRandom:{name:"随机图片内容"}}},code:{name:"代码内容",props:{code:{name:"代码内容"}}},addGroup:{name:"添加组合",props:{addGroup:{name:"添加组合"}}},moveGroup:{name:"移动组合",props:{moveGroup:{name:"移动组合"}}},deleteGroup:{name:"删除组合",props:{deleteGroup:{name:"删除组合"}}},editGroup:{name:"编辑组合",props:{editGroup:{name:"编辑组合"}}}},o={},r={},a={},s={},c=a;Object.keys(i).forEach(function(e){o[e]=e,r[e]=i[e].name;var t=i[e].props;a[e]={},Object.keys(t).forEach(function(n){a[e][n]=e+"."+n,s[e+"."+n]=t[n].name})}),e.exports=window.ftRuleType={FtRuleType:o,FtEditableProps:a,FtEditablePropName:s,getEditPropName:n,FtRuleName:r}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0){}}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o){throw r}}}return n}return function(t,n){if(Array.isArray(t)){return t}if(Symbol.iterator in Object(t)){return e(t,n)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(107),s=a.getEditPropName,c=function(){function e(t){i(this,e),this.eqxItem=t,this.ftManager=t.eqxPage.ftManager;var n=t.getFtEditableProps();this.props=n.map(function(e){return{key:e,name:s(e),ftTerm:null,select:!1,show:!1}}),this.updatePropsState()}return r(e,[{key:"isPropSelect",value:function(e){var t=this.props.find(function(t){return t.key===e});return t&&t.show&&t.select}},{key:"updatePropsState",value:function(){var e=this,t=this.ftManager,n=this.eqxItem;this.props.forEach(function(i){var o=t.findFtTerm(n,i.key);i.ftTerm=o,i.select=!!o,o&&(o.ftProp=i),i.show=e.eqxItem.isPropCanEdit(i.key)}),this.updateSelectAll()}},{key:"updateSelectAll",value:function(){var e=this.props.filter(function(e){return e.show});this.selectAll=e.length&&e.every(function(e){return e.select})}},{key:"toggleAllProps",value:function(){var e=this,t=this;t.selectAll?t.props.forEach(function(t){t.show&&!t.select&&e.selectProp(t)}):t.props.forEach(function(t){t.show&&t.select&&e.unSelectProp(t)})}},{key:"selectProp",value:function(e){var t=this.ftManager,n=e.key.split("."),i=o(n,2),r=i[0],a=i[1],s=this.eqxItem.getFtValue(e.key);t.addFtRule({type:r,value:s,comps:[{id:this.eqxItem.id,properties:[a]}]}),this.updatePropsState()}},{key:"unSelectProp",value:function(e){var t=e.ftTerm;t?(t.deleteSelf(!0),this.updatePropsState()):""}},{key:"toggleProp",value:function(e){e.select?this.selectProp(e):this.unSelectProp(e)}}]),e}();e.exports=c},function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px 0px 0px rgba(0,0,0,0.5)",t=arguments[1],n=arguments[2],i="";e=e.replace(c,function(e){return i=e,""});var o=e.trim().split(" "),s=parseFloat(o[0]),l=parseFloat(o[1]),p=a(Math.atan(l/s))||0;return s<0&&(p+=180),s>0&&l<0&&(p=360+p),p=(p+270)%360,n&&(p=n),u.direction=r(p),u.size=r(t||Math.hypot(s,l)),u.blur=r(o[2]),u.color=i,u}function o(e){var t=(e.direction+90)%360,n=r(e.size*Math.cos(s(t))),i=r(e.size*Math.sin(s(t)));return n+"px "+i+"px "+e.blur+"px "+e.color}var r=n(104).toInt,a=n(110).arc2deg,s=n(110).deg2arc,c=/rgba\([^)]*\)/,u={direction:"",size:"",blur:"",color:""};e.exports={parseBoxShadow:i,getBoxShadowStr:o}},function(e,t){function n(e){return e/180*Math.PI}function i(e){return 180*e/Math.PI}e.exports={deg2arc:n,arc2deg:i}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(112),n(113);var r=n(70).ANIMATION_TYPE,a=n(114),s=a.animInstanceMap,c=a.AnimClassifyMap,u=function(){function e(t,n){i(this,e),this.eqxComp=t,this.config=n}return o(e,[{key:"startAnimation",value:function(e){function t(){if(u++,u>=a.length){n&&n()}else{var e=a[u].type,o=r[e];if(!o){return t()}var l=a[u].animClassify,p=void 0===l?"0":l,d=s.find(function(e){return e.key==p});d===-1&&(d=s[0]),c[d.name].doAnimation(a[u],i,a.length,i).then(function(){t()})}}var n=e.callback,i=e.maxCount,o=this.eqxComp.compJson,a=o.properties.anim||[];a&&!Array.isArray(a)&&(a=[a]);var c=this,u=-1;t()}},{key:"previewAnimation",value:function(e){var t=this,n=e.type,i=r[n];if(i){var o=e.animClassify,a=void 0===o?"0":o,c=s.find(function(e){return e.key==a});c===-1&&(c=s[0]),this[c.name].doAnimation(e).then(function(){t.stopAnimation()})}}},{key:"stopAnimation",value:function(){var e=this.eqxComp,t=s.find(function(e){return 1===e.key});if(this[t.name]&&this[t.name].stopAnimation(),e.$boxDiv.css({animation:""}),e.$contextCopy){var n=e.$contextCopy.data("typed");n&&n.reset()}}},{key:"addAnimClassify",value:function(){var e=this,t=String(this.eqxComp.type),n="2"===t||"7"===t;s.forEach(function(t){var i=t.key;(n||1!==i)&&(e[t.name]=e.getAnimClass(t.key))})}},{key:"getAnimClass",value:function(e){var t=c[e];return t?new t(this.eqxComp,this.config):""}}]),e}();e.exports=u},function(e,t){},function(e,t){},function(e,t,n){var i=n(115),o=n(117),r=[{key:0,name:"compAnim"},{key:1,name:"textAnim"}],a={COMPANIM:i,0:i,TEXTANIM:o,1:o};e.exports={animInstanceMap:r,AnimClassifyMap:a}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(70).ANIMATION_TYPE,a=n(22).$canvas,s=n(22).$loadTyped,c=n(116).Particles,u=n(21),l=function(){function e(t,n){i(this,e),this.eqxComp=t,this.config=n}return o(e,[{key:"doAnimation",value:function(e,t,n,i){var o=this,l=new Promise(function(l,p){var d=o.eqxComp,f=d.$li,h=d.$boxDiv,g=d.$context,m=d.compJson,v=e.type,y=e.direction,b=e.duration,x=void 0===b?0.1:b,w=e.linear,k=e.count,E=e.countNum,I=void 0===E?1:E,_=e.delay,S=void 0===_?0:_,O=e.interval;0===x&&(x=0.1),null==S&&(S=0);var P=r[v],$=w?"linear":"ease",T=P[y]||r[v][0],C=k?"infinite":I;if(t&&(C=1),h.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),"typer"===T){g.css({opacity:0}),s().then(function(){var e=d.create$context(),t={position:"absolute","pointer-events":"none"};d.compJson.css.writingMode&&"vertical-rl"===d.compJson.css.writingMode?t.left="-30px":t.top="0px",e.attr("context-copy",1).css(t),g.after(e),d.$contextCopy=e;var n=function(){d.$contextCopy=null,setTimeout(function(){e.remove(),e=null,d.$contextCopy||g.css({opacity:1}),l()},100)};e.typed({strings:[m.content],contentType:"html",showCursor:!1,typeSpeed:1000*O||0,startDelay:1000*S||0,onFirstTyped:function(){setTimeout(function(){e&&e.css({opacity:1})},0)},callback:function(){clearInterval(e.data("typed").timeout),e.removeData("typed"),n()},resetCallback:function(){n()}})},function(){g.css({opacity:1})})}else{if("particles"===T){var q=function(){if("number"==typeof C){if(1==C){return void l()}C>1&&j(),C--}else{j()}},j=function(){var e=Math.abs(parseInt(h.find("img").css("marginLeft"))),t=Math.abs(parseInt(h.find("img").css("marginTop")));h.css("opacity","0");var n=new c({type:d.compJson.type,top:e,left:t,$parEle:f,imgUrl:u.FILE+d.compJson.properties.src,startX:d.compJson.css.width,startY:d.compJson.css.height,imgX:0,imgY:0,delay:1000*S,duration:1000*x,interval:0,ease:"linear"},q);n.animate()};f.remove("canvas"),"h"==d.compJson.type?(h.css("opacity","0"),a().then(function(){j()})):j()}else{var R={"animation-name":T,"animation-duration":x+"s","animation-timing-function":$,"animation-delay":S+"s","animation-iteration-count":C,"animation-direction":"normal","animation-fill-mode":"both"},L=Object.keys(R).map(function(e){return R[e]}).join(" ");h.css("animation",L),h.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n<i-1&&h.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),setTimeout(function(){l()},0)})}}});return l}}]),e}();e.exports=l},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(o={easeInOutBack:function(e,t,n,i,o){return void 0==o&&(o=1.70158),(e/=i/2)<1?n/2*(e*e*(((o*=1.525)+1)*e-o))+t:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+t},linear:function(e,t,n,i){return n*e/i+t},easeInOutQuad:function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},easeOutQuad:function(e,t,n,i){return e/=i,-n*e*(e-2)+t}},i(o,"easeOutQuad",function(e,t,n,i){return e/=i,-n*e*(e-2)+t}),i(o,"easeInCubic",function(e,t,n,i){return e/=i,n*e*e*e+t}),i(o,"easeOutCubic",function(e,t,n,i){return e/=i,e--,n*(e*e*e+1)+t}),i(o,"easeInOutCubic",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t)}),i(o,"easeInQuart",function(e,t,n,i){return e/=i,n*e*e*e*e+t}),i(o,"easeOutQuart",function(e,t,n,i){return e/=i,e--,-n*(e*e*e*e-1)+t}),i(o,"easeInOutQuart",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)}),i(o,"easeInQuint",function(e,t,n,i){return e/=i,n*e*e*e*e*e+t}),i(o,"easeOutQuint",function(e,t,n,i){return e/=i,e--,n*(e*e*e*e*e+1)+t}),i(o,"easeInOutQuint",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e*e*e+t:(e-=2,n/2*(e*e*e*e*e+2)+t)}),i(o,"easeInSine",function(e,t,n,i){return -n*Math.cos(e/i*(Math.PI/2))+n+t}),i(o,"easeOutSine",function(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t}),i(o,"easeInOutSine",function(e,t,n,i){return -n/2*(Math.cos(Math.PI*e/i)-1)+t}),i(o,"easeInExpo",function(e,t,n,i){return n*Math.pow(2,10*(e/i-1))+t}),i(o,"easeOutExpo",function(e,t,n,i){return n*(-Math.pow(2,-10*e/i)+1)+t}),o),s=function(){function e(t,i){n(this,e),this.colNumber=3,this.$parEle=t.$parEle,this.canvas={},this.image={},this.requestId=0,this.startTime=0,this.array=[],this.startX=t.startX,this.startY=t.startY,this.callBackFn=i,this.param=t,this.init()}return r(e,[{key:"randomX",value:function(){return parseInt(Math.random()*this.startX)}},{key:"randomY",value:function(){return parseInt(Math.random()*this.startY)}},{key:"init",value:function(){var e=this;if(this.$parEle.find("canvas").remove(),this.$canvas=$("<canvas></canvas>"),this.$parEle.prepend(this.$canvas),this.$canvas.css({position:"absolute",top:0,left:0}),this.canvas=this.$canvas[0],this.image.isLoaded=!1,this.canvas.width=this.$parEle.width(),this.canvas.height=this.$parEle.height(),this.canvas.width>300&&this.canvas.height>300&&(this.colNumber=4),this.canvas.ctx=this.canvas.getContext("2d"),"h"===this.param.type){return void setTimeout(function(){canvg(e.canvas,e.$parEle.find(".element-box-contents")[0],{ignoreMouse:!0,ignoreAnimation:!0}),e.calCanvas()},10)}if(this.canvas&&this.canvas.getContext){var t=new Image;t.onload=function(){var n=e.$parEle.find("img").width(),i=e.$parEle.find("img").height(),o=t.height/i,r=t.width/n;e.canvas.ctx.drawImage(t,e.param.top*r,e.param.left*o,r*e.canvas.width,o*e.canvas.height,0,0,e.canvas.width,e.canvas.height),e.calCanvas()},t.crossOrigin="anonymous",t.src=this.param.imgUrl}}},{key:"draw",value:function(){this.image.isLoaded?this._draw():setTimeout(this.draw.bind(this))}},{key:"animate",value:function(){this.image.isLoaded?this._animate(this.param.delay):setTimeout(this.animate.bind(this))}},{key:"_calculate",value:function(e){for(var t=this.image.imgData.data,n=e.cols,i=e.rows,o=Math.round(this.canvas.width/n),r=Math.round(this.canvas.height/i),a=0,s={},c=0;c<n;c++){for(var u=0;u<i;u++){a=4*(u*r*this.canvas.width+c*o),t[a+3]>25&&(s={x0:this.randomX(),y0:this.randomY(),x1:this.param.imgX+c*o,y1:this.param.imgY+u*r,delay:u/20,currTime:0,count:0,duration:parseInt(e.duration/16.66)+1,interval:parseInt(10*Math.random()*e.interval),ease:e.ease,ratioX:e.ratioX,ratioY:e.ratioY},s.fillStyle="rgba("+t[a]+", "+t[a+1]+", "+t[a+2]+","+t[a+3]+")",this.array.push(s))}}}},{key:"_draw",value:function(){this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var e=this.array.length,t=null,n=0;n<e;n++){t=this.array[n],this.canvas.ctx.fillStyle=t.fillStyle,this.canvas.ctx.fillRect(t.x1,t.y1,1,1)}}},{key:"_render",value:function(){var e=this;this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t,n,i=this.array,o=i.length,r=null,s=0,c=0,u=0,l=1,p=1,d=0;d<o;d++){if(r=i[d],r.count++>r.delay){if(this.canvas.ctx.fillStyle=r.fillStyle,s=r.currTime,c=r.duration,u=r.interval,1!==r.ratioX?l=r.ratioX+2*Math.random():1,1!==r.ratioY?p=r.ratioY+2*Math.random():1,i[o-1].duration+i[o-1].interval<0.9*i[o-1].currTime){return this.canvas=null,cancelAnimationFrame(this.requestId),this.$parEle.find("canvas").remove(),this.$parEle.find(".element-box").css("opacity","1"),void setTimeout(function(){e.callBackFn()},300)}s<c+u?s>=u&&(t=a[r.ease]((s-u)*l,r.x0,(r.x1-r.x0)*l,c),n=a[r.ease]((s-u)*p,r.y0,(r.y1-r.y0)*p,c),this.canvas.ctx.fillRect(t,n,1,1)):this.canvas.ctx.fillRect(r.x1,r.y1,1,1),r.currTime+=Math.random()+0.5}}this.requestId=requestAnimationFrame(this._render.bind(this))}},{key:"_animate",value:function(e){var t=this;this.startTime+e<(new Date).getTime()?this.requestId=requestAnimationFrame(this._render.bind(this)):setTimeout(function(){t._animate(e)})}},{key:"calCanvas",value:function(){var e=this.param;this.image.imgData=this.canvas.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._calculate({duration:e.duration||0,delay:e.delay||0,interval:e.interval||0,ease:e.ease,ratioX:1,ratioY:1,cols:Math.ceil(this.canvas.width/this.colNumber)||100,rows:Math.ceil(this.canvas.height/this.colNumber)||100}),this.image.isLoaded=!0,this.startTime=(new Date).getTime()}}]),e}();e.exports={Particles:s}},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(118),s=n(70).ANIMATION_TYPE,c=function(){function e(t,n,i){o(this,e),this.eqxComp=t,this.config=n,this.currentAnim=i,this.$textNode=null,this.$parentNode=null,this.isPlaying=!1,this.playDelayToIdx=void 0,this.interIdx=void 0,this.playEndToIdx=void 0,this.infinity=!1}return r(e,[{key:"doAnimation",value:function(e,t){var n=this;return this.isPlaying&&this.stopAnimation(),new Promise(function(o,r){n.isPlaying=!0;var c=n.eqxComp,u=void 0;u="2"===String(c.type)?c.$context:c.$context.find("span"),n.$textNode=u;var l=u.clone(!0),p=n.$parentNode=u.parent();u.remove(),p.append(l);var d=[],f=e.type,h=e.direction,g=e.duration,m=e.delay,v=e.countNum,y=e.count,b=e.textInterval,x=e.order;m*=1000,b*=1000,g*=1000;for(var w="animation-duration: "+g+"ms;",k=s[f][h||0],E=void 0,I=["access","emphasize","exit"],_=Object.keys(a),S=0;S<_.length;S++){if(a[S].includes(f)){E=I[S];break}}var O=document,P="access"===E?"animTextCharPlace animHidden":"animTextCharPlace",T=function(e){var t=$(O.createDocumentFragment());return e.split("").forEach(function(e){var n=void 0;"\n"===e?n=O.createElement("br"):(32===e.charCodeAt(0)&&(e=String.fromCharCode(160)),n=O.createElement("span"),n.innerText=e,n.className=P),d.push(n),t.append(n)}),t},C=function R(e){var t=$(e),n=t.clone(!0).get(0).childNodes;e.innerHTML="";for(var i=0,o=n.length;i<o;i++){var r=n[i];if(3===r.nodeType){t.append(T(r.data))}else{if("BR"===r.tagName){t.append("<br>")}else{if(r.children.length){R(r)}else{var a=r.innerText;r.innerText="",$(r).append(T(a))}t.append(r),i--,o--}}}};C(l.get(0));var q=function(){if(2===x){d=d.reverse()}else{if(3===x){var e=d.length,t=[].concat(i(d));for(d.length=0;e--;){d.push(t.splice(Math.floor(Math.random()*e),1)[0])}}}},j=function L(e){var t=0,i=d.length;n.interIdx=setInterval(function(){if(t<i){var r=d[t++];r.className&&(r.className+=" animTextChar "+k,1000!==g&&(r.style.cssText+=w))}else{clearInterval(n.interIdx),n.playEndToIdx=setTimeout(function(){--e>0||n.infinity?(d.forEach(function(e){e.className="animTextCharPlace"}),L(e)):o()},g)}},b)};q(),n.playDelayToIdx=setTimeout(function(){j(t?1:y?1/0:v)},m)})}},{key:"stopAnimation",value:function(){if(this.isPlaying){this.infinity=!1,clearTimeout(this.playDelayToIdx),clearInterval(this.interIdx),clearTimeout(this.playEndToIdx);var e=this.$parentNode,t=this.$textNode;if(e&&t){var n=e[0];n.replaceChild(t[0],n.firstChild)}this.isPlaying=!1}}}]),e}();e.exports=c},function(e,t){e.exports={0:[0,1,20,2,24,12,3,13,4,26,27,31],1:[6,5,8,9,23,29,30,21,22],2:[10,17,19,11,14,18,15,25,16,28,32]}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function l(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(120),u=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"setPieModal",value:function(e){var t=this.eChartsData.series.radius[0],n="radius"==e&&(t?"radius":"area");this.eCharts.setOption({series:{roseType:n}}),this.eChartsData.series.roseType=n}},{key:"showPieTag",value:function(e){this.eCharts.setOption({series:{label:{show:e}}}),this.eChartsData.series.label.show=e}},{key:"initECharts",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initECharts",this).call(this,e),this.setPieContentType(this.pieContentType)}},{key:"showPieGuideLine",value:function(e){this.eCharts.setOption({series:{labelLine:{show:e}}}),this.eChartsData.series.labelLine.show=e}},{key:"setPieContentType",value:function(e){var t;switch(e){case"percent":t="{d}%";break;case"number":t="{c}";break;case"namePercent":t="{b}: {d}%";break;case"nameNumber":t="{b}: {c}";break;default:t="{b}"}if("{c}"==t){var n=function(e){return e.value[1]}}else{if("{b}"==t){var n=function(e){return e.value[0]}}else{"{b}: {c}"==t&&(n=function(e){return e.value[0]+": "+e.value[1]})}}this.eCharts.setOption({series:{label:{formatter:n||t}}}),this.eChartsData.series.label.formatter=t}},{key:"isRadiusMoal",get:function(){return this.eChartsData.series.roseType}},{key:"isShowLabel",get:function(){return this.eChartsData.series.label.show}},{key:"isShowGuideLine",get:function(){return this.eChartsData.series.labelLine.show}},{key:"pieContentType",get:function(){var e=this.eChartsData.series.label.formatter;switch(e){case"{b}":return"name";case"{d}%":return"percent";case"{c}":return"number";case"{b}: {d}%":return"namePercent";case"{b}: {c}":return"nameNumber";default:return"percent"}}}]),t}(c);e.exports=u},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(78),u=n(22).$loadeChartsJs,l=n(44).parse,p=n(121),d=n(122).fixedNum,f=n(24),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){this.eChartsData=this.compJson.properties.eCharts.data,this.eChartsTitle=this.compJson.properties.eCharts.title;var e=this.compJson,t=e.id,n=this.eChartsTitle.style,i=this.eChartsTitle.text,o=n.height,r=$(l(p,{id:t,title:i,height:o}));this.$echartsTitleBox=r.find(".echart-title"),this.$echartsBox=r.find(".echart-box"),this.$echartsTitleBox.css(n);var a=this;return this.initedChart=new Promise(function(e){u().then(function(){"edit"!=a.eqxScene.config.mode&&(window==window.top||f.isPc()||f.isAndroid())||a.initECharts(r.find(".echart-box")),e()})["catch"](function(e){})}),r}},{key:"initECharts",value:function(e){var t=echarts.init(e[0],"macarons",{renderer:"svg"});if("lpPie"!=this.type){$.extend(!0,this.eChartsData,{yAxis:{axisLabel:{formatter:function(e){return isNaN(parseInt(e))?e:d(e)}}}}),t.setOption(this.eChartsData)}else{var n=this.eChartsData.series.label.formatter;if("{c}"==n){var i=function(e){return e.value[1]}}else{"{b}: {c}"==n&&(i=function(e){return e.value[0]+": "+e.value[1]})}t.setOption($.extend(!0,{},this.eChartsData,{series:{label:{formatter:i||n}}}))}return this.eCharts=t,this.eCharts}},{key:"updateTitleCss",value:function(e){var t=this;if(e){var n=this.eChartsTitle.style;this.$echartsTitleBox.css(n),Object.keys(n).forEach(function(e){"fontSize"===e&&t.$echartsTitleBox.css({"font-size":parseInt(n[e])+"px"})}),this.updateTitleHeight(),Object.assign(n,e)}}},{key:"updateTitleHeight",value:function(){var e=parseInt(this.eChartsTitle.style.height),t=this.$echartsTitleBox.children().height(),n=t-e;if(n){var i=parseInt(this.$li.css("height"))+n;this.update$li({height:i}),this.$echartsTitleBox.css("height",t),this.eChartsTitle.style.height=t+"px",this.$echartsBox.css("height","calc(100% - "+t+"px)")}}},{key:"updateTitleContent",value:function(e){this.$echartsTitleBox.children().text(e),this.updateTitleHeight()}},{key:"updateLegendTextColor",value:function(e){this.eCharts.setOption({legend:{textStyle:{color:e}}})}},{key:"updateAxisLineColor",value:function(e){this.eCharts.setOption({xAxis:{axisLine:{lineStyle:{color:e}},axisTick:{lineStyle:{color:e}}},yAxis:{axisLine:{lineStyle:{color:e}},axisTick:{lineStyle:{color:e}}}})}},{key:"updateAxisTextColor",value:function(e){this.eCharts.setOption({xAxis:{axisLabel:{color:e}},yAxis:{axisLabel:{color:e}}})}},{key:"showLegend",value:function(e){this.eCharts.setOption({legend:{show:e}}),this.eChartsData.legend.show=e}},{key:"setLegendAlign",value:function(e){this.eCharts.setOption({legend:{x:e}}),this.eChartsData.legend.x=e}},{key:"showToolTip",value:function(e){this.eCharts.setOption({tooltip:{show:e}}),this.eChartsData.tooltip.show=e}},{key:"eleShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.eCharts||this.initedChart.then(function(){e.initECharts(e.$context.find(".echart-box"))})}},{key:"isShowLegend",get:function(){return this.eChartsData.legend.show}},{key:"isShowChartTip",get:function(){return this.eChartsData.tooltip.show}}]),t}(c);e.exports=h},function(e,t){e.exports='<div style="height: 100%;" class="create-eChart" id="eChart-#{id}"><div class="echart-title" style="line-height: 1.2"><div>#{title}</div></div><div class="echart-box" style="height: calc(100% - #{height})"></div></div>'},function(e,t){function n(e){var t;return e<10000?t=e:e>=10000&&e<100000000?t=(e/10000).toFixed(2)+"万":e>=100000000&&(t=(e/100000000).toFixed(2)+"亿"),t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*e)%e+t}e.exports={fixedNum:n,random:i}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(120),c=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"showLineIcon",value:function(e){for(var t=[],n=this.eChartsData.series.length,i=0;i<n;i++){t.push({showSymbol:e})}this.eCharts.setOption({series:t}),this.eChartsData.series.forEach(function(e,n){e.showSymbol=t[n].showSymbol})}},{key:"setLineFormat",value:function(e){for(var t=[],n=this.eChartsData.series.length,i=0;i<n;i++){t.push({smooth:e})}this.eCharts.setOption({series:t}),this.eChartsData.series.forEach(function(e,n){e.smooth=t[n].smooth})}},{key:"isBrokenLine",get:function(){return this.eChartsData.series[0].smooth}},{key:"isShowLineIcon",get:function(){return this.eChartsData.series[0].showSymbol}}]),t}(s);e.exports=c},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(120),s=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),t}(a);e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(120),s=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),t}(a);e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(127);var a=n(128),s=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),t}(a);e.exports=s},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(78),u=n(44).parse,l=(n(129)().getScrollWidth,n(24).isAndroidPhone,n(24).mobilecheck),p=(n(24).isPc,n(130).preFixCss),d=n(131),f=n(132),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!0},commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this;this.lpTable=this.compJson.properties.lpTable;var t=this.compJson,n="lpFormTable"==t.type?d:f,i=t.id,o=t.type,r=this.lpTable.title.content,a=this.lpTable.title.css,s=a.height,c=$(u(n,{id:i,type:o,title:r,titleH:s}));return this.$tableTitle=c.find(".table-title"),this.$table=c.find("table"),this.$tableWraper=c.find(".eqx-table-wraper"),e.$tableWraper.css("borderColor",e.lpTable.headerCss.borderColor),this.$tableTitle.css(a),"view"==this.eqxScene.config.mode&&p(this.$table.get(0),"Transition","transform 800ms linear"),this.initTable(),c}},{key:"initTable",value:function(){function e(e,t){t%2==0&&0!=t&&e.addClass("evenRow").css(n.lpTable.content.evenCss)}var t=this,n=this;this.lpTable.content.data.forEach(function(n,i){var o=t.$table[0].insertRow(i);0==i?$(o).addClass("tableH").css(t.lpTable.headerCss):$(o).addClass("tableContent").css(t.lpTable.content.css),n.forEach(function(e,n){var r=o.insertCell(n);return $(r).text(e||""),0==i?void $(r).addClass("colH"):void (0==n&&"lpFormTable"==t.type?$(r).addClass("rowH tableH").css(t.lpTable.headerCss):$(r).addClass("tShow"))}),e($(o),i)}),this.$tableH=this.$table.find(".tableH"),this.$evenRow=this.$table.find(".evenRow"),this.$tableContent=this.$table.find(".tableContent")}},{key:"renderTable",value:function(){this.$table.children().remove(),this.initTable()}},{key:"updateTitleContent",value:function(e){this.$tableTitle.children().text(e),this.updateTitleHeight()}},{key:"updateTitleHeight",value:function(){var e=parseInt(this.lpTable.title.css.height),t=this.$tableTitle.children().height()+7,n=t-e;if(n){var i=parseInt(this.$li.css("height"))+n;this.update$li({height:i}),this.$tableTitle.css({height:t}),this.lpTable.title.css.height=t+"px",this.$tableWraper.css("height","calc(100% - "+t+"px)"),this.isBaseLayerElement||this.autoSizeTopDown()}}},{key:"updateTableCompHeight",value:function(){this.$tableWraper.find(".table-outer-wraper").css("height","");var e=this.$table.height(),t=this.$tableTitle.height(),n=this.$table.width()>this.$tableWraper.width()?7:0,i=e+t+26+n;this.update$li({height:i}),this.$table.css("height","100%")}},{key:"updateTitleCss",value:function(e){var t=this;e&&(this.$tableTitle.css(e),Object.keys(e).forEach(function(n){"fontSize"===n&&t.$tableTitle.css({"font-size":parseInt(e[n])+"px"})}),this.updateTitleHeight())}},{key:"updateHeadCss",value:function(e){var t=this;e&&(this.$tableH.css(e),Object.keys(e).forEach(function(n){"fontSize"===n&&(t.$table.css("height","auto"),t.$tableH.css({"font-size":parseInt(e[n])+"px"}),t.updateTableCompHeight())}))}},{key:"updateAreaCss",value:function(e){var t=this;if(e){this.$tableContent.css(e);var n=this.lpTable.content.evenCss;this.$evenRow.css(n),Object.keys(e).forEach(function(n){"fontSize"===n&&(t.$table.css("height","auto"),t.$tableContent.css({"font-size":parseInt(e[n])+"px"}),t.updateTableCompHeight())})}}},{key:"updateBorderCss",value:function(e){e&&(this.$tableContent.css(e),this.$tableH.css(e),this.$tableWraper.css(e))}},{key:"updateEvenAreaCss",value:function(e){e&&this.$evenRow.css(e)}},{key:"render",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),n=this.eqxScene.config,i=n.disableCompEvent;return i&&this.addEventListeners(),e}},{key:"bindAfterRenderEvent",value:function(e){var t=this;this.$tableWraper.css("pointer-events","auto").on("DOMMouseScroll mousewheel",function(e){var n=t.getMaxScrollDistance(),i=e.originalEvent,o=t.getScrollDirection(e.originalEvent);if(!o){var r=t.$tableWraper.find("div").scrollLeft(),a=i.wheelDeltaX&&i.wheelDeltaX>0||i.detail&&i.detail<0;a&&0==r||!a&&r>=n||i.stopPropagation()}})}},{key:"getScrollDirection",value:function(e){return 2==e.axis||Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)}},{key:"getMaxScrollDistance",value:function(){return this.$table.width()-this.$tableWraper.width()}},{key:"eleShow",value:function(){var e=this;if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),!this.tableRun&&"view"==this.eqxScene.config.mode){var n=this.compJson,i=n.properties.anim,o=void 0===i?[]:i,r=0,a=!1;if(o.forEach(function(e){e.count&&(a=!0),r+=1000*(e.delay+e.duration*e.countNum)}),a){return}var c=this.$table[0];setTimeout(function(){p(c,"TransitionDelay",r+"ms");var t=Math.min(e.getMaxScrollDistance(),50);t>0&&l()&&(p(c,"Transform","translate(-"+t+"px, 0px)"),e.$table.one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",function(){p(c,"TransitionDelay","0ms"),p(c,"Transform","translate(0px, 0px)")}),e.tableRun=!0)},0)}}},{key:"afterAppendToPage",value:function(){var e=l(),t=this.$li.css("display");"none"==t&&this.$li.show().css("visibility","hidden");var n=this.$table,i=n.width(),o=this.$tableWraper.width(),r=this.$tableWraper.find(".scroll-rect");if(i<=o){return r.hide(),void this.$tableWraper.find(".table-outer-wraper").css({height:"100%"})}if(e){this.$tableWraper.find(".table-outer-wraper").css({overflow:"hidden",overflowX:"scroll",height:"100%"}),this.$tableWraper.find(".scroll-rect").remove()}else{this.myScroll&&this.myScroll.destroy();var a={preventDefault:!1,mouseWheel:!1,scrollbars:!0,click:!1,tap:!0,bounce:!1,interactiveScrollbars:!0,scrollX:!0,scrollY:!1,probeType:3};this.$tableWraper.css("overflow","hidden");var s=this.$tableWraper.get(0),c=this.eqxScene.config.mode;this.$tableWraper.find(".table-outer-wraper").css({height:"100%",paddingBottom:"7px"}),r.css("border-width","1px 0px").show(),"edit"==c?(s=r.find(".scroll-wraper").get(0),$(s).children().css("width",i+"px")):this.$tableWraper.find(".table-outer-wraper").css("width",i+"px"),this.myScroll=new IScroll(s,a),"edit"==c&&this.myScroll.on("scroll",function(){n.css("transform","translate("+this.x+"px ,0px)")})}this.$li.css({visibility:"visible",display:t})}}]),t}(c);e.exports=h},function(e,t){function n(){function e(){if(t.scrollBarWidth){return t.scrollBarWidth}var e=document.createElement("div");e.className="el-scrollbar-wrap",e.style.width="100px",e.style.visibility="hidden",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var n=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var o=i.offsetWidth;e.parentNode.removeChild(e);var r=n-o;return t.scrollBarWidth=r,t.scrollBarWidth}var t={};return{getScrollWidth:e}}e.exports=n},function(e,t){function n(e){var t=document.getElementsByTagName("style")[0];if(!t){t=document.createElement("style");var n=document.head||document.getElementsByTagName("head")[0];t.type="text/css",n.appendChild(t)}var i=document.createTextNode(e);t.appendChild(i)}function i(e){return e=""+e,e.indexOf("px")===-1&&(e+="px"),e}function o(e,t,n){var i=r.js+t.substring(0,1).toUpperCase()+t.substring(1,t.length);e.style[i]=n}var r=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}();e.exports={addGlobalStyle:n,addSuffixPx:i,preFixCss:o,prefix:r}},function(e,t){e.exports='<div class="comp_form_table" id="#{id}" ctype="#{type}"><div class="table-title"><div>#{title}</div></div><div style="height: calc(100% - #{titleH})" class="eqx-table-wraper"><div class="table-outer-wraper"><table></table></div><div class="scroll-rect" style="position:absolute;bottom:0px;left:0px;width:100%;height:7px;background-color:transparent;"><div class="scroll-wraper" style="position:absolute;bottom:2px;top:0px;left:0px;width:100%;height:100%"><div class="scroll-content" style="width:100%;height:100%;"></div></div></div></div></div>'},function(e,t){e.exports='<div class="comp_list_table" id="#{id}" ctype="#{type}"><div class="table-title"><div>#{title}</div></div><div style="height: calc(100% - #{titleH})" class="eqx-table-wraper"><div class="table-outer-wraper"><table></table></div><div class="scroll-rect" style="position:absolute;bottom:0px;left:0px;width:100%;height:7px;background-color:transparent;"><div class="scroll-wraper" style="position:absolute;bottom:2px;top:0px;left:0px;width:100%;height:100%"><div class="scroll-content" style="width:100%;height:100%;"></div></div></div></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(134);var a=n(128),s=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),t}(a);e.exports=s},function(e,t){},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(136),l=n(78),p=n(139).isSupportStyle,d=n(140),f=n(103),h=n(81),g=h.initEffectImgPath,m=h.loadImg,v=n(21),y=n(151).stackBlurImage,b=n(139).getEvent,x=n(24).isWeixin,w=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0,variableImg:!0,gSensor:!0,scratch:!0,replace:!0}}}),i}return a(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.image.imageSrc,n.link.url,n.internalLink.internalLink,n.telephone.number,n.sound.soundSrc])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.image.imageSrc?this.getProp("src"):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"getImgSrc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.eqxScene.config.mobileEdit&&(n.width&&(n.width*=2),n.height&&(n.height*=2)),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImgSrc",this).call(this,e,n)}},{key:"updateSize",value:function(e,n){if(this.$width&&this.$height){var i=this.$width/this.$height;this.updateImageSize(i,e,n)}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}},{key:"pinchEnd",value:function(){var e=this.compJson,t=e.properties,n=e.css,i=t.imgStyle,o=this.$context[0],r=f.parseTransformInFloat(o.style.transform),a=r.scale.x,s=r.scale.y,c=i.width,u=i.height,l=i.marginTop,p=i.marginLeft,d=c*a,h=u*s,g=Math.max(n.height/h,n.width/d,1);h*=g,d*=g;var m=p-(d-c)/2,v=l-(h-u)/2,y=this.validateImgStyle({width:d,height:h,marginTop:v,marginLeft:m},n);this.$context.css("transform","").css(y),t.imgStyle=y}},{key:"validateImgStyle",value:function(e,t){var n=e.width,i=e.height,o=e.marginTop,r=e.marginLeft;return o<0?o+i<t.height&&(o=t.height-i):o=0,r<0?r+n<t.width&&(r=t.width-n):r=0,{width:n,height:i,marginTop:o,marginLeft:r}}},{key:"moveEnd",value:function(){var e=this.compJson,t=e.properties,n=e.css,i=t.imgStyle,o=parseInt(this.$context.css("marginLeft")),r=parseInt(this.$context.css("marginTop")),a=this.validateImgStyle({width:i.width,height:i.height,marginLeft:o,marginTop:r},n);this.$context.css(a),t.imgStyle=a}},{key:"updateImageSize",value:function(e,t,n){e||(this.$width&&this.$height?e=this.$width/this.$height:""),t||(t=this.compJson.css),n||(n=this.compJson.css),void 0===n.height&&(n.height=t.height),void 0===n.width&&(n.width=t.width);var i=t,o=i.paddingLeft,r=void 0===o?0:o,a=i.paddingRight,s=void 0===a?0:a,c=i.paddingTop,u=void 0===c?0:c,l=i.paddingBottom,p=void 0===l?0:l,d=parseFloat(r)+parseFloat(s),f=parseFloat(u)+parseFloat(p);void 0===n.borderWidth&&(n.borderWidth=parseInt(t.borderWidth||this.compJson.css.borderWidth||0));var h=this.compJson,g=h.properties,m=(n.width-2*n.borderWidth-d)/(n.height-2*n.borderWidth-f),v=g.imgStyle;if(m>e){var y=n.width-2*n.borderWidth-d,b=y/e,x=-(b+2*n.borderWidth+f-n.height)/2,w=0;v={width:y,height:b,marginTop:x,marginLeft:w}}else{var k=n.height-2*n.borderWidth-f,E=e*k,I=-(E+2*n.borderWidth+d-n.width)/2,_=0;v={width:E,height:k,marginLeft:I,marginTop:_}}this.$context.css(v),this.canvas&&$(this.canvas).css(v),g.imgStyle=v}},{key:"_getContextImgSrc",value:function(){var e=this.compJson,t=e.properties;t=void 0===t?{}:t;var n=t.src,i=t.imgStyle;return n=g(n),i&&(n=this.getImgSrc(n,{width:i.width,height:i.height})),n}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.scratch,r=i.imgStyle,a=i.maskSrc,s=i.filter;s=void 0===s?{}:s;var c=s.type;e.properties.isReplace=e.properties.isReplace||!1;var l=this._getContextImgSrc();if(Number.isInteger(c)&&c>0){var d=$(u.filterImg({id:t,type:n,src:l,filterType:c}))}else{d=$(u.img({id:t,type:n,src:l}))}return p("WebkitMaskBoxImage")&&a&&this.$contentsDiv.addClass("img_mask").css({"-webkit-mask-box-image":"url("+a+")"}),r&&d.css(r),o&&this.addScratch(),this.$boxContentDiv.css("overflow","hidden"),d}},{key:"eleShow",value:function(){var e=this,n=this.compJson.properties.src;n&&/.gif/.test(n)&&setTimeout(function(){var t=e.$context.prop("src");e.$context.show().each(function(){void this.offsetHeight}).prop("src",t)},1),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this)}},{key:"updateImgSrc",value:function(){this.$context=this.create$context(),this.$contentsDiv.empty(),this.$contentsDiv.append(this.$context)}},{key:"updateImageSrc",value:function(e,t,n){e=this.getImgSrc(v.FILE+e,{width:t,height:n}),this.$context.attr("src",e)}},{key:"addScratch",value:function(){var e=this;this.$contentsDiv[0].style.position="relative",this.canvas=this.createCanvas(),this.ctx=this.canvas.getContext("2d"),this.$contentsDiv.prepend(this.canvas),this.drawCanvas().then(function(){"view"===e.eqxScene.config.mode&&e.addCanvasEvent()})}},{key:"createCanvas",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",$(e).css(this.compJson.properties.imgStyle),e}},{key:"drawCanvas",value:function(){var e=this,t=this.compJson.properties,n=t.src,i=t.imgStyle;return n=this.getImgSrc(n,{width:i.width,height:i.height}),m(n,!0).then(function(t){e.ctx.globalCompositeOperation="source-over",e.canvas.width=t.width,e.canvas.height=t.height,e.ctx.drawImage(t,0,0),e.ctx.globalCompositeOperation="destination-out",y(e.canvas,30,!0)})}},{key:"addCanvasEvent",value:function(){function e(e){a++,t(),e.preventDefault(),e.stopPropagation();var c=b(e);o=c.pageX-$(s.canvas).offset().left,r=c.pageY-$(s.canvas).offset().top,s.ctx.moveTo(n,i),s.ctx.lineTo(o,r),s.ctx.stroke(),n=o,i=r}function t(){setTimeout(function(){a>=45&&!c&&(c=!0,$(s.canvas).fadeOut(500,function(){setTimeout(function(){s.deleScratch()},500)}))},200)}this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=40;var n,i,o,r,a=0,s=this,c=!1;$(this.canvas).on("mousedown touchstart",function(t){t.preventDefault(),t.stopPropagation();var o=b(t);n=o.pageX-$(s.canvas).offset().left,i=o.pageY-$(s.canvas).offset().top,$(s.canvas).on("mousemove touchmove",e),$(s.canvas).on("mouseup touchend mouseleave",function(){$(s.canvas).off("mousemove touchmove",e)})})}},{key:"deleScratch",value:function(){$(this.canvas).off(),$(this.canvas).remove(),delete this.canvas}},{key:"editImage",value:function(e,t){function n(e){return JSON.parse(JSON.stringify(e))}var i=this,o=this.compJson;if(t){var r=Promise.resolve(t)}else{r=m(this._getContextImgSrc()).then(function(e){var t=e.width,n=e.height,i=t/n;return{width:t,height:n,ratio:i}})}var a=n(o);e=n(e);var s=a.properties;s.imgStyle=e.imgStyle,s.cropSize=e.cropSize,s.src=e.src,s.originSrc=e.originSrc,s.maskSrc=e.maskSrc;var c=this.updateJson(a);return this.eqxPage.renderEqxComp(c,!0),r.then(function(t){if(i.updateCompHeight(t),e.originCss&&i.group&&i.isBaseLayerElement){var n=e.originCss,o=n.width,r=n.height;i.compJson.css.width=o,i.compJson.css.height=r}var a=t.width,s=t.height,u=t.ratio;return c.$width=a,c.$height=s,c.updateImageSize(u),c.findTopGroup().autoSizeTopDown(),Promise.resolve(c)})}},{key:"updateCompHeight",value:function(e){var t=e.width,n=e.height;if(!this.group&&this.isBaseLayerElement){var i=t/n,o=this.compJson.css,r=o.paddingTop,a=void 0===r?0:r,s=o.paddingBottom,c=void 0===s?0:s,u=o.paddingLeft,l=o.paddingRight,p=320-parseFloat(u)-parseFloat(l),d=p/i,f=parseFloat(d)+parseFloat(a)+parseFloat(c);this.update$li({height:f,width:320})}}},{key:"updatePadding",value:function(e){var t=this.compJson.properties,n=this.compJson.css,o=parseInt(n.paddingLeft),r=parseInt(n.paddingRight),a=parseInt(n.paddingTop),s=parseInt(n.paddingBottom),c=parseInt(n.width),u=parseInt(n.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){var l=parseInt(t.imgStyle.width),p=parseInt(t.imgStyle.height),d=l/p,f=parseInt(e.padValue);f="paddingLeft"==e.padKey?parseInt(e.padValue)+r:parseInt(e.padValue)+o;var h=c-f,g=h/d;t.imgStyle.width=h,t.imgStyle.height=g,this.$context.css({width:h,height:g}),u=g+a+s}else{var m=n[e.padKey];u+=parseInt(e.padValue)-parseInt(m)}this.update$li(i({height:u},e.padKey,parseInt(e.padValue))),this.autoSizeTopDown()}},{key:"bindAfterRenderEvent",value:function(e,t){function n(){var e=parseInt(t.css.width),n=parseInt(t.css.height),o=Math.abs(parseInt(t.properties.imgStyle.marginLeft)),r=Math.abs(parseInt(t.properties.imgStyle.marginTop)),a=i.$context.attr("src").replace(/\/format\/webp/g,"").replace(/(thumbnail)\/\d*x\d*/,"$1/"+parseInt(t.properties.imgStyle.width)+"x"+parseInt(t.properties.imgStyle.height));return a+="/crop/!"+e+"x"+n+"a"+o+"a"+r}if(t.properties.isViewBigPicture&&!this.isHasTrigger()&&!$._data(e[0],"events")&&!t.properties.cropSize){var i=this;x()&&e.on("click.imgPreview",function(){var e=n();wx.previewImage({current:e,urls:[""+e]})})}}}],[{key:"getImageStyles",value:function(){return d}}]),t}(l);e.exports=w},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.src,o=e.filterType,c=void 0===o?s[0].value:o,u="filter-"+t,l=s.find(function(e){return e.value===c})||c[0],p=l.path;return a(r,{id:t,type:n,filterId:u,src:i,path:p})}function o(e){var t=e.id,n=e.type,i=e.src;return'<img id="'+t+'" ctype="'+n+'" class="element comp_image editable-image" style="display:block;" draggable="false" src="'+i+'">'}n(137);var r=n(138),a=n(44).parse;e.exports={img:o,filterImg:i};var s=[{value:1,path:"1.7 0.1 0.1 0 -0.287 0 1.7 0.1 0 -0.287 0 0.1 1.6 0 -0.287 0 0 0 1.0 0"},{value:2,path:"2.1 -1.4 0.6 0.0 -0.12 -0.3 2.0 -0.3 0.0 -0.12 -1.1 -0.2 2.6 0.0 -0.12 0.0 0.0 0.0 1.0 0.0"},{value:3,path:"1.9 -0.3 -0.2 0 -0.341 -0.2  1.7 -0.1  0 -0.341 -0.1 -0.6 2.0 0 -0.341 0 0 0 1.0 0"},{value:4,path:"1.0 0.0 0.0 0.0 -0.26 0.0 1.1 0.0 0.0 -0.26 0.0 0.0 1.0 0.0 -0.26 0.0 0.0 0.0 1.0 0.0"},{value:5,path:"1.2 0.0 0.0 0.0 0.0 0.0 0.9 0.0 0.0 0.0 0.0 0.0 0.8 0.0 0.0 0 0 0 1.0 0"},{value:6,path:"0.8 0.3 0.1 0.0 0.182 0.1 0.9 0.0 0.0 0.182 0.1 0.3 0.7 0.0 0.182 0.0 0.0 0.0 1.0 0.0"},{value:7,path:"0.9 0 0 0 0.255 0 0.9 0 0 0.255 0 0 0.9 0 0.255 0 0 0 1.0 0"},{value:8,path:"0.6 0.3 0.1 0 0.28745 0.2 0.7 0.1 0 0.28745 0.2 0.3 0.4 0 0.28745 0 0 0 1.0 0"},{value:9,path:"0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0 0 0 1.0 0"},{value:10,path:"0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0 0 0 1 0"},{value:11,path:"4.8 -1.0 -0.1 0 -1.523 -0.5 4.4 -0.1 0 -1.523 -0.5 -1.0 5.2 0 -1.523 0 0 0 1.0 0"}]},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp_image editable-image"><svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#{src}" filter="url(##{filterId})" draggable="false"></image><defs><filter id="#{filterId}"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="#{path}"></feColorMatrix></filter></defs></g></svg></div>'},function(e,t){function n(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1;return t?"Opera":e.indexOf("Firefox")>-1?"FF":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t?"IE":void 0}function i(){var e={Chrome:"-webkit-",FF:"-moz-",Opera:"-o-",Safari:"-webkit-"};return e[n()]||"-webkit-"}function o(e){return e in document.documentElement.style}function r(e){var t=e.originalEvent,n=t.touches,i=n?t.changedTouches[0]:null;return e=i?i:e}e.exports={getBrowserPrefix:i,isSupportStyle:o,getEvent:r}},function(e,t,n){var i=[{name:"圆形",path:n(141)},{name:"菱形",path:n(142)},{name:"心形",path:n(143)},{name:"矩形2",path:n(144)},{name:"矩形3",path:n(145)},{name:"矩形4",path:n(146)},{name:"星形1",path:n(147)},{name:"星形2",path:n(148)},{name:"星形3",path:n(149)},{name:"三角形",path:n(150)}];e.exports=i},function(e,t,n){e.exports=n.p+"images/circle-6daa4d.svg"},function(e,t,n){e.exports=n.p+"images/diamond-a61c24.svg"},function(e,t,n){e.exports=n.p+"images/heart-d692b9.svg"},function(e,t,n){e.exports=n.p+"images/rect2-007f3e.svg"},function(e,t,n){e.exports=n.p+"images/rect3-896f69.svg"},function(e,t,n){e.exports=n.p+"images/rect4-fb3aef.svg"},function(e,t,n){e.exports=n.p+"images/star1-42a9b6.svg"},function(e,t,n){e.exports=n.p+"images/star2-b75251.svg"},function(e,t,n){e.exports=n.p+"images/star3-343bf6.svg"},function(e,t,n){e.exports=n.p+"images/triangle-170329.svg"},function(e,t){function n(e,t,n){var r=e.width,a=e.height;isNaN(t)||t<1||(n?i(e,0,0,r,a,t):o(e,0,0,r,a,t))}function i(e,t,n,i,o,c){if(!(isNaN(c)||c<1)){c|=0;var u,l=e.getContext("2d");try{try{u=l.getImageData(t,n,i,o)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),u=l.getImageData(t,n,i,o)}catch(p){throw new Error("unable to access local image data: "+p)}}}catch(p){throw new Error("unable to access image data: "+p)}var d,f,h,g,m,v,y,b,x,w,k,E,I,_,S,O,P,$,T,C,q,j,R,L,A=u.data,M=c+c+1,D=i-1,F=o-1,J=c+1,B=J*(J+1)/2,N=new r,z=N;for(h=1;h<M;h++){if(z=z.next=new r,h==J){var W=z}}z.next=N;var U=null,V=null;y=v=0;var G=a[c],H=s[c];for(f=0;f<o;f++){for(O=P=$=T=b=x=w=k=0,E=J*(C=A[v]),I=J*(q=A[v+1]),_=J*(j=A[v+2]),S=J*(R=A[v+3]),b+=B*C,x+=B*q,w+=B*j,k+=B*R,z=N,h=0;h<J;h++){z.r=C,z.g=q,z.b=j,z.a=R,z=z.next}for(h=1;h<J;h++){g=v+((D<h?D:h)<<2),b+=(z.r=C=A[g])*(L=J-h),x+=(z.g=q=A[g+1])*L,w+=(z.b=j=A[g+2])*L,k+=(z.a=R=A[g+3])*L,O+=C,P+=q,$+=j,T+=R,z=z.next}for(U=N,V=W,d=0;d<i;d++){A[v+3]=R=k*G>>H,0!=R?(R=255/R,A[v]=(b*G>>H)*R,A[v+1]=(x*G>>H)*R,A[v+2]=(w*G>>H)*R):A[v]=A[v+1]=A[v+2]=0,b-=E,x-=I,w-=_,k-=S,E-=U.r,I-=U.g,_-=U.b,S-=U.a,g=y+((g=d+c+1)<D?g:D)<<2,O+=U.r=A[g],P+=U.g=A[g+1],$+=U.b=A[g+2],T+=U.a=A[g+3],b+=O,x+=P,w+=$,k+=T,U=U.next,E+=C=V.r,I+=q=V.g,_+=j=V.b,S+=R=V.a,O-=C,P-=q,$-=j,T-=R,V=V.next,v+=4}y+=i}for(d=0;d<i;d++){for(P=$=T=O=x=w=k=b=0,v=d<<2,E=J*(C=A[v]),I=J*(q=A[v+1]),_=J*(j=A[v+2]),S=J*(R=A[v+3]),b+=B*C,x+=B*q,w+=B*j,k+=B*R,z=N,h=0;h<J;h++){z.r=C,z.g=q,z.b=j,z.a=R,z=z.next}for(m=i,h=1;h<=c;h++){v=m+d<<2,b+=(z.r=C=A[v])*(L=J-h),x+=(z.g=q=A[v+1])*L,w+=(z.b=j=A[v+2])*L,k+=(z.a=R=A[v+3])*L,O+=C,P+=q,$+=j,T+=R,z=z.next,h<F&&(m+=i)}for(v=d,U=N,V=W,f=0;f<o;f++){g=v<<2,A[g+3]=R=k*G>>H,R>0?(R=255/R,A[g]=(b*G>>H)*R,A[g+1]=(x*G>>H)*R,A[g+2]=(w*G>>H)*R):A[g]=A[g+1]=A[g+2]=0,b-=E,x-=I,w-=_,k-=S,E-=U.r,I-=U.g,_-=U.b,S-=U.a,g=d+((g=f+J)<F?g:F)*i<<2,b+=O+=U.r=A[g],x+=P+=U.g=A[g+1],w+=$+=U.b=A[g+2],k+=T+=U.a=A[g+3],U=U.next,E+=C=V.r,I+=q=V.g,_+=j=V.b,S+=R=V.a,O-=C,P-=q,$-=j,T-=R,V=V.next,v+=i}}l.putImageData(u,t,n)}}function o(e,t,n,i,o,c){if(!(isNaN(c)||c<1)){c|=0;var u,l=e.getContext("2d");try{try{u=l.getImageData(t,n,i,o)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),u=l.getImageData(t,n,i,o)}catch(p){throw alert("Cannot access local image"),new Error("unable to access local image data: "+p)}}}catch(p){throw alert("Cannot access image"),new Error("unable to access image data: "+p)}var d,f,h,g,m,v,y,b,x,w,k,E,I,_,S,O,P,$,T,C,q=u.data,j=c+c+1,R=i-1,L=o-1,A=c+1,M=A*(A+1)/2,D=new r,F=D;for(h=1;h<j;h++){if(F=F.next=new r,h==A){var J=F}}F.next=D;var B=null,N=null;y=v=0;var z=a[c],W=s[c];for(f=0;f<o;f++){for(_=S=O=b=x=w=0,k=A*(P=q[v]),E=A*($=q[v+1]),I=A*(T=q[v+2]),b+=M*P,x+=M*$,w+=M*T,F=D,h=0;h<A;h++){F.r=P,F.g=$,F.b=T,F=F.next}for(h=1;h<A;h++){g=v+((R<h?R:h)<<2),b+=(F.r=P=q[g])*(C=A-h),x+=(F.g=$=q[g+1])*C,w+=(F.b=T=q[g+2])*C,_+=P,S+=$,O+=T,F=F.next}for(B=D,N=J,d=0;d<i;d++){q[v]=b*z>>W,q[v+1]=x*z>>W,q[v+2]=w*z>>W,b-=k,x-=E,w-=I,k-=B.r,E-=B.g,I-=B.b,g=y+((g=d+c+1)<R?g:R)<<2,_+=B.r=q[g],S+=B.g=q[g+1],O+=B.b=q[g+2],b+=_,x+=S,w+=O,B=B.next,k+=P=N.r,E+=$=N.g,I+=T=N.b,_-=P,S-=$,O-=T,N=N.next,v+=4}y+=i}for(d=0;d<i;d++){for(S=O=_=x=w=b=0,v=d<<2,k=A*(P=q[v]),E=A*($=q[v+1]),I=A*(T=q[v+2]),b+=M*P,x+=M*$,w+=M*T,F=D,h=0;h<A;h++){F.r=P,F.g=$,F.b=T,F=F.next}for(m=i,h=1;h<=c;h++){v=m+d<<2,b+=(F.r=P=q[v])*(C=A-h),x+=(F.g=$=q[v+1])*C,w+=(F.b=T=q[v+2])*C,_+=P,S+=$,O+=T,F=F.next,h<L&&(m+=i)}for(v=d,B=D,N=J,f=0;f<o;f++){g=v<<2,q[g]=b*z>>W,q[g+1]=x*z>>W,q[g+2]=w*z>>W,b-=k,x-=E,w-=I,k-=B.r,E-=B.g,I-=B.b,g=d+((g=f+A)<L?g:L)*i<<2,b+=_+=B.r=q[g],x+=S+=B.g=q[g+1],w+=O+=B.b=q[g+2],B=B.next,k+=P=N.r,E+=$=N.g,I+=T=N.b,_-=P,S-=$,O-=T,N=N.next,v+=i}}l.putImageData(u,t,n)}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={stackBlurImage:n}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.title,o=void 0===i?"":i,r=e.imgSrc,a=void 0===r?"":r,s=e.width,c=void 0===s?0:s,l=e.height,f=void 0===l?0:l,h=e.padding;c=u(c),f=u(f);var g=o.replace(/ /g,"&nbsp;"),m=a?'<img style="width: 100%; height: 100%;" src="'+a+'">':g;return d(p,{id:t,type:n,width:c,height:f,content:m,padding:h})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(153);var u=n(130).addSuffixPx,l=n(78),p=n(154),d=n(44).parse,f=(n(23).openUrl,function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.imgSrc,r=i.title,s=e.css,c=s.width,u=s.height;if(o){o=this.getImgSrc(o,{width:c,height:u});var l="0"}else{l="0 8px"}return this.$context=$(a({id:t,type:n,imgSrc:o,title:r,width:c,height:u,padding:l})),this.$context}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),t}(l));e.exports=f},function(e,t){},function(e,t){e.exports='<span id="#{id}" ctype="#{type}" class="element eqx-link editable-text" style="cursor: default; width: 100%; height: 100%; display: flex;\n   justify-content: center; align-items:center; padding: #{padding};" data-event="1120601">#{content}</span>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(22).$loadQQMap,c=n(78),u=n(44).parse;n(156);var l=n(157),p=n(23).openUrl,d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{shadow:!1,paddingTop:!1,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.content,r=t.css.width,a=t.properties,c=a.lat,p=void 0===c?39.916527:c,d=a.lng,f=void 0===d?116.397128:d,h=a.zoom,g=void 0===h?11:h,m=a.address,v=a.version,y=t.content||t.properties.address;if(1==v){var b="https://3gimg.qq.com/lightmap/v1/marker/index.html?marker=coord:"+p+","+f+";title:"+o+";addr:"+m+"&referer=myapp",x="";x="customer"===t.properties.layout?l.$customerHtml({contentDes:y}):l.$defalutHtml({url:b})}else{x="customer"===t.properties.layout?l.$customerHtml({contentDes:y}):l.$htmlText({content:o,address:m,width:r})}var w=$(u(x,{id:n,type:i})).css({width:"100%",height:"100%"}).on("mousedown mousemove mouseup mouseleave touchstart touchmove touchend",function(e){e.stopPropagation()});return 1==v&&"view"==this.eqxScene.config.mode?"":s().then(function(){1!=v&&"customer"!==t.properties.layout&&e.initQQMap({$context:w,content:o,lat:p,lng:f,zoom:g})}),this.updateOmit(),w}},{key:"updateContent",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"initQQMap",value:function(e){var t=e.$context,n=e.content,i=e.lat,o=e.lng,r=e.zoom,a=new qq.maps.LatLng(i,o),s={disableDefaultUI:!0,center:a,zoom:parseFloat(r)},c=this.map=new qq.maps.Map(t[0],s);n&&(this.label=new qq.maps.Label({position:a,map:c,content:n}));var u=new qq.maps.Marker({map:c,position:a});t.data("marker",u)}},{key:"updateOmit",value:function(){function e(){var e=t.$boxDiv.find(".navigation"),n=t.$boxDiv.find(".navigation_pad"),i=e.parent().height(),o=n.height();if(i-12<o){e.removeClass("omits"),e.removeClass("omit-height");var r=i-12-30,a=parseInt(r/20)+1;e.addClass("omits"),e.css("-webkit-line-clamp",""+a)}else{e.removeClass("omits"),e.addClass("omit-height")}}var t=this;setTimeout(function(){e()},0)}},{key:"bindAfterRenderEvent",value:function(e,t){var n=t.pageId,i=t.properties,o=i.lat,r=void 0===o?39.916527:o,a=i.lng,s=void 0===a?116.397128:a,c=i.address,u=i.layout,l=i.version,d="http://apis.map.qq.com/tools/routeplan/eword="+c+"&epointx="+s+"&epointy="+r+"?referer=myapp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77";"customer"===u?$(e).click(function(){p(d,n)}):0==l&&"default"==u&&$(e).find(".map-nav-box").click(function(){p(d,n)})}}]),t}(c);e.exports=d},function(e,t){},function(e,t){function n(e){var t=e.contentDes,n='<div id="#{id}" ctype="#{type}" class="element">\n                                <span class="mapBtn_div navigation">\n                                     <i class="eqf-address-f address"></i>\n                                     <span class="style-btn default  navigation_pad">\n                                         导航至'+t+"\n                                     </span>\n                                </span>\n                           </div>";return $(n)}function i(e){var t=e.url,n='<div id="#{id}" ctype="#{type}" class="element"><iframe src='+t+' width="100%" height="100%" class="map-iframe"></iframe></div>';return $(n)}function o(e){var t=e.content,n=e.address,i=e.width,o='<div id="#{id}" ctype="#{type}" class="element">\n                        <div class="map-nav-box">\n                            <div class="address-name">\n                                <p style="max-width: '+(i-120)+'px">'+t+'</p>\n                                <p style="max-width: '+(i-120)+'px">'+n+'</p>\n                            </div>\n                            <div class="go-here">\n                                <i class="eqf-send-l"></i>\n                                <span>去这里</span>\n                            </div>\n                        </div>\n                    </div>';return $(o)}e.exports={$customerHtml:n,$defalutHtml:i,$htmlText:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p[0].value;return p.find(function(t){var n=t.value;return n===e})}function s(e){var t=e.imgW,n=e.imgH,i=e.containerW,o=e.containerH,r={},a=t/n,s=i/o;return a>s?(r.width=i,r.height=i/a):(r.height=o,r.width=o*a),r.margin=(o-n)/2+"px "+(i-t)/2+"px",r}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(159);var l=n(78),p=[{value:1,desc:"轮播",name:"slide"},{value:2,desc:"下落",name:"bars"},{value:3,desc:"百页窗",name:"blinds"},{value:4,desc:"消隐",name:"blocks"},{value:5,desc:"渐变",name:"blocks2"},{value:9,desc:"梳理",name:"zip"},{value:11,desc:"翻转",name:"bars3d"},{value:13,desc:"立方体",name:"cube"},{value:14,desc:"棋盘",name:"tiles3d"},{value:16,desc:"飞出",name:"explode"}],d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.intervalObj={},$.extend(!0,r.$ability,{style:{self:!0,compStyle:{backgroundColor:!0}},anim:!0,trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),c(t,[{key:"updateSize",value:function(e,n){n.width&&n.height&&(this.flux.width=n.width,this.flux.height=n.height,this.$context.find(".fluxslider, .images, .image1, .image2").css({width:n.width,height:n.height}),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n))}},{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties;o=void 0===o?{}:o;var r=o.children,a=void 0===r?[]:r,c=o.bgColor,u=t.css,l=u.width,p=u.height,d=$('<div id="'+n+'" class="imageSlider element" ctype="'+i+'"></div>').css("background-color",c);if(a.length){var f=a.map(function(t){var n=t.width,i=t.height,o=t.src,r=s({imgW:n,imgH:i,containerW:l,containerH:p});return o=e.getImgSrc(o,{width:l,height:p}),$('<img src="'+o+'">').css(r)});d.append(f),this.deleteInterval(n),this.initFlux(d)}return d}},{key:"initFlux",value:function(e){var t=this,n=this.compJson,i=n.id,o=n.properties,r=o.autoPlay,s=void 0!==r&&r,c=o.interval,u=o.picStyle,l=n.css,p=l.width,d=l.height,f=l.bgColor,h=flux.slider;this.flux=new h(e,{autoplay:s,delay:c,pagination:!1,transitions:[a(u).name],width:p,height:d,bgColor:f,onStartEnd:function(e){return t.addInterval(i,e)}})}},{key:"bindAfterRenderEvent",value:function(){return !1}},{key:"addInterval",value:function(e,t){this.intervalObj[e]=t}},{key:"deleteInterval",value:function(e){this.intervalObj[e]&&(clearInterval(this.intervalObj[e]),delete this.intervalObj[e])}},{key:"clearInterval",value:function(){for(var e in this.intervalObj){this.deleteInterval(e)}}}]),t}(l);e.exports=d},function(e,t){window.flux={version:"1.4.4"},function(e){flux.slider=function(t,n){flux.browser.init(),flux.browser.supportsTransitions;var i=this;this.element=e(t),this.transitions=[];for(var o in flux.transitions){this.transitions.push(o)}this.options=e.extend({autoplay:!0,transitions:this.transitions,delay:4000,pagination:!0,controls:!1,captions:!1,width:null,height:null,onTransitionEnd:null,onStartEnd:null,bgColor:""},n),this.height=this.options.height?this.options.height:null,this.width=this.options.width?this.options.width:null;var r=[];e(this.options.transitions).each(function(e,t){var n=new flux.transitions[t](this),i=!0;n.options.requires3d&&!flux.browser.supports3d&&(i=!1),n.options.compatibilityCheck&&(i=n.options.compatibilityCheck()),i&&r.push(t)}),this.options.transitions=r,this.images=[],this.imageLoadedCount=0,this.currentImageIndex=0,this.nextImageIndex=1,this.playing=!1,this.container=e('<div class="fluxslider"></div>').appendTo(this.element),this.surface=e('<div class="surface" style="position: relative"></div>').appendTo(this.container),this.container.bind("click",function(t){e(t.target).hasClass("hasLink")&&(window.location=e(t.target).data("href"))}),this.imageContainer=e('<div class="images loading1"></div>').css({position:"relative",overflow:"hidden"}).appendTo(this.surface),this.width&&this.height&&this.imageContainer.css({width:this.width+"px",height:this.height+"px"}),this.image1=e('<div class="image1" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),this.image2=e('<div class="image2" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),e(this.image1).add(this.image2).css({position:"absolute",top:"0px",left:"0px"}),this.element.find("img, a img").each(function(t,n){var o=n.cloneNode(!1),r=e(n).parent();r.is("a")&&e(o).data("href",r.attr("href")),i.images.push(o),e(n).remove()});for(var a=0;a<this.images.length;a++){var s=new Image;s.onload=function(){i.imageLoadedCount++,i.width=i.width?i.width:this.width,i.height=i.height?i.height:this.height,i.imageLoadedCount>=i.images.length&&(i.finishedLoading(),i.setupImages())},s.src=this.images[a].src}this.element.bind("fluxTransitionEnd",function(e,t){i.options.onTransitionEnd&&(e.preventDefault(),i.options.onTransitionEnd(t))}),this.transitionEndLock=!1;var c={},u={},l=20;this.element.bind("mousedown touchstart",function(e){"touchstart"===e.type?c.left=e.originalEvent.touches[0].pageX:"mousedown"===e.type&&(c.left=e.pageX)}).bind("mouseup touchend",function(e){"touchend"===e.type?u.left=e.originalEvent.changedTouches[0].pageX:"mouseup"===e.type&&(u.left=e.pageX),u.left-c.left>l?i.prev(null,{direction:"right"}):c.left-u.left>l&&i.next(null,{direction:"left"}),i.options.autoplay&&(i.stop(),i.start())})},flux.slider.prototype={constructor:flux.slider,playing:!1,start:function(){var e=this;this.playing=!0,this.transitionEndLock=!1,this.interval=setInterval(function(){!e.transitionEndLock&&e.transition()},this.options.delay),"function"==typeof this.options.onStartEnd&&this.options.onStartEnd(this.interval)},stop:function(){this.playing=!1,clearInterval(this.interval),this.interval=null},isPlaying:function(){return this.playing},next:function(e,t){t=t||{},t.direction="left",this.showImage(this.currentImageIndex+1,e,t)},prev:function(e,t){t=t||{},t.direction="right",this.showImage(this.currentImageIndex-1,e,t)},showImage:function(e,t,n){this.setNextIndex(e),this.setupImages(),this.transition(t,n)},finishedLoading:function(){var t=this;if(this.container.css({width:this.width+"px",height:this.height+"px"}),this.imageContainer.removeClass("loading1"),this.options.pagination&&(this.pagination=e('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"}),this.pagination.bind("click",function(n){n.preventDefault(),t.showImage(e(n.target).data("index"))}),e(this.images).each(function(n,i){var o=e('<li data-index="'+n+'">'+(n+1)+"</li>").css({display:"inline-block","margin-left":"0.5em",cursor:"pointer"}).appendTo(t.pagination);0==n&&o.css("margin-left",0).addClass("current")}),this.container.append(this.pagination)),e(this.imageContainer).css({width:this.width+"px",height:this.height+"px"}),e(this.image1).css({width:this.width+"px",height:this.height+"px"}),e(this.image2).css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"}),this.options.controls){var n={padding:"4px 10px 10px","font-size":"60px","font-family":"arial, sans-serif","line-height":"1em","font-weight":"bold",color:"#FFF","text-decoration":"none",background:"rgba(0,0,0,0.5)",position:"absolute","z-index":2000};this.nextButton=e('<a href="#">»</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.next()}),this.prevButton=e('<a href="#">«</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.prev()});var i=(this.height-this.nextButton.height())/2;this.nextButton.css({top:i+"px",right:"10px"}),this.prevButton.css({top:i+"px",left:"10px"})}this.options.captions&&(this.captionBar=e('<div class="caption"></div>').css({background:"rgba(0,0,0,0.6)",color:"#FFF","font-size":"16px","font-family":"helvetica, arial, sans-serif","text-decoration":"none","font-weight":"bold",padding:"1.5em 1em",opacity:0,position:"absolute","z-index":110,width:"100%",bottom:0}).css3({"transition-property":"opacity","transition-duration":"800ms","box-sizing":"border-box"}).prependTo(this.surface)),this.updateCaption()},setupImages:function(){var t=this.getImage(this.currentImageIndex),n={background:'url("'+t.src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:101,cursor:"auto"};e(t).data("href")?(n.cursor="pointer",this.image1.addClass("hasLink"),this.image1.data("href",e(t).data("href"))):(this.image1.removeClass("hasLink"),this.image1.data("href",null)),this.image1.css(n).children().remove(),this.image2.css({background:'url("'+this.getImage(this.nextImageIndex).src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:100,display:"none"}),this.options.pagination&&this.pagination&&(this.pagination.find("li.current").removeClass("current"),e(this.pagination.find("li")[this.currentImageIndex]).addClass("current"))},transition:function(t,n){if(void 0==t||!flux.transitions[t]){var i=Math.floor(Math.random()*this.options.transitions.length);t=this.options.transitions[i]}var o=null;try{o=new flux.transitions[t](this,e.extend(this.options[t]?this.options[t]:{},n))}catch(r){var a=flux.transition;o=new a(this,{fallback:!0})}o.run(),this.currentImageIndex=this.nextImageIndex,this.setNextIndex(this.currentImageIndex+1),this.updateCaption()},updateCaption:function(){var t=e(this.getImage(this.currentImageIndex)).attr("title");this.options.captions&&this.captionBar&&(""!==t&&this.captionBar.html(t),this.captionBar.css("opacity",""===t?0:1))},getImage:function(e){return e%=this.images.length,this.images[e]},setNextIndex:function(e){void 0==e&&(e=this.currentImageIndex+1),this.nextImageIndex=e,this.nextImageIndex>this.images.length-1&&(this.nextImageIndex=0),this.nextImageIndex<0&&(this.nextImageIndex=this.images.length-1)},increment:function(){this.currentImageIndex++,this.currentImageIndex>this.images.length-1&&(this.currentImageIndex=0)}}}(window.jQuery||window.Zepto),function(e){flux.browser={init:function(){if(void 0===flux.browser.supportsTransitions){var t=["-webkit","-moz","-o","-ms"];if(window.Modernizr&&void 0!==window.Modernizr.csstransitions?flux.browser.supportsTransitions=window.Modernizr.csstransitions:flux.browser.supportsTransitions=this.supportsCSSProperty("Transition"),window.Modernizr&&void 0!==window.Modernizr.csstransforms3d){flux.browser.supports3d=window.Modernizr.csstransforms3d}else{if(flux.browser.supports3d=this.supportsCSSProperty("Perspective"),flux.browser.supports3d&&"webkitPerspective" in e("body").get(0).style){var n=e('<div id="csstransform3d"></div>'),i=e('<style media="(transform-3d), ('+t.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');e("body").append(n),e("head").append(i),flux.browser.supports3d=9==n.get(0).offsetLeft,n.remove(),i.remove()}}}},supportsCSSProperty:function(e){for(var t=document.createElement("div"),n=["Webkit","Moz","O","Ms"],i=!1,o=0;o<n.length;o++){n[o]+e in t.style&&(i=i||!0)}return i},translate:function(e,t,n){return e=void 0!=e?e:0,t=void 0!=t?t:0,n=void 0!=n?n:0,"translate"+(flux.browser.supports3d?"3d(":"(")+e+"px,"+t+(flux.browser.supports3d?"px,"+n+"px)":"px)")},rotateX:function(e){return flux.browser.rotate("x",e)},rotateY:function(e){return flux.browser.rotate("y",e)},rotateZ:function(e){return flux.browser.rotate("z",e)},rotate:function(e,t){return e in {x:"",y:"",z:""}||(e="z"),t=void 0!=t?t:0,flux.browser.supports3d?"rotate3d("+("x"==e?"1":"0")+", "+("y"==e?"1":"0")+", "+("z"==e?"1":"0")+", "+t+"deg)":"z"==e?"rotate("+t+"deg)":""}},e(function(){flux.browser.init()})}(window.jQuery||window.Zepto),function(e){e.fn.css3=function(e){var t={},n=["webkit","moz","ms","o"];for(var i in e){for(var o=0;o<n.length;o++){t["-"+n[o]+"-"+i]=e[i]}t[i]=e[i]}return this.css(t),this},e.fn.transitionEnd=function(t){for(var n=["webkitTransitionEnd","transitionend","oTransitionEnd"],i=0;i<n.length;i++){this.bind(n[i],function(i){for(var o=0;o<n.length;o++){e(this).unbind(n[o])}t&&t.call(this,i)})}return this},flux.transition=function(t,n){if(this.options=e.extend({requires3d:!1,after:function(){}},n),this.slider=t,this.options.requires3d&&!flux.browser.supports3d||!flux.browser.supportsTransitions||this.options.fallback===!0){var i=this;this.options.after=void 0,this.options.setup=function(){i.fallbackSetup()},this.options.execute=function(){i.fallbackExecute()}}},flux.transition.prototype={constructor:flux.transition,hasFinished:!1,run:function(){var e=this;void 0!==this.options.setup&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){void 0!==e.options.execute&&e.slider.image1.css("background-color",""),e.options.execute.call(e),e.slider.options.autoplay&&(e.slider.transitionEndLock=!0)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}),this.slider.options.autoplay&&(this.slider.transitionEndLock=!1))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},flux.transitions={},flux.transition_grid=function(t,n){var i=flux.transition;return new i(t,e.extend({columns:10,rows:10,forceSquare:!1,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=Math.floor(t/this.options.columns),o=Math.floor(n/this.options.rows);this.options.forceSquare&&(o=i,this.options.rows=Math.floor(n/o));for(var r=t-this.options.columns*i,a=Math.ceil(r/this.options.columns),s=n-this.options.rows*o,c=Math.ceil(s/this.options.rows),u=0,l=0,p=document.createDocumentFragment(),d=0;d<this.options.columns;d++){var f=i;if(l=0,r>0){var h=r>=a?a:r;f+=h,r-=h}for(var g=0;g<this.options.rows;g++){var m=o,v=s;v>0&&(h=v>=c?c:v,m+=h,v-=h);var y=e('<div class="tile tile-'+d+"-"+g+'"></div>').css({width:f+"px",height:m+"px",position:"absolute",top:l+"px",left:u+"px",overflow:"hidden"}).append("<div></div>");this.options.renderTile.call(this,y,d,g,f,m,u,l),p.appendChild(y.get(0)),l+=m}u+=f}this.slider.image1.get(0).appendChild(p)},execute:function(){var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},renderTile:function(e,t,n,i,o,r,a){}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({columns:10,rows:1,delayBetweenBars:40,renderTile:function(t,n,i,o,r,a,s){e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"400ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms"})},execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,n)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars3d=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({requires3d:!0,columns:7,rows:1,delayBetweenBars:150,perspective:1000,renderTile:function(t,n,i,o,r,a,s){var c=e('<div class="bar-'+n+'"></div>').css({width:o+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,overflow:"hidden"}).css3({"backface-visibility":"hidden"}),u=e("<div></div>").css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).appendTo(c),l=e(c.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-r/2,r/2)});e(u.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).appendTo(l);var p=e('<div class="side bar-'+n+'"></div>').css({width:r+"px",height:r+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(r/2,0,-r/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),d=e(p.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(r/2,0,o-r/2)});e(t).empty().css({overflow:"visible",width:o+"px",height:"100%",position:"absolute",top:"0px",left:a+"px","z-index":n>this.options.columns/2?1000-n:1000}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms","transform-style":"preserve-3d"}).append(c).append(l).append(p).append(d)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.tile");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image1.css3({"transform-style":"flat"}),e.slider.image2.show(),e.finished()}),setTimeout(function(){n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blinds=function(t,n){var i=flux.transitions.bars;return new i(t,e.extend({execute:function(){var t=this,n=this.slider.image1.find("div.tile");e(n[n.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){n.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.zip=function(t,n){var i=flux.transitions.bars;return new i(t,e.extend({execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,t%2?"-"+2*n:n)})})},20)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({forceSquare:!0,delayBetweenBars:100,renderTile:function(t,n,i,o,r,a,s){var c=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":c+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),c>this.maxDelay&&(this.maxDelay=c,this.maxDelayTile=t)},execute:function(){var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks2=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({cols:12,forceSquare:!0,delayBetweenDiagnols:150,renderTile:function(t,n,i,o,r,a,s){e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":(n+i)*this.options.delayBetweenDiagnols+"ms","backface-visibility":"hidden"})},execute:function(){var t=this,n=this.slider.image1.find("div.tile");n.last().transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.cube=function(t,n){var i=flux.transition;return new i(t,e.extend({requires3d:!0,barWidth:100,direction:"left",perspective:1000,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height();this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}),this.cubeContainer=e('<div class="cube"></div>').css({width:t+"px",height:n+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transform-style":"preserve-3d"});var i={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"},o=e('<div class="face current"></div>').css(e.extend(i,{background:this.slider.image1.css("background")})).css3({"backface-visibility":"hidden"});this.cubeContainer.append(o);var r=e('<div class="face next"></div>').css(e.extend(i,{backgroundImage:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace"),"backface-visibility":"hidden"});this.cubeContainer.append(r),this.slider.image1.append(this.cubeContainer)},execute:function(){var e=this;this.slider.image2.hide(),this.cubeContainer.transitionEnd(function(){e.slider.image2.show(),e.finished()}),setTimeout(function(){e.cubeContainer.css3({transform:e.options.transitionStrings.call(e,e.options.direction,"container")})},50)},transitionStrings:function(e,t){var n=this.slider.image1.width(),i=this.slider.image1.height(),o={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2),container:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2)}};return !(!o[e]||!o[e][t])&&o[e][t]}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.tiles3d=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({requires3d:!0,forceSquare:!0,columns:5,perspective:600,delayBetweenBarsX:200,delayBetweenBarsY:150,renderTile:function(t,n,i,o,r,a,s){var c=e("<div></div>").css({width:o+"px",height:r+"px",position:"absolute",top:"0px",left:"0px",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+a+"px -"+s+"px","background-repeat":"no-repeat","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),u=e(c.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});e(t).empty().css({overflow:"visible","z-index":(n>this.options.columns/2?500-n:500)+(i>this.options.rows/2?500-i:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":n*this.options.delayBetweenBarsX+i*this.options.delayBetweenBarsY+"ms","transform-style":"preserve-3d"}).append(c).append(u)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});var e=this,t=this.slider.image1.find("div.tile");this.slider.image2.hide(),t.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),setTimeout(function(){t.css3({transform:flux.browser.rotateY(180)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.turn=function(t,n){var i=flux.transition;return new i(t,e.extend({requires3d:!0,perspective:1300,direction:"left",setup:function(){var t=e('<div class="tab"></div>').css({width:"50%",height:"100%",position:"absolute",top:"0px",left:"left"===this.options.direction?"50%":"0%","z-index":101}).css3({"transform-style":"preserve-3d","transition-duration":"1000ms","transition-timing-function":"ease-out","transition-property":"all","transform-origin":"left"==this.options.direction?"left center":"right center"});e("<div></div>").appendTo(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?"-"+this.slider.image1.width()/2:0)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),e("<div></div>").appendTo(t).css({background:this.slider.image2.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});var n=e("<div></div>").css({position:"absolute",top:"0",left:"left"===this.options.direction?"0":"50%",width:"50%",height:"100%",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0","z-index":100}),i=e('<div class="overlay"></div>').css({position:"absolute",top:"0",left:"left"===this.options.direction?"50%":"0",width:"50%",height:"100%",background:"#000",opacity:1}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"opacity"}),o=e("<div></div>").css3({width:"100%",height:"100%"}).css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).append(t).append(n).append(i);this.slider.image1.append(o)},execute:function(){var e=this;this.slider.image1.find("div.tab").first().transitionEnd(function(){e.finished()}),setTimeout(function(){e.slider.image1.find("div.tab").css3({transform:flux.browser.rotateY("left"==e.options.direction?-179:179)}),e.slider.image1.find("div.overlay").css({opacity:0})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.slide=function(t,n){var i=flux.transition;return new i(t,e.extend({direction:"left",setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=e('<div class="current"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:"0px",background:this.slider["left"===this.options.direction?"image1":"image2"].css("background")}).css3({"backface-visibility":"hidden"}),o=e('<div class="next"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:t+"px",background:this.slider["left"===this.options.direction?"image2":"image1"].css("background")}).css3({"backface-visibility":"hidden"});this.slideContainer=e('<div class="slide"></div>').css({width:2*t+"px",height:n+"px",position:"relative",left:"left"===this.options.direction?"0px":-t+"px","z-index":101}).css3({"transition-duration":"600ms","transition-timing-function":"ease-in","transition-property":"all"}),this.slideContainer.append(i).append(o),this.slider.image1.append(this.slideContainer)},execute:function(){var e=this,t=this.slider.image1.width();"left"===this.options.direction&&(t=-t),this.slideContainer.transitionEnd(function(){e.finished()}),setTimeout(function(){e.slideContainer.css3({transform:flux.browser.translate(t)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.explode=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({columns:10,forceSquare:!0,delayBetweenBars:30,perspective:800,requires3d:!0,renderTile:function(t,n,i,o,r,a,s){var c=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"500ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":c+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),c>this.maxDelay&&(this.maxDelay=c,this.maxDelayTile=t)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.slider.image1.css3({"transform-style":"flat"}),t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:flux.browser.translate(0,0,700)+" rotate3d("+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", 90deg) "})})},50)}},n))}}(window.jQuery||window.Zepto)},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return new Promise(function(t,i){n.e(1,function(){var o=n(163),r=o[e];/^<path.*>$/.test(r)?t(r):i(e+" does not match <path />")})})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(41).$getSvg,l=n(161),p=n(162),d=n(78),f="http://www.w3.org/2000/svg",h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0}}}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps,i=this.compJson.properties.items,o=(i||[]).map(function(e,t){return n.color.fill+"-"+t});return e.concat([n.sound.soundSrc,n.link.url,n.internalLink.internalLink,n.telephone.number],o)}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;if(e.includes(n.color.fill)){var i=e.split("-")[1];return this.getProp("items")[i].fill}return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateFillColor",value:function(e,t){var n=$(this.$li).find("[fill], [style*='fill']"),i=this.getProp("items")[e];if(i){var o=i.elements;i.fill=t,n.each(function(e){if(o.indexOf(e)>-1){var i=$.Color(t).toString();n.eq(e).css({fill:i})}})}}},{key:"create$context",value:function(){var e=this.compJson,t=this;this.$contentsDiv.css({position:"relative"});var n=e.id,i=e.properties,o=i.viewBox,r=void 0===o?"0 0 64 64":o,s=i.type,c=void 0===s?"":s,d=i.src,h=i.items,g=e.css.color,m=void 0===g?"#555":g;if(d){var v=document.createElementNS(f,"svg");return v.setAttribute("class","element svg-element"),u(d).then(function(i){var o=i.getElementsByTagName("svg"),r=o[0].viewBox.baseVal,a=parseFloat($(o).attr("width"))||r.width,s=parseFloat($(o).attr("height"))||r.height,c=$(o).find("[fill], [style*='fill']")||[];if(h){if(c.length==h.length){for(var u=0;u<h.length;u++){c.eq(u).css({fill:h[u].fill})}}else{$.each(c,function(e,t){for(var n=0;n<h.length;n++){for(var i=h[n].elements||[],o=0;o<i.length;o++){e==i[o]&&(""!=h[n].fill?c.eq(e).css({fill:h[n].fill}):c.eq(e).css({fill:"none"}))}}})}}else{var l=[],p={};$.each(c,function(e,t){var n=$(t).attr("style");if(n){for(var i=n.split(";")||[],o=0,r=i.length;o<r;o++){if(i[o].includes("fill:")){l.push(i[o].split(":")[1]);break}}}else{l.push($(t).attr("fill"))}});for(var d=0;d<l.length;d++){p[l[d]]||(p[l[d]]=1,"none"!=l[d]?h.push({fill:l[d],svgFill:l[d]}):h.push({fill:"",svgFill:"none"}))}for(var f=0;f<h.length;f++){var g=[];$.each(c,function(e,t){var n,i=$(t).attr("style");if(i){for(var o=i.split(";"),r=0,a=o.length;r<a;r++){if(o[r].includes("fill:")){n=o[r].split(":")[1];break}}}else{n=$(t).attr("fill")}n==h[f].svgFill&&g.push(e)}),h[f].elements=g}e.properties.items=h}var m="0 0 "+a+" "+s,y=t.$contentsDiv;y.empty();var b=t.$contentsDiv[0];v=o[0],b.appendChild(v),v.getAttribute("viewBox")||v.setAttribute("viewBox",m),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("width","100%"),v.setAttribute("height","100%"),v.id=n,v.setAttribute("class","element svg-element"),t.$context=$(v)})["catch"](function(){var e;(e=console).error.apply(e,arguments)}),$(v)}var y=r.split(" "),b=y[2]||64,x=y[3]||64;if(c.includes("symbols")){var w=$(p.svg({id:n,viewBox:r}))[0];return a(c.replace(/^symbols-/,"")).then(function(e){w.innerHTML=p.g({id:n,color:m,path:e})})["catch"](function(){var e;(e=console).error.apply(e,arguments)}),$(w)}var k=c.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});if(l[k]){var E=$(l[k](b,x)).attr("fill",m);return $(p.svg({id:n,viewBox:r,content:E[0].outerHTML}))}}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}}]),t}(d);e.exports=h},function(e,t){function n(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i(e){for(var t=[];e.length>=2;){t.push(e.shift()+","+e.shift())}return t.join(" ")}function o(e,t){var i=n("rect");return i.setAttribute("width",e),i.setAttribute("height",t),i}function r(e,t){var i=n("ellipse");return i.setAttribute("rx",e/2),i.setAttribute("ry",t/2),i.setAttribute("cx",e/2),i.setAttribute("cy",t/2),i}function a(e,t){var o=n("polygon");return o.setAttribute("points",i([e/2,0,e,t,0,t])),o}function s(e,t){var o=n("polygon");return o.setAttribute("points",i([0,0,e,0,e/2,t])),o}function c(e,t){var o=n("polygon");return o.setAttribute("points",i([0,t/2,e,0,e,t])),o}function u(e,t){var o=n("polygon");return o.setAttribute("points",i([e,t/2,0,t,0,0])),o}function l(e,t){var o=n("polygon");return o.setAttribute("points",i([0.5*e,0,e,0.5*t,0.7*e,0.5*t,0.7*e,t,0.3*e,t,0.3*e,0.5*t,0,0.5*t,0.5*e,0])),o}function p(e,t){var o=n("polygon");return o.setAttribute("points",i([0.5*e,t,e,0.5*t,0.7*e,0.5*t,0.7*e,0,0.3*e,0,0.3*e,0.5*t,0,0.5*t,0.5*e,t])),o}function d(e,t){var o=n("polygon");return o.setAttribute("points",i([e,0.3*t,0.5*e,0.3*t,0.5*e,0,0,0.5*t,0.5*e,t,0.5*e,0.7*t,e,0.7*t,e,0.3*t])),o}function f(e,t){var o=n("polygon");return o.setAttribute("points",i([0,0.3*t,0.5*e,0.3*t,0.5*e,0,e,0.5*t,0.5*e,t,0.5*e,0.7*t,0,0.7*t])),o}function h(e,t,o){var r=n("polygon"),a=[];if(3===o){a=[e/2,0,e,t,0,t]}else{if(o>3){for(var s=e/2,c=t/2,u=0;o>u;u++){var l=s+s*Math.cos(2*Math.PI*u/o),p=c+c*Math.sin(2*Math.PI*u/o);l=Math.round(10*l)/10,p=Math.round(10*p)/10,a.push(l),a.push(p)}}}return r.setAttribute("points",i(a)),r}function g(e,t){return h(e,t,4)}function m(e,t){return h(e,t,8)}e.exports={rect:o,ellipse:r,circle:r,triangleUp:a,triangleDown:s,triangleLeft:c,triangleRight:u,arrowUp:l,arrowDown:p,arrowLeft:d,arrowRight:f,diamond:g,octagon:m};var v=n("rect");v.attr=v.setAttribute},function(e,t){function n(e){var t=e.color,n=e.id,i=e.path;return'<g fill="'+t+'" id="path_'+n+'">'+i+"</g>"}function i(e){var t=e.id,n=e.viewBox,i=e.content,r=void 0===i?"":i;return'\n<svg id="'+t+'" class="element svg-element" xmlns="'+o+'" version="1.1" width="100%"\n     height="100%" preserveAspectRatio="none" viewBox="'+n+'">\n    '+r+"\n</svg>"}var o="http://www.w3.org/2000/svg";e.exports={g:n,svg:i}},,function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(165),u=n(78),l=n(167),p=n(169),d=n(44).parse,f=n(24).mobilecheck,h={POP:0,INLINE:1},g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.bgm=r.eqxScene.bgm,r.$close=null,r.$video=null,$.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1}},anim:!1,trigger:{self:!1},sound:!1,link:!1,flexLine:"r,ne,se,sw,nw"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.cover,o=e.css,r=o.width,a=o.height;if(i){i=this.getImgSrc(i,{width:r,height:a});var s=$(d(l,{id:t,type:n,cover:i}))}else{s=$(d(p,{id:t,type:n}))}return s.css({height:a,width:r}),s}},{key:"addClassToLi",value:function(e){e.addClass("wsite-video")}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.hide()}},{key:"update",value:function(e){switch(e.type){case"hide":this.hide()}}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=t.properties.style;return e.click(function(){switch(n._isPlayingVideo=!0,n.bgm&&n.bgm.hide&&n.bgm.hide(),n.eqxScene.soundManager.stopAll(),i){case h.INLINE:n.initInlineVideo();break;case h.POP:default:n.initPopVideo()}}),!0}},{key:"initInlineVideo",value:function(){var e=this.compJson,t=e.properties.src,n=e.css;if(t){t=t.replace(/('|")?allowfullscreen\1(=('|")?\3)?/,"");var i=this.$iframe=$($.parseHTML(t)).css({width:n.width,height:n.height,zIndex:3,top:0});f()||i.css("position","absolute"),this.$context.find("img").css("display","none"),0==this.$li.find("iframe").length&&this.$li.find(".inline-video").append(i)}}},{key:"initPopVideo",value:function(){var e=this,t=this.compJson,n=t.id,i=t.properties.src,o=this.$li;o.hide();var r=o.parent().css("transform").match(/-?[\d.]+/g)||o.parents(".edit_wrapper").css("transform").match(/-?[\d.]+/g),a=0;r&&(a=-parseInt(r[5]));var s=this.$video=$(c.videoDiv(n));f()||s.css("position","absolute");var u=this.$close=$(c.close(n)),l=$(i).css({position:"absolute",top:"20%",width:"100%",minHeight:"45%",maxHeight:"100%"}).removeAttr("height");s.append(l),o.parent().append(s,u),s.css({top:a}),u.css({top:a+15}),u.bind("click",function(){e.hide()})}},{key:"hide",value:function(){if(this._isPlayingVideo){this._isPlayingVideo=!1,this.bgm&&this.bgm.show&&this.bgm.show(),this.eqxScene.soundManager.restoreAll();var e=this.compJson.properties.style,t=void 0===e?0:e;switch(t){case h.INLINE:this.$iframe&&(this.$iframe.remove(),this.$iframe=null);break;case h.POP:this.$close&&(this.$li.show(),this.$close.unbind("click"),this.$video.remove(),this.$close.remove(),this.$video=null,this.$close=null)}}}},{key:"updateCoverRender",value:function(e){var t=this.compJson,n=JSON.parse(JSON.stringify(t)),i=this.updateJson(n);this.eqxPage.renderEqxComp(i,!0)}}]),t}(u);g.STYLE=h,e.exports=g},function(e,t,n){function i(e){var t=e.id,n=e.type;return'<a class="element video_area" id="'+t+'" ctype="'+n+'" style="width:100%;height:100%;"></a>'}function o(e){return'<div class="video_mask page_effect lock" id="mask_'+e+'"></div>'}function r(e){return'<a class="close_mask eqf-no" id="close_'+e+'"></a>'}n(166),e.exports={compDiv:i,videoDiv:o,close:r}},function(e,t){},function(e,t,n){e.exports='<div class="inline-video" id="#{id}" ctype="#{type}"><img class="cover" alt="video-cover" src="#{cover}"> <img class="center play" src="'+n(168)+'" alt="video-play-button"></div>'},function(e,t,n){e.exports="http://img.woniudichan.com/play-a830cb.svg"},function(e,t){e.exports='<a class="element video_area" id="#{id}" ctype="#{type}" style="width:100%;height:100%;"></a>'},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(78),l=n(171),p=n(93).getWxJSSDK,d=n(24).isWeixin,f=n(24).isAndroid,h=n(72).RAW_EVENT,g=n(72).EQX_EVENT,m=n(24).mobilecheck,v=m()?"touchend":"click",y=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{commonStyle:{self:!1},advanceStyle:{self:!1}},anim:!1,trigger:{mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0},sound:!1,link:!1}),i}return a(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.video.video])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.video.video?this.compJson.src:c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateSize",value:function(e,n){this.$context.css({width:n.width,height:n.height}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"create$context",value:function(){var e=this.compJson,t=e.css,n=t.width,i=t.height,o=e.properties,r=o.loop,a=o.coverImg,s=void 0===a?l:a,c=o.imgStyle;c=void 0===c?{}:c;var u=c.width,p=c.height;this.$source=$('<source type="video/mp4">');var d="";"edit"!=this.eqxScene.config.mode&&(d="controls");var f=$("<video  "+d+'  x5-video-player-fullscreen="false"   width="'+(u||n)+'" height="'+(p||i)+'" poster="'+s+'""></video>');return r&&f.attr("loop","loop"),f.append(this.$source),f}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.compJson.autoplay&&"1"===this.compJson.autoplay.toString()&&(this.$context.attr("autoplay","autoplay"),this.playVideo())}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$context[0].pause(),this.interactiveVideoAgent&&this.interactiveVideoAgent.end()}},{key:"addTriggerGroupListeners",value:function(){function e(){t.playVideo()}var t=this;this.$context.on("play",function(){$(document.body).unbind(v,e)});var n=[5,6,7,8,9,10],i=this.eqxPage.pageJson.properties.triggerGroup,o=i.some(function(e){return n.indexOf(e.eventType)>-1});i.length&&!o||$(document.body).bind(v,e)}},{key:"playVideo",value:function(){var e=this.interactiveVideoAgent;if(this.compJson.src&&this.$source.attr("src")){try{this.$li.show();var t=this.$context[0];t.currentTime=0,d()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){t.paused?e.play():e.end()}})}):t.paused?e.play():e.end()}catch(n){this.$li.hide()}}}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;t.src&&this.$source.attr("src",t.src);var i=this.eqxPage.pageJson.properties.triggerGroup.some(function(e){return e.sourceId===t.id&&e.targetId===t.id&&e.eventType===h.click&&e.targetState==g.play});return this.compJson.autoplay&&"1"===this.compJson.autoplay.toString()&&!i&&f()&&this.$li.on("click",function(){n.playVideo()}),d()&&(this.wxJssdk=p()),this.$boxDiv.css({borderWidth:0}),!0}},{key:"updatePadding",value:function(e){var t=this.compJson.properties,n=parseInt(this.compJson.css.paddingLeft),o=parseInt(this.compJson.css.paddingRight),r=parseInt(this.compJson.css.paddingTop),a=parseInt(this.compJson.css.paddingBottom),s=parseInt(this.compJson.css.width),c=parseInt(this.compJson.css.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){var u=parseInt(t.imgStyle.width),l=parseInt(t.imgStyle.height),p=u/l,d=parseInt(e.padValue);"paddingLeft"==e.padKey?o&&(d=parseInt(e.padValue)+o):n&&(d=parseInt(e.padValue)+n);var f=s-d,h=f/p;t.imgStyle.width=f,t.imgStyle.height=h,this.$context.css({width:f,height:h}),c=h+r+a}else{var g=this.compJson.css[e.padKey];c+=parseInt(e.padValue)-parseInt(g)}this.update$li(i({height:c},e.padKey,parseInt(e.padValue))),this.autoSizeTopDown()}},{key:"updatePosterImg",value:function(e){var t=this.compJson,n=JSON.parse(JSON.stringify(t)),i=n.properties;i.coverImg=e.coverImg;var o=this.updateJson(n);this.eqxPage.renderEqxComp(o,!0)}}]),t}(u);e.exports=y},function(e,t,n){e.exports="https://img.alicdn.com/imgextra/i3/483638748/O1CN014hcDzV2EUdI86Bo3S_!!483638748.jpg"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(173);var c=(n(174).$postDialRecord,n(175)),u=(n(179).isPhoneNumber,n(78)),l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=i.width,r=i.height,a=e.properties,s=a.title,u=a.imgSrc;if(u){u=this.getImgSrc(u,{width:o,height:r});var l="0"}return this.$context=$(c.compDiv({id:t,title:s,type:n,imgSrc:u,padding:l})),this.$context}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}},{key:"bindAfterRenderEvent",value:function(){}}]),t}(u);e.exports=l},function(e,t){},function(e,t,n){function i(e){return o({type:"POST",url:r.SERVER_1+"eqs/s/dial",data:e})}var o=n(20).ajax,r=n(21);e.exports={$postDialRecord:i}},function(e,t,n){function i(e){return e.imgSrc?r(e):o(e)}function o(e){var t=e.id,n=e.title,i=e.type;return n=n?n.replace(/ /g,"&nbsp;"):"",c(a,{id:t,title:n,type:i})}function r(e){var t=e.id,n=e.imgSrc,i=e.type,o=e.padding;return c(s,{id:t,src:n,type:i,padding:o})}n(176);var a=n(177),s=n(178),c=n(44).parse;e.exports={compDiv:i}},function(e,t){},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="display: flex; justify-content: center; align-items: center;" data-event="1120602" style="cursor: default; width: 100%;">#{title}</a>'},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="cursor: default; width: 100%;height: 100%;padding: #{padding}"><img style="width: 100%; height: 100%;" src="#{src}"></a>'},function(e,t){function n(e){var t=/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/;return t.test(e)}function i(e){var t=/^1[23456789]\d{9}$/;return t.test(e)}function o(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}function r(e){var t=/^[1-9]\d{4,10}$/;return t.test(e)}function a(e){var t=/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})$/;return t.test(e)||r(e)||n(e)}e.exports={isPhoneNumber:n,isEmail:o,isQQ:r,isWeiChat:a,isMobileNumber:i}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(181);var c=n(182),u=n(78),l=n(44).parse,p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.sound.soundSrc])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.imgSrc,r=i.title,a=e.css,s=a.height,u=a.width;if(o){o=this.getImgSrc(o,{width:u,height:s});var p="0",d='<img style="width: 100%; height: 100%;" src="'+o+'">'}return r&&(d=r.replace(/ /g,"&nbsp;"),p="0 8px",o=""),o||r||(d=""),$(l(c,{id:t,type:n,content:d,padding:p}))}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),t}(u);e.exports=p},function(e,t){},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-sound editable-text" data-event="1120604" style="cursor: default; width: 100%;height: 100%; padding: #{padding};\ndisplay: flex; justify-content: center; align-items: center;">#{content}</a>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.layout,o=e.size,r=e.icon,a=e.color,s=$(f(d,{layout:i,size:o,id:t,type:n,icon:r}));return s.find("i, span").css("color",a),s}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(184);var u=n(95).$getPvCount,l=n(122).fixedNum,p=n(78),d=n(185),f=n(44).parse,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.getPvCount()}},{key:"create$context",value:function(){var e=this.compJson;e.properties.color&&(e.css.color=e.properties.color,delete e.properties.color);var t=e.id,n=e.type,i=e.properties,o=i.layout,r=i.size,s=i.icon,c=e.css,u=c.lineHeight,l=c.width,p=c.height,d=c.color,f=a({id:t,type:n,layout:o,size:r,icon:s,css:{width:l,height:p,lineHeight:u,color:d}});return f}},{key:"getPvCount",value:function(){var e=this;if("view"==this.eqxScene.config.mode&&!this.eqxScene.config.disablePv){return u(this.compJson.sceneId).then(function(e){return l(e)||0}).then(function(t){e.$li.find(".counter-number").text(t)})}}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}}]),t}(p);e.exports=h},function(e,t){},function(e,t){e.exports='<div class="element comp_counter editable-text #{layout} #{size}" id="#{id}" ctype="#{type}"><div class="counter-container"><i class="counter-elem counter-icon #{icon}"></i><span class="counter-elem counter-number">0</span></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.pics,o=i.map(function(e){return s(e.path)}).join("");return $('\n<div id="'+t+'" class="random-event element comp_image editable-image" ctype="'+n+'"\n     style="width: 100%; height: 100%;">\n     '+o+"\n</div>")}function s(e){return'<img src="'+(l.FILE+e)+'" style="width: 100%; height: 100%; display: none;">'}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(187);var u=n(78),l=n(21),p=n(188),d=n(191),f=n(122).random,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.randomIndex=-1,r.busy=!1,$.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),c(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.pics;return this.randomMax=i.length,a({id:t,type:n,pics:i})}},{key:"addTriggerEvent",value:function(){var e=this.compJson.trigger,t=this.eqxScene.eventManager;e&&(e.sends&&(this.triggerEventAgent=new p(this,e,t)),e.receives&&(this.receiveEventAgent=new d(this,e,t)))}},{key:"showRandomImg",value:function(){var e=this.$context.find("img");e.css("display","none");var t=this.randomIndex;if(1!=this.randomMax){do{t=f(this.randomMax)}while(t==this.randomIndex)}else{t=0}$(e[t]).css("display","block"),this.randomIndex=t}}]),t}(u);e.exports=h},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(189),u=n(72).RAW_EVENT,l=n(72).INIT_EVENT,p=function(e){function t(e,n,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}return r(t,e),a(t,[{key:"addEventListener",value:function(){var e=this,n=this.triggerJson.sends,i=this.master.compJson.id;this.master.$li.attr("data-event","1120603"),n&&"[object Array]"===toString.apply(n)&&n.forEach(function(n){n.type===u.click?e.master.$li.on("click",function(){e.publish(i,n)}):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListener",e).call(e)})}},{key:"preHandle",value:function(){var e=this.master.compJson.properties.initType;e==l.show?this.master.$li.show():e==l.hide&&this.master.$li.hide()}}]),t}(c);e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(190).getHash,a=function(){function e(t,n,o){i(this,e),this.triggerJson=n,this.master=t,this.manager=o,this.addEventListener()}return o(e,[{key:"addEventListener",value:function(){}},{key:"preHandle",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"publish",value:function(e,t){var n=this;t.handles.forEach(function(i){var o=r(e,i.type);n.manager.publish(o,{sender:n.master,delay:1000*t.delay})})}}]),e}();e.exports=a},function(e,t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some(function(e){return e.type===r.shake})}function o(e,t){return"sender-"+e+"-type-"+t+"-"+a[t]}var r=n(72).RAW_EVENT,a=n(72).EQX_EVENT;e.exports={hasShakeEvent:i,getHash:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(192),u=n(72).EQX_EVENT,l=n(26).noop,p=function(e){function t(e,n,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}return r(t,e),a(t,[{key:"getHandler",value:function(e){return e===u.random?function(e,t){var i=n(186);if(!(e instanceof i)){if(_DEBUG_){throw new Error("Expect EqxRandom, Invalid element type: "+e)}return l}e.busy||(e.busy=!0,setTimeout(function(){e.showRandomImg(),e.busy=!1},t.delay))}:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getHandler",this).call(this,e)}}]),t}(c);e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(193),u=n(72).EQX_EVENT,l=n(72).INIT_EVENT,p=function(e){function t(e,n,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}return r(t,e),a(t,[{key:"getPreHandler",value:function(e,n){if(n!=l["default"]){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPreHandler",this).call(this,e,n)}switch(e){case u.show:return function(e){e.$li.hide()};case u.hide:return function(e){e.$li.show()};default:return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPreHandler",this).call(this,e,n)}}},{key:"getHandler",value:function(e){switch(e){case u.show:return function(e,t){setTimeout(function(){return e.$li.show()},t.delay)};case u.hide:return function(e,t){setTimeout(function(){return e.$li.hide()},t.delay)};case u.play:return function(e,t){setTimeout(function(){return e.playVideo()},t.delay)};default:return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getHandler",this).call(this,e)}}}]),t}(c);e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(26).noop,a=n(190).getHash,s=function(){function e(t,n,o){i(this,e),this.master=t,this.triggerJson=n,this.manager=o,this.events=[],this.subscribe(),this.preHandle()}return o(e,[{key:"subscribe",value:function(){var e=this;this.triggerJson.receives.forEach(function(t){(t.ids||[]).forEach(function(n){var i=a(n,t.type);e.manager.subscribe(i,e);var o=e.events.findIndex(function(e){return e.hash===i});o>-1&&e.events.splice(o,1);var r={hash:i,preHandler:e.getPreHandler(t.type,e.master.compJson.properties.initType),handler:e.getHandler(t.type)};e.events.push(r)})})}},{key:"update",value:function(e){var t=e.type,n=e.data,i=this.events.find(function(e){return e.hash===t});i&&i.handler.call(this,this.master,n)}},{key:"preHandle",value:function(){var e=this;this.events.forEach(function(t){return t.preHandler.call(e,e.master)})}},{key:"getHandler",value:function(e){return r}},{key:"getPreHandler",value:function(e){return r}}]),e}();e.exports=s},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(195),l=n(78),p=n(93).getWeChatUser,d=n(24).isWeixin,f=n(94).$getUserWxInfo,h=n(93).setWeChatUser,g=n(93).hrefToWxAuth,m=n(96).popUpModal,v=n(23).setUrlHistory,y=n(205),b=n(24).mobilecheck,x=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=a.compJson.properties.style;"barrage"===s&&(a.Barrage=new y,a.isBarragePlaying=!1,a.barrageComments=[]);var c=new Promise(function(){});if(a.commentManager=a.eqxScene.commentManager,a.commentManager){a.commentManager.register(a);var u=a.commentManager.getComments();c=u.length?Promise.resolve():a.commentManager.loadInitComments(50),c.then(function(){if("barrage"===s){var e;(e=a.barrageComments).push.apply(e,i(u)),a.eleShow()}})}return $.extend(!0,a.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),a}return a(t,e),s(t,[{key:"setProps",value:function(e){e.style&&this.getProp("style")!=e.style&&this.updateStyle(e.style),"meslabel" in e&&this.getProp("mesLabel")!=e.meslabel&&this.updateMesLabel(e.meslabel),"morelabel" in e&&this.getProp("morelabel")!=e.morelabel&&this.updateMoreLabel(e.morelabel),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setProps",this).call(this,e)}},{key:"getStyles",value:function(){return n(207)}},{key:"updateStyle",value:function(e){this.$boards&&"barrage"===e?this.compJson.css.backgroundColor="transparent":this.$boards&&this.$boards.removeClass().addClass("boards-"+e)}},{key:"updateMesLabel",value:function(e){this.$context.find("a.replay").html(e||"")}},{key:"updateMoreLabel",value:function(e){this.$context.find("a.more").html(e||"")}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.compJson.properties,n=e.style,i=e.auto;if(this.$panel.parent().length||(this.$panel.hide(),this.$panel.insertBefore(this.$li.parent().parent())),"barrage"!==n){var o=this.commentManager?this.commentManager.getComments().slice(0,5).map(function(e){return u.record(e)}):[];o.length?(this.$boards.find(".empty-boards").length&&this.$boards.find(".empty-boards").remove(),this.$boards.find(".record").remove(),this.$boards.prepend(o)):this.$boards.append(u.emptyBoards(n))}else{i&&this.playBarrageScroll()}}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this);var e=this.compJson.properties.style;"barrage"!==e?(this.$boards.find(".record").remove(),this.$boards.find(".empty-boards").remove(),this.$panel.hide()):this.stopBarrageScroll()}},{key:"addClassToLi",value:function(e){e.addClass("wsite-boards"),e.attr("min-h",60).attr("min-w",230)}},{key:"updateComments",value:function(){var e=this.compJson.properties.style;"barrage"!==e&&this.$boards&&this.$panel&&this.eleShow()}},{key:"create$context",value:function(){var e=this.compJson.properties.style;return this.$ele="barrage"===e?this.initBarrageDiv():this.initCommentStyleDiv(),this.$ele}},{key:"playBarrageScroll",value:function(){var e=this;if(!this.isBarragePlaying&&this.barrageComments.length){this.isBarragePlaying=!0;var t=this.$boards.find("a.barrage-play");t.removeClass("off").addClass("on");var n=this.compJson,i=n.css,o=i.width,r=i.height,a=n.properties.mode,s=this.$boards.find(".barrage-comments").get(0),c=devicePixelRatio||1;s.width=o*c,s.height=r*c,setTimeout(function(){e.Barrage.render(s,e.barrageComments,"0"===a.toString())})}}},{key:"stopBarrageScroll",value:function(){if(this.isBarragePlaying){this.isBarragePlaying=!1;var e=this.$boards.find("a.barrage-play");e.removeClass("on").addClass("off"),this.Barrage&&this.Barrage.stop()}}},{key:"initBarrageDiv",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.style,r=i.auto,a=i.editable,s=$(u.compDiv({id:t,type:n,style:o})),c=this.$boards=s.find(".boards-"+o);return c.append(u.barrageComments()),c.append(u.barrageTools(r,a)),this.$panel=$(u.panel({style:"default"})),this.$panelList=this.$panel.find(".list"),this.$contentText=this.$panel.find(".content-text"),this.$contentTip=this.$panel.find(".content-tip"),this.$submit=this.$panel.find(".record-btn"),this.$more=this.$panel.find(".more-mes"),this.$close=this.$panel.find(".eqf-no"),this.maxLength=this.$contentText.attr("maxLength"),s}},{key:"initCommentStyleDiv",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.meslabel,r=i.morelabel,a=i.style,s=$(u.compDiv({id:t,type:n,style:a})),c=this.$boards=s.find(".boards-"+a);c.append(u.tool({meslabel:o||"",morelabel:r||""})),this.$trigger=c.find(".tool a");var l=this.$panel=$(u.panel({style:a}));if(this.$close=l.find(".eqf-no"),this.$contentText=l.find(".content-text"),this.$contentTip=l.find(".content-tip"),this.$submit=l.find(".record-btn"),this.$more=l.find(".more-mes"),this.$panelList=l.find(".list"),this.maxLength=this.$contentText.attr("maxLength"),this.eqxScene.config.disableCommentManager){var p=(new Date).getTime(),d=[1,2,3].map(function(e){return u.record({content:"赞一个！好多新功能哦~",name:"匿名用户",createTime:p+10000*e,isEditor:!0})});c.append(d)}return s}},{key:"bindAfterRenderEvent",value:function(e,t){function n(){k.commentManager&&k.commentManager.loadMoreComments().then(function(e){k.$more.before(e.map(function(e){return u.record(e)}))})["catch"](function(){k.$more.html("没有更多"),k.$more.unbind("click")})}function i(){var e=k.compJson.properties.style,t=k.commentManager.getComments().map(function(e){return u.record(e)});k.$panelList.find(".record").remove(),k.$panelList.prepend(t),k.$panel.show();var i=k.eqxPage,o=i.$editDiv.css("transform")||"",r=o.match(/matrix.*, (.*)\)/),a=r?r[1]:0,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;k.$panel.css({top:Math.abs(a)+"px",height:(b()?s:486)+"px"}),"barrage"===e&&k.stopBarrageScroll(),n()}var o=this,r=t.sceneId,a=t.pageId,s=t.properties,c=s.style,l=void 0===c?"default":c,y=s.editable,x=p(),w=f,k=this;this.$panel.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()}),this.$contentText.on("input",function(e){var t=e.target.value,n=t.length+t.split("\n").length-1;o.$contentTip.html(n+"/"+o.maxLength)});var E=!1;if(this.$submit.on("click",function(){if(!E){E=!0,o.$submit.addClass("submit-disabled");var e=$.trim(o.$contentText.val())||o.$contentText.attr("placeholder"),t=e.length+e.split("\n").length-1;t>o.maxLength&&(e=e.slice(0,o.maxLength));var n={sceneId:r,content:e,url:x.headimgurl||"",name:x.nickname||"匿名用户"};o.commentManager.postComment(n).then(function(e){var t=u.record(e);m(""+("barrage"===l?"发送弹幕成功，谢谢参与！":"留言成功，谢谢参与！")),o.$contentText.val(""),o.$panelList.parent().scrollTop(0),o.$panelList.prepend(t),o.$contentTip.html("0/"+o.maxLength),"barrage"===l&&o.barrageComments.unshift(e)})["catch"](function(){m("file:"===window.location.protocol?"请发布后再提交！":"提交失败，请重新提交")})["finally"](function(){var e=10,t=function n(){e?(o.$submit.text("提交留言("+e--+"秒)"),setTimeout(function(){n()},1000)):(o.$submit.text("提交留言"),o.$submit.removeClass("submit-disabled"),E=!1)};t()})}}),this.$close.on("click",function(){o.$panel.hide(),o.eleShow()}),this.$more.on("click",function(){n()}),"barrage"===l){var I=this.$boards.find("a.barrage-submit"),_=this.$boards.find("a.barrage-play");I.click(function(){y&&(d()&&!x.nickname?w().then(function(e){e.obj?(h(e.obj),i()):(v(a),g())})["catch"](function(){i()}):i())}),_.click(function(){o.isBarragePlaying?o.stopBarrageScroll():o.playBarrageScroll()})}else{this.$trigger.on("click",function(){d()&&!x.nickname?w().then(function(e){e.obj?(h(e.obj),i()):(v(a),g())})["catch"](function(){i()}):i()})}return !0}}]),t}(l);e.exports=x},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.style,o=void 0===i?"default":i;return g(h,{id:t,type:n,style:o})}function o(){return'<canvas class="barrage-comments"></canvas>'}function r(e,t){return'<div class="barrage-tools">\n                '+(t?'<a class="barrage-submit eqf-pen-f"></a>':"")+'\n                <a class="barrage-play '+(e?"on":"off")+'">弹<i class="eqf-slash-l"></i></a>\n            </div>'}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=n(199)("./"+e+"_boards.png");return'<div class="empty-boards"><img style="margin-top:-20px;" src="'+t+'" /></div>'}function s(e){var t=e.meslabel,n=e.morelabel;return'<div class="tool"><a class="replay">'+t+'</a><a class="more">'+n+"</a></div>"}function c(e){return'<div class="headimg" style="background-image:url('+e+')"></div>'}function u(){return'<div class="headimg headimg-bg"><em class="eqf-ywxlogo"></em></div>'}function l(e){var t=e.url,n=e.name,i=e.content,o=e.createTime,r=t?c(t):u();if((new Date).getTime()-o<60000){var a="刚刚"}else{a=d(new Date(o),"MM月dd日 hh:mm")}return'<div class="record">\n                '+r+'\n                <div class="name ellipsis">'+n+'</div>\n                <div class="mes">'+i+'</div>\n                <div class="time">'+a+"</div>\n            </div>"}function p(e){var t=e.style,n=void 0===t?"default":t;return g(f,{style:n})}n(196);var d=n(43).dateFormat,f=n(197),h=n(198),g=n(44).parse;e.exports={compDiv:i,emptyBoards:a,tool:s,headImgUser:c,headImgEqxView:u,record:l,panel:p,barrageTools:r,barrageComments:o}},function(e,t){},function(e,t){e.exports='<div class="boards-panel boards-#{style}"><div class="boards-top"><div class="head">留言板<em class="eqf-no"></em></div><div class="boards-form"><textarea placeholder="踩一下！" maxlength="140" class="content-text"></textarea> <span class="content-tip">0/140</span> <a class="record-btn" data-event="11207">提交留言</a></div><div class="spline-con"><span>更多留言</span> <span class="spline"></span></div></div><div class="boards-con ios-boards-con"><div class="list"><div class="more-mes">查看更多</div></div></div></div>'},function(e,t){e.exports='<div class="element-box-contents eqx-comp-comment" style="width: 100%; height: 100%;"><div id="#{id}" class="element boards-#{style}" ctype="#{type}"></div></div>'},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./black_boards.png":200,"./blue_boards.png":201,"./default_boards.png":202,"./pink_boards.png":203,"./yellow_boards.png":204};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=199},function(e,t,n){e.exports=n.p+"images/black_boards-ba4922.png"},function(e,t,n){e.exports=n.p+"images/blue_boards-f58067.png"},function(e,t,n){e.exports=n.p+"images/default_boards-f58067.png"},function(e,t,n){e.exports=n.p+"images/pink_boards-a2ae42.png"},function(e,t,n){e.exports=n.p+"images/yellow_boards-f58067.png"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e){this.realCav=e,this.realCtx=this.realCav.getContext("2d"),this.cavWidth=this.cav.width=this.realCav.width,this.cavHeight=this.cav.height=this.realCav.height,this.limitTextWidth=this.cavWidth-x-2*E-I-w,this.ctx.font=w+"px Arial"}function r(e){var t=this;this.barrageArr=[],e.forEach(function(e){t.barrageArr.push({logo:e.url||n(206),text:e.content})})}function a(){for(var e=0;e<this.barrageArr.length;e++){var t=this.barrageArr[e],n=this.ctx.measureText(t.text).width,i=new Image;i.src=t.logo,t.image=i,t.rectWidth=x+I+n+2*E,t.rectHeight=x+2*E,s.call(this,t)}}function s(e){var t=x+2*E+k,n=Math.floor(this.cav.height/t);e.left=this.cavWidth,e.top=f(0,n<=0?0:n-1)*(e.rectHeight+k),e.speed=f(50,100)/100*b}function c(e){for(var t=0;t<this.barrageArr.length;t++){var n=this.barrageArr[t-1],i=this.barrageArr[t],o=new Image;o.src=i.logo,e||(i.left=0,i.speed=b,i.image=o,i.textRows=h(this.barrageArr[t].text,this.limitTextWidth,this.ctx),i.oneLineTextHeight=1.2*w,i.oneLineTextWidth=this.ctx.measureText(i.textRows[0]).width,i.mutilLineTextHeight=i.oneLineTextHeight*i.textRows.length,i.rectWidth=x+I+i.oneLineTextWidth+2*E,i.mutilLineTextHeight>x?i.rectHeight=i.mutilLineTextHeight+2*E-0.2*w:i.rectHeight=x+2*E),i.top=n?n.top+n.rectHeight+k:this.cavHeight}}function u(){d.call(this),this.isH?l.call(this):p.call(this),this.realCtx.drawImage(this.cav,0,0,this.cavWidth,this.cavHeight),this.animationId=requestAnimationFrame(u.bind(this))}function l(){for(var e=0;e<this.barrageArr.length;e++){var t=this.barrageArr[e];this.barrageArr[e].left+t.rectWidth<=0&&s.call(this,t);var n=this.barrageArr[e].left-=this.barrageArr[e].speed,i=n,o=n+E,r=o+x+I,a=this.barrageArr[e].top,c=a,u=a+E,l=u+3*b;m(i,c,t.rectWidth,t.rectHeight,this.ctx),v(t.image,o,u,x,this.ctx),g(this.barrageArr[e].text,r,l,this.ctx)}}function p(){for(var e=0;e<this.barrageArr.length;e++){var t=this.barrageArr[e],n=this.barrageArr[this.barrageArr.length-1];n.top+n.rectHeight<=0&&c.call(this,!0);var i=t.left,o=i+E,r=o+x+I,a=t.top-=t.speed,s=a,u=a+E,l=t.textRows.length>1?u:u+3*b;m(i,s,t.rectWidth,t.rectHeight,this.ctx),v(t.image,o,u,x,this.ctx);for(var p=0;p<t.textRows.length;p++){g(t.textRows[p],r,l+t.oneLineTextHeight*p,this.ctx)}}}function d(){this.realCtx&&(this.ctx.clearRect(0,0,this.cavWidth,this.cavHeight),this.realCtx.clearRect(0,0,this.cavWidth,this.cavHeight))}function f(e,t){var n=t-e+1;return Math.floor(Math.random()*n+e)}function h(e,t,n){for(var i=e.split(""),o="",r=[],a=0;a<i.length;a++){n.measureText(o).width>=t&&(r.push(o),o=""),o+=i[a]}return r.push(o),r}function g(e,t,n,i){i.fillStyle="#fff",i.textBaseline="top",i.fillText(e,t,n)}function m(e,t,n,i,o){var r=3*b;n<2*r&&(r=n/2),i<2*r&&(r=i/2),o.fillStyle="rgba(0,0,0,.3)",o.beginPath(),o.moveTo(e+r,t),o.arcTo(e+n,t,e+n,t+i,r),o.arcTo(e+n,t+i,e,t+i,r),o.arcTo(e,t+i,e,t,r),o.arcTo(e,t,e+n,t,r),o.fill()}function v(e,t,n,i,o){o.beginPath(),o.arc(t+i/2,n+i/2,i/2,0,2*Math.PI,!0),o.closePath(),o.save(),o.clip(),o.drawImage(e,t,n,i,i),o.restore()}var y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=devicePixelRatio||1,x=20*b,w=12*b,k=5*b,E=5*b,I=5*b,_=function(){function e(){i(this,e),this.cav=document.createElement("canvas"),this.ctx=this.cav.getContext("2d"),this.realCav=null,this.realCtx=null,this.cavWidth=0,this.cavHeight=0,this.barrageArr=[],this.isH=!0,this.animationId=null,this.limitTextWidth=0}return y(e,[{key:"render",value:function(e,t,n){cancelAnimationFrame(this.animationId),this.stop(),this.isH=n,o.call(this,e),r.call(this,t),this.isH?a.call(this):c.call(this,!1),this.animationId=requestAnimationFrame(u.bind(this))}},{key:"stop",value:function(){cancelAnimationFrame(this.animationId),d.call(this)}}]),e}();e.exports=_},function(e,t,n){e.exports=n.p+"images/head-38c163.png"},function(e,t){e.exports=[{name:"默认",value:"default"},{name:"简约黑",value:"black"},{name:"少女粉",value:"pink"},{name:"邮票风",value:"blue"},{name:"便签风",value:"yellow"},{name:"弹幕风",value:"barrage"}]},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(184);var c=n(209).$postCount,u=n(122).fixedNum,l=n(210),p=n(78),d=n(24).isWeixin,f=n(212),h=n(96).popUpModal,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.color.counterColor])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.color.counterColor?this.getProp("color"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateSize",value:function(e,n){n.height&&(n.lineHeight=n.height+"px",this.$context.css({lineHeight:n.lineHeight})),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"bindAfterRenderEvent",value:function(e){var t=this,n=this.compJson,i=n.id,o=n.sceneId,r=n.pageId,a=this.eqxScene.sceneJson.meta.code,s=this.$context;this.eqxScene.statManager.getCounterValues().then(function(e){var t=e[i]||0;s.find(".counter-number").attr("data-counter-number",t).html(u(t))});var l=this.$li.find(".comp_counter"),p=l.find(".counter-number"),g="rating-l";return l.click(function(){t.compJson.properties&&t.compJson.properties.clickFarmer?d()?c({sceneId:o,elementId:i,pageId:r},a).then(function(){l.unbind("click").removeClass("not-voted");var e=Number.parseInt(p.attr("data-counter-number"))||0,t=e+1;p.attr("data-counter-number",t).text(u(t))})["catch"](function(t){120504===t.code?f.modal(e,g,!1,null,"请到微信中打开使用"):120505===t.code||120603===t.code?f.modal(e,g,!1,null,"请不要重复提交"):h("服务器异常!")}):f.modal(e,g,!1,null,"请到微信中打开使用"):c({sceneId:o,elementId:i,pageId:r},a).then(function(){l.unbind("click").removeClass("not-voted");var e=Number.parseInt(p.attr("data-counter-number"))||0,t=e+1;p.attr("data-counter-number",t).text(u(t))})["catch"](function(t){120603===t.code?f.modal(e,g,!1,null,"请不要重复提交"):h("服务器异常!")})}),!0}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.layout,r=i.imgSrc,a=i.color,s=i.icon,c=i.size,u=e.css.textAlign,p=l.$compDiv({id:t,layout:o,size:c,type:n,icon:s,color:a,imgSrc:r});return"center"===u&&p.find("img").css("margin","0 auto"),p}},{key:"update$img",value:function(e){this.$context.find("img").attr("src",e)}},{key:"iconToImg",value:function(e){this.$context.find("i").remove().prepend(l.img(e))}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"update$iconColor",value:function(e){this.$context.find(".counter-container").css({color:e}),this.updateProp("color",e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||this.$context.find("img").remove()}}]),t}(p);e.exports=g},function(e,t,n){function i(e,t){var n=a.SERVER_1+"eqs/s/scene/count";return t&&(n=n+"?code="+t),r({type:"POST",url:n,data:e})}function o(e){return r({type:"POST",url:a.SERVER_1+"eqs/s/scene/counter/values",data:e})}var r=n(20).ajax,a=n(21);e.exports={$postCount:i,$getCountValues:o}},function(e,t,n){function i(e){var t=e.id,n=e.layout,i=e.size,s=e.type,l=e.icon,p=e.color,d=e.imgSrc,f=d?r(d):o(l),h=d?1120609:a(l),g=$(u(c,{layout:n,size:i,id:t,type:s,i:f,dataEvent:h}));return g.find(".counter-container").css({color:p}),g}function o(e){return'<i class="counter-elem counter-icon '+e+'" ></i>'}function r(e){var t=s.FILE+e;return'<img class="counter-elem counter-icon"\n             style="width: 115px; height: 115px;" src="'+t+'">'}function a(e){var t={"eqf-heart-f":1120605,"eqf-zan-f":1120606,"eqf-flower2":1120607,"eqf-vote":1120608};return t[e]}var s=n(21),c=n(211),u=n(44).parse;e.exports={$compDiv:i}},function(e,t){e.exports='<div class="element comp_counter not-voted editable-text #{layout} #{size}" id="#{id}" ctype="#{type}" name="eq[f_#{id}]"><div class="counter-container" data-event="#{dataEvent}" style="white-space: nowrap">#{i} <span class="counter-elem counter-number" data-counter-number="0">0</span></div></div>'},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.src,o=(e.css,e.padding),r='<div style="height:100%"><button style="display: block;width: 100%;height: 100%; padding: '+o+';" data-event="11201"\n                        id="'+t+'" ctype="'+n+'" class="element comp_button editable-text" >\n                    <img style="width: 100%; height: 100%;" src="'+i+'" />\n                </button></div>';return $(r)}function o(e){var t=e.id,n=e.type,i=e.title,o=e.css,r=i?i.replace(/ /g,"&nbsp;"):"",a='<div style="height:100%"><button style="display: block;width: 100%;height: 100%;background-color:'+o.backgroundColor+'" \n                        id="'+t+'" ctype="'+n+'" data-event="11201"\n                        class="element comp_button editable-text" >'+r+"</button></div>";return $(a)}function r(e){var t='<div style="height:30px;line-height:30px;color:#000;font-size:10px;\n                    position:absolute;text-align:center;left:10px;right:10px;bottom:0px;\n                    display: flex;flex-wrap: nowrap;justify-content: space-between;">\n                        <div class="left-border" style="height:1px;flex-grow: 0.5;background-color:#000;margin-top: 15px;"></div>\n                        <p class="p-desc" style="font-size:10px;position:relative;z-index:2;padding:0px 5px;display:inline-block">目前已经有<span class="submit-number" style="color:#f00;font-size:16px"></span><span class="submit-content">人提交表单</span></p>\n                        <div class="right-border" style="height:1px;flex-grow: 0.5;background-color:#000;margin-top: 15px;"></div>\n                </div>';return $(t)}function a(e){var t=e.layout,n=e.hasLink,i=e.src,o=e.text,r=e.link,a=$('<div class="feedback-content"><span>'+o+"</span></div>"),s=$('<div class="feedback-btn"></div>');return i&&("rating-m"===t?a.prepend('<img class="up" src="'+i+'"/>'):"rating-s"===t?a.append('<img class="down" src="'+i+'"/>'):"rating-l"===t&&a.prepend('<img class="up ico" src="'+i+'"/>')),n?s.append('<a class="feedback-close left">关闭</a><a class="right" href="'+r+'">查看详情</a>').addClass("line"):s.append('<a class="feedback-close">关闭</a>'),$('<div class="feedback-box">').append($('<div class="feedback-form">').append(a,s))}function s(e,t,n,i,o,r,s,c){var u=a({layout:t,hasLink:n,src:i,text:o,link:r}),p=$(e).parents(".nr");u.appendTo(p);var d=u.find(".feedback-form"),f=u.find(".feedback-close");(!l()||c&&"pc"==c.previewMode)&&d.css({position:"fixed"}),f.on("click",function(){u.animate({opacity:0},{duration:300,complete:function(e){return u.remove()}})})}function c(e){var t=(e.layout,e.hasLink,e.src),n=e.text,i=(e.link,e.icon),o=e.modalParam,r=o.popUpPic?""+p.FILE+o.popUpPic:t,a=o.adLink,s=$('<div class="moadl-content"></div>');var c=$('<div class="moadl-btn"><img src="'+i+'"><span>'+n+"</span></div>"),u=$('<div class="moadl-close"><span class="eqf-no-l submit-close" style="font-size: 24px;color: #fff;"></span></div>');return a&&s.on("click",function(){location.href=a}),$('<div class="moadl-box">').append($('<div class="moadl-form">').append(s,c,u))}function u(e,t,n,i,o,r,a,s,u,p){var d=c({layout:t,hasLink:n,src:i,text:o,link:r,icon:u,modalParam:p}),f=$(e).parents(".nr");d.appendTo(f);var h=d.find(".moadl-form"),g=d.find(".submit-close");(!l()||s&&"pc"==s.previewMode)&&h.css({position:"fixed"}),g.on("click",function(){d.animate({opacity:0},{duration:300,complete:function(e){return d.remove()}})})}n(213);var l=(n(24).mobilecheck,n(24).isPc),p=n(21);e.exports={$img:i,$btn:o,modal:s,$submitDetail:r,newWrapper:c,newModal:u}},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(215),u=n(216).formatTime,l=n(217).getServiceTime,p=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.time.time?this.getProp("endTime"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"renderTime",value:function(e,n,i,o){var r=this,a=(new Date).getTime(),s=this.compJson.properties,c=s.endTime,p=s.arriveTips,d=s.arriveTipsContent;l().then(function(e){return a=e.obj},function(){return a=(new Date).getTime()}).then(function(a){var s=setInterval(function(){a+=1000,r.$li||clearInterval(s),a>=c?(p?e.html(d||t.defaultArriveTipsContent):e.html(u(a,a,n,i,o)),clearInterval(s)):e.html(u(c,a,n,i,o))},1000)})}}]),t}(c);p.defaultArriveTipsContent="开始啦!",e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function l(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(78),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontFamily:!1,fontSize:!0,fontColor:!0,bgColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.time.time])}},{key:"create$context",value:function(){var e=document.createElement("div");e.id=this.compJson.id,e.setAttribute("ctype",this.compJson.type),e.setAttribute("class","element comp_paragraph editable-text");var t=this.compJson.css.fontSize,n=this.compJson.css.fontFamily;return t&&(e.style.fontSize=t),n&&(e.style.fontFamily=n),this.renderTime($(e),this.compJson.properties.order,this.compJson.properties.split,this.compJson.properties.mode),$(e)}},{key:"renderTime",value:function(e,t){return null}}]),t}(c);e.exports=u},function(e,t){function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cn",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1,1,1],s=e-t,c=Math.floor(s/86400000),u=s%86400000,l=Math.floor(u/3600000),p=u%3600000,d=Math.floor(p/60000),f=p%60000,h=Math.round(f/1000),g=o(a,4),m=g[0],v=g[1],y=g[2],b=g[3];switch(m||v||y||b||(m=1,v=1,y=1,b=1),!m||v||y||b?m||!v||y||b?m&&!v&&y&&!b&&(d=d||1):l=l||1:c=c||1,l=m?l:l+24*c,d=v?d:d+60*l,h=y?h:h+60*d,r){case"cn":return n?(m?i(c)+"天":"")+(v?i(l)+"小时":"")+(y?i(d)+"分钟":"")+(b?i(h)+"秒":""):(b?i(h)+"秒":"")+(y?i(d)+"分钟":"")+(v?i(l)+"小时":"")+(m?i(c)+"天":"");case"en":return n?(m?i(c)+" days, ":"")+(v?i(l)+" hours, ":"")+(y?i(d)+" minutes, ":"")+(b?i(h)+" seconds":""):(b?i(h)+" seconds, ":"")+(y?i(d)+" minutes, ":"")+(v?i(l)+" hours, ":"")+(m?i(c)+" days":"");case"char":return n?(m?i(c)+"天 ":"")+(v?i(l):"")+(v&&y?":":"")+(y?i(d):"")+((v||y)&&b?":":"")+(b?i(h):""):(b?i(h):"")+(b&&y?":":"")+(y?i(d):"")+((b||y)&&v?":":"")+(v?i(l):"")+(m?" "+i(c)+"天":"")}}function i(e){return e=e.toString(),e.length<2?"0"+e:e}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0){}}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o){throw r}}}return n}return function(t,n){if(Array.isArray(t)){return t}if(Symbol.iterator in Object(t)){return e(t,n)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports={formatTime:n}},function(e,t,n){function i(){var e=new Date,t="eqs/s/serviceTime/get?time"+e.getTime();return o({type:"GET",url:r.SERVER_1+t})}var o=n(20).ajax,r=n(21);e.exports={getServiceTime:i}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(215),u=n(216).formatTime,l=n(217).getServiceTime,p=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.time.time?this.getProp("startTime"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"renderTime",value:function(e,n,i,o){var r=this,a=(new Date).getTime(),s=this.compJson.properties,c=s.startTime,p=s.arriveTips,d=s.arriveTipsContent;l().then(function(e){return a=e.obj},function(){return a=(new Date).getTime()}).then(function(a){var s=setInterval(function(){a+=1000,r.$li||clearInterval(s),a<=c?p?e.html(d||t.defaultArriveTipsContent):e.html(u(a,a,n,i,o)):e.html(u(a,c,n,i,o))},1000)})}}]),t}(c);p.defaultArriveTipsContent="还没开始!",e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(78),u=n(220),l=n(21),p=n(23).url2https,d=p(l.YQC),f=n(221).$getYqcAd,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.iframePromise=null,r.iframe=null,r.isExpose=!0,$.extend(!0,r.$ability,{style:{compStyle:{self:!0},advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},anim:!1,trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.code.code])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.code.code?this.compJson.content:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"eleShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var n=this.eqxPage,i=this.eqxPage.eqxScene,o=i.meta.id,r=n.pageJson.num,a=this.compJson.properties.renderType;if("iframe"===a){this.iframePromise.then(function(){e.iframe&&e.iframe.contentWindow.postMessage({sceneId:o,pageNum:r,eventType:"pageShow"},d)})}else{if(this.isExpose){var c=window.GDTNativeRender;c&&(c.render.expose(),this.isExpose=!1)}}}},{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.content,r=t.css,a=r.width,s=r.height,c=this.eqxPage,l=this.eqxPage.eqxScene,p=l.meta.id,h=c.pageJson.num,g=$(u.compDiv({id:n,type:i})),m=t.properties.renderType;if(m&&"div"===m){"tpl"===o?f(p).then(function(t){o=t.list[0].adCode,g=e.gdtNativeAd(o,g),g.append(o)}):(g=this.gdtNativeAd(o,g),g.append(o))}else{var v=$(u.iframeDiv({sceneId:p,pageNum:h,content:o,width:a,height:s})),y=this.iframe=v.get(0);this.iframePromise=new Promise(function(e){y.onload=function(){o&&y.contentWindow.postMessage({sceneId:p,pageNum:h,eventType:"adCode",content:o},d),e()}}),g.append(v)}return this.$li.css("zIndex",999),g}},{key:"gdtNativeAd",value:function(e,t){return e.indexOf("gdt-native-template")>-1&&(t=t.append('<div id="gdt-native-template"></div>')),t}}]),t}(c);e.exports=h},function(e,t,n){function i(e){var t=e.id,n=e.type;return'<div style="width: 100%; height: 100%" class="element" id="'+t+'" ctype="'+n+'"></div>'}function o(e){var t=e.sceneId,n=e.pageNum,i=e.content,o=e.width,s=e.height,c="";return c="tpl"===i?"tpl":"true",'<iframe width="100%" height="100%" scrolling="no" frameborder="0" src="'+a(r.YQC)+"yqc/gg/gg.html?sceneId="+t+"&pageNum="+n+"&content="+c+"&width="+o+"&height="+s+'"></iframe>'}var r=n(21),a=n(23).url2https;e.exports={compDiv:i,iframeDiv:o}},function(e,t,n){function i(e){return r({type:"GET",url:a.SERVER_1+"adview/scenePage/find",data:{sceneId:e,time:Date.now()}})}function o(e){return r({type:"GET",url:a.SERVER_1+"adview/tail/find",data:{sceneId:e,time:Date.now()}})}var r=n(20).ajax,a=n(21);e.exports={$getYqcAd:i,$getYqcTail:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(69).BG_CROP_TYPE,a=n(24).mobilecheck,s=n(223),c=n(224),u=n(225),l=n(44).parse,p=n(81).qiniuZoom,d=n(81).loadImg,f=n(70).ANIMATION_TYPE;n(113);var h=function(){function e(t,n){i(this,e),this.compJson=t,this.eqxPage=n,this.eqxScene=n.eqxScene}return o(e,[{key:"updateBgHeight",value:function(e){this.$bgEle.css({height:e})}},{key:"updateBgOpacity",value:function(e){this.$bgEle&&this.$bgEle.css({opacity:e})}},{key:"updateBgFilter",value:function(e){this.$bgEle&&this.$bgEle.css({filter:e})}},{key:"updateVeinCss",value:function(e){this.$bgEle&&this.$bgEle.find(".eqx-bg-vein").length>0&&this.$bgEle.find(".eqx-bg-vein").css(e)}},{key:"create$bg",value:function(e,t,n){var i=this;this.$container=e;var o=this.compJson,f=o.id,h=o.css,g=h.opacity,m=h.filter,v=o.properties,y=v.bgColor,b=v.croptype,x=v.imgSrc,w=v.pageLength,k=this.eqxPage.pageJson.properties.longPage+"px";if(y||x||(y="rgba(0,0,0,0)"),y){w&&(k=(w<10?486*w:w)-486+(a()?$(document).height():486)+"px");var E=$(l(c,{id:f,bgColor:y,height:k}));this.$bgEle=E,this.$context=E.find(".eqx-bg-img"),this.updateBgOpacity(g),this.$container.prepend(E)}if(this.compJson.properties.veinCss&&this.createe$vein(),x){var I=x;if(b===r["全屏背景模式"]?(k=(w<10?486*w:w)-486+(a()?$(document).height():486)+"px",I=p(I,320,k)):(k=a()?"100%":"486px",I=p(I,320,486)),/\.gif/.test(x)){var _=d(I).then(function(e){var o,s={};if(t=a()?document.documentElement.clientWidth||document.body.clientWidth:t||i.eqxPage.getPageWidth(),n=a()?document.documentElement.clientHeight||document.body.clientHeight:n||i.eqxPage.getPageHeight(),b===r["全屏背景模式"]){var c=parseInt(k);e.width/e.height>=t/c?(s.width=e.width*(c/e.height),s.height=c,s.marginLeft=-(s.width-t)/2):(s.width=t,s.height=e.height*(t/e.width),s.marginTop=-(s.height-c)/2)}else{e.width/e.height>=t/n?(s.width=e.width*(n/e.height),s.height=n,s.marginLeft=-(s.width-t)/2):(s.width=t,s.height=e.height*(t/e.width),s.marginTop=-(s.height-n)/2)}return o=$(l(u,{id:f,src:I,height:k})),o.css(s),o})}else{_=Promise.resolve($(l(s,{id:f,src:I,height:k})))}_.then(function(e){i.$bgEle&&i.$bgEle.remove(),i.$bgEle=e,i.animate(),i.updateBgOpacity(g),m&&i.updateBgFilter(m),i.$container.prepend(i.$bgEle),!/\.gif/.test(x)&&!a()&&i.updateBgHeight(i.eqxPage.getPageHeight())})}}},{key:"eleShow",value:function(){var e=this.compJson.properties.imgSrc;if(e&&/.gif/.test(e)&&this.$bgEle){var t=this.$bgEle.find("img")[0];if(t){var n=t.src;setTimeout(function(){t.src=n},200)}}}},{key:"animate",value:function(){var e=this.compJson.effect;e=void 0===e?{}:e;var t=e.type;if(this.$bgEle&&(t||0==t)&&t!=-1){var n=this.$bgEle.find(".eqx-bg");n.css({animation:"none"}),setTimeout(function(){if("scaleUp"===t){n.css({animation:"scaleUp 7s ease 1s","animation-fill-mode":"both"})}else{if("scaleDown"===t){n.css({animation:"scaleDown 7s ease 1s","animation-fill-mode":"both"})}else{var e=f[t];n.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),n.css({"animation-name":e[0],"animation-duration":"1s","animation-timing-function":"liner","animation-delay":"1s","animation-iteration-count":1,"animation-direction":"both","animation-fill-mode":"both","animation-play-state":"initial"})}}},0)}}},{key:"delete$bg",value:function(){this.$bgEle&&this.$bgEle.remove()}},{key:"createe$vein",value:function(){var e=this.compJson.properties,t=e.pageLength,n=e.veinCss,i=n.backgroundSize,o=n.opacity,r=n.backgroundImage,s=this.eqxPage.pageJson.properties.longPage+"px";if(r){t&&(s=(t<10?486*t:t)-486+(a()?$(document).height():486)+"px");var c=p(r,320,s),u='<div class="eqx-bg eqx-bg-vein"\n                             style="width: 100%; height: 100%;\n                             background-image: url(\''+c+"');\n                             background-size: "+(i+"%")+"; \n                             background-position: center top;\n                             background-origin: content-box;\n                             opacity: "+(100-o)/100+';\n                             position: absolute">\n                          </div>';this.$bgEle.prepend(u)}}}]),e}();e.exports=h},function(e,t){e.exports='<div style="width: 100%; height: #{height}; overflow: hidden; position: absolute;z-index: -1;"><div id="wrapper-background#{id}" class="eqx-bg eqx-bg-img" style="width: 100%; height: #{height};\n         background-image: url(\'#{src}\');\n         background-size: cover; background-position: 50% 50%;\n         background-origin: content-box;"></div></div>'},function(e,t){e.exports='<div class="bg-color-comp" style="width: 100%; height: #{height}; overflow: hidden;position: absolute;z-index: -1;"><div id="wrapper-background#{id}" class="eqx-bg" style="width: 100%; height:100%; background-color: #{bgColor};"></div></div>'},function(e,t){e.exports='<div style="width: 100%; height: #{height}; overflow: hidden; position: absolute;z-index: -1;"><img id="wrapper-background#{id}" src="#{src}" style="z-index: -1; width: 100%; position: absolute;"></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(78),c=n(227),u=n(44).parse,l=n(228),p=n(24).isWeixin,d=(n(94).$getUserWxInfo,n(93).hrefToWxAuth,n(93).setWeChatUser,n(229).$unifiedOrder),f=n(19).wxPay,h=n(93).getWeChatUser,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.title,r=void 0===o?"打赏":o,a=i.amount,s=void 0===a?"2":a;return $(u(c,{id:t,type:n,title:r,amount:s}))}},{key:"updateCompTitle",value:function(){var e=this.compJson.properties;this.$context.html(e.title+e.amount+"元")}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.$li.click(function(){var t=Math.round(100*parseFloat(e.compJson.properties.amount));if(!p()){return void l.modal("该组件仅能在微信中使用。",e.$li)}var n=h();return d(t,n.openid,e.compJson.sceneId).then(function(e){return e.obj&&f(e.obj)})["catch"](function(t){t.msg&&l.modal(t.msg,e.$li)})})}}]),t}(s);e.exports=g},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element comp-reward" style="cursor: pointer;width: 100%;height: 100%;display: block;">#{title}#{amount}元</a>'},function(e,t){function n(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}e.exports={modal:n}},function(e,t,n){function i(e,t,n){return a({type:"POST",url:r.SERVER_1+"eqs/wx/unifiedorder",data:{money:e,openid:t,sceneId:n}})}function o(e){return a({type:"POST",url:r.SERVER_1+"eqs/wx/get-jsapiconfig",data:{prepayId:e}})}var r=n(21),a=n(20).ajax;e.exports={$unifiedOrder:i,$getJsApiConfig:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(78),c=n(231),u=n(44).parse,l=n(24).isWeixin,p=n(232),d=n(233).$robRedPacket,f=(n(94).$getUserWxInfo,n(93).hrefToWxAuth,n(93).getWeChatUser),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.title;return this.$context=$(u(c,{id:t,type:n,title:i})),this.$context}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.$li.click(function(){if(!l()){return void p.modal("该组件仅能在微信中使用。",e.$li)}var t=f();d(e.eqxScene.meta.id,e.compJson.id,t.openid).then(function(t){200===t.code&&p.modal("恭喜您成功抢到一个红包，请去服务通知下领取红包！",e.$li)})["catch"](function(t){t.msg&&p.modal(t.msg,e.$li)})})}}]),t}(s);e.exports=h},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-red-packet" style="cursor: default;width: 100%;height: 100%;">#{title}</a>'},function(e,t){function n(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}e.exports={modal:n}},function(e,t,n){function i(e,t,n){return r({type:"GET",url:o.SERVER_1+"eqs/wx/robRedPacket",data:{sceneId:e,componentId:t,openid:n}})}var o=n(21),r=n(20).ajax;e.exports={$robRedPacket:i}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n="",i=d.getWeChatUser();if(i.headimgurl){o=p(t,8*e,i.headimgurl).then(function(e){return e.list.forEach(function(e,t){t<24&&(f[t]=e)}),f})}else{var o=Promise.resolve(f)}return o.then(function(){for(var t=0;t<8*e;t++){var i='<img src="'+f[t]+'">',o='<img src="'+f[t]+'" style="margin-right:0;">';n+=(t+1)%8==0?o:i}return n})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(235);var c=n(78),u=n(236),l=n(44).parse,p=n(237).$getPhotoWallPhotos,d=n(93),f=[n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261)],h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1}},trigger:{self:!0},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type;return this.$context=$(l(u,{id:n,type:i})),a(parseInt(t.properties.line),t.sceneId).then(function(n){var i=$(n);e.$context.append(i),e.$context.find("img").css({borderWidth:t.properties.ownerCss.borderWidth,borderStyle:t.properties.ownerCss.borderStyle,borderColor:t.properties.ownerCss.borderColor,boxShadow:t.properties.ownerCss.boxShadow,boxShadowDirection:t.properties.ownerCss.boxShadowDirection,boxShadowSize:t.properties.ownerCss.boxShadowSize})}),this.$context}},{key:"changePhotoWallLine",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"changeBorderStyle",value:function(e){this.$context.find("img").css({borderStyle:e})}},{key:"changeBorderColor",value:function(e){this.$context.find("img").css({borderColor:e})}},{key:"changeBorderWidth",value:function(e){this.$context.find("img").css({borderWidth:e})}},{key:"changeBoxshadowColor",value:function(e){this.$context.find("img").css({boxShadow:e})}}]),t}(c);e.exports=h},function(e,t){},function(e,t){e.exports='<div class="photowall" id="#{id}" ctype="#{type}"></div>'},function(e,t,n){function i(e,t,n){return o({type:"GET",url:r.SERVER_1+"eqs/s/wx/photo/list",data:$.param({sceneId:e,photoNum:t,photoPath:n})})}var o=n(20).ajax,r=n(21);e.exports={$getPhotoWallPhotos:i}},function(e,t,n){e.exports=n.p+"images/photoWall-1-2cbac2.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-2-746422.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-3-3d665c.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-4-3c7ce3.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-5-26a180.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-6-91bb95.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-7-98a3a6.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-8-a97166.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-9-0b3d68.png"},function(e,t,n){e.exports=n.p+"images/photoWall-10-68faf7.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-11-487873.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-12-382a38.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-13-3bc7ad.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-14-686474.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-15-38d83b.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-16-27e1e0.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-17-7762e5.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-18-a06b05.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-19-016ef7.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-20-bc9344.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-21-d6c339.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-22-b04a01.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-23-e7744a.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-24-7cd4a4.jpg"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i,o){return"url('"+p.FONT+"lpfonts/"+e+"_"+t+"/"+n+"."+i+"') format('"+o+"')"}function s(e){var t=e.fontFamily,n=e.sceneId,i=e.publishTime;if(t&&!b[t]){var o=[a(n,i,t,"woff","woff"),a(n,i,t,"ttf","truetype")].join(", "),r="@font-face{font-family: '"+t+"'; src: "+o+";}";f(r),b[t]=!0}}function c(e){var t=e.id,n=e.type,i=e.css,o=e.content,r=void 0===o?"":o;return i.cursor="default",i.fontSize&&(i.fontSize=h(i.fontSize)),i.minHeight="inherit",$(v(g,{id:t,type:n,content:r})).css(i)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(263);var p=n(21),d=n(130),f=d.addGlobalStyle,h=d.addSuffixPx,g=n(264),m=n(78),v=n(44).parse,y=n(23).openUrl,b={defaultFont:!0,moren:!0,"null":!0,undefined:!0},x=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0,color:!0}},link:!1}),r}return r(t,e),u(t,[{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.content.content?this.compJson.content:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateContent",value:function(e){this.compJson.content=e;var t=this.create$context();this.$context.replaceWith(t),this.$context=t}},{key:"update$ContentCss",value:function(e){this.$context.css(e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=e.publishTime,a=e.css,u=a.fontSize,l=a.writingMode,p=e.properties.anim,d=void 0===p?[]:p,f={fontSize:u};this.$boxDiv.css("minHeight",""),this.$boxDiv.css("minWidth",""),l&&(f["-webkit-writing-mode"]=l,f.writingMode=l,"vertical-rl"===l&&(f.textRendering="optimizeLegibility"));var h=c({id:t,type:n,content:i,css:f});return"view"==this.eqxScene.config.mode&&h.find("*").toArray().map(function(e){return $(e).css("font-family")}).forEach(function(e){return s({fontFamily:e,sceneId:o,publishTime:r})}),d[0]&&"typer"===d[0].type&&h.css({opacity:0}),h}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=t.pageId;return"x"===t.type&&t.properties.url?$(e).click(function(){var e=t.properties.url;Number.isInteger(+e)?n.eqxScene.pageScroll.goToPageById(e):y(e,i)}):$(e).find("a[href]").toArray().forEach(function(e){var t=$(e).attr("href");$(e).removeAttr("href").css("cursor","pointer").click(function(){Number.isInteger(+t)?n.eqxScene.pageScroll.goToPageById(+t):y(t,i)})}),!0}},{key:"addClassToLi",value:function(e){e.addClass("wsite-text")}},{key:"clearRichText",value:function(){this.compJson.content=this.$context.text(),this.compJson.css.writingMode="horizontal-tb",this.$context.html(this.compJson.content),this.$context.css("writingMode","horizontal-tb")}},{key:"settingGroupStyle",value:function(e){Object.assign(this.compJson.css,e),this.update$boxDiv(e)}},{key:"adjustHeight",value:function(){this.$li.css({height:"",width:""}),this.$context.css({height:"",width:""});var e=this.$boxDiv.height(),t=this.$boxDiv.width();this.update$li({height:e,width:t}),this.$context.css({height:e,width:t})}}]),t}(m);e.exports=x},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp_paragraph editable-text" style="cursor: default;">#{content}</div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(22).$loadMLink,u=n(262),l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"create$context",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this),n=window.scene,i=n.isTemplate,o=n.sourceId,r=n.id,a={sceneId:r};return i&&(a.isTemplate=i),o&&(a.sourceId=o),c().then(function(){var t={mlink:"https://ax8bgc.mlinks.cc/AK00",button:e.find("a.deepShareHref")[0],autoLaunchApp:!1,autoRedirectToDownloadUrl:!0,downloadWhenUniversalLinkFailed:!1,inapp:!1,params:a};new Mlink(t)}),e}}]),t}(u);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.imgSrc,n=e.reasonList,i=n.map(function(e,t){var n=e.id,i=e.name,o=(e.value,0==t?'class="active"':"");return'<li value="'+n+'" '+o+"><span>"+i+"</span></li>"}).join("");return $(f(p,{imgSrc:t,reasons:i}))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(267);var u=n(268).$getReportOptions,l=n(268).$postReport,p=n(269),d=n(262),f=n(44).parse,h=n(96).popUpModal,g=n(24).isPc,m=[],v=[{id:14258,name:"内容涉及违规",value:1},{id:14259,name:"诱导浏览者分享",value:2},{id:14260,name:"场景内容侵权",value:3},{id:14302,name:"内容夸大宣传",value:4},{id:14303,name:"违背云微秀用户协议",value:5},{id:14304,name:"其它原因",value:6}],y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.show=!r.eqxPage.eqxScene.config.disableReport,r.$report=null,r}return r(t,e),s(t,[{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.hide()}},{key:"eleShow",value:function(){return this.show?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this):this}},{key:"hide",value:function(){this.$report&&this.$report.hide()}},{key:"addClassToLi",value:function(e){this.show||this.$li.css("display","none")}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;$(e).on("click",function(e){e.stopPropagation(),n.openReportModal()})}},{key:"openReportModal",value:function(){var e=this;if(this.$report){return this.$report.show()}var t=this.compJson.sceneId;this.getSelectOption().then(function(i){var o=a({imgSrc:n(270),reasonList:i});e.$report=o;var r=e.$li.parents(".nr");o.appendTo(r),g()&&"pc"!=e.eqxPage.previewMode||e.$report.css({position:"fixed"}),o.find("li").click(function(e){e.stopPropagation(),$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("#reportSubmit").click(function(n){n.stopPropagation();var i=o.find("li.active").val();l({sceneId:t,type:i}).then(function(){return h("举报成功！",e.eqxPage)})["finally"](function(){return e.hide()})}),e.$report.on("click",function(t){var n=$("#report0");n.is(t.target)||0!==n.has(t.target).length||e.hide()})})}},{key:"getSelectOption",value:function(){return new Promise(function(e,t){return m.length?e(m):u().then(function(n){m=n.list,m.length?e(m):t()})["catch"](function(){return m=v,e(m)})})}}]),t}(d);e.exports=y},function(e,t){},function(e,t,n){function i(){var e=a.SERVER_1+"lp/expose_types";return r({type:"GET",url:e})}function o(e){var t=e.sceneId,n=e.type;return r({type:"POST",url:a.SERVER_1+"lp/expose",data:{sceneId:t,type:n}})}var r=n(20).ajax,a=n(21);e.exports={$getReportOptions:i,$postReport:o}},function(e,t,n){e.exports='<div class="reportModal"><div id="report0"><div id="report1"><div id="report2"><p><img src="'+n(270)+'" style="width: 50px;height: 50px"></p><h1>请选择举报原因</h1></div><div id="report3"><ul id="reportList">#{reasons}</ul></div><div id="report4"><a id="reportSubmit" data-event="11203">提交举报</a></div></div></div></div>'},function(e,t,n){e.exports="https://img.alicdn.com/imgextra/i3/483638748/O1CN012r9BuC2EUdI366Od1_!!483638748.png"},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",r.fontSize&&(r.fontSize=h(r.fontSize)),$(m(g,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}function c(e){var t=e.fontFamily,n=e.sceneId,i=e.mode;if("view"===i&&window.scene&&t&&!y[t]){var o="@font-face{font-family:'"+t+"';src: url('"+v.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".woff') format('woff'),url('"+v.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".ttf') format('truetype');}";f(o),y[t]=!0}}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},p=n(272),d=n(130),f=d.addGlobalStyle,h=d.addSuffixPx,g=n(273),m=n(44).parse,v=n(21),y={},b=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0,variableText:!0,adjustMode:!0,replace:!0}},link:!0,flexLine:"n,s,w,e,r"}),i}return a(t,e),u(t,[{key:"getFtEditableProps",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return[n.content.content,n.color.color].concat(e,[n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=e.css,a=r.letterSpacing,u=void 0===a?0:a,l=r.fontFamily,p=r.fontSize,d=r.writingMode,f=r.marginTop,h=void 0===f?"0px":f,g=r.marginBottom,m=void 0===g?"0px":g,v=e.properties.anim,y=void 0===v?[]:v;e.properties.isReplace=e.properties.isReplace||!1,i||(i=e.properties.isElementNewText?"":"请输入文本");try{i=i.replace(/<(script[^>]*)>(.*?)<([^>]*\/[^>]*script[^>]*)>/gi,"&lt;$1&gt;$2&lt;$3&gt;").replace(/<(img)[^>]*>/,"&lt;$1&gt;").replace(/eval(\()/gi,"$1").replace(/atob(\()/gi,"$1").replace(/<([^(abds\/\/][\S]*)[^>]*?>.*<[^>]*\1[^>]*>/gi,"").replace(/<\/?(input|textarea|select|script|button|iframe|form)[^>]*>/gi,"")}catch(b){}var x=s({id:t,type:n,content:i,marginTop:h,marginBottom:m,css:{fontFamily:l,fontSize:p,writingMode:d}});return c({mode:this.eqxScene.config.mode,fontFamily:l,sceneId:o}),11===(e.id+"").length&&this.$li.attr("_tracker_data_",JSON.stringify({id:e.id})),y[0]&&"typer"===y[0].type&&x.css({opacity:0}),x.css({letterSpacing:parseFloat(u||0)+"em"}),x}},{key:"create$liBack",value:function(){return this.$liBack=this.$li.clone().css("opacity",0),this.$li.parent().append(this.$liBack),this.$liBack}},{key:"getNewHeightWidth",value:function(e,t){var n=JSON.parse(JSON.stringify(this.compJson.css));Object.assign(n,t,{opacity:0,zIndex:-1}),this.$liBack.css(n);var i=t.width,o=t.height,r=this.$liBack.find("#"+this.compJson.id),a=this.$liBack.find("span"),s=parseInt(r.css("padding")),c=a.height()+2*s;return e.width===t.width&&e.height===t.height?o=this.$li.height():e.width!==t.width?(o=this.$li.height(),c>=o&&(o=c)):e.height!==t.height&&o<c&&(o=c),{height:o,width:i}}},{key:"remove$liBack",value:function(){this.$liBack&&this.$liBack.remove()}},{key:"updateContent",value:function(e){var t=this.$context.children();e=e.replace(/\s/g,function(){var e=0;return function(t){return e+=1,e%2?"&nbsp;":t}}()),this.compJson.properties.isElementNewText?t.text(e||this.compJson.content):t.text(e||this.compJson.content||"请输入文本"),this.compJson.content=e,t.html(t.text())}},{key:"autoAdjustSize",value:function(){function e(e){var t=e.$context,n=e.$context.children(),i=parseInt(t.css("padding")),o=n.height(),r=parseInt(e.compJson.css.paddingTop)+parseInt(e.compJson.css.paddingBottom),a={height:o+2*i+r};return e.update$li(a),{height:parseInt(e.$li.css("height")),width:parseInt(e.$li.css("width"))}}function t(t,n){if(void 0!==n&&null!==n){var r=320,a=t.$context,s=t.$context.children(),c=o(s);if(c<a.width()){var u={width:c+2*parseInt(a.css("padding"))};t.update$li(u),t.update$boxDiv(u),a.css(u)}else{if(c>=a.width()){for(var l=s.height(),p=a.height(),d=a.width();l>p&&d<r;){i(t),l=s.height(),p=a.height(),d=a.width()}}}return e(t)}}function n(t,n){if(void 0!==n&&null!==n){var i=t.$context,o=t.$context.children();if(1===n){for(;r(i,o,n)&&a(i)>u;){s(t)}if(r(i,o,n)&&a(i)<=u){return e(t)}}else{if(0!==n){return e(t)}for(;r(i,o,n)&&a(i)<l;){c(t)}r(i,o,n)||s(t)}return{height:parseInt(t.$li.css("height")),width:parseInt(t.$li.css("width"))}}}function i(e){var t=e.$context,n=parseFloat(t.css("width"))+1,i={width:n+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}function o(e){var t=e.css("display","inline").width();return e.css("display","block"),t}function r(e,t,n){return n?t.height()>e.height():t.height()<e.height()}function a(e){return parseInt(e.css("font-size"))}function s(e){var t=e.$context,n=a(t);if(n>u){var i={fontSize:n-1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}function c(e){var t=e.$context,n=a(t);if(n<l){var i={fontSize:n+1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}var u=12,l=96,p=this.compJson.properties,d=p.adjustWHMode,f=p.adjustFSMode,h=arguments.length?arguments[0]:null;return d?n(this,h):f?t(this,h):e(this)}},{key:"updatePadding",value:function(e){var t=this.compJson.css,n=parseInt(t.paddingTop),o=parseInt(t.paddingBottom),r=parseInt(t.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){this.create$liBack();var a=JSON.parse(JSON.stringify(t));Object.assign(a,i({},e.padKey,parseInt(e.padValue)),{opacity:0,zIndex:-1}),this.$liBack.css(a);var s=this.$liBack.find("span").height()+10;r=s+n+o,this.remove$liBack()}else{var c=parseInt(t[e.padKey]);r=r+parseInt(e.padValue)-c}r<=28&&(r=28),this.update$li(i({},e.padKey,parseInt(e.padValue))),this.update$li({height:r}),this.autoSizeTopDown()}},{key:"bindAfterRenderEvent",value:function(){}}]),t}(p);e.exports=b},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(78),c=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1,title:!0,description:!0},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"isReplaceComp",value:function(){return this.compJson.properties.isReplace}},{key:"addHightLightStyle",value:function(){this.$li.css({animation:"fadeIn 1s ease 0s 1 normal both","box-shadow":"0 0 16px rgba(21,147,255,1)",border:"solid 1px #1593ff","z-index":9999999999})}},{key:"removeHighLightStyle",value:function(){this.$li.css({animation:"none","box-shadow":"none",border:"none","z-index":this.getZIndex()})}},{key:"addReplaceAttrIcon",value:function(){this.removeReplaceAttrIcon(),this.$replaceIcon=$('<div class="comp-replace-icon">批</div>'),this.$boxDiv.after(this.$replaceIcon)}},{key:"removeReplaceAttrIcon",value:function(){this.$replaceIcon&&(this.$replaceIcon.remove(),this.$replaceIcon=null)}}]),t}(s);e.exports=c},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%;"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;word-break: break-all;">#{content}</span></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(271),s=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0}},link:!0,flexLine:"w,e,r"}),r}return r(t,e),t}(a);e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(276);var s=n(271),c=n(277),u=n(24).isPc,l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.makeModal=null,r}return r(t,e),a(t,[{key:"hide",value:function(){this.makeModal&&this.makeModal.hide()}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"openReportModal",value:function(){var e=this;if(this.makeModal){return this.makeModal.show()}var t=$(this.$li).parents(".nr");this.makeModal=$('<div class="make-modal"><div class="img-container"><img src="'+c+'" width="262px" height="480px"/></div></div>'),t.append(this.makeModal),u()&&"pc"!=this.eqxPage.previewMode||this.makeModal.css({position:"fixed"}),this.makeModal.on("click",function(t){var n=$(".img-container");n.is(t.target)||0!==n.has(t.target).length||e.hide()})}}]),t}(s);e.exports=l},function(e,t){},function(e,t,n){e.exports=n.p+"images/make-223a2e.png"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(279);var s=n(271),c=(n(280),n(24).isPc,n(96).adPopUpModal),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.makeModal=null,r}return r(t,e),a(t,[{key:"hide",value:function(){this.makeModal&&this.makeModal.hide()}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this.compJson,i=n.properties.config,o=this.eqxPage;2==i.clickType&&$(this.$li).on("click",function(e){e.stopPropagation(),c(i,o)})}}]),t}(s);e.exports=u},function(e,t){},function(e,t,n){e.exports=n.p+"images/support-20028c.png"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",r.fontSize&&(r.fontSize=h(r.fontSize)),$(m(g,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}function s(e){var t=e.fontFamily,n=e.sceneId,i=e.mode;"view"===i&&window.scene&&t&&!y[t]&&(f("@font-face{\n                font-family:'"+t+"';\n                src: url('"+v.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".woff') format('woff'),\n                url('"+v.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".ttf') format('truetype');"),y[t]=!0)}function c(e){return Math.floor(Math.random()*e)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},p=n(78),d=n(130),f=d.addGlobalStyle,h=d.addSuffixPx,g=n(282),m=n(44).parse,v=n(21),y={},b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=e.properties.contentType;return"t"===a?$.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0}},link:!0,flexLine:"w,e,r"}):"i"===a&&$.extend(!0,r.$ability,{style:{base:{lineHeight:!1,color:!1,paddingTop:!1},compStyle:{backgroundColor:!1},imageStyle:!0}}),r}return r(t,e),u(t,[{key:"getFtEditableProps",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps,i=this.compJson.properties.contentType;return"t"===i?e.concat([n.tRandom.tRandom]):"i"===i?e.concat([n.iRandom.iRandom]):e}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.tRandom.tRandom?this.getProp("texts"):e===n.iRandom.iRandom?this.getProp("imgs"):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.properties.contentType;if("t"===t){var n=e.id,i=e.type,o=e.sceneId,r=e.css,u=r.fontFamily,l=r.fontSize,p=r.writingMode,d=r.marginTop,f=void 0===d?"0px":d,h=r.marginBottom,g=void 0===h?"0px":h,m=e.properties,v=m.anim,y=void 0===v?[]:v,b=m.texts,x=void 0===b?[]:b,w="view"===this.eqxScene.config.mode?c(x.length):0,k=x[w]||"请输入文本",E=a({id:n,type:i,content:k,marginTop:f,marginBottom:g,css:{fontFamily:u,fontSize:l,writingMode:p}});return s({mode:this.eqxScene.config.mode,fontFamily:u,sceneId:o}),y[0]&&"typer"===y[0].type&&E.css({opacity:0}),E}if("i"===t){var I=e.id,_=e.type,S=e.properties;S=void 0===S?{}:S;var O=S.imgs,P=void 0===O?[]:O,T=S.bgColor,C=e.css,q=C.width,j=C.height,R="view"===this.eqxScene.config.mode?c(P.length):0,L=this.getImgSrc(P[R].src,{width:q,height:j}),A=$('<div id="'+I+'" \n                                   class="random-content element" \n                                   ctype="'+_+'"\n                                   style="width: 100%;height: 100%;"></div>').css("background-color",T),M=this.$img=$('<div class="random-content-image"\n                                           style="width: 100%;height: 100%;">').css({backgroundImage:"url('"+L+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"});return A.append(M),A}}},{key:"updateContent",value:function(e){this.$context.children().html(e)}},{key:"updateImg",value:function(e){var t=this.compJson.css,n=t.width,i=t.height,o=this.getImgSrc(e,{width:n,height:i});this.$img.css("background-image","url('"+o+"')")}},{key:"updateSize",value:function(e,t){}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}},{key:"autoAdjustSize",value:function(){var e=this.$context,t=this.$context.children(),n=parseInt(e.css("padding")),i=t.height(),o={height:i+2*n};return this.update$li(o),{height:parseInt(this.$li.css("height")),width:parseInt(this.$li.css("width"))}}}]),t}(p);e.exports=b},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%;"><span style="display: block;\n                 margin-top: #{marginTop};\n                 margin-bottom: #{marginBottom};\n                 color: inherit;\n                 word-break: break-all;">#{content}</span></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(284),c=n(287),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!0,backgroundColor:!0},commonStyle:{self:!0},advanceStyle:{self:!0,required:!0},compFont:{fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.ruleHide?"（跳过）":this.$select.find("option:selected").text(),t=this.compJson.properties.required,n=this.ruleHide?"（跳过）":Number(this.$select.val());n||(e="");var i={success:!0,pageId:this.pageId,key:this.name,value:e,elementId:this.id};return t&&!n&&(i.success=!1,i.message="该项为必选项"),i}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.required,r=e.properties.formRelevant,a=void 0===r?{}:r,c=e.css,u=c.borderWidth,l=c.backgroundColor,p=a.title.content,d=a.des.content;u||(e.css.borderWidth=0,e.css.borderColor="rgba(8, 161, 239, 1)",this.$boxDiv.css("borderWidth","0"),this.$boxDiv.css("borderColor","rgba(8, 161, 239, 1)")),l||(e.css.backgroundColor="#ffffff",this.$boxDiv.css("backgroundColor","#ffffff"));var f=e.choices||{},h=f.options||[];this.name="eq[f_"+t+"]",this.required=o,this.pageId=n;var g=s.$compDiv({id:t,type:i,required:o,title:p,des:d}),m=this.$select=g.find("select"),v=h.map(function(e){return s.$option({selected:e.selected,value:e.value,label:e.label})});return m.append(v),g}},{key:"getValue",value:function(){return this.$select.val()}},{key:"changeOption",value:function(){var e=this.compJson.choices.options||[],t=e.map(function(e){return s.$option({selected:e.selected,value:e.value,label:e.label})});this.$select.empty(),this.$select.append(t)}},{key:"bindAfterRenderEvent",value:function(){var e=this;return this.$li.bind("touchstart mousedown",function(e){e.stopPropagation()}).find("select").on("click",function(){e.hideFormErrMsg()}),!0}},{key:"getOptionHash",value:function(){var e={},t=this.compJson.choices;return t.options.forEach(function(t){var n=JSON.parse(JSON.stringify(t));n["default"]&&(n["default"]=!1),e[t.value]=n}),e}},{key:"getOptionList",value:function(){var e=[],t=this.compJson.choices;return t.options.forEach(function(t){var n=JSON.parse(JSON.stringify(t));Object.assign(n,{id:t.value}),e.push(n)}),e}},{key:"getTextDetail",value:function(e){var t=this.getTipTitle(),n=[],i=this.getOptionHash();return e.forEach(function(e){i[e]&&n.push(i[e].label)}),{title:t,options:n}}}]),t}(c);e.exports=u},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.required,o=void 0===i?null:i,s=e.title,c=e.des,u=$(a(r,{id:t,type:n,title:s,des:c}));return u.find("#"+t).attr("required",o),u}function o(e){var t=e.selected,n=void 0===t?null:t,i=e.value,o=e.label,r=$('<option  class="comp_select_option" value="'+i+'">'+o+"</option>").attr("selected",n);return r}var r=n(285);n(286);var a=n(44).parse;e.exports={$compDiv:i,$option:o}},function(e,t){e.exports='<div class="form-title-box"><div>#{title}</div></div><div class="form-des-box"><div>#{des}</div></div><div class="comp_drop_down form-comp-box" style="width:100%;height:100%" id="#{id}" ctype="#{type}"><div style="width: 100%;height: 100%"><select style="width:100%;height:100%;line-height: 2.7" name="eq[f_#{id}]" class="comp_drop_down_select" ctype="#{type}"></select></div></div>'},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(288),c=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li.find("#"+this.id);this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),n.on("change",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.getValue())})}}]),t}(s);e.exports=c},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},l=n(78),p=n(44).parse,d=n(80),f=n(289),h=n(64).FORM_COMPS,g=n(64).FORM_RELATIVE_RULE_COMPS,m=["top","left","paddingTop","paddingBottom","paddingLeft","paddingRight"],v=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1,title:!0,description:!0},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),i}return a(t,e),c(t,[{key:"create$li",value:function(){function e(e,t){if(t&&t.length){return""}var n="",i=/rotateZ\((-?\d*\.?\d*)(deg|)\)/.exec(t);return i&&i.length&&(n+=i[0]+" "),n}function t(){var e=i.eqxPage.pageJson.properties.formStyle.title,t=Object.assign({},l.formRelevant.title.css,e),n=l.formRelevant.des.css,o=i.compJson.properties.uploadNote?38:0;o||$(i.$formNote).css("display","none"),i.$formTitle.css(t),i.$formDes.css(n);var r=JSON.parse(JSON.stringify(u));m.forEach(function(e){void 0!=r[e]&&delete r[e]}),i.$formComp.css(Object.assign({},r,{width:"100%",height:"calc(100% - "+(parseInt(t.height)+parseInt(n.height)+parseInt(o))+"px)",transform:"none",visibility:"visible"}))}function n(){i.$formTitle=i.$boxContentDiv.find(".form-title-box"),i.$formDes=i.$boxContentDiv.find(".form-des-box"),i.$formComp=i.$boxContentDiv.find(".form-comp-box"),i.$formNote=i.$boxContentDiv.find(".form-note-box")}var i=this,o=i.eqxScene,r=i.compJson,a=r.id,s=r.num,c=r.type,u=r.css,l=r.properties,f=r.sound,h=u.zIndex,g=u.transform,v=u.display,y=u.opacity,b=u.paddingTop,x=u.paddingBottom,w=u.paddingLeft,k=u.paddingRight,E=(u.backgroundColor,u.visibility),I="string"!=typeof g?"":g,_=o.config,S=e(i,I),O=i.getAbsolutePos(),P=i.$li=$(p(d,{id:a,num:s,type:c})),T=i.$boxDiv=P.find(".element-box"),C=i.$boxContentDiv=T.find(".element-box-contents"),q={};this.$switchRuleTag=null,this.$relativeRuleTag=null,this.$ruleContainer=null,l.lock&&P.addClass("alock"),P.css({zIndex:h,transform:S,display:v,opacity:y,paddingTop:b,paddingBottom:x,paddingLeft:w,paddingRight:k,visibility:E}).attr("abs-pos","l-"+O.left+"-t-"+O.top+"-w-"+O.width+"-h-"+O.height).attr("eqx-id",a),i._updateSize(),i.addClassToLi(P),T.css({border:"none",borderRadius:"0"}),c+""=="6"&&T.css({"background-color":"transparent"});var j=I.indexOf("rotateX(180deg)")>-1,R=I.indexOf("rotateY(180deg)")>-1;u.turnOver||(j&&(u.turnOver="rotateX(180deg)"),R&&(u.turnOver=(u.turnOver||"")+" rotateY(180deg)")),q.transform=u.turnOver,C.css(q),f&&f.id&&"edit"===_.mode&&i.addSoundIcon(),this.$contentsDiv=C,this.$context=this.create$context(),C.append(this.$context),n(),t(),this.updateClass();var L=o.variableComps,A=L.texts,M=L.inputs,D=L.images,F=L.uploads;if(["501","502","503","504"].indexOf(c.toString())!==-1){M.push(i)}else{if("7"===c.toString()){var J=l["var"];J&&J.isUsed&&A.push(i)}else{if("upload"===c){F.push(i)}else{if("4"===c.toString()){var B=l["var"];B&&B.isUsed&&D.push(i)}}}}return P}},{key:"getFormTitleHeight",value:function(){var e=this.$formTitle.children().height(),t=e?e+8:0;return t}},{key:"updateFormTitle",value:function(e){e=this.compJson.properties.formRelevant.title.content,this.$formTitle.children().text(e),this.updateTitleHeight(this.compJson,e),this.updateFormHeight()}},{key:"updateTitleHeight",value:function(e,t){var n=e.properties.formRelevant.title.css;n||(n=e.properties.formRelevant.title.css={}),t?(n.display="block",this.$formTitle.css("display","block")):(n.display="none",this.$formTitle.css("display","none"));var i=this.getFormTitleHeight();n.height=i,this.$formTitle.css("height",i)}},{key:"updateTitleCss",value:function(e){e&&(this.$formTitle.css(e),this.updateFormJson(e,"title"),this.updateFormTitle(this.compJson.properties.formRelevant.title.content))}},{key:"updateClass",value:function(){var e=this.compJson.properties.required,t=void 0!==e&&e,n=t?"addClass":"removeClass";this.$formTitle[n]("require")}},{key:"getFormDesHeight",value:function(){var e=this.$formDes.children().height(),t=e?e+8:0;return t}},{key:"updateFormDes",value:function(e){this.$formDes.children().text(e),this.updateDesHeight(this.compJson,e),this.updateFormHeight()}},{key:"updateDesHeight",value:function(e,t){var n=e.properties.formRelevant.des.css;n||(n=e.properties.formRelevant.des.css={}),t?(n.display="block",this.$formDes.css("display","block")):(n.display="none",this.$formDes.css("display","none"));var i=this.getFormDesHeight();n.height=i,this.$formDes.css("height",i)}},{key:"updateDesCss",value:function(e){e&&(this.$formDes.css(e),this.updateFormJson(e,"des"),this.updateFormDes(this.compJson.properties.formRelevant.des.content))}},{key:"updateFormHeight",value:function(){var e=this.compJson;e.properties.formRelevant=e.properties.formRelevant?e.properties.formRelevant:{title:{content:"",css:{}},des:{content:"",css:{}}};var t=parseInt(this.compJson.css.paddingTop)+parseInt(this.compJson.css.paddingBottom),n=parseInt(this.$formComp.css("height"));if(this.$formTitle&&"none"!=this.$formTitle.css("display")){i=this.getFormTitleHeight()}else{var i=0}if(this.$formDes&&"none"!=this.$formDes.css("display")){o=this.getFormDesHeight()}else{var o=0}var r=parseInt(i)+parseInt(o);this.update$li({height:parseInt(r+n+t)}),this.$formComp.css("height","calc(100% - "+r+"px)"),this.autoSizeTopDown()}},{key:"updateFormAllHeight",value:function(e,t,n){this.updateTitleHeight(e,t),this.updateDesHeight(e,n),this.updateFormHeight()}},{key:"updateFormCompCss",value:function(e){e&&(this.$formComp.css(e),this.updateCss(e),this.autoSizeTopDown(),this.updateFormHeight())}},{key:"updateFormJson",value:function(e,t){if(e){var n=this.compJson.properties.formRelevant;n||(n=this.compJson.properties.formRelevant={title:{content:"",css:{}},des:{content:"",css:{}}});var i=n[t].css;Object.assign(i,e)}}},{key:"updatePadding",value:function(e){var t=parseInt(this.compJson.css.paddingLeft),n=parseInt(this.compJson.css.paddingRight),o=parseInt(this.compJson.css.width),r=parseInt(this.compJson.css.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){"paddingLeft"==e.padKey?(t=e.padValue,n=o-t-280):(n=e.padValue,t=o-n-280),this.update$li({paddingLeft:t,paddingRight:n})}else{var a=parseInt(this.compJson.css[e.padKey]);r+=parseInt(e.padValue)-a,this.update$li(i({height:r},e.padKey,parseInt(e.padValue)))}this.autoSizeTopDown()}},{key:"getTipTitle",value:function(){var e=this.compJson.properties.formRelevant&&this.compJson.properties.formRelevant.title.content||this.placeholder;return e||(e=f[this.compJson.type]),e}},{key:"findBeforeOption",value:function(){var e=this.eqxPage.baseElementQueue,t=e.indexOf(this);return !(t<0)&&e.slice(0,t).filter(function(e){return g.includes(e.type)})}},{key:"findAfterSomeOption",value:function(){var e=this.eqxPage.baseElementQueue,t=e.length,n=e.indexOf(this);return n!=t-1&&e.slice(n+1).filter(function(e){return"r"==e.type||"c"==e.type||"z"==e.type})}},{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li.find("#"+this.id);this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),n.on("input",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.getValue())})}},{key:"findAfterOption",value:function(){var e=[],t=this.eqxPage.baseElementQueue,n=t.indexOf(this);return !(n<0)&&(t.slice(n+1).forEach(function(t){var n={};h.indexOf(t.type)!=-1&&(n.value=t.id,n.name=t.getTipTitle(),n.baseComp=t,e.push(n))}),e)}},{key:"findSubmitBtn",value:function(){var e=this.eqxPage.baseElementQueue;return e.filter(function(e){return"6"==e.type||"601"==e.type})}},{key:"getValue",value:function(){return this.$li.find("#"+this.id).val()}},{key:"addRuleContainer",value:function(){return this.$ruleContainer=$('\n            <div class="form-rule-tag-container">\n                <div class="form-rule-tag-wraper"></div>\n            </div>\n        '),this.$li.append(this.$ruleContainer),this.$ruleContainer}},{key:"addSwitchTag",value:function(){this.$switchRuleTag||(this.$ruleContainer=this.$ruleContainer||this.addRuleContainer(),this.$switchRuleTag=$('<div class="list switch-rule">跳</div>'),this.$ruleContainer.find(".form-rule-tag-wraper").append(this.$switchRuleTag))}},{key:"removeRuleContainer",value:function(){!this.$ruleContainer||this.$switchRuleTag||this.$relativeRuleTag||(this.$ruleContainer.remove(),this.$ruleContainer=null)}},{key:"removeSwitchTag",value:function(){this.$switchRuleTag&&this.$switchRuleTag.remove(),this.$switchRuleTag=null,this.removeRuleContainer()}},{key:"addRelativeTag",value:function(){this.$relativeRuleTag||(this.$ruleContainer=this.$ruleContainer||this.addRuleContainer(),this.$relativeRuleTag=$('<div class="list relative-rule">联</div>'),this.$ruleContainer.find(".form-rule-tag-wraper").append(this.$relativeRuleTag))}},{key:"removeRelativeTag",value:function(){this.$relativeRuleTag&&this.$relativeRuleTag.remove(),this.$relativeRuleTag=null,this.removeRuleContainer()}},{key:"findCurrentRule",value:function(){return this.eqxPage.formRulesManager.getRules(this.id)}},{key:"findAffectedRules",value:function(){return this.eqxPage.formRulesManager.getAffectedRules(this.id)}},{key:"removeRules",value:function(){this.eqxPage.formRulesManager.remove(this.id)}},{key:"toJson",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJson",this).call(this);return e=this.filterScripts(e),JSON.parse(JSON.stringify(e))}},{key:"filterScripts",value:function(e){function t(e){if("object"===("undefined"==typeof e?"undefined":s(e))){for(var n in e){var i=e[n];"object"===("undefined"==typeof i?"undefined":s(i))?t(i):"string"==typeof i&&i.indexOf("script")>-1&&(e[n]=i.replace(/<(script[^>]*)>(.*?)<([^>]*\/[^>]*script[^>]*)>/gi,"$2"))}}return e}return t(e)}},{key:"hideFormErrMsg",value:function(){this.$formComp.removeClass("validatError noTitle").removeAttr("error-log")}},{key:"showFormErrMsg",value:function(e){var t="validatError";try{var n=this.compJson.properties.formRelevant,i=n.title,o=n.des;"none"==i.css.display&&"none"==o.css.display&&(t+=" noTitle")}catch(r){}this.$formComp.addClass(t).attr("error-log",e)}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.$li.on("click",function(){e.hideFormErrMsg()})}},{key:"adaptFormHeight",value:function(){var e=this;["$formTitle","$formDes","$formNote"].forEach(function(t){if(!(!e[t].length>0||"none"==e[t].css("display"))){e[t].css("height","");var n=e[t].innerHeight();e[t].css("height",n)}});var t=this.$formComp.css("height");return this.$formComp.css("height",""+t),this.$li.css({height:""}),this.$li.innerHeight()}}]),t}(l);e.exports=v},function(e,t){var n={1:"爆款文本",2:"文本",3:"背景",4:"图片",5:"输入框",6:"提交按钮",7:"新文本",8:"电话",9:"红包",10:"随机事件",11:"打赏",12:"验证码",13:"照片墙",14:"日期",16:"长按按钮",17:"微信卡券",18:"幸运转盘抽奖",19:"砸金蛋",20:"一刮千金",21:"微信红包",22:"幸运九宫格",23:"二维码",24:"点击截图",201:"微信昵称",298:"文本",299:"文本",401:"微信头像",403:"微信照片",501:"姓名",502:"电话",503:"邮箱",504:"文本",505:"QQ",506:"微信",507:"单行文本",508:"多行文本",601:"提交按钮",x:"文本",a:"评分",b:"留言板",c:"复选框",d:"统计",e:"计时",f:"计时",g:"广告",h:"形状",i:"计数器",j:"投票",k:"投票",l:"链接",m:"地图",n:"随机图片",o:"互动视频",p:"图集",q:"重力感应",r:"单选框",s:"音效",t:"图表",u:"画板",upload:"上传图片",v:"视频",w01:"微信声音",w02:"微信声音",z:"下拉列表",scoreMatrix:"评分矩阵",scoreMatrixNps:"NPS矩阵",scoreRadio:"评分单选",scoreCheckbox:"评分多选",score:"评分",scoreScale:"NPS量表"};e.exports=n},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(24).mobilecheck,u=n(24).isAndroidPhone,l=n(288),p=n(291),d=n(44).parse;n(292);var f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontColor:!0},advanceStyle:{required:!0}},trigger:{self:!1},link:!1}),r.eqxScene.formManager.add(r),r.variablesValue="",r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.input.input])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.input.input?this.compJson.type:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"check",value:function(){function e(){if(i&&!t.ruleHide){return i.min.checked&&i.min.limit&&n.length<i.min.limit?(r.success=!1,void (r.message=(o||t.placeholder)+"最少填"+i.min.limit+"个字")):void (i.max.checked&&i.max.limit&&n.length>i.max.limit&&(r.success=!1,r.message=(o||t.placeholder)+"最多填"+i.max.limit+"个字"))}}var t=this,n=this.ruleHide?"（跳过）":this.$li.find("#"+this.id).val(),i=this.compJson.properties.formCheck,o="该项",r={success:!0,pageId:this.pageId,key:this.name,value:n,elementId:this.id};return n?e():this.required&&(r.success=!1,r.message=(o||this.placeholder)+"为必填项"),r}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=void 0===r?null:r,s=o.placeholder,c=void 0===s?null:s,u=o.formRelevant,l=void 0===u?{}:u,f=l.title.content,h=l.des.content;return this.required=a,this.name="eq[f_"+t+"]",this.pageId=n,this.placeholder=c,this.id=t,$(d(p,{id:t,type:i,placeholder:c,required:a,title:f,des:h}))}},{key:"setInputTitle",value:function(e){this.$context.find("input").attr("placeholder",e)}},{key:"bindAfterRenderEvent",value:function(e,n){var i=this,o=c(),r=$(e).find("input").length>0?$(e).find("input"):$(e).find("textarea");t.touchStartMouseDownStopPropagation($(e).find("input")),this.onFocusBlurWhenFlip($(e).find("input")),this.onChangeTriggerVar($(e).find("input"));var a=u();return o&&parseFloat(n.css.top)>=200&&a&&$(e).find("input").focus(function(e){setTimeout(function(){e.target.scrollIntoViewIfNeeded()},500)}).blur(function(){}),r.on("focus",function(){i.hideFormErrMsg()}).on("blur",function(){var e=i.check();e.success||i.showFormErrMsg(e.message)}),o&&!a&&r.on("focus",function(){r.data("scroll",document.body.scrollTop||document.documentElement.scrollTop)}).on("blur",function(){setTimeout(function(){var e=document.activeElement.tagName.toLowerCase();if("input"!=e&&"textarea"!=e){var t=r.data("scroll");window.scrollTo(0,t)}r.data("scroll",null)},100)}),!0}},{key:"onFocusBlurWhenFlip",value:function(e){}},{key:"onChangeTriggerVar",value:function(e){var t=this;e.on("change input",function(){var n=e.val();t.variablesValue=n;var i=t.variables;i&&i.length&&i.forEach(function(e){"7"===e.type.toString()&&e.updateContent(n)})})}},{key:"addClassToLi",value:function(e){e.addClass("wsite-input")}}],[{key:"touchStartMouseDownStopPropagation",value:function(e){$(e).bind("touchstart mousedown",function(e){e.stopPropagation()})}}]),t}(l);e.exports=f},function(e,t){e.exports='<div class="form-title-box"><div>#{title}</div></div><div class="form-des-box"><div>#{des}</div></div><div class="form-comp-box"><input id="#{id}" ctype="#{type}" placeholder="#{placeholder}" required="#{required}" class="element comp_input editable-text" maxlength="10000" name="eq[f_#{id}]" style="width: 100%;height:100%;"></div>'},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(290),c=n(294),u=n(44).parse,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=void 0===r?null:r,s=o.placeholder,l=void 0===s?null:s,p=o.formRelevant,d=void 0===p?{}:p,f=d.title.content,h=d.des.content;return this.required=a,this.name="eq[f_"+t+"]",this.pageId=n,this.placeholder=l,this.id=t,$(u(c,{id:t,required:a,placeholder:l,type:i,title:f,des:h}))}},{key:"setInputTitle",value:function(e){this.$context.find("input").attr("placeholder",e)}}]),t}(s);e.exports=l},function(e,t){e.exports='<div class="form-title-box"><div>#{title}</div></div><div class="form-des-box"><div>#{des}</div></div><div class="form-comp-box"><input id="#{id}" ctype="#{type}" placeholder="#{placeholder}" required="#{required}" class="element comp_input editable-text" maxlength="10000" name="eq[f_#{id}]" style="width: 100%;height:100%;"></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(290),c=n(296),u=n(44).parse,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=void 0===r?null:r,s=o.placeholder,l=void 0===s?null:s,p=o.formRelevant,d=void 0===p?{}:p,f=d.title.content,h=d.des.content;return this.required=a,this.name="eq[f_"+t+"]",this.pageId=n,this.placeholder=l,this.id=t,$(u(c,{id:t,required:a,placeholder:l,type:i,title:f,des:h}))}},{key:"setInputTitle",value:function(e){this.$context.find("textarea").attr("placeholder",e)}}]),t}(s);e.exports=l},function(e,t){e.exports='<div class="form-title-box"><div>#{title}</div></div><div class="form-des-box"><div>#{des}</div></div><div class="form-comp-box"><textarea id="#{id}" ctype="#{type}" placeholder="#{placeholder}" required="#{required}" class="element comp_input editable-text" maxlength="10000" name="eq[f_#{id}]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none;overflow:auto">\n</textarea></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(290),u=n(179).isEmail,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this),n="该项";return e.success?(!e.value||u(e.value)||this.ruleHide||(e.success=!1,e.message=n+"格式有误"),e):e}}]),t}(c);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(290),u=n(179).isPhoneNumber,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this),n="该项";return e.success?(!e.value||u(e.value)||this.ruleHide||(e.success=!1,e.message=n+"格式有误"),e):e}}]),t}(c);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(290),u=n(179).isQQ,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this),n="该项";return e.success?(!e.value||u(e.value)||this.ruleHide||(e.success=!1,e.message=n+"格式有误"),e):e}}]),t}(c);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(290),u=n(179).isWeiChat,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this),n="该项";return e.success?(!e.value||u(e.value)||this.ruleHide||(e.success=!1,e.message=n+"格式有误"),e):e}}]),t}(c);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(302),c=n(288),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.ruleHide?"（跳过）":this.$score.val(),t=(this.getTipTitle(),{success:!0,pageId:this.pageId,key:this.name,value:e,elementId:this.id});return this.required&&!e&&(t.success=!1,t.message="该项为必填项"),t}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=o.icon,c=o.size,u=o.color,l=o.formRelevant,p=void 0===l?{}:l,d=p.title.content,f=p.des.content,h=s.$compDiv({id:t,type:i,required:r,formTitle:d,formDes:f});this.required=r,this.title=d,this.name="eq[f_"+t+"]",this.pageId=n;var g=[1,2,3,4,5].map(function(){return s.icon({icon:a,size:c})});return h.find(".rating-icons").append(g).css({color:u}),this.$score=h.find('input[type="hidden"]'),this.$titleDiv=h.find(".rating-title"),h}},{key:"update$iconColor",value:function(e){this.$context.find(".rating-icons").css({color:e}),this.updateProp("color",e)}},{key:"update$titleDiv",value:function(e){this.$titleDiv.text(e)}},{key:"updateAttrRequire",value:function(e){this.$context.attr("required",e)}},{key:"update$icon",value:function(e,t){this.$context.find("i").removeClass().addClass(e+" "+t)}},{key:"bindAfterRenderEvent",value:function(e,t){function n(e){r.each(function(t,n){$(n).removeClass(c+"-f").addClass(c+"-l"),t<=e&&$(n).removeClass(c+"-l").addClass(c+"-f")})}var i=this,o=$(e),r=o.find("i"),a=o.find("input"),s=t.properties.icon.split("-"),c=s[0]+"-"+s[1];return r.each(function(e,t){$(t).attr("data-event","11211"),$(t).bind("click",function(){n(e),a.val(e+1),i.hideFormErrMsg()}).bind("mouseenter",function(){return n(e)})}),o.find(".rating-icons").bind("mouseleave",function(){return n(~~a.val()-1)}).bind("touchstart mousedown",function(e){e.stopPropagation()}),!0}},{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li,i=n.find("i");this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),i.each(function(e,n){$(n).bind("click",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.$score.val())})})}}]),t}(c);e.exports=u},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.title,o=e.required,s=void 0===o?null:o,c=e.formTitle,u=e.formDes;return $(a(r,{id:t,type:n,title:i,formTitle:c,formDes:u})).attr("required",s)}function o(e){var t=e.icon,n=e.size;return'<i style="margin-right: 5px" class="'+n+" "+t+'"></i>'}n(303);var r=n(304),a=n(44).parse;e.exports={$compDiv:i,icon:o}},function(e,t){},function(e,t){e.exports='<div class="form-title-box"><div>#{formTitle}</div></div><div class="form-des-box"><div>#{formDes}</div></div><div class="element comp_rating editable-text form-comp-box" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none;" id="#{id}" ctype="#{type}" title="#{formTitle}" name="eq[f_#{id}]"><div class="rating-icons"></div><input type="hidden" name="eq[f_#{id}]" value=""></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){function o(e){"eqf-score-scale"!=n?a.each(function(t,n){$(n).removeClass(u+"-f").addClass(u+"-l"),t<=e&&$(n).removeClass(u+"-l").addClass(u+"-f")}):a.each(function(t,n){$(n).addClass("active"),t<=e&&$(n).removeClass("active")})}var r=$(e),a=r.find("i"),s=r.find("input"),c=t.properties.formRelevant.scoreSettings.type.split("-"),u=c[0]+"-"+c[1];a.each(function(e,t){$(t).attr("data-event","11211"),$(t).bind("click",function(){o(e),s.val(e+1),i.hideFormErrMsg()})}),r.find(".rating-icons").bind("touchstart mousedown",function(e){e.stopPropagation()})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(301),l=n(306),p=n(309),d=n(310).copyProperties,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=new p(e,n);return d(r,Reflect.getPrototypeOf(a)),a=null,r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=this.eqxScene.config.mode,n=e.id,i=e.pageId,o=e.type,r=e.properties,a=r.required,s=r.formRelevant,c=void 0===s?{}:s,u=c.title&&c.title.content||"",p=c.des&&c.des.content||"";this.scoreSetting=this.getScoreSettings();var d=this.scoreSetting,f=d.minValue,h=d.maxValue,g=d.scoreLevel,m=void 0===g?5:g,v=d.type,y=d.bgColor,b=d.color,x=l.$compDiv({id:n,type:o,required:a,formTitle:u,formDes:p,minValue:f,maxValue:h,mode:t,bgColor:y});this.required=a,this.title=u,this.name="eq[f_"+n+"]",this.pageId=i;var w=v;if("eqf-score-scale"!=v){var k="edit"==t?l.iconEdit:l.iconView,E=Array(m).fill(1).map(function(e,t){return k({ico:w,scoreLevel:m,index:t})})}else{k=l.numScale,E=Array(m).fill(1).map(function(e,t){return k(w,b,t+1)})}return x.find(".rating-icons").append(E).css({color:b}),this.$score=x.find('input[type="hidden"]'),this.$titleDiv=x.find(".rating-title"),x}},{key:"getValue",value:function(){return this.$score.val()}},{key:"calcScore",value:function(e){var t=e*this.getScoreSettings().baseNum;return isNaN(parseInt(t))?0:t}},{key:"create$li",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$li",this).call(this),this.updateBgColor(this.scoreSetting.bgColor),this.$formComp.css("border-width","0px"),this.$li}},{key:"update$iconColor",value:function(e){this.$context.find(".rating-icons").css({color:e});var t=this.$context.find(".eqf-score-scale");t.length&&t.css({backgroundColor:e,borderColor:e}),this.updateProp("color",e)}},{key:"updateOptionContent",value:function(e,t){var n="low"==t?".low-rating-level":".senior-rating-level";this.$contentsDiv.find(n).text(e)}},{key:"updateBgColor",value:function(e){this.$boxContentDiv.find(".form-comp-box").css("background-color",e)}},{key:"bindAfterRenderEvent",value:function(e,t){var n=t.properties.formRelevant&&t.properties.formRelevant.scoreSettings||{},i=n.type||t.properties.icon;return a(e,t,i,this),!0}},{key:"updateFormCompCss",value:function(e){if(e){var t=JSON.parse(JSON.stringify(e));t.borderWidth&&delete t.borderWidth,0!=Object.keys(t).length&&(this.$formComp.css(t),this.updateCss(t),this.autoSizeTopDown(),this.updateFormHeight())}}},{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li,i=n.find("i");this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),i.each(function(e,n){$(n).bind("click",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.$score.val())})})}}]),t}(u);e.exports=f},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.title,o=e.required,r=void 0===o?null:o,a=e.formTitle,u=e.formDes,l=e.minValue,p=void 0===l?"":l,d=e.maxValue,f=void 0===d?"":d,h=e.mode,g=e.bgColor;return $(c(s,{id:t,type:n,title:i,formTitle:a,formDes:u,minValue:p,maxValue:f,mode:h,bgColor:g})).attr("required",r)}function o(e){var t=e.ico,n=e.scoreLevel,i=e.index;if(i+1<n){var o=t.split("-"),r=o[0]+"-"+o[1];return'<i class="'+r+'-f"></i>'}return'<i class="'+t+'"></i>'}function r(e){var t=e.ico;return'<i class="'+t+'"></i>'}function a(e,t,n){return'<i style="background-color: '+t+";border-color: "+t+'" class="'+e+' active">'+n+"</i>"}n(307);var s=n(308),c=n(44).parse;e.exports={$compDiv:i,iconEdit:o,iconView:r,numScale:a}},function(e,t){},function(e,t){e.exports='<div class="form-title-box"><div>#{formTitle}</div></div><div class="form-des-box"><div>#{formDes}</div></div><div class="element form-comp-score form-comp-box" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none;background-color:#{bgColor};" id="#{id}" ctype="#{type}" title="#{formTitle}" name="eq[f_#{id}]"><div class="rating-level clearfix"><div class="low-rating-level">#{minValue}</div><div class="senior-rating-level">#{maxValue}</div></div><div class="rating-icons rating-icons-#{mode}"></div><input type="hidden" name="eq[f_#{id}]" value=""></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(288),c=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li.find("#"+this.id);this.ruleIds=this.ruleIds||[],this.ruleIds.push(e);var i=this.getValue();n.on("click",".star",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,i)})}},{key:"check",value:function(){var e=this.getValue(),t=this.calcScore(e),n=e?e+("（"+t+"分）"):"",i={content:n,value:e,score:t};this.ruleHide&&(i.content="（跳过）");var o={success:!0,pageId:this.pageId,key:this.name,value:JSON.stringify(i),score:t,elementId:this.id};if(this.required&&!e&&!this.ruleHide){this.getTipTitle();o.success=!1,o.message="该项为必填项"}return o}},{key:"getScoreSettings",value:function(){var e=this.compJson;return e.properties||(e.properties={}),e.properties.formRelevant||(e.properties.formRelevant={}),e.properties.formRelevant.scoreSettings||(e.properties.formRelevant.scoreSettings={baseNum:1,scoreLevel:5,minValue:"非常不满意",maxValue:"非常满意",type:e.properties.icon}),e.properties.formRelevant.scoreSettings}}]),t}(s);e.exports=c},function(e,t){function n(e,t){var n=Reflect.ownKeys(Object.getPrototypeOf(e)),i=!0,o=!1,r=void 0;try{for(var a,s=function(){var i=a.value;if("constructor"!==i&&"prototype"!==i&&"name"!==i&&!n.find(function(e){return e===i})){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,o)}},c=Reflect.ownKeys(t)[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){s()}}catch(u){o=!0,r=u}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o){throw r}}}}e.exports={copyProperties:n}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(305),c=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li,i=n.find("i");this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),i.each(function(e,n){$(n).bind("click",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.$score.val())})})}}]),t}(s);e.exports=c},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function l(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(313),u=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"$compDiv",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$compDiv",this).call(this,e)}},{key:"$option",value:function(e){return e.inputType="r"==this.compJson.type?"radio":"checkbox",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$option",this).call(this,e)}},{key:"updateTitle",value:function(){var e=this.compJson.title+"(可多选)";return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateTitle",this).call(this,e)}}]),t}(c);e.exports=u},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(314);var c=n(315),u=n(316),l=n(44).parse,p=n(287),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){function e(){if(n&&!t.ruleHide){return n.min.checked&&n.min.limit&&r.length<n.min.limit?(a.success=!1,void (a.message="最少选"+n.min.limit+"项")):void (n.max.checked&&n.max.limit&&r.length>n.max.limit&&(a.success=!1,a.message="最多选"+n.max.limit+"项"))}}var t=this,n=this.compJson.properties.formCheck,i="该项",o=this.ruleHide?"-99":this.getValue(),r=o.split(","),a={success:!0,pageId:this.pageId,key:this.name,value:o,elementId:this.id};return o?e():this.required&&(a.success=!1,a.message=(i||this.placeholder)+" 为必填项"),a}},{key:"getValue",value:function(){return this.$options.find("input.option[name]").toArray().filter(function(e){return e.checked}).map(function(e){return $(e).val()}).filter(function(e){return !!e}).join(",")}},{key:"$compDiv",value:function(e){var t=e.id,n=e.required,i=void 0===n?null:n,o=e.title,r=void 0===o?"标题":o,a=e.type,s=e.css,c=e.formTitle,p=e.formDes;return $(l(u,{id:t,title:r,type:a,css:s,formTitle:c,formDes:p})).attr({required:i})}},{key:"$option",value:function(e){var t=e.compId,n=e.index,i=e.optionId,o=e.optionLabel,r=e.inputType,a=void 0===r?"radio":r,s=e.checked,u=""+t+n,p=$(l(c,{id:u,inputType:a,compId:t,optionId:i,optionLabel:o}));return"view"==this.eqxScene.config.mode&&s&&p.find("input").attr("checked",!0),p}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=o.titleStyle,s=void 0===a?{}:a,c=o.formRelevant,u=void 0===c?{}:c,l=e.title,p=e.css.height,d=u.title.content,f=u.des.content;0==Object.keys(u).length&&(p=e.css.height=p-36),this.title=l,this.pageId=n,this.name="eq[f_"+t+"]",this.required=r;var h=this.$compDiv({id:t,required:r,type:i,formTitle:d,formDes:f,css:{height:p,width:"100%"},title:"r"==i?l:l+"(可多选)"});h.find(".radio-title").css(s);var g=this.$options=h.find(".options");return g.html(this.create$options()),"horizontal"==this.compJson.arrange&&"view"==this.eqxScene.config.mode&&this.eqxScene.config.isPc&&this.$boxContentDiv.addClass("horizontal"),h}},{key:"create$li",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$li",this).call(this),n=this.compJson.css,i=n.borderRadius,o=n.borderWidth,r=i-o;return this.$formComp.find(".options").css("border-radius",r+"px"),e}},{key:"updateFormCompCss",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateFormCompCss",this).call(this,e);var n=this.compJson.css,i=n.borderRadius,o=n.borderWidth,r=i-o;this.$formComp.find(".options").css("border-radius",r+"px")}},{key:"create$options",value:function(){var e=this,t=this.compJson,n=t.id,i=(t.properties.optionStyle,t.choices);"string"==typeof i&&(i=JSON.parse(i));var o=$("<div>"),r=(i.options.length-1,"r"==this.compJson.type);return i.options.forEach(function(t,a){var s=r?t.id==i["default"]:t["default"],c=e.$option({compId:n,index:a,optionId:t.id,optionLabel:t.label,inputType:"r"==e.compJson.type?"radio":"checkbox",checked:s});o.append(c)}),o.html()}},{key:"bindAfterRenderEvent",value:function(){var e=this;return this.$li.find("label").bind("touchstart mousedown",function(t){t.stopPropagation(),e.hideFormErrMsg()}),!0}},{key:"updateTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.compJson.title;this.$li.find(".radio-title").text(e)
}},{key:"updateOptions",value:function(){var e=this.create$options();this.$options.html(e),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"updateOptionsLabel",value:function(){var e=this.$li.find(".option-label").find("span");this.compJson.choices.options.forEach(function(t,n){$(e[n]).text(t.label)})}},{key:"updateOptionsType",value:function(){var e="c"===this.compJson.type,t=e?"checkbox":"radio";this.$li.find("input").attr("type",t),e?this.updateTitle(this.compJson.title+"(可多选)"):this.updateTitle()}},{key:"updateHeadBgcolor",value:function(e){this.$li.find(".radio-title").css("backgroundColor",e)}},{key:"updateHeadFontColor",value:function(e){this.$li.find(".radio-title").css("color",e)}},{key:"updateFormHeight",value:function(){var e=this.compJson,t=e.properties.formRelevant,n=t.title,i=t.des,o=e.css.borderWidth,r=parseInt(this.compJson.css.paddingTop)+parseInt(this.compJson.css.paddingBottom),a=parseInt($(this.$context[2]).find(".options").css("height"))+2*o,s=parseInt(n.css.height)+parseInt(i.css.height);this.update$li({height:parseInt(s+a+r)}),$(this.$context[2]).css("height","calc(100% - "+s+"px)"),this.autoSizeTopDown()}},{key:"getOptionHash",value:function(){var e={},t=this.compJson.choices;return"string"==typeof t&&(t=JSON.parse(t)),t.options.forEach(function(t){var n=JSON.parse(JSON.stringify(t));n["default"]&&(n["default"]=!1),e[t.id]=n}),e}},{key:"getOptionList",value:function(){var e=[],t=this.compJson.choices;return"string"==typeof t&&(t=JSON.parse(t)),t.options.forEach(function(t){var n=JSON.parse(JSON.stringify(t));e.push(n)}),e}},{key:"getTextDetail",value:function(e){var t=this.getTipTitle(),n=this.getOptionHash(),i=[];return e.forEach(function(e){n[e]&&i.push(n[e].label)}),{title:t,options:i}}}]),t}(p);e.exports=d},function(e,t){},function(e,t){e.exports='<div class="option-group"><label class="option-label" for="#{id}" data-event="11208"><input class="option" id="#{id}" type="#{inputType}" name="eq[f_#{compId}]" value="#{optionId}"> <span>#{optionLabel}</span></label></div>'},function(e,t){e.exports='<div class="radio-title form-title-box"><div>#{formTitle}</div></div><div class="radio-des form-des-box"><div>#{formDes}</div></div><div class="element comp_radio editable-text form-comp-box" id="#{id}" ctype="#{type}" name="eq[f_#{id}]" style="width: 100%;height: 100%;"><div class="options"></div></div>'},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(318).$postForm,l=n(318).$getSubmitCount,p=n(21),d=n(212),f=n(78),h=n(24).isWeixin,g=(n(81).qiniuZoom,n(319),n(96).popUpModal),m=n(320),v=n(321),y=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1,initSubmitCount:0}),i}return a(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.title,a=o.styleImgSrc,s=o.submitCountShow,c=e.css,u=c.width,l=c.height,f=c.backgroundColor,h=""+p.FILE+a,g="0";return this.pageId=n,this.$context=a?d.$img({id:t,type:i,src:h,css:{width:u,height:l,backgroundColor:f},padding:g}):d.$btn({id:t,type:i,title:r,css:{width:u,height:l,backgroundColor:f}}),s&&s.isOpen&&this.createSubmitDetail(),this.$context}},{key:"addClassToLi",value:function(e){e.addClass("wsite-input")}},{key:"createSubmitDetail",value:function(e){var t=this.compJson.css.height;this.$submitDetail||(this.$submitDetail=d.$submitDetail(),this.$context.append(this.$submitDetail),this.update$submitDetailCss(),this.$context.find("button").css("height","calc(100% - 30px)"),e&&(this.update$li({height:t+parseFloat(this.$submitDetail.height())}),this.autoSizeTopDown())),this.update$submitDetailText()}},{key:"update$submitDetailText",value:function(e){var t=this,n=this.compJson.properties.submitCountShow,i=n.submitCount,o=n.submitContent;if("view"!=this.eqxScene.config.mode||e){var r=this.compJson.properties.submitCountShow.submitCount;e&&(i=this.initSubmitCount+r+1),this.$submitDetail.find(".submit-content").text(o).siblings("span.submit-number").text(i)}else{this.getSubmitCount().then(function(e){200==e.code&&(t.initSubmitCount=e.obj,i+=e.obj),t.$submitDetail.find(".submit-content").text(o).siblings("span.submit-number").text(i)})}}},{key:"getSubmitCount",value:function(){var e=this.pageId,t=this.id,n=this.eqxScene.meta.code;return l(t,e,n)}},{key:"update$submitDetailCss",value:function(e){if(this.$submitDetail){var t=this.compJson.css.paddingBottom;this.$submitDetail.css("bottom",t)}}},{key:"destorySubmitDetail",value:function(){this.$submitDetail.remove();var e=this.compJson.css.height;this.update$li({height:e-parseFloat(this.$submitDetail.height())}),this.autoSizeTopDown(),this.$context.find("button").css("height","100%"),this.$submitDetail=null}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=!0,o=this;$(e).click(function(){var r=n.eqxScene.formManager,a=r.check(),s=t.sceneId,c=t.id,l=t.pageId,p=t.properties,f=p.layout,y=void 0===f?"rating-l":f,b=(p.imgSrc,p.text),x=p.link,w=p.checkedLink,k=p.clickFarmer,E=p.endTime,I=new Promise(function(){});if(r.submited){I=Promise.reject({code:120505})}else{if(E&&E<Date.now()){I=Promise.reject({code:120602})}else{if(k&&!h()){I=Promise.reject({code:120504})}else{if(a.success){i&&(n.eqxScene.config.disableSubmit?I=Promise.resolve():(E&&(a.form.endTime=E),I=u(a.form,s,l,c)),i=!1)}else{if(a.pageId&&n.pageId!=a.pageId){var _=confirm(a.message+" 是否前往修改？");_&&n.eqxScene.pageScroll.goToPageById(a.pageId)}else{I=Promise.reject({msg:a.message,eleIdForError:a.elementId})}}}}}I.then(function(t){try{if(window._tracker_api_&&window._tracker_api_.report){var a={product:"ls",b_t:"point",point_need:1,e_t:"submit",scene_id:n.eqxScene.meta.id,scene_c_u:n.eqxScene.meta.userId};window._tracker_api_.report(a)}}catch(s){}var c=t.map||{};r.submited=!0,i=!0;var u=!!w,l=m;b=b?b.trim():"提交成功！";var p=o.eqxPage,f=p.$editDiv.css("transform")||"",h=f.match(/matrix.*, (.*)\)/),g=h?h[1]:0;n.compJson.properties.submitCountShow&&o.update$submitDetailText(!0);var k=n.eqxPage.flowAd;try{if(k&&k.flowAdType&&k.flowAdType.includes("pop")){var E="pcRender"==n.eqxPage.renderMode?".pc-preview .nr":"#con .nr",I=new k.flowRender.pop(E,{formSubmit:!0,animOut:"none"});I.exposure()}else{d.newModal(e,y,u,l,b,x,g,n.eqxPage,v,c)}}catch(_){d.newModal(e,y,u,l,b,x,g,n.eqxPage,v,c)}})["catch"](function(e){if(i=!0,120505===e.code||120603===e.code){g("请不要重复提交！",n.eqxPage)}else{if(120504===e.code){g("请到微信中打开使用！",n.eqxPage)}else{if(120602===e.code||120604===e.code){g("当前表单已截止提交！",n.eqxPage)}else{if(e.msg){var t=e.eleIdForError;if(t){var o=n.eqxPage.getEqxCompById(t);o.showFormErrMsg(e.msg),n.eqxPage.moveByCompId(t)}else{g(e.msg,n.eqxPage)}}else{"file:"===window.location.protocol?g("请发布后再提交！",n.eqxPage):g("表单提交失败！",n.eqxPage)}}}}})})}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.styleImgSrc||(this.$context.find("button")[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.styleImgSrc||(this.$context[0].innerText="")}},{key:"update$boxDiv",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$boxDiv",this).call(this,e),this.$boxDiv.css({backgroundColor:"transparent"}),this.$context.find("button").css({backgroundColor:this.compJson.css.backgroundColor,color:this.compJson.css.color})}},{key:"updatePadding",value:function(e){var t=(this.compJson.properties,parseInt(this.compJson.css.paddingLeft)),n=parseInt(this.compJson.css.paddingRight),o=(parseInt(this.compJson.css.paddingTop),parseInt(this.compJson.css.paddingBottom),parseInt(this.compJson.css.width)),r=parseInt(this.compJson.css.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){"paddingLeft"==e.padKey?(t=e.padValue,n=o-t-280):(n=e.padValue,t=o-n-280),this.update$li({paddingLeft:t,paddingRight:n})}else{var a=parseInt(this.compJson.css[e.padKey]);r+=parseInt(e.padValue)-a,this.update$li(i({height:r},e.padKey,parseInt(e.padValue))),"paddingBottom"==e.padKey&&this.$submitDetail&&this.update$submitDetailCss()}this.autoSizeTopDown()}},{key:"findCurrentRule",value:function(){return this.eqxPage.formRulesManager.getRules(this.id)}},{key:"findAffectedRules",value:function(){return this.eqxPage.formRulesManager.getAffectedRules(this.id)}}]),t}(f);e.exports=y},function(e,t,n){function i(e,t,n,i){var o=window.scene||{},t=o.id,r=o.code,a=s.LONG_PAGE_PREVIEW+"lpdata/add/?id="+t;return r&&(a=a+"?code="+r),c({type:"POST",url:a,data:e})}function o(e,t,n){return c({type:"POST",url:s.SERVER_1+"eqs/promotion/order/data/r/"+e+"/"+n,data:t})}function r(e,t){return c({type:"GET",url:s.SERVER_1+"eqs/s/valid/send-validcode",data:{phone:e,userId:t}})}function a(e,t,n){return c({type:"GET",url:s.LONG_PAGE_PREVIEW+("/lp/r/times/"+t+"/"+e+"?code="+n)})}var s=n(21),c=n(20).ajax;e.exports={$postForm:i,$submitXiuForm:o,$getSmsCode:r,$getSubmitCount:a}},function(e,t,n){e.exports="/assets/v1/images/ok-941be2.svg"},function(e,t,n){e.exports=n.p+"images/submit-modal-5b454b.png"},function(e,t,n){e.exports="https://img.alicdn.com/imgextra/i4/483638748/O1CN01uAy4XC2EUdI4gijSG_!!483638748.png"},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(323),l=n(325),p=n(41),d=n(21),f=n(326),h=n(287);n(327);var g=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),i.eqxScene.formManager.add(i),i}return a(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=(o.title,o.formRelevant),a=void 0===r?{}:r,s=o.required,c=this.eqxScene.config.mode,l=a.title.content,p=a.des.content,d=this.compJson.properties.uploadNote||"";return this.pageId=n,this.uploadImage={},this.name="eq[f_"+t+"]",this.btnTitle=this.getBtnTitle(),this.uploadTitle=l,this.$context=u.$compDiv(t,i,l,c,p,d,this.btnTitle),this.$button=this.$context.find("button"),this.required=s,this.$context}},{key:"eleShow",value:function(){var e=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var n=this.eqxScene.config.mode;this.$li,this.eqxPage;if("view"===n&&!this.uploader){var i={tokenType:"image",maxFileSize:"10mb",uploadButton:this.$button.attr("id"),filesAdded:function(t,n){Object.keys(f.errorExtension).indexOf(i.tokenType)!=-1&&f.errorExtension[i.tokenType].indexOf(n.type)==-1&&(e.showFormErrMsg("文件类型不正确，请重新上传"),t.removeFile(n),t.stop())},beforeUpload:function(t,n){if(n.size){var i=n.size/1024/1024;i>10?(e.showFormErrMsg("文件大小不得超过10M，请重新上传"),t.stop()):e.updateTitle("上传中...")}else{e.showFormErrMsg("当前文件为空，无法上传"),t.removeFile(n),t.stop()}},finishUpload:function(t,n,i){e.updateTitle(n.name),e.uploadImage.file=n,e.uploadImage.info=i=JSON.parse(i),e.variablesValues={key:i.key,w:i.w,h:i.h},(e.variables||[]).forEach(function(e){"4"===e.compJson.type.toString()&&e.updateImageSrc(i.key,i.w,i.h)})},Error:function(t,n,i){Object.keys(f.errorDesc).indexOf(n.message)!=-1?l.modal(f.errorDesc[n.message],e.$li,e.eqxPage):e.updateTitle("上传失败！")}};if("video"==this.compJson.properties.uploadType){var o={tokenType:"video"};i=Object.assign({},i,o)}if("file"==this.compJson.properties.uploadType){var r={tokenType:"application"};i=Object.assign({},i,r)}this.initQiniuUpload(i)}}},{key:"initQiniuUpload",value:function(e){var t=this;p.$initQiniuUpload(e).then(function(e){t.uploader=e})}},{key:"check",value:function(){var e="";"video"==this.compJson.properties.uploadType?(e={upKey:this.uploadImage.info&&d.QINIUVIDEO+this.uploadImage.info.key,upName:this.uploadImage.info&&this.uploadImage.info.name},e=JSON.stringify(e)):"file"==this.compJson.properties.uploadType?(e={upKey:this.uploadImage.info&&d.QINIUFILE+this.uploadImage.info.key,upName:this.uploadImage.info&&this.uploadImage.info.name},e=JSON.stringify(e)):e=this.uploadImage.info&&d.FILE+this.uploadImage.info.key,this.ruleHide&&(e={upKey:this.uploadImage.info&&d.QINIUVIDEO+this.uploadImage.info.key,upName:"（跳过）"},e=JSON.stringify(e),"image"==this.compJson.properties.uploadType&&(e="（跳过）"));var t={success:!0,pageId:this.pageId,key:this.name,value:e,elementId:this.id};return !this.required||e&&"{}"!=e||(t.success=!1,t.message="该项为必填项"),t}},{key:"getBtnTitle",value:function(){var e=this.compJson.properties.uploadType||"image",t={image:"上传图片",video:"上传视频",file:"上传文档"},n=t[e];return n}},{key:"updateTitle",value:function(e){this.$context.find("button").text(e)}},{key:"updateUploadNote",value:function(e){this.$boxContentDiv.find(".form-note-box").text(e),this.updateFormHeight()}},{key:"updateFormHeight",value:function(){var e=this.compJson;e.properties.formRelevant=e.properties.formRelevant?e.properties.formRelevant:{title:{content:"",css:{}},des:{content:"",css:{}}};var t=e.properties.formRelevant,n=t.title,i=void 0===n?{}:n,o=t.des,r=void 0===o?{}:o,a=i.css||{},s=r.css||{},c=this.compJson.properties.uploadNote,u=parseInt(this.$formComp.css("height")),l=this.$boxContentDiv.find(".form-note-box"),p=parseInt(this.compJson.css.paddingTop)+parseInt(this.compJson.css.paddingBottom),d=l.innerHeight();c?(d=38,l.css("display","block")):(d=0,l.css("display","none"));var f=parseInt(a.height||0)+parseInt(s.height||0)+parseInt(d||0);this.update$li({height:parseInt(f+u+p)}),this.$formComp.css("height","calc(100% - "+f+"px)"),this.autoSizeTopDown()}},{key:"updatePadding",value:function(e){var t=parseInt(this.compJson.css.paddingLeft),n=parseInt(this.compJson.css.paddingRight),o=parseInt(this.compJson.css.width),r=parseInt(this.compJson.css.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){"paddingLeft"==e.padKey?(t=e.padValue,n=o-t-280):(n=e.padValue,t=o-n-280),this.update$li({paddingLeft:t,paddingRight:n})}else{var a=parseInt(this.compJson.css[e.padKey]);r+=parseInt(e.padValue)-a,this.update$li(i({height:r},e.padKey,parseInt(e.padValue)))}this.autoSizeTopDown()}},{key:"getValue",value:function(){return"this.id"}}]),t}(h);e.exports=g},function(e,t,n){function i(e,t,n,i,a,s,c){if("view"===i){return $(o).find("button").attr("id",e+"-upload-image"),$(r(o,{id:e,type:t,title:n,uploadDes:a,note:s,btnTitle:c}))}var u=$(r(o,{id:e,type:t,title:n,uploadDes:a,note:s,btnTitle:c}));return u.find("button").attr("id","{id}-upload-image"),u}var o=n(324),r=n(44).parse;e.exports={$compDiv:i}},function(e,t){e.exports='<div class="form-title-box"><div>#{title}</div></div><div class="form-des-box"><div>#{uploadDes}</div></div><div id="#{id}" ctype="#{type}" class="element form-comp-box" style="width: 100%;height:100%;"><div style="position: relative;width: 100%;height:100%;"><button id="#{id}-upload-image" class="upload-comp-btn" style="width: 100%;display: block;\n                                    height: 100%;\n                                    border: none;\n                                    padding: 0 8px;\n                                    background-color: transparent;\n                                    text-align: center;\n                                    overflow: hidden;\n                                    white-space: nowrap;\n                                    text-overflow: ellipsis;\n                                    font-size: 14px;\n                                    line-height: 1.6;\n                                    pointer-events: none;"><span class="btnTitle upload-add">#{btnTitle}</span></button></div></div><div class="form-note-box" style="height: 38px;font-size: 12px;padding-top: 5px;line-height: 1.4">#{note}</div>'},function(e,t,n){function i(e,t,n){var i=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>');n.$section.parent().prepend(i),(!o()||n&&"pc"==n.previewMode)&&$(".feedback-form").css({position:"fixed"}),i.find(".feedback-close").on("click",function(){i.animate({opacity:0},{duration:300,complete:function(e){return i.remove()}})})}var o=n(24).isPc;e.exports={modal:i}},function(e,t){var n={"File size error.":"文件大小不得超过10M，请重新上传","File extension error.":"文件类型不正确，请重新上传"},i={image:"image/gif,gif,image/jpeg,jpg jpeg jpe,image/png,png,",video:"video/mp4,mp4,video/quicktime,qt mov,video/mpeg,mpeg mpg mpe m2v",application:"application/msword,doc dot,application/pdf,pdf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,text/plain,asc txt text diff log,"};e.exports={errorDesc:n,errorExtension:i}},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=(n(78),n(329)),u=n(44).parse,l=n(179).isMobileNumber,p=n(96).popUpModal,d=n(318).$getSmsCode,f=n(288);n(330);var h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{color:!1,lineHeight:!1,paddingTop:!1},compStyle:{backgroundColor:!1},compFont:{self:!0,fontColor:!0},advanceStyle:{required:!0}},trigger:!1,sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.ruleHide?"（跳过）":this.$context.find(".telephone").val(),t=this.ruleHide?"（跳过）":this.$context.find(".smsInput").val(),n={success:!0,pageId:this.pageId,key:this.name,type:this.type,value:{phoneValue:e,smsValue:t},elementId:this.id};return this.ruleHide&&(n.ruleHide=!0),this.required&&!this.ruleHide&&(e?l(e)?t||(n.success=!1,n.message="请输入验证码"):(n.success=!1,n.message="手机号格式不正确"):(n.success=!1,n.message="请输入手机号")),n}},{key:"create$li",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$li",this).call(this);return this.$formComp.css({border:"none",backgroundColor:"transparent"}),e}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.title,r=e.properties,a=r.required,s=r.ownerCss,l=r.formRelevant,p=void 0===l?{}:l,d=p.title.content,f=p.des.content,h=$(u(c,{id:t,type:i,title:o,formTitle:d,formDes:f}));return this.$context=h,this.updateInputCss(s,!0),this.required=a,this.title=o,this.type=i,this.name="eq[f_"+t+"]",this.pageId=n,h}},{key:"updateInputCss",value:function(e,t){if(e){this.$context.find(".telephone").css(e),this.$context.find(".smsInput").css(e);var n={};if(["borderBottomRightRadius","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","borderRadius"].forEach(function(t){e[t]&&(n[t]=e[t])}),this.$context.find(".smsButton").css(n),!t){var i=this.compJson.properties.ownerCss;Object.assign(i,e)}}}},{key:"updateInputBorderColor",value:function(e){this.$context.find(".telephone").css({borderColor:e}),this.$context.find(".smsInput").css({borderColor:e})}},{key:"bindAfterRenderEvent",value:function(){var e=this,t=!0;return this.$context.find(".smsButton").bind("touchstart mousedown",function(n){if(t){var i=e.$context.find(".telephone").val();i?i&&!l(i)?e.showFormErrMsg("电话格式不对"):(t=!1,d(i,e.eqxScene.meta.userId||e.eqxScene.meta.createUser).then(function(){var n=180,i=setInterval(function(){e.$context.find(".smsButton").val("重新发送"+n+"秒"),0==n&&(t=!0,e.$context.find(".smsButton").val("获取验证码"),clearInterval(i)),n-=1},1000)})["catch"](function(n){!n.code||150005!=n.code&&150001!=n.code?p("发送失败，请重新发送",e.eqxPage):p(n.msg,e.eqxPage),t=!0})):e.showFormErrMsg("请输入手机号")}}),this.$context.find("input").not(".smsButton").on("focus",function(){e.hideFormErrMsg()}).on("blur",function(){var t=e.check();t.success||e.showFormErrMsg(t.message)}),!0}},{key:"updateFormCompCss",value:function(e){e&&(this.updateInputCss(e),this.autoSizeTopDown(),this.updateFormHeight())}},{key:"getValue",value:function(){var e=this.$context.find(".telephone").val(),t=this.$context.find(".smsInput").val();return e&&l(e)&&t?$(this.$formComp.find(".smsInput")).val():""}}]),t}(f);e.exports=h},function(e,t){e.exports='<div class="form-title-box"><div>#{formTitle}</div></div><div class="form-des-box"><div>#{formDes}</div></div><div class="element editable-text comp_sms form-comp-box" style="width: 100%;height: 100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><input class="telephone" type="tel" placeholder="请输入手机号"/><div style="width: 100%;height: 8px;"></div><input class="smsInput" type="number" placeholder="验证码"/> <input class="smsButton" type="button" value="获取验证码"/></div>'},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function v(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(24).isWeixin,u=n(78),l=n(332),p=n(333),d=n(44).parse,f=n(334),h=n(93).getWxJSSDK,g=n(96).popUpModal,m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=h()),r.soundKey=e.id.toString().substring(3),l[r.soundKey]=l[r.soundKey]||{},l[r.soundKey].wxpId=e.id,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=i.width,r=i.height,a=i.lineHeight;return $(d(p,{id:t,type:n})).css({width:o,height:r,lineHeight:a,display:"inline-block"})}},{key:"bindAfterRenderEvent",value:function(e){var t=this;return $(e).on("mousedown touchstart",function(e){window.event.stopPropagation(),e.preventDefault(),c()?t.soundPlay():(g("请在微信中按住我"),t.playDefaultSound())}),!0}},{key:"updateSize",value:function(e,n){this.$context.css({width:n.width,height:n.height,lineHeight:n.height+"px"}),this.compJson.css.lineHeight=n.height+"px",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"soundPlay",value:function(){var e=this,t=this;if(l[this.soundKey].soundId){var n=l[this.soundKey].soundId;this.eqxScene.soundManager.onPlay({type:4}),this.wxJssdk.then(function(){wx.playVoice({localId:n})})}else{this.compJson.serverId?this.wxJssdk.then(function(){wx.downloadVoice({serverId:e.compJson.serverId,success:function(n){var i=n.localId;e.eqxScene.soundManager.onPlay({type:4}),wx.playVoice({localId:i}),l[t.soundKey].soundId=i},error:function(){e.playDefaultSound()}})}):this.playDefaultSound()}this.wxJssdk.then(function(){wx.onVoicePlayEnd({success:function(){e.eqxScene.soundManager.onEnd({type:4})}})})}},{key:"playDefaultSound",value:function(){var e=this;this.defaultSound||(this.defaultSound=document.createElement("audio"),this.defaultSound.src=n(334)),this.defaultSound.paused?(this.eqxScene.soundManager.onPlay({type:4}),this.defaultSound.play(),$(this.defaultSound).bind("ended",function(){e.eqxScene.soundManager.onEnd({type:4})})):(this.eqxScene.soundManager.onEnd({type:4}),this.defaultSound.pause())}}],[{key:"getDefaultSound",value:function(){return f}}]),t}(u);e.exports=m},function(e,t){e.exports={}},function(e,t){e.exports='<a id="#{id}" class="element comp_wechat_play" ctype="#{type}"><span style="font-size:16px;" class="eqf-volume-high"></span></a>'},function(e,t,n){e.exports=n.p+"images/wexin_sound-d41d8c.mp3"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(336);var c=n(24).isWeixin,u=n(93).saveWxCompData,l=n(93).generateUserKey,p=n(78),d=n(332),f=n(93).getWxJSSDK,h=n(96).popUpModal,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=f()),r.soundKey=e.id.toString().substring(3),d[r.soundKey]=d[r.soundKey]||{},d[r.soundKey].wxrId=e.id,$.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=document.createElement("a");return t.innerHTML=e.properties.title,t.id=e.id,t.setAttribute("class","element comp_wechat_hear"),t.setAttribute("ctype",e.type),t.setAttribute("data-event","1120612"),$(t).css({width:e.css.width,height:e.css.height,display:"inline-block"}),$(t)}},{key:"bindAfterRenderEvent",value:function(e){var t=this,n=void 0;return c()?$(e).on("touchstart",function(e){window.event.stopPropagation(),e.preventDefault(),n=setTimeout(function(){t.soundRecord()},100)}).on("touchend",function(){clearTimeout(n),n=null,t.soundStopRecord()}):$(e).on("mousedown",function(e){h("请在微信中按住我！")}),!0}},{key:"updateSize",value:function(e,n){this.$context.css({width:n.width,height:n.height,lineHeight:n.height+"px"}),this.compJson.css.lineHeight=n.height+"px",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"soundRecord",value:function(){var e=this;this._recordAllowed=!0,this.wxJssdk.then(function(){e.eqxScene.soundManager.stopAll(),wx.startRecord({success:function(){e._recordAllowed?(e.second=0,e.openPlayState()):(wx.stopRecord(),e._recordAllowed=!1)}}),e.$context.addClass("recording").text("松开 结束")})}},{key:"openPlayState",value:function(){var e=this,t="<div class='voice-panel'><span class='icon eqf-volume-high'></span><div class='voice-tip'>松开手指 停止录音</div></div>";this.voicePanel=$(t).prependTo(this.$li.parent()),this.calculateTime=setInterval(function(){e.second++,e.second>=50&&$(e.voicePanel).text(60-e.second),60===e.second&&e.soundStopRecord()},1000)}},{key:"soundStopRecord",value:function(){var e=this;this._recordAllowed&&(this._recordAllowed=!1,clearInterval(this.calculateTime),this.calculateTime=null,this.$context.removeClass("recording").text("按住 说话"),this.eqxScene.soundManager.restoreAll(),$(this.voicePanel).remove(),wx.stopRecord({success:function(t){e.second=0,e.wechatUploadVoice(t.localId)}}))}},{key:"wechatUploadVoice",value:function(e){var t=this;d[this.soundKey].soundId=e,wx.uploadVoice({localId:e,isShowProgressTips:1,success:function(e){var n=e.serverId;l(),u(d[t.soundKey].wxpId,n)}})}}]),t}(p);e.exports=g},function(e,t){},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(262),l=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{self:!0,compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},trigger:{self:!1},sound:!1,link:!1}),i}return a(t,e),s(t,[{key:"create$context",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this),n='<div class="textDiv" style="width: 100%;"></div>';return e.wrapInner(n)}},{key:"updateContent",value:function(e){if(this.compJson.content=e,this.$context.children().text(e),e){var t=this.$context.children().height()+0.3*parseInt(this.compJson.css.fontSize)*2;this.update$li({height:t})}}},{key:"autoAdjustSize",value:function(){var e=this.$context.children().height()+0.3*parseInt(this.compJson.css.fontSize)*2;this.update$li({height:e})}},{key:"updatePadding",value:function(e){var t=this.compJson.css,n=parseInt(t.paddingTop),o=parseInt(t.paddingBottom),r=parseInt(t.height);if(this.update$li(i({},e.padKey,parseInt(e.padValue))),"paddingLeft"==e.padKey||"paddingRight"==e.padKey){var a=0.3*parseInt(this.compJson.css.fontSize)*2,s=this.$context.find(".textDiv").height()+a;r=s+n+o}else{var c=parseInt(t[e.padKey]);r=r+parseInt(e.padValue)-c}this.update$li({height:r}),this.autoSizeTopDown()}}]),t}(u);e.exports=l},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(135),u=n(136),l=n(139).isSupportStyle,p=n(339),d=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{style:{self:!0},trigger:{self:!1}}),i}return a(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.scratch,r=i.imgStyle,a=i.maskSrc,s=i.filter;s=void 0===s?{}:s;var c=s.type;e.properties.isReplace=e.properties.isReplace||!1;var p=this._getContextImgSrc();if(Number.isInteger(c)&&c>0){var d=$(u.filterImg({id:t,type:n,src:p,filterType:c}))}else{d=$(u.img({id:t,type:n,src:p}))}return l("WebkitMaskBoxImage")&&a&&this.$contentsDiv.addClass("img_mask").css({"-webkit-mask-box-image":"url("+a+")"}),r&&d.css(r),o&&this.addScratch(),this.$boxContentDiv.css("overflow","hidden"),d}},{key:"updatePadding",value:function(e){var t=parseInt(this.compJson.css.paddingLeft),n=parseInt(this.compJson.css.paddingRight),o=parseInt(this.compJson.css.width),r=parseInt(this.compJson.css.height);if("paddingLeft"==e.padKey||"paddingRight"==e.padKey){"paddingLeft"==e.padKey?(t=e.padValue,n=o-t-120):(n=e.padValue,t=o-n-120),this.update$li({paddingLeft:t,paddingRight:n})}else{var a=parseInt(this.compJson.css[e.padKey]);r+=parseInt(e.padValue)-a,this.update$li(i({height:r},e.padKey,parseInt(e.padValue)))}this.autoSizeTopDown()}}],[{key:"getDefaultImg",value:function(){return p}}]),t}(c);e.exports=d},function(e,t,n){e.exports=n.p+"images/wx_default-454286.png"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){v.push(e),y||s()}function s(){if(y=!0,v.length>0){var e=v.shift();e().then(function(){s()})}else{y=!1}}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},l=n(24).isWeixin,p=n(135),d=n(93).saveWxCompData,f=n(93).generateUserKey,h=n(341),g=n(93).getWxJSSDK,m=n(96).popUpModal,v=[],y=!1,b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!0},link:!1,sound:!1,trigger:{self:!1}}),"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=g()),r}return r(t,e),c(t,[{key:"create$context",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this),n=this.compJson.serverId,i=this;return e[0].setAttribute("data-event","1120611"),n&&l()&&(e.css("display","none"),a(function(){return new Promise(function(e){i.wxJssdk.then(function(){wx.downloadImage({serverId:n,success:function(t){i.responsiveImage(t.localId),e()}})})})})),e}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;return l()?$(e).click(function(){n.uploadImage()}):$(e).click(function(){m("请在微信中点击我")}),!0}},{key:"uploadImage",value:function(){var e=this;this.wxJssdk.then(function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var n=t.localIds;setTimeout(function(){wx.uploadImage({localId:n.toString(),isShowProgressTips:1,success:function(t){e.responsiveImage(n.toString());var i=t.serverId;f(),d(e.compJson.id,i)}})},100)}})})}},{key:"responsiveImage",value:function(e){var t=this;window.__wxjs_is_wkwebview?this.wxJssdk.then(function(){wx.getLocalImgData({localId:e,fail:function(e){},success:function(e){var n=e.localData;t._responsiveImage(n)}})}):this._responsiveImage(e)}},{key:"_responsiveImage",value:function(e){var t=new Image;t.src=e;var n=this;t.onload=function(){var i,o,r=window.parseInt(n.compJson.css.width,10),a=window.parseInt(n.compJson.css.height,10);t.width/t.height>=r/a?(i=r,o=t.height*(r/t.width)):(o=a,i=t.width*(a/t.height)),n.$context.css({display:"block",width:i+"px",height:o+"px","margin-top":(window.parseInt(n.$li.height(),10)-o)/2+"px","margin-left":(window.parseInt(n.$li.width(),10)-i)/2+"px"}).attr("src",e)}}}],[{key:"getDefaultImg",value:function(){return h}}]),t}(p);e.exports=b},function(e,t,n){e.exports=n.p+"images/wechat_image-f8aa1a.png"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(343);var c=n(24).isWeixin,u=n(78),l=n(344).textVoteTpl,p=n(345).alertTpl,d=n(347).$isVoted,f=n(347).$postVote,h=n(55).randomId,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!0},commonStyle:{size:!1},advanceStyle:{}},trigger:{self:!1},sound:!1,link:!1,flexLine:"e,w,r"}),r.ids=[],r}return r(t,e),a(t,[{key:"getMinWidth",value:function(){return 300}},{key:"updateSize",value:function(e,n){var i=this.getMinWidth();n.width&&n.width<e.width&&(!n.left||n.left===e.left)&&n.width<i&&this.$li.css({width:i}),n.left&&n.left>e.left&&n.width&&n.width<i&&this.$li.css({left:e.left,width:i});var o=this.$context.height();o!=n.height&&this.$li.height(o),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"update$li",value:function(e){var n=this.compJson.css,i=this.getMinWidth();e.width&&e.width<n.width&&(!e.left||e.left===n.left)&&e.width<i&&(e.width=i),e.left&&e.left>n.left&&e.width&&e.width<i&&(delete e.left,delete e.width),e.height&&(e.height=this.$context.height()),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$li",this).call(this,e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.title,r=void 0===o?"请投票":o,a=i.selectType,s=i.buttonColor,c=void 0===s?"#08A1EF":s,u=i.children,d=void 0===u?[]:u;a="single"==a?"单选":"多选";var f=l({id:t,type:n}),h=$(f);if(this.$title=$('<div class="vote-view-title">'+r+"（"+a+"）</div>"),h.append(this.$title),d.length){this.$options=$('<ul class="vote-view-options"></ul>'),this.childrenOption=d.map(function(e){var t=e.id,n=e.label;return $('<li class="vote-view-option" id="'+t+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+n+"</div></li>")}),this.$submit=$('<div class="vote-view-button">投票</div>'),this.$options.append(this.childrenOption),h.append(this.$options),h.append(this.$submit);var g=p();this.$tpl=$(g).appendTo(h),this.updateButtonColor(c)}return h}},{key:"updateButtonColor",value:function(e){this.$submit.css({backgroundColor:e})}},{key:"updateTitle",value:function(e,t){t="single"==t?"单选":"多选",this.$title.text(e+"（"+t+"）")}},{key:"updateOptions",value:function(e){this.$options.find("#"+e.id+" .vote-view-text").text(e.label)}},{key:"deleteOption",value:function(e){this.compJson.properties.children.splice(e,1),this.childrenOption.splice(e,1)[0].remove(),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"addOption",value:function(e){var t={id:h(),label:"选项"+(this.compJson.properties.children.length+1)};this.compJson.properties.children.splice(e+1,0,t);var n=$('<li class="vote-view-option" id="'+t.id+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+t.label+"</div></li>");this.childrenOption.splice(e+1,0,n),$(this.$options.children()[e]).after(n),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;c()?this.isVoted().then(function(){n.$options.children().on("click",function(e){var i=$(e.currentTarget).find(".eqf-yes");i.is(":hidden")?"single"==t.properties.selectType&&1==n.ids.length?(n.$options.find(".eqf-yes").hide(),n.ids[0]=e.currentTarget.id,i.show()):"multi"==t.properties.selectType&&n.ids.length==t.properties.selectCount?n.alertTpl("最多选择"+t.properties.selectCount+"项"):(i.show(),n.ids.push(e.currentTarget.id)):(i.hide(),n.ids.splice(n.ids.indexOf(e.currentTarget.id),1))}),n.$submit.on("click",function(){var e=t.sceneId,i=t.pageId;n.ids.length?f(e,t.id,{pageId:i,data:JSON.stringify(n.ids)}).then(function(e){e.success&&n.alertTpl("投票成功，谢谢参与！").then(function(){n.showVoted(e.map),n.$submit.off(),n.$options.children().off()})}):n.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票")}},{key:"alertTpl",value:function(e){var t=this;return new Promise(function(n,i){t.$tpl.find("span").text(e),t.$tpl.css({opacity:1,zIndex:2}),window.setTimeout(function(){t.$tpl.css({opacity:0,zIndex:-2}),n()},2000)})}},{key:"showVoted",value:function(e){var t=this;this.$options.find(".eqf-yes").hide();var n=[],i=0;this.compJson.properties.children.forEach(function(o){var r=o.id;n.push({id:r,count:e[r]||0}),i+=e[r]||0,e[r]&&t.ids.push(r)}),n.forEach(function(e){$('<em style="float:right">'+e.count+"  ("+(e.count/i*100).toFixed(2)+" % 100)</em>").prependTo(t.$options.find("#"+e.id))}),this.$li.height(""),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("你已投票")}},{key:"isVoted",value:function(){var e=this;return new Promise(function(t,n){var i=e.compJson.properties.endTime;if(i&&new Date(i)<Date.now()){e.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),n()}else{if(c()){var o=e.compJson,r=o.sceneId,a=o.pageId,s=o.id;d(s,{sceneId:r,pageId:a}).then(function(i){i.obj?(e.showVoted(i.map),n()):t()})}else{n()}}})}}]),t}(u);e.exports=g},function(e,t){},function(e,t){function n(e){var t=e.id,n=e.type;e.title,e.selectType;return'<div  id="'+t+'" ctype="'+n+'" class="vote-view">\n    </div>'}e.exports={textVoteTpl:n}},function(e,t,n){function i(){return'<div class="vote-alert">\n              <span></span>\n            </div>'}n(346),e.exports={alertTpl:i}},function(e,t){},function(e,t,n){function i(e,t){return a({type:"POST",url:r.SERVER_1+"eqs/vote/verify/"+e,data:t})}function o(e,t,n){return a({type:"POST",url:r.SERVER_1+"eqs/vote/"+e+"/"+t,data:n})}var r=n(21),a=n(20).ajax;e.exports={$isVoted:i,$postVote:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function v(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(349);var c=n(21),u=n(22).$loadSliders,l=n(78),p=n(24).isWeixin,d=n(345).alertTpl,f=n(347).$isVoted,h=n(347).$postVote,g=n(350),m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.intervalObj={},r.descIds=[],$.extend(!0,r.$ability,{style:{compStyle:{self:!0},commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r"}),r}return r(t,e),a(t,[{key:"updateSize",value:function(e,n){this.$slider.width(n.width),this.plugin.update(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"create$context",value:function(){var e=this;this.descArr=[],this.imgArr=[],this.loadPlugin=Promise.resolve();var n=this.compJson,i=n.id,o=n.type,r=n.css,a=r.width,u=(r.height,n.properties);u=void 0===u?{}:u;var l=u.title,p=void 0===l?"请投票":l,f=u.selectType,h=u.buttonColor,m=void 0===h?"#08A1EF":h,v=u.children,y=void 0===v?[]:v,b=u.bgColor;f="single"==f?"单选":"多选";var x=$('<div id="'+i+'" ctype="'+o+'" class="vote-img"></div>').css({"background-color":b,height:442});if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,{height:""},{height:442}),y.length){y.forEach(function(t){var n=t.src,i=t.desc,o=t.id,r=n?""+(c.FILE+n):g;e.imgArr.push($('<div style="background-image:url('+r+'); width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: 50%"></div>')),e.descArr.push($('<li id="'+o+'">'+i+"</li>"))}),this.$title=$('<div class="vote-img-prev-title"><h1>'+p+'</h1><span class="vote-img-sing-double">('+f+")</span></div>"),x.append(this.$title),this.$slider=$('<div class="slides" style="width: '+a+'px;"></div>');var w=$('<ul class="vote-img-desc"></ul>');w.append(this.descArr),this.$slider.append(this.imgArr),this.loadPlugin=this.initSlider(w),x.append(this.$slider),this.$submit=$('<a class="btn-main">提交</a>'),x.append(this.$submit);var k=d();this.$tpl=$(k).appendTo(x),this.updateButtonColor(m)}return this.$context=x,x}},{key:"updateButtonColor",value:function(e){this.$submit.css({backgroundColor:e})}},{key:"updateOptions",value:function(e,t){this.plugin["goto"](t+1),this.descArr[t].text(e.desc),this.imgArr[t].css({backgroundImage:"url("+c.FILE+e.src+")"})}},{key:"updateTitle",value:function(e,t){t="single"==t?"单选":"多选",this.$title.find("h1").text(e),this.$title.find(".vote-img-sing-double").text("("+t+")")}},{key:"initSlider",value:function(e){var t=this;return this.$em=$('<span class="eqf-yes-l"></span>'),u().then(function(){return t.$slider.slidesjs({width:300,height:329,navigation:{active:!1},callback:{loaded:function(){e.children().css({display:"none"}),t.descArr[0].css({display:"inline-block"}),t.$slider.append(e),t.$slider.find(".slidesjs-container").append(t.$em)},complete:function(n){e.children().css({display:"none"}),t.descArr[n-1].css({display:"inline-block"});var i=t.descArr[n-1].attr("id");t.descIds.indexOf(i)==-1?t.$em.removeClass("active"):t.$em.addClass("active")}}}),t.plugin=t.$slider.data("plugin_slidesjs"),t.plugin})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;return p()?this.loadPlugin.then(function(){return n.isVoted()}).then(function(){n.$em.on("click",function(e){e.preventDefault(),e.stopPropagation();var i=n.descArr[n.plugin.data.current].attr("id");n.descIds.indexOf(i)==-1?"single"==t.properties.selectType&&1==n.descIds.length?(n.descIds[0]=i,n.$em.addClass("active")):"multi"==t.properties.selectType&&n.descIds.length==t.properties.selectCount?n.alertTpl("最多选择"+t.properties.selectCount+"项"):(n.descIds.push(i),n.$em.addClass("active")):(n.descIds.splice(n.descIds.indexOf(i),1),n.$em.removeClass("active"))}),n.$submit.on("click",function(e){e.preventDefault(),e.stopPropagation();var i=t.sceneId,o=t.pageId;n.descIds.length?h(i,t.id,{pageId:o,data:JSON.stringify(n.descIds)}).then(function(e){e.success&&n.alertTpl("投票成功，谢谢参与！").then(function(){n.showVoted(e.map),n.$em.off(),n.$submit.off()})}):n.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票"),!1}},{key:"showVoted",value:function(e){var t=this;this.descIds=[],this.$em.remove(),this.plugin.stop(),this.$slider.remove();var n={},i=[],o=0;this.compJson.properties.children.forEach(function(r){var a=r.id,s=r.desc;n[a]=s,i.push({id:a,count:e[a]||0}),o+=e[a]||0,e[a]&&t.descIds.push(a)});var r=$('<ul class="vote-img-ul"></ul>');i.forEach(function(e){r.append($("<li id = '"+e.id+'\' class="vote-img-li"><em style="float: right">'+e.count+" ("+(e.count/o*100).toFixed(2)+" %)</em> "+n[e.id]+"</li>"))}),r.insertBefore(this.$submit),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("你已投票")}},{key:"alertTpl",value:function(e){var t=this;return new Promise(function(n,i){t.$tpl.find("span").text(e),t.$tpl.css({opacity:1,zIndex:1001}),window.setTimeout(function(){t.$tpl.css({opacity:0,zIndex:-2}),n()},2000)})}},{key:"isVoted",value:function(){var e=this;return new Promise(function(t,n){if(e.compJson.properties.endTime&&new Date(e.compJson.properties.endTime)<new Date&&(e.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),n()),p()){var i=e.compJson,o=i.sceneId,r=i.pageId,a=i.id;f(a,{sceneId:o,pageId:r}).then(function(i){i.obj?(e.showVoted(i.map),n()):t()})}else{n()}})}},{key:"startPlay",value:function(){var e=this;this.playInterval=setInterval(function(){e.plugin&&e.plugin.next()},5000)}},{key:"stopPlay",value:function(){this.playInterval&&(clearInterval(this.playInterval),this.playInterval=null)}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.stopPlay()}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.startPlay()}}]),t}(l);e.exports=m},function(e,t){},function(e,t,n){e.exports=n.p+"images/defaultImg-f9d1d1.svg"},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(352);var c=n(78),u=n(41),l=n(23).addUrlParam,p=n(24).isWeixin,d=n(24).isPc,f=n(93).getWxJSSDK,h=n(64).COMP_KEY,g=n(93).addCompKey,m="ontouchstart" in window,v=m?"touchstart":"mousedown",y=m?"touchmove":"mousemove",b=m?"touchend":"mouseup",x={},w=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.wxJssdk=f(),$.extend(!0,r.$ability,{style:{compFont:{self:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"updateSize",value:function(e,n){this.setCanvasSize(n.width,n.height);var i=this.compJson.properties.imgSrc;i&&(this.clearCanvas(),this.drawingImage(i)),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"create$context",value:function(){var e=$('<div style="position: relative; height: 100%;overflow: hidden;"></div>');this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");var t=this.compJson,n=t.css,i=n.width,o=n.height,r=t.properties,a=r.imgSrc,s=r.boardColor,c=r.qiniuSrc;return this.setCanvasSize(i,o),this.setCanvasBgColor(s),a&&this.drawingImage(a),c&&(x[this.compJson.id]=c),this.$alert=$('<div class="board-bg" style="display: none"><span class="board-alert">正在保存...</span></div>'),this.$penBtn=$('<span class="board-pen eqf-brush"></span>'),this.$closeBtn=$('<span class="board-close eqf-delete-f" style="display: none"></span>'),e.append(this.$alert),e.append(this.$penBtn),e.append(this.$closeBtn),this.$cancelBtn=$('<a class="board-btn board-reset" style="display: none">取消</a>'),this.$endBtn=$('<a class="board-btn board-end" style="display: none">完成</a>'),e.append(this.$cancelBtn),e.append(this.$endBtn),e.append(this.canvas),e}},{key:"setCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"setCanvasBgColor",value:function(e){this.canvas.style.backgroundColor=e}},{key:"drawingImage",value:function(e,t){var n=this.compJson.css,i=n.width,o=n.height,r="";r="base64"==t?e:this.getImgSrc(e,{width:i,height:o});var a=new Image;a.setAttribute("crossOrigin","anonymouse");var s=this;a.onload=function(){var e=0,t=0,n=i,r=o;this.width/i>this.height/o?(n=this.width/(this.height/o),e=(i-n)/2):(r=this.height/(this.width/i),t=(o-r)/2),s.ctx.drawImage(a,e,t,n,r)},a.src=r}},{key:"clearCanvas",value:function(){var e=this.compJson.css,t=e.width,n=e.height;this.ctx.clearRect(0,0,t,n)}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=!1,o=!1,r=0,a=0;return this.$penBtn.on("click",function(){return !i&&(n.clearCanvas(),i=!0,n.$cancelBtn.css({display:"inline-block"}),n.$endBtn.css({display:"inline-block"}),n.$closeBtn.css({display:"inline-block"}),!m&&n.canvas.classList.add("boarding"),void 0)}),this.$cancelBtn.on("click",function(){n.clearCanvas(),i=!1,n.$cancelBtn.hide(),n.$endBtn.hide(),n.$closeBtn.hide(),!m&&n.canvas.classList.remove("boarding"),n.compJson.properties.imgSrc&&n.drawingImage(n.compJson.properties.imgSrc)}),this.$closeBtn.on("click",function(){n.clearCanvas()}),this.$endBtn.on("click",function(){i=!1,n.$cancelBtn.hide(),n.$endBtn.hide(),n.$closeBtn.hide(),!m&&n.canvas.classList.remove("boarding"),"view"==n.eqxScene.config.mode&&window==window.top&&n.saveImage()}),this.canvas.addEventListener(v,function(e){if(!i){return !1}e.preventDefault(),e.stopPropagation(),o=!0;var t=n.canvas.getBoundingClientRect();e=m?e.targetTouches[0]:e,r=m?e.pageX-t.left:e.offsetX,a=m?e.pageY-t.top:e.offsetY+20}),this.canvas.addEventListener(y,function(e){if(!i||!o){return !1}var s=n.canvas.getBoundingClientRect();e=m?e.targetTouches[0]:e;var c=m?e.pageX-s.left:e.offsetX,u=m?e.pageY-s.top:e.offsetY+20;n.ctx.beginPath(),n.ctx.moveTo(r,a),n.ctx.lineTo(c,u),n.ctx.strokeStyle=t.properties.penColor,n.ctx.lineWidth=t.properties.penSize,n.ctx.lineCap="round",n.ctx.stroke(),r=c,a=u}),this.canvas.addEventListener(b,function(e){o=!1}),this.canvas.addEventListener("mouseleave",function(e){o=!1}),!0}},{key:"saveImage",value:function(){var e=this;this.$alert.show(),u.$getUploadToken("image").then(function(t){var n=e.canvas.toDataURL("image/png");return u.$uploadBase64(t.map.token,n.substring(22))}).then(function(t){return x[e.compJson.id]=t.key,u.$saveCompInfoByCompKey(h,x)}).then(function(){var t=l("compKey",h,window.location.href);if(p()?e.wxJssdk.then(function(){g(t,h)}):window.history.replaceState({title:$("title").html(),url:t},$("title").html(),t),d()&&window.top===window){var n=$("#codeImg");n.length&&(n.empty(),n.qrcode({render:"canvas",size:200,text:t}))}e.$alert.hide()})}}]),t}(c);e.exports=w},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){function n(){p().then(function(e){e.obj?f(e.obj):d()})}if(!m()){return void e.find("a.comment-like,span.comment").on("click",function(){b("请在微信环境中使用","comment-list",t.eqxPage)})}var i=y();t.$li.find("span.comment").on("click",function(){i.nickname?h.initMsgBoardModal(t.eqxPage):n()}),e.find("a.comment-like").on("click",function(e){if(i.nickname){var o=$(e.currentTarget),r=o.hasClass("give-like")?"give":"reply",a=o.attr("index"),s=o.hasClass("active");if(s?o.removeClass("active"):o.addClass("active"),"give"==r){var c=g.giveLike({id:t.compJson.sceneId,msgId:t.comments[a].id,wxId:i.openid,like:!s})}else{c=g.getReplyLike({id:t.compJson.sceneId,msgId:t.comments[a].id,wxId:i.openid,replyId:t.comments[a].replyId,like:!s})}c.then(function(e){200==e.code&&t.updateLikeNum(o,!s)})}else{n()}})}function s(e){var t="";e.forEach(function(e,n){t+='\n            <li class="clearfix comment-'+e.id+'">\n                <div class="head-img" style="background-image: url(\''+e.wxImage+'\')"></div>\n                <div class="msg-content">\n                    <div class="visitor-box">\n                        <div>\n                            <span class="name">'+e.wxName+'</span>\n                            <div class="tag" style="display: '+(e.top?"inline-block":"none")+';">\n                                <span>置顶</span>\n                            </div>\n                            <a class="comment-like give-like '+(e.msgLike?"active":"")+'" index="'+n+'">\n                                <em class="eqf-zan-l"></em>\n                                <em class="eqf-zan-f"></em>\n                                <span>'+(e.msgLikeCount||0)+"</span>\n                            </a>\n                        </div>\n                        <p>"+e.msg+'</p>\n                    </div>\n                    <div class="author-box" style="display: '+(e.reply?"block":"none")+'">\n                        <div>\n                            <span class="name">作者</span>\n                            <a class="comment-like give-reply-like '+(e.replyLike?"active":"")+'" index="'+n+'">\n                                <em class="eqf-zan-l"></em>\n                                <em class="eqf-zan-f"></em>\n                                <span>'+(e.replyLikeCount||0)+"</span>\n                            </a>\n                        </div>\n                        <p>"+e.reply+"</p>\n                    </div>\n                </div>\n            </li>\n        "});var n='\n        <div class="message-box">\n            <div class="msg-title clearfix">\n                <span>精选留言</span>\n                <span class="comment">写留言</span>\n            </div>\n            <ul class="msg-ul">'+t+"</ul>\n        </div>\n    ";return n}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(354);var u=n(78),l=n(44).parse,p=n(94).$getUserWxInfo,d=n(93).hrefToWxAuth,f=n(93).setWeChatUser,h=n(355),g=n(358),m=n(24).isWeixin,v=n(359),y=n(93).getWeChatUser,b=n(96).popMsgModal,x=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),c(t,[{key:"create$context",value:function(){var e=this,t=this.compJson.content,n=$(l(v,{content:t}));return g.getComments(this.compJson.sceneId).then(function(t){e.comments=t.list,e.comments.length&&(n.find(".default-msg").css("display","none"),n.append(s(e.comments)),e.eqxPage.appendLogo(e.eqxPage.renderMode)),a(n,e)}),this.$context=n,this.eqxPage.messageBoard=this,n}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"updateLikeNum",value:function(e,t){var n=e.find("span"),i=parseInt(n.text());t?i++:i--,n.text(i)}},{key:"removeComment",value:function(e){var t=".comment-"+e,n=this.$context.find(t);n.length&&(n.remove(),this.eqxPage.appendLogo(this.eqxPage.renderMode))}},{key:"calMessageHeight",value:function(){return this.$context.height()}}]),t}(u);e.exports=x},function(e,t){},function(e,t,n){function i(e){e.$section.parent().prepend(a);var t=e.$section.parent().find(".msg-board-modal");s()&&e&&("pc"!=e.previewMode?t.addClass("wxViewInPc"):$(".preview-outer-wraper").css("z-index",10000)),$(".msg-board-modal").on("DOMMouseScroll mousewheel",function(e){e.stopPropagation()}),t.find(".content-import").on("input",function(e){var n=e.target.value,i=n.length+n.split("\n").length-1,o=200;t.find(".content-words").html(i+"/"+o)});var n=$(window).scrollTop(),i=$("body").css("overflow-y");$("body").css({position:"fixed","overflow-y":"hidden",top:-n});var d=c(),f={pageId:e.eqxScene.meta.id,name:d.nickname,url:d.headimgurl,content:t.find(".content-import").val(),userId:e.eqxScene.meta.userId,wxId:d.openid};o(f,e),t.on("click",".deleteBtn",function(t){var n=this;l("确定删除留言吗？","",e).then(function(){var t={msgId:$(n).attr("data-msgId"),wxId:$(n).attr("data-wxId")};u.deleteMsg(t).then(function(n){200==n.code&&($(".btn"+t.msgId).parents("li").remove(),$(".msg-board-modal .msg-ul li").length||$(".msg-title").css("visibility","hidden"),e.messageBoard.removeComment(t.msgId))})["catch"](function(t){l(t.msg,"comment-list",e)})})["catch"](function(){})});var h=!1;t.find(".msg-btn").click(function(){var n=$.trim(t.find(".content-import").val());n&&!h&&(h=!0,Object.assign(f,{content:r(n)}),u.commitMsg(f).then(function(t){if(200==t.code&&t.obj){var n=$(".msg-board-modal .msg-ul"),i='<li class="clearfix" style="margin-bottom: 24px;">\n                        <div class="head-img" style="background-image: url(\''+t.obj.wxImage+'\')"></div>\n                        <div class="msg-content" style="background-color: transparent">\n                            <div class="visitor-box" style="margin-bottom: 10px;">\n                                <div>\n                                    <span class="name">'+t.obj.wxName+'</span>\n                                </div>\n                                <p style="color: #333333;">'+t.obj.msg+'</p>\n                            </div>\n                            <a class="deleteBtn btn'+t.obj.id+'" data-msgId="'+t.obj.id+'" data-wxId="'+t.obj.openId+'" style="color: #4B9DEA;font-size: 12px;">删除</a>\n                        </div>\n                </li>';n.prepend(i),$(".msg-title").css("visibility","visible"),$(".content-import").val(""),$(".content-words").text("0/200"),p(e),h=!1}})["catch"](function(t){h=!1,l(t.msg,"comment-list",e)}))}),$(".close-btn").click(function(){$("body").css({position:"static","overflow-y":i,top:"0px"}),$(window).scrollTop(n),$(".msg-board-modal").remove(),$(".preview-outer-wraper").css("z-index","")})}function o(e,t){var n=Object.assign({},{id:e.pageId,wxId:e.wxId});u.getMsgList(n).then(function(e){if(200==e.code&&e.list.length){var n=t.$section.parent().find(".msg-board-modal").find(".msg-ul");e.list.forEach(function(e){var t='<li class="clearfix" style="margin-bottom: 24px;">\n                    <div class="head-img" style="background-image: url(\''+e.wxImage+'\')"></div>\n                    <div class="msg-content" style="background-color: transparent">\n                        <div class="visitor-box" style="margin-bottom: '+(e.reply?"0px":"10px")+';">\n                            <div>\n                                <span class="name">'+e.wxName+'</span>\n                            </div>\n                            <p style="color: #333333;">'+e.msg+'</p>\n                        </div>\n                        <div class="author-box" style="display: '+(e.reply?"block":"none")+';margin-bottom: 10px;margin-top: 16px;">\n                            <div>\n                                <span class="name">作者</span>\n                            </div>\n                            <p style="color: #333333;">'+e.reply+'</p>\n                        </div>\n                        <a class="deleteBtn btn'+e.id+'" data-msgId="'+e.id+'" data-wxId="'+e.openId+'" style="color: #4B9DEA;font-size: 12px;">删除</a>\n                    </div>\n                </li>';n.prepend(t),$(".msg-title").css("visibility","visible")})}})["catch"](function(e){})}function r(e){return e.replace(/<[^>]+>/g,"")}n(356),n(354);var a=n(357),s=n(24).isPc,c=n(93).getWeChatUser,u=n(358),l=n(96).popMsgModal,p=n(96).popMsgSuccessModal;e.exports={initMsgBoardModal:i}},function(e,t){},function(e,t){e.exports='<div class="msg-board-modal" style="z-index: 10;"><div class="msg-content-import"><textarea class="content-import" placeholder="留言将由作者筛选后显示，对所有人可见。" maxlength="200"></textarea><div class="content-select"><i class="eqf-happy-f content-icon"></i> <span class="content-words">0/200</span></div></div><div class="msg-btn-wrapper clearfix"><a class="close-btn">取消</a> <a class="msg-btn">留言</a></div><div class="msg-title" style="visibility: hidden;">我的留言</div><div class="message-board" style="height: calc(100% - 225px);\n        padding: 16px;\n        overflow-y: auto;\n         /*position:absolute;*/\n         /*z-index:1;*/\n         width:100%;\n         /*bottom:0;*/\n         /*-webkit-overflow-scrolling: touch;*/\n         /*-webkit-backface-visibility: hidden;*/\n         /*-webkit-transform: translate3d(0,0,0);*/\n        box-sizing: border-box;"><div class="message-box" style="box-sizing: border-box;background-color: transparent;padding: 0px;min-height: calc(100% + 5px);"><ul class="msg-ul"></ul></div></div></div>'},function(e,t,n){function i(e){return u({type:"GET",url:l.LONG_PAGE_PREVIEW+"lp/msg/list?id="+e})}function o(e){return u({type:"POST",url:l.LONG_PAGE_PREVIEW+"lp/msg/like/set",data:e})}function r(e){return u({type:"POST",url:l.LONG_PAGE_PREVIEW+"lp/msg/reply/like/set",data:e})}function a(e){return u({type:"POST",url:l.LONG_PAGE_PREVIEW+"lp/msg/delete",data:e})}function s(e){return u({type:"POST",url:l.LONG_PAGE_PREVIEW+"lp/msg/save ",data:e})}function c(e){return u({type:"GET",url:l.LONG_PAGE_PREVIEW+"lp/msg/user/list",data:e})}var u=n(20).ajax,l=n(21);e.exports={getComments:i,giveLike:o,getReplyLike:r,deleteMsg:a,commitMsg:s,getMsgList:c}},function(e,t){e.exports='<div class="element message-board"><div class="default-msg"><span class="comment">#{content}</span></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",r.fontSize&&(r.fontSize=d(r.fontSize)),$(h(f,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}function s(e){var t=e.fontFamily,n=e.sceneId,i=e.mode;if("view"===i&&window.scene&&t&&!m[t]){var o="@font-face{font-family:'"+t+"';src: url('"+g.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".woff') format('woff'),url('"+g.FONT+"lpfonts/"+n+"_"+window.scene.publishTime+"/"+t+".ttf') format('truetype');}";p(o),m[t]=!0}}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(78),l=n(130),p=l.addGlobalStyle,d=l.addSuffixPx,f=n(361),h=n(44).parse,g=n(21),m={},v=n(362).parse,y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0}},link:!0}),r}return r(t,e),c(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=e.css,c=r.fontFamily,u=r.fontSize,l=r.writingMode,p=r.marginTop,d=void 0===p?"0px":p,f=r.marginBottom,h=void 0===f?"0px":f,g=e.properties.anim,m=void 0===g?[]:g;i=i||"+yyyy";var y=new Date,b=v(y,i),x=a({id:t,type:n,content:b,marginTop:d,marginBottom:h,css:{fontFamily:c,fontSize:u,writingMode:l}});return s({mode:this.eqxScene.config.mode,fontFamily:c,sceneId:o}),m[0]&&"typer"===m[0].type&&x.css({opacity:0}),x}},{key:"updateContent",value:function(e){e=e||this.compJson.content||"+yyyy";var t=new Date,n=v(t,e);this.$context.children().html(n)}},{key:"autoAdjustSize",value:function(){function e(e){var t=e.$context,n=e.$context.children(),i=parseInt(t.css("padding")),o=n.height(),r={height:o+2*i};return e.update$li(r),{height:parseInt(e.$li.css("height")),width:parseInt(e.$li.css("width"))}}function t(t,n){if(void 0!==n&&null!==n){var r=320,a=t.$context,s=t.$context.children(),c=o(s);if(c<a.width()){var u={width:c+2*parseInt(a.css("padding"))};t.update$li(u),t.update$boxDiv(u),a.css(u)}else{if(c>=a.width()){for(var l=s.height(),p=a.height(),d=a.width();l>p&&d<r;){i(t),l=s.height(),p=a.height(),d=a.width()}}}return e(t)}}function n(t,n){if(void 0!==n&&null!==n){var i=t.$context,o=t.$context.children();if(1===n){for(;r(i,o,n)&&a(i)>u;){s(t)}if(r(i,o,n)&&a(i)<=u){return e(t)}}else{if(0!==n){return e(t)}for(;r(i,o,n)&&a(i)<l;){c(t)}r(i,o,n)||s(t)}return{height:parseInt(t.$li.css("height")),width:parseInt(t.$li.css("width"))}}}function i(e){var t=e.$context,n=parseFloat(t.css("width"))+1,i={width:n+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}function o(e){var t=e.css("display","inline").width();return e.css("display","block"),t}function r(e,t,n){return n?t.height()>e.height():t.height()<e.height()}function a(e){return parseInt(e.css("font-size"))}function s(e){var t=e.$context,n=a(t);if(n>u){var i={fontSize:n-1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}function c(e){var t=e.$context,n=a(t);if(n<l){var i={fontSize:n+1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}var u=12,l=96,p=this.compJson.properties,d=p.adjustWHMode,f=p.adjustFSMode,h=arguments.length?arguments[0]:null;return d?n(this,h):f?t(this,h):e(this)}}]),t}(u);e.exports=y},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%;"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;word-break: break-all;">#{content}</span></div>'},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){t.map=8191&e,t.day=e>>13&31,t.month=e>>18&1,t.leapMonth=e>>20&15,t.hasLeapMonth=!!(e&1<<19)}function o(e){var t=e.year-1890+26;return e.gYear=t%10,e.zYear=t%12,e.animal=e.zYear,e}function r(e){var t=e._date.getFullYear(),n=e._date.getMonth(),r=e._date.getDate(),a=f.map,s=t-f.YEAR_MIN,c={};e.year=t,i(a[s],c),(n<c.month||n===c.month&&r<c.day)&&(s-=1,e.year=t-1,i(a[s],c));for(var u=new Date(e.year,c.month,c.day),l=(e._date.getTime()-u.getTime())/86400000>>0,p=0,d=0,h=0;h<14;){if(d=c.map&1<<h?30:29,p+=d,l<p){e.day=d-(p-l)+1;break}h+=1}return e.leap=!1,c.hasLeapMonth&&(h===c.leapMonth+1&&(e.leap=!0),h>c.leapMonth&&(h-=1)),e.month=h,o(e),e}function a(e){return{year:e.getFullYear(),month:e.getMonth(),mDay:e.getDate(),wDay:e.getDay()}}function s(e,t,n){if(e+="",t-=e.length,t<=0){return e}if(n||0===n||(n=" "),n+=""," "===n&&t<10){return y[t]+e}for(var i="";;){if(1&t&&(i+=n),t>>=1,!t){break}n+=n}return i+e}function c(e,t){return e=""+e,e.substr(e.length-t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zyyy zy cy yyyy yy MMMM Mmmm mmmm MMM Mmm mmm mm m DDDD dddd DDD ddd dd d ",n=a(e),i=v(e).toJSON({chinese:!0});return t.replace("+zyyy",g[n.year]).replace("+zy",g[c(n.year,2)]).replace("+yyyy",n.year).replace("+yy",c(n.year,2)).replace("+MMMM",h.mmmm[n.month].toUpperCase()).replace("+Mmmm",h.mmmm[n.month]).replace("+mmmm",h.mmmm[n.month].toLowerCase()).replace("+MMM",h.mmm[n.month].toUpperCase()).replace("+Mmm",h.mmm[n.month]).replace("+mmm",h.mmm[n.month].toLowerCase()).replace("+mm",s(n.month+1,2,"0")).replace("+zm",g[n.month+1]).replace("+m",n.month+1).replace("+DDDD",h.dddd[n.wDay].toUpperCase()).replace("+dddd",h.dddd[n.wDay]).replace("+Dddd",h.dddd[n.wDay].charAt(0).toUpperCase()+h.dddd[n.wDay].substr(1)).replace("+ddd",h.dddd[n.wDay].substr(0,3)).replace("+Ddd",h.dddd[n.wDay].charAt(0).toUpperCase()+h.dddd[n.wDay].substr(1,2)).replace("+DDD",h.dddd[n.wDay].substr(0,3).toUpperCase()).replace("+zddd",h.zddd[n.wDay]).replace("+dd",s(n.mDay,2,"0")).replace("+zd",g[n.mDay]).replace("+d",n.mDay).replace("+cy",i.year).replace("+cm",i.month).replace("+cd",i.day)}function l(){return{parse:u}}var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=[1750378,339370,6020516,405156,314698,4934293,371351,279894,2804405,346837,8115922,419666,331429,4961866,394827,297627,3880278,370026,281433,1759058,345938,6019877,412453,313931,4936875,377517,288107,1764201,355753,7093650,429714,331045,4954701,395862,303798,3872181,370388,282281,1769106,347794,6016294,402731,313943,4936374,379738,296660,2821833,354121,7075475,420499,329003,5991003,387757,304490,3881813,371620,281417,1759891,346773,7058733,402742,314029,4945322,378290,290213,2825546,363850,8120981,412311,329046,5999285,387797,304850,3878565,372389,280138,2796695,338587,7066970,402794,314217,4945746,387922,289573,3864139,354891,8123563,410285,320877,5999465,396713,306578,3882277,372005,10246733,428630,336566,6006197,403157,315049,4947602,388754,298278,2812502,346711,8123606,418650,321237,4953801,395081,304787,3872043,361771,272987,1758554,337258,7060309,412580,322377,4938387,379541,288045,3861165,346805,9172394,419282,331173,6004042,396618,306325,3880238,361814,273077,1758642,345810,6008485,403237,312907,4934807,371883,288090,2812630,355177,11269970,420690,330533,6003275,387659,296107,4916571,361901,273258,1760082,347538,7068965,404773,313941,4936877,378038,279989,2813354,356041,8142482,421522,331046,5999190,387671,296150,3868373,362325,280393,2797203,337555,7058731,402731,305755,4937050,378218,289637,3864394,355146,8125077,420501,320813,5991085,387765,304554,3869605,363941,281930,2808981,339094,7059790,402774,314037,4937138,378578,290469,3870282,345675,8113303,410795,320859,5991126,387946,304978,3880741,363301,273035,1750171,337067],f={YEAR_MIN:1890,YEAR_MAX:2100,map:d,monthNames:["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"],dayNames:["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"],heavenlyStems:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],earthlyBranches:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarPeriods:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],solarPeriodsMap:[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758]},h={zddd:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ddd:["sun","mon","tue","wed","thu","fri","sat"],Ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DDD:["SUN","MON","TUE","WED","THU","FRI","SAT"],Dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dddd:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],DDDD:["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],mmm:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"]},g={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",11:"十一",12:"十二",13:"十三",14:"十四",15:"十五",16:"十六",17:"十七",18:"十八",19:"十九",20:"二十",21:"二十一",22:"二十二",23:"二十三",24:"二十四",25:"二十五",26:"二十六",27:"二十七",28:"二十八",29:"二十九",30:"三十",31:"三十一",2015:"二零一五",2016:"二零一六",2017:"二零一七",2018:"二零一八",2019:"二零一九",2020:"贰零贰零"},m=function(){function e(t){return n(this,e),t?(t instanceof Date&&(this._date=t,r(this)),this):this}return p(e,[{key:"convert",value:function(){return r(this)}},{key:"toDate",value:function(){return this._date}},{key:"isValid",value:function(){return !!this._date}},{key:"format",value:function(e){return this._date?(e=e||"农历gYzY年MD",e.replace("gY",f.heavenlyStems[this.gYear]).replace("zY",f.earthlyBranches[this.zYear]).replace("gM",f.heavenlyStems[this.gMonth]).replace("zM",f.earthlyBranches[this.zMonth]).replace("gD",f.heavenlyStems[this.gDay]).replace("zD",f.earthlyBranches[this.zDay]).replace("M",(this.leap?"闰":"")+f.monthNames[this.month]).replace("D",f.dayNames[this.day])):"Invalid Date"}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(e.chinese&&(t={year:f.heavenlyStems[this.gYear]+f.earthlyBranches[this.zYear],month:f.monthNames[this.month],day:f.dayNames[this.day],gYear:f.heavenlyStems[this.gYear],zYear:f.earthlyBranches[this.zYear],animal:f.animals[this.animal],leap:this.leap?"闰":""}),"array"===e.type){return[t.year,t.month,t.day,t.leap]}var n=t,i=n.year,o=n.month,r=n.day,a=n.leap,s=n.gYear,c=n.zYear,u=n.animal;return{year:i,month:o,day:r,leap:a,gYear:s,zYear:c,animal:u}}},{key:"toString",value:function(){return this.format()}}]),e}(),v=function(e){if(e){if(!(e instanceof Date)){throw new Error("date parameter must be Date/Array/Object")}}else{e=new Date}return new m(e)},y=[""," ","  ","   ","    ","     ","      ","       ","        ","         "];e.exports=l()},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(364);var c=n(78),u=n(365),l=n(44).parse,p=n(22).$loadQRCode,d=n(21),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0},advanceStyle:{paddingTop:!1,borderRadius:!1}},trigger:{click:!1},flexLine:"ne,se,sw,nw,r"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.address,r=i.logoImg,a=i.img,s=e.css,c=s.width,p=s.height;if(this.$context=$(l(u,{id:t,type:n,content:""})),a&&a.trim()){var f=this.getImgSrc(a,{width:c,height:p});this.generateQrcodeImg(this.$context,f)}else{o||(this.compJson.properties.address=o=d.VIEW_HOST+"s/"+this.eqxScene.meta.code),this.generateQrcodeAddress(this.$context,o,r,c)}return this.$context}},{key:"updateSize",value:function(e,n){var i=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n),clearTimeout(this._updateTimeOut),this._updateTimeOut=setTimeout(function(){i.updateQrcodeAddress()},300)}},{key:"generateQrcodeAddress",value:function(e,t,n,i){var o=this;p().then(function(){var r={render:"image",ecLevel:"H",size:i,text:t};if(o.compJson.properties.showLogoImg&&n){var a=d.FILE+n,s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=function(){var t=s.height,n=s.width;if(t!==n){var i=document.createElement("canvas"),o=i.height=i.width=100,a=void 0,c=void 0,u=void 0,l=void 0;t>n?(u=o,l=Math.abs(n/t*o),c=0,a=Math.abs((o-l)/2)):(l=o,u=Math.abs(t/n*o),a=0,c=Math.abs((o-u)/2));var p=i.getContext("2d");p.drawImage(s,a,c,l,u);var d=new Image;d.src=i.toDataURL(),d.onload=function(){Object.assign(r,{mode:4,mSize:0.25,image:d}),e.qrcode(r),d.onload=null}}else{Object.assign(r,{mode:4,mSize:0.25,image:s}),e.qrcode(r)}s.onload=null},s.src=a}else{e.qrcode(r)}})}},{key:"generateQrcodeImg",value:function(e,t){var n="<img src="+t+">";e.append(n)}},{key:"updateQrcodeAddress",value:function(){this.$context.empty(),this.compJson.properties.img="";var e=this.compJson,t=e.properties,n=t.address,i=t.logoImg,o=e.css.width;this.generateQrcodeAddress(this.$context,n,i,o)}},{key:"updateQrcodeImg",value:function(e){var t=this.$context;t.empty(),this.generateQrcodeImg(t,e)}}]),t}(c);e.exports=f},function(e,t){},function(e,t){e.exports='<span id="#{id}" ctype="#{type}" class="element eqx-qrcode">#{content}</span>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(367);var c=n(78),u=(n(21),n(368)),l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.content,n=e.properties,i=n.imgStyle,o=n.src;return this.$context=u.$defaultAd({content:t,imgStyle:i,src:o}),this.$context}}]),t}(c);e.exports=l},function(e,t){},function(e,t,n){function i(e){var t=e.content,n=e.imgStyle,i=e.src,o=$(s(a,{content:t})),r='<div class="lpAdvertise-content">\n                        <div class="lpAdvertise-content-wraper">\n                            <img src="'+i+'" style="width: '+n.width+"px; height: "+n.height+'px">\n                        </div>                           \n                    </div>';return o.append(r)}function o(e){var t=e.content,n=e.src,i=e.config,o=$(s(a,{content:t})),r='<div class="lpAdvertise-content" style="line-height: 100px;">\n                        <img src="'+n+'" style="max-width: 320px;max-height: 100px;">\n                     </div>',c='<a href="'+i.adLink+'" ></a>';return 1==i.clickType&&(r=$(c).append(r)),o.append(r)}function r(e){var t=e.content,n=e.src,i=e.href,o=$(s(a,{content:t})),r='<div class="lpAdvertise-content">\n                        <div id="lp-advertise-flow-content" class="lpAdvertise-flow-content">\n                             <a href="'+i+'">\n                                 <img src="'+n+'" class="flow-default-img">\n                             </a>\n                        </div>\n                    </div>';return o.append(r)}var a=n(369),s=n(44).parse;e.exports={$defaultAd:i,$configAd:o,$flowAd:r}},function(e,t){e.exports='<div class="lpAdvertise-wraper"><div class="lpAdvertise-title"><span>#{content}</span></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(367);var s=n(78),c=n(368),u=n(96).adPopUpModal,l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.content,n=e.css,i=(n.height,n.width,e.properties),o=i.src,r=i.config;return this.$context=c.$configAd({content:t,src:o,config:r}),this.$context}},{key:"bindAfterRenderEvent",value:function(e,t){var n=t.properties.config;if(2==n.clickType){var i=this.eqxPage;$(this.$context).find(".lpAdvertise-content").click(function(){u(n,i)})}}}]),t}(s);e.exports=l},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(367);var s=n(78),c=n(21),u=n(368),l=n(372),p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.content,n=(e.css.height,e.properties),i=n.src,o=n.labelConfig;if(e.properties.config&&e.properties.config.adType&&!e.properties.config.adType.includes("tail")){return this.eqxScene.adHeight=0,void (this.compJson.css.height=0)}var r=void 0,a=c.BOTTOM_MARK_TEMPLATEID,s=Math.floor(Math.random()*a.length);r=a[s];var l=c.LONG_HOST+"mobile/create.html?sourceId="+r+"&type=lc";if(o&&Object.keys(o).length&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(o.adLink)){var p=o.adLink.replace.replace(/，/g,",").split(","),d=Math.floor(Math.random()*p.length);p[d]&&!isNaN(p[d])&&(l=c.LONG_HOST+"mobile/create.html?sourceId="+p[d]+"&type=lc")}return this.$context=u.$flowAd({content:t,src:i,href:l}),this.$context}},{key:"bindAfterRenderEvent",value:function(e,t){this.loadFlow()}},{key:"loadFlow",value:function(){var e=this,t=this.compJson.properties.config,n=c.FLOW_AD_RESOURCES[0]+"eqx.ad.render/"+t.versionNum+"/"+c.FLOW_AD_RESOURCES[1];return Promise.all([this.loadFlowExecJs(n),this.loadFlowExecCss(n)]).then(function(t){try{if("pcRender"==e.eqxPage.renderMode){return}var n=e,i=e.eqxPage.flowAd={},o=i.flowAdType=n.compJson.properties.config.adType,r=new Promise(function(e,t){new EqxAdRender({id:n.eqxScene.meta.id,media:"longPage",adDemand:o,init:function(t){var n=t.code,i=t.Render;t.msg;200==n&&e(i)}})});r.then(function(e){if(i.flowRender=e,o.includes("tail")){var t=new i.flowRender.tail("#lp-advertise-flow-content");t.exposure()}})}catch(a){}})}},{key:"loadFlowExecJs",value:function(e){return l.delayLoadJSAndCSS(e+".js","js")}},{key:"loadFlowExecCss",value:function(e){return l.delayLoadJSAndCSS(e+".css","css")}}]),t}(s);e.exports=p},function(e,t){function n(e,t,n,i){return new Promise(function(o){var r=null,a=null,s=null,c=0;if(t||(t=e.substr(e.lastIndexOf(".")+1)),"js"===t){var u=document.getElementsByTagName("script");for(c=0;c<u.length;c++){(u[c].src&&u[c].src.indexOf(e)!=-1||u[c].title==n)&&(a=u[c],o(u[c]))}a||(r=document.createElement("script"),r.type="text/javascript",r.src=e,i&&i(r),n&&(r.title=n))}else{if("css"===t){var l=document.getElementsByTagName("link");for(c=0;c<l.length;c++){(l[c].href&&l[c].href.indexOf(e)!=-1||l[c].title==n)&&(s=l[c],o(l[c]))}s||(r=document.createElement("link"),r.rel="stylesheet",r.type="text/css",r.href=e,n&&(r.title=n),r.disabled=!1)}else{o(!1)}}if(r){var p=document.getElementsByTagName("head")[0];p.appendChild(r),r.onload=function(){o(r)}}})}e.exports={delayLoadJSAndCSS:n}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(78),c=(n(374),n(375)),u=n(379),l=n(44).parse,p=n(96).adPopUpModal;n(380);var d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r.$report=null,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.content,n=e.properties.config,i=n.isShowReport,o=n.labelText,r=$(l(u,{content:t,labelText:o}));return i||$('<div class="lpBottomMark-report button">举报</div>').insertBefore(r.find(".lpBottomMark-support")),$(l(r,{content:t,isShowReport:i}))}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=[".lpBottomMark-report",".lpBottomMark-support",".lpBottomMark-logo"],o=this.eqxPage;i.forEach(function(i){n.$li.on("click",i,function(n){n.stopPropagation(),".lpBottomMark-report"==i?c.openReportModal(e,o,t.sceneId):2==t.properties.config.clickType?p(t.properties.config,o):window.location.href=t.properties.config.adLink})})}}]),t}(s);e.exports=d},function(e,t){},function(e,t,n){function i(e,t,i){return e.report?e.report.show():void o().then(function(o){var a=r({imgSrc:n(378),reasonList:o});e.report=a;var s=e.parents(".nr");a.appendTo(s),c()&&"pc"!=t.previewMode||e.report.css({position:"fixed"}),a.find("li").click(function(e){e.stopPropagation(),$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("#reportSubmit").click(function(n){n.stopPropagation();var o=a.find("li.active").val();u({sceneId:i,type:o}).then(function(){return l("举报成功！",t)})["finally"](function(){return e.report.hide()})}),e.report.on("click",function(t){var n=$("#report0");n.is(t.target)||0!==n.has(t.target).length||e.report.hide()})})}function o(){return new Promise(function(e,t){return d.length?e(d):p().then(function(n){d=n.list,d.length?e(d):t()})["catch"](function(){return d=f,e(d)})})}function r(e){var t=e.imgSrc,n=e.reasonList,i=n.map(function(e,t){var n=e.id,i=e.name,o=(e.value,0==t?'class="active"':"");return'<li value="'+n+'" '+o+"><span>"+i+"</span></li>"}).join("");return $(s(a,{imgSrc:t,reasons:i}))}n(376);var a=n(377),s=n(44).parse,c=n(24).isPc,u=n(268).$postReport,l=n(96).popUpModal,p=n(268).$getReportOptions,d=[],f=[{id:14258,name:"内容涉及违规",value:1},{id:14259,name:"诱导浏览者分享",value:2},{id:14260,name:"场景内容侵权",value:3},{id:14302,name:"内容夸大宣传",value:4},{id:14303,name:"涉及政治谣言",value:5},{id:14304,name:"其它原因",value:6}];e.exports={openReportModal:i}},function(e,t){},function(e,t,n){e.exports='<div class="reportModal"><div id="report0"><div id="report1"><div id="report2"><p><img src="'+n(378)+'" style="width: 50px;height: 50px"></p><h1>请选择举报原因</h1></div><div id="report3"><ul id="reportList">#{reasons}</ul></div><div id="report4"><a id="reportSubmit" data-event="11203">提交举报</a></div></div></div></div>'},function(e,t,n){e.exports="https://img.alicdn.com/imgextra/i3/483638748/O1CN012r9BuC2EUdI366Od1_!!483638748.png"},function(e,t){e.exports='<div class="lpBottomMark-wrapper clearfix"><div class="lpBottomMark-support button">#{labelText}</div></div>'},function(e,t){},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}};n(314);var c=n(313),u=n(382),l=n(383),p=n(44).parse,d=n(309),f=n(310).copyProperties,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=new d(e,n);return f(r,Reflect.getPrototypeOf(a)),a=null,r}return r(t,e),a(t,[{key:"$compDiv",value:function(e){var t=e.id,n=e.required,i=void 0===n?null:n,o=e.title,r=void 0===o?"标题":o,a=e.type,s=e.css,c=e.formTitle,u=e.formDes;return $(p(l,{id:t,title:r,type:a,css:s,formTitle:c,formDes:u})).attr({required:i})}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=o.titleStyle,s=void 0===a?{}:a,c=o.formRelevant,u=void 0===c?{}:c,l=e.title,p=e.css.height,d=u.title&&u.title.content||"",f=u.des&&u.des.content||"";0==Object.keys(u).length&&(p=e.css.height=p-36),this.title=l,this.pageId=n,this.name="eq[f_"+t+"]",this.required=r;var h=this.$compDiv({id:t,required:r,type:i,formTitle:d,formDes:f,css:{height:p,width:"100%"},title:"scoreRadio"==i?l:l+"(可多选)"});h.find(".radio-title").css(s);var g=this.$options=h.find(".options");return g.html(this.create$options()),"horizontal"==this.compJson.arrange&&"view"==this.eqxScene.config.mode&&this.eqxScene.config.isPc&&this.$boxContentDiv.addClass("horizontal"),h}},{key:"create$options",value:function(){var e=this,t=this.compJson,n=t.id,i=(t.properties.optionStyle,t.choices);"string"==typeof i&&(i=JSON.parse(i));var o=$("<div>"),r=(i.options.length-1,"scoreRadio"==this.compJson.type);return i.options.forEach(function(t,a){var s=r?t.id==i["default"]:t["default"],c=e.$option({compId:n,index:a,optionId:t.id,optionLabel:t.label,inputType:"scoreRadio"==e.compJson.type?"radio":"checkbox",checked:s});o.append(c)}),o.html()}},{key:"$option",value:function(e){var t=e.compId,n=e.index,i=e.optionId,o=e.optionLabel,r=e.inputType,a=void 0===r?"radio":r,s=e.checked,c=""+t+n,l=$(p(u,{id:c,inputType:a,compId:t,optionId:i,optionLabel:o}));return"view"==this.eqxScene.config.mode&&s&&l.find("input").attr("checked",!0),l}},{key:"updateOptionsLabel",value:function(){var e=this.$li.find(".option-label").find("span");this.compJson.choices.options.forEach(function(t,n){$(e[n]).text(t.label)})}},{key:"check",value:function(){var e=this.getValue(),n=this.calcScore(e),i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this);if(i.success){var o=this.ruleHide?"（跳过）":"";e&&!this.ruleHide&&(o=this.getTextDetail(e.split(",")).options.join(","),o+="（"+n+"分）"),i.value=JSON.stringify({value:e,content:o,score:n,elementId:this.id}),i.score=n}return i}},{key:"calcScore",value:function(e){var t=0,n=this.compJson.choices.options;return e.split(",").forEach(function(e){n.forEach(function(n){n.id==e&&(t+=parseInt(n.score))})}),isNaN(parseInt(t))?0:t}},{key:"bindRuleEvent",value:function(e){var t=this,n=this.$li.find("#"+this.id);this.ruleIds=this.ruleIds||[],this.ruleIds.push(e),n.on("change",function(){t.eqxPage.EqxFormRulesTrigger.listen(t.ruleIds,t.id,t.getValue())})}}]),t}(c);e.exports=h},function(e,t){e.exports='<div class="option-group"><label class="option-label" for="#{id}" data-event="11208"><input class="option" id="#{id}" type="#{inputType}" name="eq[f_#{compId}]" value="#{optionId}"> <span>#{optionLabel}</span></label></div>'},function(e,t){e.exports='<div class="radio-title form-title-box"><div>#{formTitle}</div></div><div class="radio-des form-des-box"><div>#{formDes}</div></div><div class="element comp_radio editable-text form-comp-box" id="#{id}" ctype="#{type}" name="eq[f_#{id}]" style="width: 100%;height: 100%;"><div class="options"></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(309),u=n(385),l=n(24).mobilecheck,p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"create$li",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$li",this).call(this),this.$formComp.css({"border-width":"0px","background-color":"transparent","border-radius":"0px"}),this.$formComp.find(".table-outer-wraper").css({"background-color":this.scoreSettings.bgColor,"border-radius":this.compJson.css.borderRadius}),this.$li}},{key:"create$context",value:function(){var e=this.compJson,t=this.eqxScene.config.mode,n=e.id,i=e.pageId,o=e.type,r=e.properties,a=r.required,s=r.formRelevant,c=void 0===s?{}:s,l=c.title&&c.title.content||"",p=c.des&&c.des.content||"";this.scoreSettings=this.getScoreSettings();var d=this.scoreSettings,f=d.minValue,h=d.maxValue,o=(d.scoreLevel,d.type),g=d.bgColor,m=u.$compDiv({id:n,type:o,required:a,formTitle:l,formDes:p,minValue:f,maxValue:h,mode:t,bgColor:g}),t=this.eqxScene.config.mode;return this.required=a,this.title=l,this.name="eq[f_"+n+"]",this.pageId=i,m.find("table").append(u.render(this.scoreSettings,t,n)),this.$table=m.find("table.scoreMatrix-table"),this.$tableWraper=m.find(".table-container-wraper"),this.$score=m.find('input[type="hidden"]'),this.$titleDiv=m.find(".rating-title"),m}},{key:"bindAfterRenderEvent",value:function(e){var t=this;this.$li.on("click",function(){t.hideFormErrMsg()}),this.$tableWraper.css("pointer-events","auto").on("DOMMouseScroll mousewheel",function(e){var n=e.originalEvent,i=t.getScrollDirection(e.originalEvent);i||n.stopPropagation()});var n=this.scoreSettings.type,i=this.compJson.id;if("radio"!=n){var o=n.replace(/^([a-z]*)-([a-z]*)-[a-z]*/,"$1-$2-"),r=o+"l",a=o+"f";this.$table.on("click",".star-item",function(){var e=$(this).attr("list-id"),t=$(this).index(),n=t+1;$("input[name=scoreMartix_"+i+"_"+e+"]").val(n),$(this).parent().children().find("i").removeClass(r).addClass(a),$(this).nextAll().find("i").removeClass(a).addClass(r)})}}},{key:"getScrollDirection",value:function(e){return 2==e.axis||Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)}},{key:"afterAppendToPage",value:function(){var e=l(),t=this.$li.css("display");"none"==t&&this.$li.show().css("visibility","hidden");var n=this.$table,i=n.width(),o=this.$tableWraper.width(),r=this.$tableWraper.find(".scroll-rect");if(this.$li.css({visibility:"visible",display:t}),i+20<=o){return void r.hide()}if(i+=20,e){r.hide(),this.$tableWraper.find(".table-outer-wraper").css("width",i+"px")}else{this.myScroll&&this.myScroll.destroy();var a={preventDefault:!1,mouseWheel:!1,scrollbars:!0,click:!1,tap:!0,bounce:!1,interactiveScrollbars:!0,scrollX:!0,scrollY:!1,probeType:3};this.$tableWraper.css("overflow","hidden");var s=this.$tableWraper.get(0),c=this.eqxScene.config.mode;r.css("border-width","1px 0px").show(),"edit"==c?(s=r.find(".scroll-wraper").get(0),$(s).children().css("width",i+"px")):this.$tableWraper.find(".table-outer-wraper").css("width",i+"px"),this.myScroll=new IScroll(s,a),"edit"==c&&this.myScroll.on("scroll",function(){n.css("transform","translate("+this.x+"px ,0px)")})}}},{key:"updateScoreMatrixHeight",value:function(){this.$li.css({height:""}),this.update$li({height:this.$li.innerHeight()}),this.autoSizeTopDown()}},{key:"updateContentTitle",value:function(){var e=this.$table.find(".title");this.scoreSettings.contentOption.list.forEach(function(t,n){$(e[n]).find("div").text(t.content)})}},{key:"updateOption",value:function(){var e=this.$table.find(".opt-content");this.scoreSettings.contentOption.optionsList.forEach(function(t,n){$(e[n]).text(t.content)})}},{key:"updateColor",value:function(e){"eqf-score-scale"==this.scoreSettings.type?this.$table.find(".star-item").children().css({backgroundColor:e,borderColor:e}):this.$table.find(".star-item").children().css("color",e)}},{key:"updateBgColor",value:function(e){this.$boxContentDiv.find(".table-outer-wraper").css("background-color",e)}},{key:"updateFormCompCss",value:function(e){if(e){var t=JSON.parse(JSON.stringify(e));if(t.borderWidth&&delete t.borderWidth,0!=Object.keys(t).length){var n=JSON.parse(JSON.stringify(t));n.borderRadius&&(this.$boxContentDiv.find(".table-outer-wraper").css("border-radius",n.borderRadius),delete n.borderRadius),this.$formComp.css(n),this.updateCss(t),this.autoSizeTopDown(),this.updateFormHeight()}}}},{key:"check",value:function(){var e=this,t=[],n=0,i=this.getValue(),o=this.getSelectedItems(i);if(this.ruleHide){t=[{id:"-99",content:"（跳过）"}]}else{var r=this.calcScore(i),a=this.scoreSettings,s=a.type,c=a.contentOption,u=c.list,l=c.optionsList;Object.keys(i).forEach(function(o){var a="",c="radio"==s&&i[o]?e.getItemById(l,i[o]).content:i[o],p=c?"（"+r[o]+"分）":"";a+=e.getItemById(u,o).content+"："+(c+p),i[o]&&t.push({id:o,value:i[o],score:r[o],content:a}),n+=isNaN(parseInt(r[o]))?0:parseInt(r[o])})}var p=(this.getTipTitle(),{success:!0,pageId:this.pageId,key:this.name,score:n,value:JSON.stringify(t),elementId:this.id});return 0===o&&delete p.value,this.required&&!o&&(p.success=!1,p.message="该项为必填项"),p}},{key:"getSelectedItems",value:function(e){e=e||this.getValue();var t=0;for(var n in e){if(!e[n]){return !1}t++}return t}},{key:"getValue",value:function(){var e=this,t={},n=this.scoreSettings.type;return this.scoreSettings.contentOption.list.forEach(function(i){var o="radio"===n?e.$table.find("input[name=scoreMartix_"+e.id+"_"+i.id+"]:checked"):e.$table.find("input[name=scoreMartix_"+e.id+"_"+i.id+"]");t[i.id]=o.val()||""}),t}},{key:"calcScore",value:function(e){var t=this,n=this.scoreSettings,i=n.type,o=n.baseNum,r=n.contentOption.optionsList,a={};return Object.keys(e).forEach(function(n){var s=e[n];if("radio"===i){if(s){var c=t.getItemById(r,s);a[n]=c?isNaN(c.score)?0:c.score:0}else{a[n]=0}}else{var u=s*o;a[n]=isNaN(u)?0:u}}),a}},{key:"getItemById",value:function(e,t){return e.find(function(e){return e.id==t})}},{key:"bindRuleEvent",value:function(e){this.ruleIds=this.ruleIds||[],this.ruleIds.push(e);var t=this.ruleIds,n=".star-item",i=this;"radio"==this.scoreSettings.type&&(n=".matrix-radio-item"),this.$table.on("click",n,function(){var e=i.getSelectedItems();e&&i.eqxPage.EqxFormRulesTrigger.listen(t,i.id,"1")})}}]),t}(c);e.exports=p},function(e,t,n){function i(e){var t=e.id,n=e.type,i=e.title,o=e.required,r=void 0===o?null:o,a=e.formTitle,s=e.formDes,l=e.minValue,p=void 0===l?"":l,d=e.maxValue,f=void 0===d?"":d,h=e.mode,g=e.bgColor;return $(u(c,{id:t,type:n,title:i,formTitle:a,formDes:s,minValue:p,maxValue:f,mode:h,bgColor:g})).attr("required",r)}function o(e,t,n){var i=e.baseNum,o=e.scoreLevel,s=e.contentOption,c=e.type,u=e.bgColor,l=e.color,p=s.optionsList,d=s.list;return"radio"===c?r({optionsList:p,type:c,list:d,bgColor:u,color:l,mode:t,id:n,baseNum:i}):a({scoreLevel:o,list:d,type:c,bgColor:u,color:l,mode:t,id:n})}function r(e){var t=e.optionsList,n=(e.type,e.list),i=e.id,o=(e.baseNum,e.mode,"<tr><th></th><th><table><tr>"),r=t.length;return t.forEach(function(e){o+='<th class="opt-content" style="width:'+100/r+'%">'+e.content+"</th>"}),o+="</tr></table></tr></th>",n.forEach(function(e,n){var a=0==n?"specPadding":"";o+="<tr>",o+='<td class="title '+a+'"><div>'+e.content+'</div></td><td  class="wrap '+a+'"><table><tr>';for(var s=0;s<r;s++){o+='<td style="width:'+100/r+'%" class="matrix-radio-item"><input type="radio" name="scoreMartix_'+i+"_"+e.id+'" value="'+t[s].id+'"></td>'}o+="</tr></table></td></tr>"}),o}function a(e){var t=e.scoreLevel,n=e.list,i=e.type,o=(e.bgColor,e.color),r=e.mode,a=e.id,s=t,c=100/s+"%",u="",l=i.replace(/^([a-z]*)-([a-z]*)-[a-z]*/,"$1-$2-"),p=l+"l",d=l+"f",f="eqf-score-scale"===i?"border-color:"+o+";background-color:"+o:"";return n.forEach(function(e){u+='<tr class="score-list-wraper">\n                    <td class="title">\n                        <div>\n                            '+e.content+'\n                            <input name="scoreMartix_'+a+"_"+e.id+'" type="hidden" value=""/>\n                        </div>\n                    </td>',u+="<td><table><tr>";for(var t=0;t<s;t++){var n="",l="";l="edit"===r&&t<s-1?d:p,"eqf-score-scale"===i&&(n=t+1,l+=" score-number"),u+='<td class="star-item" list-id="'+e.id+'" style="width:'+c+'">\n                        <i class="'+l+'" style="color:'+o+";"+f+'">'+n+"</i>\n                    </td>"}u+="</tr></table></td></tr>"}),u}function s(e,t,n){return'<i style="background-color: '+t+";border-color: "+t+'" class="'+e+' active">'+n+"</i>"}n(386);var c=n(387),u=n(44).parse;e.exports={$compDiv:i,numScale:s,render:o}},function(e,t){},function(e,t){e.exports='<div class="form-title-box"><div>#{formTitle}</div></div><div class="form-des-box"><div>#{formDes}</div></div><div class="element new_comp_rating editable-text form-comp-box" style="position:relative;width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none;background-color:#{bgColor}" id="#{id}" ctype="#{type}" title="#{formTitle}" name="eq[f_#{id}]"><div class="table-wraper table-container-wraper" style="" class=""><div class="table-outer-wraper"><table class="scoreMatrix-table"></table></div><div class="scroll-rect" style="position:absolute;bottom:0px;left:0px;width:100%;height:10px;background-color:transparent;border:0px solid #CCD5DB;"><div class="scroll-wraper" style="position:absolute;bottom:2px;top:0px;left:0px;width:100%;height:100%"><div class="scroll-content" style="width:100%;height:100%;"></div></div></div></div></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(384),s=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),t}(a);e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(64).COMP_TYPE,a=n(64).FORM_COMPS,s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,e),this.compJsonList=n,this.compNumMap={},Object.keys(r).forEach(function(e){t.compNumMap[e]=0})}return o(e,[{key:"iterate",value:function(){var e=this;this.compJsonList.forEach(function(t){e.compNumMap[t.type]+=1})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"hasComp",value:function(e){return !!this.compNumMap[e]}},{key:"hasRedPacketComp",value:function(){return this.hasComp(9)}},{key:"hasMapComp",value:function(){return this.hasComp("m")}},{key:"hasChartComp",value:function(){return this.hasComp("t")}},{key:"hasCommentComp",value:function(){return this.hasComp("b")}},{key:"hasSubmitButtonComp",value:function(){return this.hasComp(6)||this.hasComp(601)}},{key:"hasFormComp",value:function(){var e=this,t=0;return a.forEach(function(n){t+=e.compNumMap[n]}),!!t}}]),e}();e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(21),a=n(23).resolveUrl,s=n(391),c=n(44).parse,u=n(81),l=n(24),p=n(392),d=n(393),f={none:0,Gravity:1,Parallax:2},h=function(){function e(t,n){i(this,e),this.compJson=t,this.eqxScene=n.eqxScene;var o=this.eqxScene.config;o.EqxGravity.disableGravityMotion?this.gravityMode=f.none:l.mobilecheck()?this.gravityMode=f.Gravity:this.gravityMode=f.Parallax,this.gravityPromise=null,this.gravity=null}return o(e,[{key:"updateBgHeight",value:function(e){this.$gravity.css({height:e})}},{key:"updateCss",value:function(e){this.$gravity.css(e)}},{key:"create$gravity",value:function(){var e=this,t=this.compJson,n=t.id,i=t.properties.imgSrc,o=t.css,l=o.top,h=o.left,g=o.width,m=o.height,v=this.eqxScene,y=v.width,b=v.height;if(i){var x=a(r.FILE,i),w=$(c(s,{id:n,src:x}));this.$gravity=w,this.gravityPromise=u.loadImg(x).then(function(){switch(w.find("img").css({transform:"translate3d("+h+"px,"+l+"px,0)",width:g,height:m}),e.gravityMode){case f.Gravity:e.gravity=new d(n,$(w.find("img")),l,h,y,b),e.gravity.init();break;case f.Parallax:p(w,{innerW:g,innerH:m,outerW:y,outerH:b})}})}return this.$gravity}},{key:"delete$gravity",value:function(){var e=this;this.gravityMode===f.Gravity&&this.gravityPromise&&this.gravityPromise.then(function(){e.gravity.destroy()}),this.$gravity&&this.$gravity.remove()}},{key:"update$gravity",value:function(){this.delete$gravity(),this.create$gravity()}}]),e}();e.exports=h},function(e,t){e.exports='<div id="wrapper-gravity#{id}" class="eqx-bg-img" style="position: absolute;z-index: 0;width: 100%;height:100%;"><div class="layer" data-depth="0.5"><img src="#{src}" alt="" style="position:absolute;"/></div></div>'},function(e,t,n){function i(e,t){o.$loadParallax().then(function(){var n=t.innerW,i=t.innerH,o=t.outerW,r=t.outerH,a=t.scalarX,s=void 0===a?100:a,c=t.scalarY,u=void 0===c?100:c;var l={calibrateX:!0,calibrateY:!0,invertX:!0,invertY:!0,limitX:parseInt(n)-parseInt(o),limitY:parseInt(i)-parseInt(r),scalarX:s,scalarY:u,frictionX:1,frictionY:1,originX:0.5,originY:0.5};new Parallax(e[0],l)})}var o=n(22);e.exports=i},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i,o,r,a,s){n(this,e),this.id=t,this.bgHeight=0,this.bgWidth=0,this.offsetLeft=r,this.offsetTop=o,this.screenHeight=s,this.screenWidth=a,this.isFirst=!0,this.firstGamma=0,this.firstBeta=0,this.lastGama=0,this.lastBeta=0,this.targetLeft=0,this.targetTop=0,this.bg=i}return i(e,[{key:"init",value:function(){var e=this;e.targetLeft=e.nowLeft=e.offsetLeft,e.targetTop=e.nowTop=e.offsetTop,e.bindEvent(),e.requestAnimationFrame=e.requestAnimationFrame.bind(this),e.raf=requestAnimationFrame(e.requestAnimationFrame)}},{key:"bindEvent",value:function(){var e=this;$(window).on("deviceorientation."+e.id,function(t){var n=t.originalEvent;n.g=n.gamma,n.b=n.beta,e.isFirst&&(e.bgHeight=e.bg.height(),e.bgWidth=e.bg.width(),e.nowGama=e.lastGama=e.firstGamma=n.g,e.nowBeta=e.lastBeta=e.firstBeta=n.b,e.isFirst=!1),(Math.abs(n.g-e.lastGama)>3||Math.abs(n.b-e.lastBeta)>3)&&(e.targetLeft=Math.round(e.offsetLeft+(e.firstGamma-n.g)*e.bgWidth/180),e.targetTop=Math.round(e.offsetTop+(n.b-e.firstBeta)*e.bgHeight/180),e.nowBeta=e.lastBeta=n.b,e.nowGama=e.lastGama=n.g,e.targetLeft>=0?e.targetLeft=0:e.targetLeft<e.screenWidth-e.bgWidth&&(e.targetLeft=e.screenWidth-e.bgWidth),e.targetTop>=0?e.targetTop=0:e.targetTop<e.screenHeight-e.bgHeight&&(e.targetTop=e.screenHeight-e.bgHeight))})}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=0,t=0,n=this;n.isFirst||(e=0.1*(n.targetLeft-n.nowLeft),t=0.1*(n.targetTop-n.nowTop),n.nowLeft+=+e.toFixed(5),n.nowTop+=+t.toFixed(5),n.bg.css({transform:"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)","-ms-transform":"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)","-webkit-transform":"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)"})),n.raf=requestAnimationFrame(n.requestAnimationFrame)})},{key:"destroy",value:function(){window.cancelAnimationFrame(this.raf),$(window).off("deviceorientation."+this.id)}}]),e}();e.exports=o},function(e,t){var n=[{name:"红包",types:["9"]},{name:"新文本",types:["7"]},{name:"爆款文本",types:["1"]},{name:"文本",types:["2","x","298","299"]},{name:"微信昵称",types:["201"]},{name:"背景",types:["3"]},{name:"图片",types:["4"]},{name:"微信头像",types:["401"]},{name:"微信照片",types:["403"]},{name:"输入框",types:["5","501","502","503","504","505","506","507"]},{name:"提交按钮",types:["6","601"]},{name:"电话",types:["8"]},{name:"评分",types:["a"]},{name:"留言板",types:["b"]},{name:"复选框",types:["c"]},{name:"统计",types:["d"]},{name:"广告",types:["g"]},{name:"形状",types:["h"]},{name:"计数器",types:["i"]},{name:"链接",types:["l"]},{name:"地图",types:["m"]},{name:"随机图片",types:["n"]},{name:"图集",types:["p"]},{name:"单选框",types:["r"]},{name:"音效",types:["s"]},{name:"图表",types:["t"]},{name:"视频",types:["v"]},{name:"互动视频",types:["o"]},{name:"微信声音",types:["w01","w02"]},{name:"下拉列表",types:["z"]},{name:"计时",types:["e","f"]},{name:"投票",types:["j","k"]},{name:"重力感应",types:["q"]},{name:"画板",types:["u"]},{name:"打赏",types:["11"]},{name:"随机事件",types:["10"]},{name:"上传图片",types:["upload"]},{name:"日期",types:["14"]},{name:"验证码",types:["12"]},{name:"照片墙",types:["13"]},{name:"长按按钮",types:["16"]},{name:"微信卡券",types:["17"]},{name:"幸运转盘抽奖",types:["18"]},{name:"砸金蛋",types:["19"]},{name:"一刮千金",types:["20"]},{name:"微信红包",types:["21"]},{name:"幸运九宫格",types:["22"]},{name:"二维码",types:["23"]},{name:"点击截图",types:["24"]},{name:"新饼图",types:["lpPie"]},{name:"新折线图",types:["lpLine"]},{name:"新柱状图",types:["lpBarCol"]},{name:"新条形图",types:["lpBarRow"]},{name:"表格",types:["lpFormTable"]},{name:"列表",types:["lpListTable"]},{name:"新留言板",types:["messageBoard"]},{name:"NPS量表",types:["scoreScale"]},{name:"新评分",types:["score"]},{name:"评分单选",types:["scoreRadio"]},{name:"评分多选",types:["scoreCheckbox"]},{name:"评分矩阵",types:["scoreMatrix"]},{name:"NPS矩阵",types:["scoreMatrixNps"]}];e.exports=n},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(396),s=n(398),c=n(55).randomId,u=n(103),l=function(){function e(t){o(this,e),this.page=t}return r(e,[{key:"insertItem2Group",value:function(e,t){e.group=t,t.eqxItems.push(e),e.$item&&t.$ul.append(e.$item)}},{key:"changeEqxItemVerticalPosition",value:function(e){function t(e){return Math.min.apply(Math,i(e.map(function(e){return e.getAbsolutePos().top})))}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].getAbsolutePos(),o=i.top;e[n].updateTop(t+n-o)}}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(e){var a=e.group;if(a){var s=this.reLayout(a),c=s.findIndex(function(t){return t===e});if(c<0||0===o){return null}if(o<0){for(var u=c;u>0&&o<0;u--,o++){s[u]=[s[u-1],s[u-1]=s[u]][0]}}else{if(o>0){for(var l=c;l<s.length-1&&o>0;l++,o--){s[l]=[s[l+1],s[l+1]=s[l]][0]}}}n(s,t(s)),this.reLayout(s,r)}}}},{key:"reLayout",value:function(){function e(e){return e.sort(function(e,t){var n=e.getAbsolutePos(),i=n.top,o=t.getAbsolutePos(),r=o.top;return i-r}),e}function t(e){for(var t=1;t<e.length;t++){var n=e[t],o=e[t-1],r=n.getAbsolutePos().top,a=o.getAbsolutePos().top,s=o.getAbsolutePos().height,c=a+s+i;e[t].updateTop(c-r)}return e}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layer,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(Array.isArray(n)){var o=n.slice()}else{if(n instanceof a){o=e(n.eqxItems.slice())}else{if(!(n instanceof s)){return[]}o=e(n.getDirectItems().slice())}}return t(o)}},{key:"extractComps",value:function(e){var t=[];return e.forEach(function(e){e.isGroupItem()?t.push.apply(t,i(e.getAllSubEqxComps())):t.push(e)}),t}},{key:"copyItems",value:function(e,t,n,i){var o=this,r=[];return e.sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(e){e.isGroupItem()?r.push(o._copyGroupItem(e,t,n,i)):r.push(o._copyCompItem(e,t,n,i))}),r}},{key:"_copyGroupItem",value:function(e,t,n,i){var o=this,r=[];e.eqxItems.slice().sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(e){r.push(e.isGroupItem()?o._copyGroupItem(e,0,n,i):o._copyCompItem(e,0,n,i))});var a=this.combineItems(r.map(function(e){return e.id})),s=e.group;return e.isFunTemplate()&&(a.json=Object.assign({},e.json,a.json)),a&&t&&s&&(a.group=s,this.insertItem2Group(a,s),s.autoSize()),a.sourceEqxItem=e,a}},{key:"_copyCompItem",value:function(e,t,n,i){var o=this,r=JSON.parse(JSON.stringify(e.compJson));e.isBaseLayerElement||(1===n?r.css.left+=10:2===n&&(r.css.top+=10)),i=i.filter(function(e){return"e"===e.sourceType&&e.sourceId===r.id}).map(function(e){return delete e.$$hashKey,JSON.parse(JSON.stringify(e))}),delete r.id,delete r.css.zIndex;var a=this.page.addCompJson(r),s=a?this.page.initEqxCompByJson(a):null,c=a.properties;if(!s){return null}if(this.page.renderEqxComp(s),i.length&&i.forEach(function(e){e.sourceId===e.targetId&&(e.targetId=a.id),e.sourceId=a.id;var t=o.page.pageJson.properties,n=t.triggerGroup.findIndex(function(t){return e.targetId===t.targetId&&e.sourceId===t.sourceId&&e.eventType===t.eventType&&e.targetState===t.targetState});n===-1&&t.triggerGroup.push(e)}),1===c.initType?s.startAnimation({maxCount:1,reset:!0}):s.eleHide(),s&&t&&e.group){var u=e.group;s.group=u,this.insertItem2Group(s,u),u.autoSize()}return s.sourceEqxItem=e,s}},{key:"breakUpGroupItem",value:function(e){var t,n=this.layer,o=n.eqxItems.find(function(t){return t.isGroupItem()&&t.id===e}),r=o.group;if(this._includeFunTemplates([o])){return[]}if(!o){return[]}var a=o.eqxItems.slice(),s=u.parseTransform(o.getTransform()).rotate;r&&(t=r.eqxItems).push.apply(t,i(a)),(r||n).$ul.append(a.map(function(e){var t=e.getAbsolutePos(),n=t.left,i=t.top;if(r){var o=r.getAbsolutePos(),a=o.left,c=o.top;n-=a,i-=c}if(e.$item.css({left:n,top:i}),s){var l=u.parseTransform(e.getTransform()).rotate;e.$item.css({transform:"rotateZ("+l+"deg)"})}return e.$item})),o.$group.remove(),o.$group=null,o.$groupBox=null,o.$ul=null,a.forEach(function(e){e.group=r||null,e.parent=r||n});var c=n.eqxItems.findIndex(function(e){return e===o});return c>-1&&(n.eqxItems.splice(c,1),o.replaceGroupByComp(c)),r&&(c=r.eqxItems.findIndex(function(e){return e===o}),c>-1&&r.eqxItems.splice(c,1)),a}},{key:"combineItems",value:function(e){function t(e){var t=e.filter(function(e){return e.isGroupItem()||"16"!==e.type});e.length=0,e.push.apply(e,i(t))}var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=this.page,s=this.layer,c=e.map(function(e){return r.getEqxItem(e)});if(this._includeFunTemplates(c)){return null}if(t(c),this.isExistNested(c)){return null}var u=this._findCommonAncestor(c);if(this._limitNestDepth(u,c,o),this._updateIndexCrossLayer(c),!c||!c.length){return null}c.forEach(function(e){if(e.group){var t=e.group.eqxItems.findIndex(function(t){return t===e});t>-1&&e.group.eqxItems.splice(t,1),e.group!==u&&n._clearEmptyGroup(e.group)}e.eqxLayer!==s&&n._changeItemCrossLayer(e)});var l=-1;u!==s&&u.isGroupItem()&&(l=s.eqxItems.findIndex(function(e){return e===u})),e=c.map(function(e){return e.id});var p=new a({id:this._generateGroupId(),compIds:e},s);return s.initEqxItem(p,l).renderEqxItem(p),p.eqxItems.forEach(function(e){var t=e.getAbsolutePos(),n=t.left,i=t.top,o=p.getAbsolutePos(),r=o.left,a=o.top;n-=r,i-=a,e.$item.css({left:n,top:i})}),u!==s&&u.isGroupItem()&&(this.insertItem2Group(p,u),p.group=u,p.parent=u),this.updateCompsIndex(),p.autoSize(),p}},{key:"_includeFunTemplates",value:function(e){return e.some(function(e){return e.isFunTemplate()})}},{key:"_limitNestDepth",value:function(e,t,n){function o(e,t){var n=a(e);return n>=t?(r(e),l.breakUpGroupItem(e.id)):(e.eqxItems.slice().forEach(function(e){e.isGroupItem()&&o(e,n+1)}),[e])}function r(e){for(var t=e.hasGroupItem();t;){l.breakUpGroupItem(t.id),t=e.hasGroupItem()}}function a(e){if(e){if(e instanceof s){return 0}for(var t=1;e.group;){t++,e=e.group}return t}return -1}var c=[],u=a(e),l=this;return u===-1||u>=n?void (t.length=0):(u<n&&t.forEach(function(e){e.isGroupItem()?c.push.apply(c,i(o(e,n-u))):c.push(e)}),t.length=0,void t.push.apply(t,c))}},{key:"removeEmptyGroups",value:function(){function e(){return n.page.getEqxItems().filter(function(e){return e.isGroupItem()}).find(function(e){return !e.eqxItems.length})}for(var t=[],n=this,i=e();i;){t.push(i),n._clearEmptyGroup(i),i=e()}return t}},{key:"isExistNested",value:function(e){for(var t=0;t<e.length;t++){for(var n=e[t];n.group;){if(e.indexOf(n.group)!==-1){return n}n=n.group}}return !1}},{key:"traceTopItemsContain",value:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n];i.group;){i=i.group}t.indexOf(i)===-1&&t.push(i)}return t}},{key:"filterNestedItems",value:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],o=i,r=!1;i.group;){if(e.indexOf(i.group)!==-1){r=!0;break}i=i.group}r||t.push(o)}return t}},{key:"_updateIndexCrossLayer",value:function(e){var t=this;if(this._isCrossLayer(e)){var n=[],i=[];e.forEach(function(e){e.eqxLayer!==t.layer?i.push(e):n.push(e)}),n.sort(function(e,t){return e.zIndex-t.zIndex}),i.push.apply(i,n),i.forEach(function(e,t){return e.zIndex=t+1})}}},{key:"_changeItemCrossLayer",value:function(e){var t=this;e.isGroupItem()&&e.eqxItems.forEach(function(e){t._changeItemCrossLayer(e)});var n=e.eqxLayer.eqxItems.findIndex(function(t){return t===e});n>-1&&e.eqxLayer.eqxItems.splice(n,1),e.eqxLayer=t.layer,e.eqxLayer.eqxItems.push(e)}},{key:"updateCompsIndex",value:function(){function e(t){var n=[];return t.forEach(function(t){return t.isGroupItem()?n.push.apply(n,i(e(t.eqxItems))):n.push(t)}),n}var t=this.layer.getLayerTreeStructure(),n=e(t);this.layer.updateCompsIndex(n)}},{key:"_clearEmptyGroup",value:function(e){if(e&&e.isGroupItem()&&!e.eqxItems.length){var t=e.group;e.eqxLayer.removeEqxItem(e),this._clearEmptyGroup(t)}}},{key:"_findCommonAncestor",value:function(e){if(1===e.length&&!e[0].isGroupItem()){return e[0].group||this.layer}if(this._isCrossLayer(e)){return this.layer}for(var t=e[0],n=1;n<e.length;n++){t=this._find2CommonAncestor(t,e[n])}return t}},{key:"_isCrossLayer",value:function(e){for(var t=0;t<e.length;t++){if(e[t].eqxLayer!==this.layer){return !0}}return !1}},{key:"_find2CommonAncestor",value:function(e,t){if(e===this.layer||t===this.layer){return this.layer}var n=this._computeLinkLength(e),i=this._computeLinkLength(t),o=Math.abs(n-i);if(n<i){var r=[t,e];e=r[0],t=r[1]}for(;o--;){e=e.group}for(;e&&t;){if(e===t){return e}e=e.group,t=t.group}return this.layer}},{key:"_computeLinkLength",value:function(e){for(var t=0;e;){t++,e=e.group}return t}},{key:"_generateGroupId",value:function(){return"group:"+c()}},{key:"layer",get:function(){return this.page.getCurrentLayer()}}]),e}();e.exports=l},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},u=n(102),l=n(105),p=n(106),d=n(103),f=n(397),h=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.eqxLayer=n,i.eqxPage=i.eqxLayer.eqxPage,i.eqxScene=i.eqxPage.eqxScene,i.id=e.id,i.itemIds=e.compIds||[],i.css=e.css||{},i.eqxItems=[],i.$group=null,i.displayed="1",i.locked=!1,i.tag=!1,i.visited=!1,i.json=e,i.$ability={flexLine:"n,ne,e,se,s,sw,w,nw,r"},i}return a(t,e),s(t,[{key:"isBaseLayerElements",value:function(){this._isBaseLayerElement=this.getAllSubEqxComps().every(function(e){return !e.compJson.properties.isOverlayElement})}},{key:"isFunTemplate",value:function(){if(1===this.json.type){return !0}}},{key:"isEleTemplate",value:function(){if(1===this.json.type&&this.json.eleType){return this.json.eleType}}},{key:"destroy",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.eqxLayer=null,this.eqxPage=null,this.eqxScene=null,this.$group&&(this.$group.remove(),this.$group=null,this.$groupBox=null,this.$ul=null)}},{key:"removeEqxItem",value:function(e){var t=this.eqxItems.findIndex(function(t){return t===e});t>-1&&this.eqxItems.splice(t,1),e.destroy()}},{key:"isPropCanEdit",value:function(e){var t=this.FtEditableProps;return[t.addGroup.addGroup,t.deleteGroup.deleteGroup,t.moveGroup.moveGroup].includes(e)}},{key:"getFtValue",value:function(){return 10}},{key:"updateTop",value:function(e){this.getAllSubEqxComps().forEach(function(t){t.updateCss({top:t.css.top+e})}),this.autoSize()}},{key:"getFtEditableProps",value:function(){var e=this.FtEditableProps;return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this).concat([e.addGroup.addGroup,e.deleteGroup.deleteGroup,e.moveGroup.moveGroup])}},{key:"hasGroupItem",value:function(){for(var e=0;e<this.eqxItems.length;e++){if(this.eqxItems[e].isGroupItem()){return this.eqxItems[e]}}return null}},{key:"getAllSubEqxComps",value:function(){for(var e=[],t=0;t<this.eqxItems.length;t++){var n=this.eqxItems[t];n.isGroupItem()?e.push.apply(e,i(n.getAllSubEqxComps())):e.push(n)}return e}},{key:"getAllSubEqxItems",value:function(){function e(t,n){n=n||[],t.eqxItems.forEach(function(t){t.isGroupItem()?(n.push(t),e(t,n)):n.push(t)})}var t=[];return e(this,t),t}},{key:"hasSubItemsLocked",value:function(){for(var e=this.getAllSubEqxItems(),t=0;t<e.length;t++){if(e[t].isEditLocked){return !0}}return !1}},{key:"_initGroupIndex",value:function(){return Math.max.apply(Math,i(this.eqxItems.map(function(e){return e.zIndex})))}},{key:"canMove",value:function(){return !this.isEditLocked&&!this.hasSubItemsLocked()}},{key:"onMoveBefore",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMoveBefore",this).call(this),this.eqxItems.forEach(function(e){return e.onMoveBefore()})}},{key:"onMoveEnd",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMoveEnd",this).call(this),this.eqxItems.forEach(function(e){return e.onMoveEnd()})}},{key:"instantMove",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.getAllSubEqxComps().forEach(function(n){n.instantMove(e,t,!1)}),this.autoSize())}},{key:"getTransform",value:function(){return this.css.transform||"rotateZ(0)"}},{key:"onResizeStart",value:function(){return this.eqxItems.forEach(function(e){return e.onResizeStart()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeStart",this).call(this)}},{key:"onResize",value:function(e,t,n,i,o,r,a,s,c){function u(e,t,n,i,o,r,a,s,c,u){for(var f=0;f<e.length;f++){var m=e[f];if(!m.isEditLocked){var v=m.oldAbsolutePosition,y=v.left,b=v.top,x=v.width,w=v.height,k=v.transform,E=d.parseTransform(k).rotate,I=new l(y,b,x,w),_=p(I,u),S=g(t,n,i,_,o,(E-u+360)%360,r,a,s,c),O=h(S,u);m.updateSize({},{top:O.top,left:O.left,width:O.width,height:O.height})}}return e}function p(e,t){if(!t){return e}var n=e.rotate(t).p1.transform2RotateCoord(t);return new l(n,e.width,e.height)}function h(e,t){if(!t){return e}e instanceof l||(e=new l(e));var n=e.p1.transform2RotateCoord(-t),i=e.p2.transform2RotateCoord(-t),o=new l(n,i,t).rotate(-t),r=o.p1,a=r.x,s=r.y,c=o.width,u=o.height;return{width:c,height:u,left:a,top:s}}function g(e,t,n,i,o,r,a,s,c,u){if(r){return v(e,i,r,o)}var l=0,p=0,d=0,f=0,h=i.p1.x,g=i.p1.y,m=i.width,y=i.height,b=m,x=y;if("nw"===o){var w=a.distance2Point(i.p2),k=s.distance2Point(i.p1);l=-w*t/(w+b+k),p=-b*t/(w+b+k);var E=c.distance2Point(i.p2),I=u.distance2Point(i.p1);return d=-E*n/(E+x+I),f=-x*n/(E+x+I),{left:h-l-p,width:m+p,top:g-d-f,height:y+f}}if("ne"===o){var _=a.distance2Point(i.p1),S=s.distance2Point(i.p2);l=_*t/(_+b+S),p=b*t/(_+b+S);var O=c.distance2Point(i.p2),P=u.distance2Point(i.p1);return d=-O*n/(O+x+P),f=-x*n/(O+x+P),{left:h+l,width:m+p,top:g-d-f,height:y+f}}if("se"===o){var $=a.distance2Point(i.p1),T=s.distance2Point(i.p2);l=$*t/($+b+T),p=b*t/($+b+T);var C=c.distance2Point(i.p1),q=u.distance2Point(i.p2);return d=C*n/(C+x+q),f=x*n/(C+x+q),{left:h+l,width:m+p,top:g+d,height:y+f}}if("sw"===o){var j=a.distance2Point(i.p2),R=s.distance2Point(i.p1);l=-j*t/(j+b+R),p=-b*t/(j+b+R);var L=c.distance2Point(i.p1),A=u.distance2Point(i.p2);return d=L*n/(L+x+A),f=x*n/(L+x+A),{left:h-l-p,width:m+p,top:g+d,height:y+f}}}function m(e,t){var n=[e.nw,e.ne,e.se,e.sw],i=Number.MAX_SAFE_INTEGER,o=0;return n.forEach(function(e,n){var r=e.distance2Point(t);i>r&&(i=r,o=n)}),o}function v(e,t,n,i){var o=["nw","ne","se","sw"],r=y.oldAbsolutePosition,a=r.left,s=r.top,c=r.width,u=r.height,p=r.transform,h=d.parseTransform(p).rotate,g=new l(a,s,c,u).rotate(h),v=new l(g.p1.transform2RotateCoord(h),c,u),b=l.getBoundingRect(v,n),x=new l(b.p1.transform2RotateCoord(n),b.width,b.height),w=new l(t.rotate(n).p1.transform2RotateCoord(n),t.width,t.height),k=m(x,g[i].transform2RotateCoord(h+n)),E=o[k],I=x[E],_=o[(k+2)%4],S=x[_],O=e.weight(h+n),P=O.x,$=O.y;if("nw"===E){var T=new f(S,x[o[(k+1)%4]]),C=new f(I,x[o[(k+3)%4]]),q=new f(S,x[o[(k+3)%4]]),j=new f(I,x[o[(k+1)%4]])}else{"ne"===E?(T=new f(S,x[o[(k+3)%4]]),C=new f(I,x[o[(k+1)%4]]),q=new f(S,x[o[(k+1)%4]]),j=new f(I,x[o[(k+3)%4]])):"se"===E?(T=new f(S,x[o[(k+1)%4]]),C=new f(I,x[o[(k+3)%4]]),q=new f(S,x[o[(k+3)%4]]),j=new f(I,x[o[(k+1)%4]])):"sw"===E&&(T=new f(S,x[o[(k+3)%4]]),C=new f(I,x[o[(k+1)%4]]),q=new f(S,x[o[(k+1)%4]]),j=new f(I,x[o[(k+3)%4]]))}var R=0,L=0,A=0,M=0,D=null,F=w.width,J=w.height;if("nw"===E){var B=T.distance2Point(w.p2),N=C.distance2Point(w.p1);R=-B*P/(B+F+N),L=-F*P/(B+F+N);var z=q.distance2Point(w.p2),W=j.distance2Point(w.p1);A=-z*$/(z+J+W),M=-J*$/(z+J+W),D={left:w.p1.x-R-L,width:w.width+L,top:w.p1.y-A-M,height:w.height+M}}else{if("ne"===E){var U=T.distance2Point(w.p1),V=C.distance2Point(w.p2);R=U*P/(U+F+V),L=F*P/(U+F+V);var G=q.distance2Point(w.p2),H=j.distance2Point(w.p1);A=-G*$/(G+J+H),M=-J*$/(G+J+H),D={left:w.p1.x+R,width:w.width+L,top:w.p1.y-A-M,height:w.height+M}}else{if("se"===E){var Q=T.distance2Point(w.p1),X=C.distance2Point(w.p2);R=Q*P/(Q+F+X),L=F*P/(Q+F+X);var Y=q.distance2Point(w.p1),K=j.distance2Point(w.p2);A=Y*$/(Y+J+K),M=J*$/(Y+J+K),D={left:w.p1.x+R,width:w.width+L,top:w.p1.y+A,height:w.height+M}}else{if("sw"===E){var Z=T.distance2Point(w.p2),ee=C.distance2Point(w.p1);R=-Z*P/(Z+F+ee),L=-F*P/(Z+F+ee);var te=q.distance2Point(w.p1),ne=j.distance2Point(w.p2);A=te*$/(te+J+ne),M=J*$/(te+J+ne),D={left:w.p1.x-R-L,width:w.width+L,top:w.p1.y+A,height:w.height+M}}}}}return new l(new l(D).rotate(-n).p1.transform2RotateCoord(-n),D.width,D.height)}var y=this,b=y.getAllSubEqxComps();u(b,e,t,n,i,o,r,a,s,c),y.autoSize()}},{key:"onResizeEnd",value:function(){this.eqxItems.forEach(function(e){return e.onResizeEnd()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeEnd",this).call(this)}},{key:"onRotateStart",value:function(){return this.eqxItems.forEach(function(e){return e.onRotateStart()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotateStart",this).call(this)}},{key:"onRotateEnd",value:function(){this.eqxItems.forEach(function(e){return e.onRotateEnd()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotateEnd",this).call(this)}},{key:"onRotate",value:function(e){function n(e,t){e.eqxItems.forEach(function(e){e.isGroupItem()&&(t.push(e),n(e,t))})}function i(e,t){e.eqxItems.forEach(function(e){e.isGroupItem()?i(e,t):t.push(e)})}function o(e,t){var n=d.parseTransform(e.oldTransform).rotate;e.updateCss({transform:"rotateZ("+(n+t)+"deg)"})}function r(e,t,n){if(!e.isEditLocked){var i=d.parseTransform(e.oldTransform).rotate,o=d.parseTransform(e.getTransform()).rotate,r=e.getAbsolutePos(),a=r.width,s=r.height,c=r.top,u=r.left,p=new l(u,c,a,s),f=p.center(),h=f.pointRotate2Point(n,i+t-o),g=h.x-f.x,m=h.y-f.y;p.move(g,m),e.updateCss({top:p.p1.y,left:p.p1.x,transform:"rotateZ("+(i+t)+"deg)"})}}var a=[],s=[],u=this.getAbsolutePos(),p=u.width,f=u.height,h=u.top,g=u.left,m=new l(g,h,p,f),v=m.center(),y=d.parseTransform(this.oldTransform).rotate;i(this,a),n(this,s),a.forEach(function(t){return r(t,(e-y+360)%360,v)}),s.forEach(function(t){return o(t,(e-y+360)%360)}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotate",this).call(this,"rotateZ("+(e+360)%360+"deg)",{type:"rotate",source:this})}},{key:"updateTransform",value:function(e){this.css.transform=e,this.$item.css({transform:e})}},{key:"updateCss",value:function(e){var t=this;Object.keys(e).forEach(function(n){t.css[n]=e[n]})}},{key:"updateItemCss",value:function(e){var t=e-parseFloat(this.getAbsolutePos().top);this.getAllSubEqxComps().forEach(function(e){e.oldPos=JSON.parse(JSON.stringify(e.getAbsolutePos())),e.updateLeftTop(0,t)}),this.autoSizeTopDown()}},{key:"autoSize",value:function(){this.getAllSubEqxComps().forEach(function(e){e.autoSize()})}},{key:"updateLeftTop",value:function(e,t){this.eqxItems.forEach(function(n){n.updateLeftTop(e,t)})}},{key:"isGroupItem",value:function(){return !0}},{key:"getName",value:function(){return this.name||"组合"}},{key:"toJson",value:function(){var e=this.css.transform,t=this.getArrIndex(),n={id:this.id,name:this.name,compIds:this.eqxItems.map(function(e){return e.id})};return isNaN(parseInt(t))||(n.arrIndex=t),e&&(n.css={transform:e}),this.isFunTemplate()&&(n.type=1),this.isEleTemplate&&(n.eleType=this.json.eleType),n}},{key:"autoSizeTopDown",value:function(e){this._updateSize(),e&&"rotate"===e.type&&e.source===this&&!this.hasSubItemsLocked()||this.eqxItems.forEach(function(t){return t.autoSizeTopDown(e)}),this.fire("autoSizeTopDown.after")}},{key:"getAbsolutePos",value:function(){function e(e,t){var n=[];e.eqxItems.forEach(function(e){var t=e.getAbsolutePos(),i=t.top,o=t.left,r=t.width,a=t.height,s=t.transform,c=d.parseTransform(s).rotate,u=new l(o,i,r,a).rotate(c),p=u.nw,f=u.ne,h=u.sw,g=u.se;n.push.apply(n,[p,f,h,g])});for(var i=n[0].transform2RotateCoord(t),o=i,r=i,a=i,s=i,c=1;c<n.length;c++){i=n[c].transform2RotateCoord(t),i.x<s.x&&(s=i),i.x>r.x&&(r=i),i.y<o.y&&(o=i),i.y>a.y&&(a=i)}var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,g=Number.MAX_SAFE_INTEGER;[o,r,a,s].forEach(function(e){e.x>u&&(u=e.x),e.x<f&&(f=e.x),e.y>h&&(h=e.y),e.y<g&&(g=e.y)});var m=new p(f,g).transform2RotateCoord(-t),v=new p(u,h).transform2RotateCoord(-t),y=new l(m,v,t).rotate(-t),b={top:y.p1.y,left:y.p1.x,width:y.width,height:y.height,transform:e.getTransform(),bottom:y.p1.y+y.height};return b}if(!this.eqxItems.length){return{top:0,left:0,width:0,height:0,transform:"",bottom:0}}var t=d.parseTransform(this.getTransform()).rotate;return e(this,t)}},{key:"render",value:function(){return this.rendered?this.$group:(this.$group=$('<li class="item item-group" id="'+this.id+'">\n                <div class="group-box">\n                    <ul class="group-items"></ul>\n                </div>\n            </li>'),this._updateSize().autoZIndex().$group.attr("eqx-id",this.id),this.$groupBox=this.$group.find(".group-box"),this.$ul=this.$groupBox.find("ul"),this.$ul.append(this.eqxItems.map(function(e){return e.render()})),this.rendered=!0,this.$group)}},{key:"getZIndex",value:function(){for(var e=-1,t=0;t<this.eqxItems.length;t++){var n=this.eqxItems[t];e=Math.max(n.getZIndex(),e)}return e}},{key:"autoZIndex",value:function(){return this.eqxItems.forEach(function(e){return e.autoZIndex()}),this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"addEqxItems",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}n.forEach(function(t){e.addEqxItem(t)})}},{key:"addEqxItem",value:function(e){e&&!this.eqxItems.includes(e)&&(this.eqxItems.push(e),e.group=this,e.parent=this)}},{key:"addMoveClass",value:function(){this.eqxItems.forEach(function(e){return e.addMoveClass()})}},{key:"removeAutoClass",value:function(){this.eqxItems.forEach(function(e){return e.removeAutoClass()})}},{key:"scrollIntoView",value:function(){this.$item&&this.$item[0].scrollIntoViewIfNeeded()}},{key:"addCurClass",value:function(){this.$item&&this.$item.addClass("cur")}},{key:"removeDragClass",value:function(){this.$item&&this.$item.removeClass("cur")}},{key:"replaceGroupByComp",value:function(e){var t=this.eqxLayer;this.eqxItems.sort(function(e,t){return e.getZIndex()-t.getZIndex()}).forEach(function(n,o){var r,a=t.eqxItems.findIndex(function(e){return e===n});a>-1&&(r=t.eqxItems).splice.apply(r,[e+o,0].concat(i(t.eqxItems.splice(a,1))))}),this.eqxPage.splitCompsByLayer(),this.eqxPage.EqxDragManager.resetCompPosition()}},{key:"getArrIndex",value:function(){return this.json.arrIndex||this.getZIndex()}},{key:"setArrIndex",value:function(e){this.json.arrIndex=e}},{key:"moveCompByIndex",value:function(e){var t=this.eqxItems,n=this;t.forEach(function(t){var i=e.findIndex(function(e){return e==t}),o=e.splice(i,1)[0],r=e.findIndex(function(e){return e==n});e.splice(r,0,o)})}},{key:"initZindex",value:function(){for(var e=100000000000000000000,t=0;t<this.eqxItems.length;t++){var n=this.eqxItems[t];e=Math.min(n.getZIndex(),e)}return e}},{key:"isEditLocked",get:function(){return this.eqxItems.every(function(e){return e.isEditLocked})},set:function(e){this.eqxItems.forEach(function(e){e.isGroupItem()||(e.isEditLocked=!1)})}},{key:"isBaseLayerElement",get:function(){return void 0===this._isBaseLayerElement&&this.isBaseLayerElements(),this._isBaseLayerElement}},{key:"$item",get:function(){return this.$group}},{key:"zIndex",get:function(){return this.css.zIndex||this._initGroupIndex()},set:function(e){this.css.zIndex=e}},{key:"name",get:function(){return this.json.name},set:function(e){this.json.name=e}}]),t}(u);e.exports=h},function(e,t,n){function i(){switch(arguments.length){case 2:this.p1=arguments[0],this.p2=arguments[1],this.A=this.p1.y-this.p2.y,this.B=this.p2.x-this.p1.x,this.C=this.p1.x*this.p2.y-this.p2.x*this.p1.y;break;case 3:this.A=arguments[0],this.B=arguments[1],this.C=arguments[2];break;default:throw new Error("Invalid arguments for Line")}}var o=n(106);i.prototype.toString=function(){},i.prototype.distanceTo=function(e){if(e instanceof o){return this.distance2Point(e)}if(e instanceof i){return this.distance2Line(e)}throw new Error("Unknown geo type")},i.prototype.whichSide=function(e){return this.A*e.x+this.B*e.y+this.C},i.prototype.distance2Point=function(e){return Math.abs(this.A*e.x+this.B*e.y+this.C)/Math.sqrt(this.A*this.A+this.B*this.B)},i.prototype.distance2Line=function(e){return Math.abs(this.C-e.C)/Math.sqrt(this.A*this.A+this.B*this.B)},i.prototype.slope=function(){return -(this.A/this.B)},i.getIncludedAngle=function(e,t){var n=e.slope(),i=t.slope(),o=Math.abs((i-n)/(1+n*i));return 180*Math.atan(o)/Math.PI},window.Line=i,e.exports=i},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(396),s=n(78),c=n(75),u=n(64).COMP_TYPE,l="",p=n(24).isPc,d=n(22).$loadParallax,f=n(81).qiniuZoom,h=(n(70).ANIMATION_TYPE,function(){function e(t,n){o(this,e),this.eqxPage=n,this.eqxItems=[],this.$layer=null,this.$layerBox=null,this.layerBg=null,this.$ul=null,this.lock=!1,this.allowOperate=!0,this.json=t,this.name=t.name,this.items=t.items,this.id=t.id,this._lastHash=t.hash}return r(e,[{key:"getEqxComps",value:function(){return this.eqxItems.filter(function(e){return !e.isGroupItem()})}},{key:"removeEqxItem",value:function(e){e.group&&e.group.removeEqxItem(e);var t=this.eqxItems.findIndex(function(t){return t===e});t>-1&&this.eqxItems.splice(t,1),e.destroy()}},{key:"setAllowOperate",value:function(e){return this.allowOperate=e,this.allowOperate}},{key:"_getCompsAndGroups",value:function(){for(var e=[],t=[],n=0;n<this.items.length;n++){var i=this.items[n];/group/.test(i.id)?t.push(i):e.push(i)}return{comps:e,groups:t}}},{key:"_initEqxGroup",value:function(e){return new a(e,this)}},{key:"_initEqxComp",value:function(e){var t=c[e.type],n=this.eqxPage.id||"";return t&&t.prototype instanceof s?new t(e,this):""}},{key:"init",value:function(){return this}},{key:"initEqxItems",value:function(e,t){var n=this;if(!e){var o=this._getCompsAndGroups();e=o.comps,t=o.groups}var r=[];return e.map(function(e){return e.name=n.eqxPage.getCompName(e),e}).filter(function(e){var t=e.type;return"EqxBackground"!==u[t]&&"EqxGravity"!==u[t]}).sort(function(e,t){var n=e.css.zIndex,i=t.css.zIndex;return n-i}).map(function(e,t){return e.num=t+1,e.css.zIndex=t+1,e}).forEach(function(e){var t=n._initEqxComp(e);t&&n.eqxItems.push(t),r.push(t)}),r.push.apply(r,i(t.map(function(e){var t=n._initEqxGroup(e);return n.eqxItems.push(t),t.itemIds.forEach(function(e){return t.addEqxItem(n.getEqxItem(e))}),t}))),r}},{key:"initEqxItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this;return e.isGroupItem()?(t>-1?n.eqxItems.splice(t,0,e):n.eqxItems.push(e),e.addEqxItems.apply(e,i(e.itemIds.map(function(e){return n.getEqxItem(e)})))):t>-1?n.eqxItems.splice(t,0,e):n.eqxItems.push(e),this}},{key:"renderEqxItems",value:function(){for(var e=[],t=this.eqxItems.length,n=t-1;n>=0;n--){var i=this.eqxItems[n];i.rendered||e.push(i.render())}return this.$ul.append(e),this}},{key:"renderEqxItem",value:function(e,t){t&&e.rendered&&(e.rendered=!1,e.destroy());var n=e.group?e.group.$ul:this.$ul;return e.rendered||n.append(e.render()),this}},{key:"toJson",value:function(){var e=[],t=[],n=this.flash||{},i=n.duration,o=void 0===i?null:i,r=n.durationType,s=void 0===r?0:r,c=this.json,u=c.thumbnail,l=c.area,p=c.id,d=c.displayed,f=c.screenBg;this.eqxItems.sort(function(e,t){return e.zIndex-t.zIndex});for(var h=0;h<this.eqxItems.length;h++){var g=this.eqxItems[h];g instanceof a?t.push(g.toJson()):e.push(g.toJson())}if(null!==o&&null!==s){var m={duration:o,durationType:s}}return{id:p,area:l,flash:m,elems:e,groups:t,displayed:d,thumbnail:u,screenBg:f,name:this.name,hash:this._lastHash,compIds:this.eqxItems.map(function(e){return e.id})}}},{key:"updateEqxLayerIndex",value:function(e){this.$layer&&(this.zIndex=e,this.$layer&&this.$layer.css({zIndex:e}))}},{key:"isEqxLayer",value:function(){return !0}},{key:"render",value:function(){var e=this.eqxPage.pageJson,t=void 0===e?{}:e;t.properties.longPage;return this.$layer=$('<section class="layer" id="'+this.id+'" style="position: absolute;width: 100%;height: 100%;">\n                <div class="layer-box">\n                    <ul id="edit_area" class="layer-items edit_area weebly-content-area weebly-area-active"></ul>\n                </div>\n            </section>'),this.$layerBox=this.$layer.find(".layer-box"),this.$ul=this.$layerBox.find("ul"),this.$layer.css({zIndex:this.zIndex}),this.initEqxItems(),this.renderEqxItems(),p()||window.top===window||this.setIframeUlTopAndLeft(),this.renderBg(this.addBgJson(this.json.screenBg)),this.display(),this.initElementsParallax(),this.$layer}},{key:"initElementsParallax",value:function(){var e=this,t=this.items,n=t.some(function(e){var t=e.properties||{},n=t.GSensor,i=void 0===n?{}:n;return i.isUsed});n&&d().then(function(){var t=window.Parallax;e.parallax=new t(e.$ul.get(0))})}},{key:"display",value:function(){this.displayed?(this.$layer.show(),this.allowOperate=!0):(this.$layer.hide(),this.allowOperate=!1)}},{key:"hide",value:function(){this.$layer&&this.$layer.hide()}},{key:"show",value:function(){this.$layer&&(this.$layer.show(),this.findSpecAnimItem(1))}},{key:"findSpecAnimItem",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}this.getEqxComps().forEach(function(e){for(var n=e.compJson.properties.anim,i=void 0===n?[]:n,o=0;o<i.length;o++){var r=i[o];if(t.indexOf(r.animClassify)>-1){e.eleShow();break}}})}},{key:"getEqxItem",value:function(e){return this.eqxItems.find(function(t){return t.id===e})}},{key:"hasGroupsInLayer",value:function(){return this.items.some(function(e){return/group/.test(e.id)})}},{key:"getLayerTreeStructure",value:function(){function e(n){return n.forEach(function(t){return t.isGroupItem()&&e(t.eqxItems)}),n.sort(function(e,n){var i=e.getZIndex(),o=n.getZIndex();return t?i-o:o-i}),n}var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getDirectItems();return e(n)}},{key:"updateItemsIndexBySplit",value:function(e,t){var n=this.getLayerTreeStructure(!0),o=t.length,r=n.indexOf(t[0]),a=n.indexOf(t[o-1]);if(e.startsWith("+")){var s=(/\+(\d+|\+)/.exec(e)||[])[1]||1;s=Math.min(s,n.length-a),n.splice.apply(n,[r+s,0].concat(i(n.splice(r,o))))}else{if(!e.startsWith("-")){throw new TypeError("invalid action: "+e)}var c=(/-(\d+|\+)/.exec(e)||[])[1]||1;c=Math.min(c,r),n.splice.apply(n,[r-c,0].concat(i(n.splice(r,o))))}var u=this._getCompsFromTree(n,!0);this.updateCompsIndex(u,!0)}},{key:"updateItemIndex",value:function(e,t){if(e&&t){var n=this.eqxPage,i=t.getZIndex(),o=n.overlayElementQueue,r=t.group?t.group.eqxItems:o,a=r.indexOf(t);if("++"===e){r.push(r.splice(a,1)[0])}else{if("--"===e){r.unshift(r.splice(a,1)[0])}else{if(e.startsWith("+")){var s=(/\+(\d+|\+)/.exec(e)||[])[1]||1;s=Math.min(s,r.length-a),r.splice(a+s,0,r.splice(a,1)[0])}else{if(!e.startsWith("-")){throw new TypeError("invalid action: "+e)}var c=(/-(\d+|\+)/.exec(e)||[])[1]||1;c=Math.min(c,a),r.splice(a-c,0,r.splice(a,1)[0])}}}this.updateCompsIndex(this._getCompsFromTree(r,!0),!0),n.combineEqxItems();var u=t.getZIndex();l("updateItemIndex",i,"-->",e,"-->",u,t)}}},{key:"_getCompsFromTree",value:function(e){function t(e,t){var n=e.getZIndex()-t.getZIndex();return o?n:-n}var n=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return e.forEach(function(e){return e.isGroupItem()?r.push.apply(r,i(n._getCompsFromTree(e.eqxItems).sort(t))):r.push(e)}),r}},{key:"updateCompsIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.length,o=i-1;o>=0;o--){var r=e[o],a=t?o+1:i-o;n&&(a+=n),r.updateCss({zIndex:a})}this.autoZIndex()}},{key:"autoZIndex",value:function(){this.getDirectItems().forEach(function(e){return e.autoZIndex()})}},{key:"getDirectItems",value:function(){return this.eqxItems.filter(function(e){return !e.group})}},{key:"deleteEqxItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e.isGroupItem()&&e.eqxItems.forEach(function(e){return n.deleteEqxItem(e)});var i=n.eqxItems.findIndex(function(t){return t===e});i>-1&&n.eqxItems.splice(i,1),e.group&&(i=e.group.eqxItems.findIndex(function(t){return t===e}),i>-1&&e.group.eqxItems.splice(i,1)),t&&e.destroy()}},{key:"addEqxItems",value:function(e){var t,n=this;(t=n.eqxItems).push.apply(t,i(e)),e.forEach(function(e){e.eqxLayer.deleteEqxItem(e,!1),e.eqxLayer=n,n.$ul.append(e.$item)})}},{key:"destroy",value:function(){this.$layer.remove(),this.$layer=null,this.$layerBox=null,this.$ul=null}},{key:"setUlTopAndLeft",value:function(){if(!this.eqxScene.config.disableSetUlTopAndLeft){var e,t;this.width/this.height>=320/486?e=(this.width/(this.height/486)-320)/2:t=(this.height/(this.width/320)-486)/2,e&&this.$ul.css({marginLeft:e})}}},{key:"setIframeUlTopAndLeft",value:function(){var e="scale("+this.width/320+")";this.$ul.css({transform:e,"transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%"})}},{key:"initEqxBgByJson",value:function(e){if(e){var t=e.properties.bgColor,n=e.properties.imgSrc;if(t&&!n){var i='<div class="layer-bg" style="width: 100%; height: 100%; background-color: '+e.properties.bgColor+';"></div>'}else{i='<div class="layer-bg" style="width: 100%; height: 100%;background-image: url(\''+f(n,320,486)+"');\n                        background-size: cover; background-position: 50% 50%;\n                        background-origin: content-box;\"></div>"}return this.layerBg=$('<div style="width: 100%; height: 100%; overflow: hidden;position: absolute;z-index: -1;opacity: '+e.css.opacity+'">\n                '+i+"\n            </div>"),this.layerBg}}},{key:"renderBg",value:function(e){var t=this.$layer.find(".layer-bg");t?this.$layer.append(e):""}},{key:"addBgJson",value:function(e){return this.deleteBg(),this.json.screenBg=e,this.initEqxBgByJson(e)}},{key:"deleteBg",value:function(){this.layerBg&&this.layerBg.remove()}},{key:"updateBgOpacity",value:function(e){this.layerBg.css({opacity:e})}},{key:"displayed",get:function(){var e=this.json.displayed,t=void 0===e||e;return t},set:function(e){this.json.displayed=e}},{key:"zIndex",get:function(){return this.json.zIndex},set:function(e){this.json.zIndex=e}},{key:"width",get:function(){return this.eqxPage.width}},{key:"height",get:function(){return this.eqxPage.height}},{key:"eqxScene",get:function(){return this.eqxPage.eqxScene}},{key:"thumbnail",get:function(){return this.json.thumbnail},set:function(e){this.json.thumbnail=e}},{key:"area",get:function(){return this.json.area},set:function(e){this.json.area=e}}]),e}());e.exports=h},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.page=t}return i(e,[{key:"copyScreen",value:function(e){var t=this.screens[e],n=this.page.addEmptyEqxLayer(e+1),i=this.page.groupManager,o=this.page.pageJson.properties,r=o.triggerGroup,a=t.getDirectItems(),s=i.copyItems(a,0,0,r);n.addEqxItems(s)}},{key:"addScreen",value:function(){this.page.addEmptyEqxLayer(),this.showCurrentScreen()}},{key:"deleteScreen",value:function(e){var t=this.screens[e];this.page.deleteEqxLayer(t)}},{key:"showCurrentScreen",value:function(){var e=this;this.screens.forEach(function(t){t===e.currentScreen?(t.$layer&&t.$layer.show(),t.setAllowOperate(!0)):(t.$layer&&t.$layer.hide(),t.setAllowOperate(!1))})}},{key:"switchScreen",value:function(e){var t=this.screens[e];this.page.switchCurrentLayer(t),this.showCurrentScreen()}},{key:"getCompsInScreen",value:function(e){return e?e.eqxItems.slice().filter(function(e){return !e.isGroupItem()}):[]}},{key:"findImageCompInScreen",value:function(e){var t=this.getCompsInScreen(e);return t.find(function(e){var t=e.compJson.properties;return !!t.pip})}},{key:"updateCompsTranslateZ",value:function(e,t,n){if(e&&e.length){var i=n||this.currentScreen,o=this.screens.findIndex(function(e){return e===i});return e.forEach(function(e){var n=e.compJson.properties;n.translate3dZ=o*(t||320)}),e}}},{key:"screens",get:function(){return this.page.eqxLayerList.sort(function(e,t){return e.zIndex-t.zIndex})}},{key:"currentScreen",get:function(){return this.page.getCurrentLayer()}},{key:"currentScreenIndex",get:function(){var e=this;return this.screens.findIndex(function(t){return t===e.currentScreen})}}]),e}();e.exports=o},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(72),a=r.RAW_EVENT,s=r.EQX_EVENT,c=n(26).throttle,u="ontouchstart" in window,l=u?"touchstart":"mousedown",p=u?"touchmove":"mousemove",d=u?"touchend":"mouseup",f=u?"touchcancel":"mouseleave",h=n(23).openUrl,g=function(){function e(t,n){i(this,e),n||this.iteratorScene(t)}return o(e,[{key:"iteratorScene",value:function(e){var t=this,n=null;e.pageJson.properties.triggerGroup&&e.pageJson.properties.triggerGroup instanceof Array&&e.pageJson.properties.triggerGroup.forEach(function(i){var o=e;"e"==i.targetType&&(o=e.getEqxCompById(i.targetId)),o&&(i.eventType===a.click?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&n.$li.on("click",function(n){n.preventDefault(),n.stopPropagation(),t.triggerEleByState(o,i,e)})):i.eventType===a.shake?t.addPageTrigger(o,i,e):i.eventType===a.taphold?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&t.addTapholdTrigger(n,o,i,e)):i.eventType===a.slide?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&t.addSlideTrigger(n,o,i,e)):i.eventType===a.mediaEnded?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("ended",function(){t.triggerEleByState(o,i,e)}):n.soundAgent&&$(n.soundAgent.audio).on("ended",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.mediaCanplay?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("canplay",function(){t.triggerEleByState(o,i,e)}):n.soundAgent&&$(n.soundAgent.audio).on("canplay",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.mediaPlaying?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("playing",function(){t.triggerEleByState(o,i,e)}):n.soundAgent&&$(n.soundAgent.audio).on("playing",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.animStart?(n=e.getEqxCompById(i.sourceId),n&&n.$boxDiv&&n.$boxDiv.on("animationstart",function(){t.triggerEleByState(o,i,e)})):i.eventType===a.animEnd?(n=e.getEqxCompById(i.sourceId),n&&n.$boxDiv&&n.$boxDiv.on("animationend",function(){t.triggerEleByState(o,i,e)})):i.eventType===a.animIteration&&(n=e.getEqxCompById(i.sourceId),n&&n.$boxDiv&&n.$boxDiv.on("animationiteration",function(){t.triggerEleByState(o,i,e)})))})}},{key:"addSlideTrigger",value:function(e,t,n,i){function o(o){o.stopPropagation();var r=u?o.originalEvent.targetTouches[0].pageX:o.pageX,l=u?o.originalEvent.targetTouches[0].pageY:o.pageY;m=l-s,g=r-a,(Math.abs(g-h.left)>10||Math.abs(m-h.top)>10)&&c(function(e,t){f.triggerEleByState(e,t,i)},50,100)(t,n),e.$li.css({top:m+"px",left:g+"px"})}function r(){g=h.left,m=h.top,e.$li.css({top:m,left:g}),$(e.$li).off(p,o),$(document).off(d,r)}var a=0,s=0,f=this,h=e.compJson.css,g=h.left,m=h.top;e.$li.on(l,function(t){t.preventDefault(),t.stopPropagation();var n=u?t.originalEvent.targetTouches[0].pageX:t.pageX,i=u?t.originalEvent.targetTouches[0].pageY:t.pageY;a=n-g,s=i-m,$(e.$li).on(p,o),$(document).on(d,r)})}},{key:"addTapholdTrigger",value:function(e,t,n,i){function o(t){t.preventDefault(),t.stopPropagation(),v=u?t.originalEvent.targetTouches[0].pageX:t.pageX,y=u?t.originalEvent.targetTouches[0].pageY:t.pageY,e.$li.bind(d,c).bind(f,c).bind(p,r),h=(new Date).getTime()/1000,a()}function r(e){var t=u?e.originalEvent.targetTouches[0].pageX:e.pageX,n=u?e.originalEvent.targetTouches[0].pageY:e.pageY;(Math.abs(t-v)>10||Math.abs(n-y)>10)&&c()}function a(){var e=(new Date).getTime()/1000,o=e-h;o>=2?(m.triggerEleByState(t,n,i),b=!0):g=setTimeout(a,500)}function c(){if(b){if(n.targetStateReverse){var o=JSON.parse(JSON.stringify(n));switch(o.targetState){case s.show:o.targetState=s.hide,m.triggerEleByState(t,o,i);break;case s.hide:o.targetState=s.show,m.triggerEleByState(t,o,i);break;case s.play:m.triggerEleByState(t,n,i)}}b=!1}clearTimeout(g),e.$li.unbind(d,c).unbind(f,c).unbind(p,r)}var h=0,g=null,m=this,v=0,y=0,b=!1;e.$li.find("img").addClass("taphold_image"),e.$li.on(l,o)}},{key:"addPageTrigger",value:function(e,t,i){if(window.DeviceMotionEvent){this.shakeAudio||(this.shakeAudio=document.createElement("audio"),this.shakeAudio.src=n(401));var o=this,r=4000,a=0,s=0,c=0,u=0,l=100;window.addEventListener("devicemotion",function(n){var p=n.accelerationIncludingGravity,d=p.x,f=p.y,h=p.z,g=(new Date).getTime();if(g-a>l){var m=parseInt(g-a);a=g;var v=Math.abs(d+f+h-s-c-u)/m*10000;v>r&&i.displayed?(l=2000,o.triggerEleByState(e,t,i)):l=100,s=d,c=f,u=h}},!1)}}},{key:"triggerEleByState",value:function(e,t,n){switch(window._tracker_api_&&window._tracker_api_.trigger&&window._tracker_api_.trigger(n.pageJson.id+"_"+t.sourceId,t.eventType),t.targetState){case s.show:setTimeout(function(){e.eleShow(),e.triggerHide=!1},1000*t.delay);break;case s.hide:setTimeout(function(){e.eleHide(),e.triggerHide=!0},1000*t.delay);break;case s.random:e.busy||(e.busy=!0,setTimeout(function(){e.showRandomImg(),e.busy=!1},1000*t.delay));break;case s.play:"o"==e.compJson.type?e.playVideo():e.soundAgent&&(e.soundAgent.audio.paused?e.soundAgent.startPlay():e.soundAgent.stopPlay(),$(e.soundAgent.audio).on("ended",function(){return e.soundAgent.manager.onEnd(e.soundAgent)}));break;case s.link:setTimeout(function(){t.targetContent.startsWith("http://")&&window.location.href.startsWith("https://")&&(t.targetContent=t.targetContent.replace("http://","https://")),h(t.targetContent,n.pageJson.id)},1000*t.delay);break;case s.page:setTimeout(function(){e.eqxScene.pageScroll.goToPageById(+t.targetContent)},1000*t.delay);break;case s.phone:window.location.href="tel:"+t.targetContent;break;case s.position:var i=e.compJson.css.top;-i>0?n.touchPos=0:-i<n.pLen?n.touchPos=n.pLen:n.touchPos=-i,n.doTransform(n.touchPos,100);break;case s.anim:e.eleHide(),e.$li.offset(),e.eleShow();break;case s.anchor:var o=t.targetId;e.eqxPage.moveByCompId(o),e.eleShow();break;default:return !1}}},{key:"compHasTrigger",value:function(e,t){return e.some(function(e){return e.targetId===t&&(e.targetState===s.hide||e.targetState===s.show)})}}]),e}();e.exports=g},function(e,t,n){e.exports=n.p+"images/wxShake-3a1ea8.mp3"},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0){}}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o){throw r}}}return n}return function(t,n){if(Array.isArray(t)){return t}if(Symbol.iterator in Object(t)){return e(t,n)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(403),u=n(404),l=n(107),p=l.FtRuleType,d=n(405),f=d.isPlainObject,h=function(){function e(t){o(this,e),this.eqxPage=t;var n=this.eqxPage.pageJson.properties;this.parse(n.groupSettings)}return s(e,[{key:"flatRules",value:function(t){return e.flatRules(t)}},{key:"validRule",value:function(e){var t=this;return e.comps.forEach(function(e){var n=e.id,i=e.properties;i.forEach(function(e,o){var r="undefined"==typeof e?"undefined":a(e);if("object"===r){var s=t.eqxPage.getEqxItem(n);if(!s){return}for(var c=s.compJson.properties.items,u=-1,l=e.fill.join(","),p=0;p<c.length;p++){if(c[p].elements.join(",")===l){u=p;break}}u>-1?i[o]="fill-"+u:i[o]="xxx"}})}),e}},{key:"validRules",value:function(e){var t=this,n=[];return(e||[]).forEach(function(e){t.validRule(e)&&n.push(e)}),n}},{key:"parse",value:function(e){var t=this,n=this.eqxPage;n.getEqxItems().forEach(function(e){e._ft=null}),e=this.flatRules(e);var i=this.validRules(e).filter(function(e){var t=e.type,i=e.comps.filter(function(e){var i=e.id,o=e.properties,r=n.getEqxItem(i);if(!r){return !1}var a=r.filterEditableProps();return o=o.filter(function(e){var n=t+"."+e;return a.includes(n)}),o.length});return i.length}).map(function(e){return new u(e,t)});this.ftRules=i;var o=this.eqxPage.pageJson.properties;return this.rules=o.groupSettings=this.toJson(),i}},{key:"toJson",value:function(){return this.ftRules.map(function(e){return e.toJson()})}},{key:"getEqxItemRelativeFtRules",value:function(e){if(e.isGroupItem()){var t=e.getAllSubEqxItems(),n=[];return this.ftRules.forEach(function(e){var i=e.getEqxItems().some(function(e){return t.includes(e)});i&&n.push(e)}),n}return this.getEqxItemFtRules(e)}},{key:"getEqxItemFtRules",value:function(e){var t=[];return this.ftRules.forEach(function(n){n.getEqxItems().includes(e)&&t.push(n)}),t}},{key:"filterValidFtRules",value:function(){for(var e=0;e<this.ftRules.length;e++){var t=this.ftRules[e],n=t.filterValidFtTerms();n&&e--}}},{key:"findFtTerm",value:function(e,t){for(var n=t.split("."),i=r(n,2),o=i[0],a=i[1],s=0;s<this.ftRules.length;s++){var c=this.ftRules[s];if(c.type===o){var u=c.ftTerms.find(function(t){return t.canApplyTo(e,a)});if(u){return u}}}}},{key:"addFtRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length;if(e instanceof c?(e.ftRule.deleteFtTerm(e,!0),e=u.ftTermToFtRule(e,this)):e instanceof u||this.validRule(e)&&(e=new u(e,this)),!this.ftRules.includes(e)){return this.ftRules.splice(t,0,e),e}}},{key:"addFtRules",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length?this.ftRules.length-1:0;return f(t[0])&&(t=e.flatRules(t)),t.filter(function(e){var t=n.addFtRule(e,i);if(t){return i++,!0}})}},{key:"convertFtTermToFtRule",value:function(e,t){e.ftRule.deleteFtTerm(e,!0),this.addFtRule(e,t)}},{key:"extractFtTermIntoFtRule",value:function(e,t,n){e&&t&&this.canMerge([e.ftRule,t])&&(e.ftRule.deleteFtTerm(e,!0),t.addFtTerm(e,n||0))}},{key:"splitFtRule",value:function(e){var t=this.ftRules.indexOf(e);if(t>-1&&e.ftTerms.length>1){this.deleteFtRule(e);var n=e.split();return this.addFtRules(n,t)}}},{key:"filterSameTypeFtRules",value:function(e){var t=e.type;return this.ftRules.filter(function(e){return e.type===t})}},{key:"canMerge",value:function(e){if(e.length<2){return !1}for(var t=e[0].type,n=1;n<e.length;n++){if(e[n].type!==t){return !1}}return !0}},{key:"mergeFtRules",value:function(e){var t=this;if(e=e.filter(function(e){return t.ftRules.includes(e)}),this.canMerge(e)){var n=e[0];return n.mergeFtRules(e.slice(1)),n}}},{key:"deleteFtTerm",value:function(e,t){e.ftRule.deleteFtTerm(e,t)}},{key:"deleteFtRule",value:function(e){var t=this.ftRules.indexOf(e);return t>-1&&(this.ftRules.splice(t,1),!0)}},{key:"sortFtRule",value:function(e,t){var n=this.ftRules.length;t<0&&(t=0),t>n-1&&(t=n-1);var i=this.ftRules.indexOf(e);return i!==-1&&(this.ftRules.splice(i,1),this.ftRules.splice(t,0,e),!0)}},{key:"sortFtTerm",value:function(e,t){return e.ftRule.sortFtTerm(e,t)}}],[{key:"flatRules",value:function(e){if(!e||Array.isArray(e)){var t=[];return(e||[]).forEach(function(e){e.type===p.editGroup?t.push.apply(t,i(e.comps)):t.push(e)}),t}}}]),e}();e.exports=h},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(107),a=r.getEditPropName,s=r.FtRuleType,c=r.FtEditableProps,u=n(109),l=n(64).FORM_COMPS,p=function(){function e(t,n){i(this,e),this.id=t.id,this.prop=t.prop,this.ftRule=n,this.eqxItem=this.ftRule.ftManager.eqxPage.getEqxItem(this.id),this.name=a(this.getFullPropKey())}return o(e,[{key:"getEqxItemFtValue",value:function(){return this.eqxItem&&this.eqxItem.getFtValue(this.getFullPropKey())}},{key:"getFullPropKey",value:function(){return this.ftRule.type+"."+this.prop}},{key:"isValid",value:function(){return this.eqxItem&&!this.eqxItem.isOrphan()&&this.eqxItem.isPropCanEdit(this.getFullPropKey())}},{key:"apply",value:function(){switch(this.ftRule.type){case s.color:return this._applyColor.apply(this,arguments);case s.image:return this._applyImage.apply(this,arguments);case s.content:return this._applyContent.apply(this,arguments);case s.link:return this._applyLink.apply(this,arguments);case s.internalLink:return this._applyInternalLink.apply(this,arguments);case s.telephone:return this._applyPhone.apply(this,arguments);case s.sound:return this._applySound.apply(this,arguments);case s.time:return this._applyTime.apply(this,arguments);case s.code:return this._applyCode.apply(this,arguments);case s.video:return this._applyVideo.apply(this,arguments);case s.input:return this._applyInput.apply(this,arguments);case s.tRandom:return this._applyTRandom.apply(this,arguments);case s.iRandom:return this._applyIRandom.apply(this,arguments)}}},{key:"_applyIRandom",value:function(e){var t=this.eqxItem;return t.compJson.properties.imgs=e,t.updateImg(e[0].src),t}},{key:"_applyTRandom",value:function(e){var t=this.eqxItem;return t.compJson.properties.texts=e,t.updateContent(e[0]),t}},{key:"_applyInput",value:function(e){var t={501:"姓名",502:"电话",503:"邮箱",504:"文本"},n=this.eqxItem;return n.compJson.properties.placeholder=t[e],n.compJson.title=t[e],n.compJson.type=e,n.setInputTitle(t[e]),n}},{key:"_applyVideo",value:function(e){var t=this.eqxItem,n=t.compJson;return n.src=e,t.updateJson(n),t.eqxPage.renderEqxComp(t,!0),t}},{key:"_applyCode",value:function(e){var t=this.eqxItem,n=t.compJson;return n.content=e,t}},{key:"_applyTime",value:function(e){var t=new Date(e).getTime(),n=this.eqxItem;return"e"===n.type?n.updateProp("endTime",t):n.updateProp("startTime",t),n.updateJson(n.compJson),n.eqxPage.renderEqxComp(n,!0),n}},{key:"_updateTrigger",value:function(e,t,n){var i=this.eqxItem,o=i.triggerManager.findEqxItemTriggerItem(i,e,t);if(!o){throw new Error("no trigger")}return o.targetContent=n,i}},{key:"_applySound",value:function(e){var t=this.eqxItem;return t.compJson.sound={id:e.id,name:e.name,src:e.src},t.updateJson(t.compJson),t.eqxPage.renderEqxComp(t,!0),t}},{key:"_applyPhone",value:function(e){return this._updateTrigger("click","phone",e)}},{key:"_applyInternalLink",value:function(e){return this._updateTrigger("click","page",e)}},{key:"_applyLink",value:function(e){var t=this._updateTrigger("click","link",this.eqxItem.getLinkUrl(e));return t}},{key:"_applyContent",value:function(e){return this.eqxItem.updateContent(e)}},{key:"_applyImage",value:function(e,t){return this.eqxItem.editImage(e,t)}},{key:"_applyColor",value:function(e){var t=c,n=this.eqxItem,i=this.ftRule.type+"."+this.prop;if(0===i.indexOf(t.color.fill)){var o=+i.split("-")[1];return n.updateFillColor(o,e),n}switch(i){case t.color.backgroundColor:l.indexOf(n.type)!=-1?n.updateFormCompCss({backgroundColor:e}):n.update$boxDiv({backgroundColor:e});break;case t.color.boxShadowColor:var r=u.parseBoxShadow(n.compJson.css.boxShadow);r.color=e;var a=u.getBoxShadowStr(r);n.update$boxDiv({boxShadow:a});break;case t.color.borderColor:l.indexOf(n.type)!=-1?n.updateFormCompCss({borderColor:e}):n.update$boxDiv({borderColor:e});break;case t.color.color:l.indexOf(n.type)!=-1?n.updateFormCompCss({color:e}):n.update$boxDiv({color:e});break;case t.color.counterColor:n.update$iconColor(e)}return n}},{key:"deleteSelf",value:function(e){this.ftRule.deleteFtTerm(this,e)}},{key:"canApplyTo",value:function(e,t){return this.eqxItem===e&&this.prop===t}},{key:"parse",value:function(){}},{key:"toFtRuleJson",value:function(){var e=this.ftRule.toJson();return e.comps=[this.toJson()],e}},{key:"toJson",value:function(){return{id:this.id,properties:[this.prop]}}}]),e}();e.exports=p},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(107),s=a.FtRuleType,c=a.getEditPropName,u=a.FtRuleName,l=n(403),p=function(){function e(t,n){o(this,e),this.ruleJson=t,this.ftManager=n,this.ftTerms=this.parse()}return r(e,[{key:"isGroupRule",value:function(){var e=s;return[e.addGroup,e.moveGroup,e.deleteGroup,e.editGroup].includes(this.type)}},{key:"parse",value:function(){var e=this.ruleJson;this.type=e.type,this.value=e.value;var t=this.parseFtTermsByRuleJson(e);return this.calName(e.name,t),t}},{key:"calName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms;if(e){this.name=e}else{var n=t.length;if(0===n){return void (this.name="")}if(1===n){var i=c(this.type+"."+t[0].prop)}else{i=u[this.type]}var o=i.length,r=t.map(function(e){return e.eqxItem.getName()}).join("&"),a=r.length;a>14-o&&(r=r.substr(0,14-i.length)+"..."),this.name=r+"-"+i}}},{key:"toJson",value:function(){var e=this.ftTerms.map(function(e){return e.toJson()});return{name:this.name,type:this.type,value:this.value,comps:e}}},{key:"toEmptyJson",value:function(){return{name:this.name,type:this.type,value:this.value,comps:[]}}},{key:"deleteSelf",value:function(){this.ftManager.deleteFtRule(this)}},{key:"filterValidFtTerms",value:function(){for(var e=0;e<this.ftTerms.length;e++){var t=this.ftTerms[e];if(!t.isValid()){var n=this.deleteFtTerm(t);n&&e--}}if(!this.ftTerms.length){return this.deleteSelf(),!0}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}var i=this.ftTerms.map(function(e){return e.apply.apply(e,t)});return this.updateFtValue(),i}},{key:"updateFtValue",value:function(){this.ftTerms[0]?this.value=this.ftTerms[0].getEqxItemFtValue():this.value=0}},{key:"getEqxItems",value:function(){var e=[];return this.ftTerms.forEach(function(t){e.includes(t.eqxItem)||e.push(t.eqxItem)}),e}},{key:"parseFtTermsByRuleJson",value:function(e){var t=this,n=[];return e.comps.forEach(function(e){e.properties.forEach(function(i){n.push(new l({id:e.id,prop:i},t))})}),n}},{key:"split",value:function(){var t=this;return this.ftTerms.map(function(n){var i={type:t.type,value:t.value,comps:[n.toJson()]};return new e(i,t.ftManager)})}},{key:"sortFtTerm",value:function(e,t){var n=this.ftTerms.length;t<0&&(t=0),t>n-1&&(t=n-1);var i=this.ftTerms.indexOf(e);return i!==-1&&(this.ftTerms.splice(i,1),this.ftTerms.splice(t,0,e),!0)}},{key:"mergeFtRule",value:function(e){var t=this;e.ftTerms.forEach(function(e){e.ftRule=t,t.ftTerms.push(e)}),this.ftManager.deleteFtRule(e)}},{key:"mergeFtRules",value:function(e){var t=this;e.forEach(function(e){return t.mergeFtRule(e)})}},{key:"addFtTerm",value:function(e){var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms.length;if(e instanceof l){e.ftRule=this;var r=[e]}else{var a=e;r=a.properties.map(function(t){return new l({id:e.id,prop:t},n)})}var s=this.ftTerms.length;o<0&&(o=0),o>s-1&&(o=s-1),(t=this.ftTerms).splice.apply(t,[o,0].concat(i(r))),this.calName()}},{key:"deleteFtTerm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.ftTerms.indexOf(e);return n>-1?(this.ftTerms.splice(n,1),t&&!this.ftTerms.length&&this.ftManager.deleteFtRule(this),!0):void this.calName()}}],[{key:"ftTermToFtRule",value:function(t,n){var i=t.ftRule.toEmptyJson(),o=new e(i,n);return o.addFtTerm(t),o}}]),e}();e.exports=p},function(e,t){function n(e){var t=Object.assign({},e);return s(t),t}function i(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function o(e){return i(e,"object")}function r(e){return i(e,"array")}function a(e){e.forEach(function(e){r(e)?a(e):o(e)&&s(e)})}function s(e){for(var t in e){e.hasOwnProperty(t)&&(t.startsWith("$")?delete e[t]:r(e[t])?a(e[t]):o(e[t])&&s(e[t]))}}function c(e,t){return JSON.stringify(e)===JSON.stringify(t)}function o(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":p(e))&&Array.isArray(e)===!1}function u(e){return o(e)===!0&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){var t,n;return u(e)!==!1&&(t=e.constructor,"function"==typeof t&&(n=t.prototype,u(n)!==!1&&n.hasOwnProperty("isPrototypeOf")!==!1))}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={remove$key:n,isSameValue:c,isObject:o,isPlainObject:l}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(72),a=r.RAW_EVENT,s=r.EQX_EVENT,c=function(){function e(t){i(this,e),this.page=t}return o(e,[{key:"findEqxItemTriggerItem",value:function(e,t,n){var i=e.eqxPage,o=i.pageJson.properties.triggerGroup;return o.find(function(i){return i.eventType==a[t]&&i.sourceId==e.id&&i.targetState==s[n]})}},{key:"isHasEqxTrigger",value:function(e){var t=e.eqxPage,n=t.pageJson.properties.triggerGroup;return n.some(function(t){return t.sourceId==e.id})}},{key:"addTriggers",value:function(e){if(Array.isArray(e)&&e.length){for(var t=this.page.pageJson,n=t.properties,i=n.triggerGroup=n.triggerGroup||[],o=function(t){var n=e[t],o=i.findIndex(function(e){return e.eventType===n.eventType&&e.sourceId===n.sourceId&&e.targetId===n.targetId});return o>=0?"continue":void i.push(n)},r=0;r<e;r++){o(r)}}}}]),e}();e.exports=c},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.config=t,this.page=i,this.init()}return i(e,[{key:"init",value:function(){var e=this.config,t=this.page,n=t.eqxScene.config.mode,i=this.page.eqxLayerList;if(this.layers=i,this.count=i.length,this.current=0,"view"===n&&e.used){i[0].show();for(var o=1;o<i.length;o++){i[o].hide()}this.current=1}}},{key:"reset",value:function(){this.layers[0].show();for(var e=this.layers,t=1;t<e.length;t++){e[t].hide()}this.stop(),this.current=1}},{key:"play",value:function(){var e=this.config,t=this.page,n=t.eqxScene.config.mode;"view"===n&&e.used&&this.playEqxLayer()}},{key:"stop",value:function(){this.loopTimer&&clearTimeout(this.loopTimer)}},{key:"playEqxLayer",value:function(){var e=this;return this.stop(),this.current===this.count?"":void (this.loopTimer=setTimeout(function(){if(!(e.current>=e.count)){for(var t=0;t<e.layers.length;t++){e.current===t?e.layers[e.current].show():e.layers[t].hide()}e.current++,e.playEqxLayer()}},this.defaultDuration()))}},{key:"defaultDuration",value:function(){function e(e){for(var t=e.getEqxComps(),n=0,i=0;i<t.length;i++){for(var o=t[i],r=o.compJson.properties.anim,a=void 0===r?[]:r,s=0;s<a.length;s++){var c=a[s],u=c.countNum,l=c.duration,p=c.delay;if(c.count){return 1000*(l+p)}if(1==c.animClassify){var d,f=o.$context.text(),h=c.textInterval,g=/(\b[a-zA-Z]+\b)|[\u4e00-\u9fa5]|[\.\<\>\《\》\。\-\——\_\?\!\？\！\:\：\;\；]/g,m=f.match(g);d=m?u*(l+(m.length-1)*h)+p:u*l+p,n=Math.max(n,d)}else{n=Math.max(n,u*l+p)}}}return 1000*n}if(this.current>=this.count){return 100}var t=this.layers[this.current-1],n=t.json.flash,i=void 0===n?{}:n,o=i.durationType,r=void 0===o?0:o,a=i.duration,s=void 0===a?null:a;if(0===r){var c=e(t);0==c&&(c=2000)}else{1===r&&s>=0&&(c=1000*s)}return c}}]),e}();e.exports=o},function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){return i(this,e),this.list=t,this.page=n,this}return o(e,[{key:"start",value:function(e,t){var n=[];e.forEach(function(e){e.group&&n.findIndex(function(t){return t==e.findTopGroup()})==-1?n.push(e.findTopGroup()):n.push(e)}),e=n,this.dragItem=e;var i=this.computeItemsTopBottom(e),o=this.maxMoveDistance();this.$tipEle=null,this.dragSort={lastPosition:t.y},this.layer=this.page.eqxLayerList[0],Object.assign(this.dragSort,i,o),this.moving=!0}},{key:"move",value:function t(e,i){var o=this;if(this.moving){var r=this.dragItem,a=this.list,s=a.length;!this.dragSort.classAdded&&r.forEach(function(e){e.addCurClass()}),this.dragSort.classAdded=!0;for(var c=0;c<s;c++){if(!(r.findIndex(function(e){return e===a[c]})>-1||a[c].group)){var t=this.checkIsNeedSplice(this.computeItemsTopBottom(r),a[c].getAbsolutePos(),e.y,a[c]);if(t){var u=a[c];if(i){var l;(l=this.list).splice.apply(l,[c,0].concat(n(r)))}else{r.forEach(function(e,i){var r,s=a.findIndex(function(t){return t==e}),u=c+i;"toUp"==t&&(s-=i,u-=i),isNaN(parseInt(u))||isNaN(parseInt(s))||(r=o.list).splice.apply(r,[u,0].concat(n(o.list.splice(s,1))))})}this.showMovePosition(u,t);break}}}this.dragSort.lastPosition=e.y}}},{key:"end",value:function(){this.list.forEach(function(e){e.group||e.removeDragClass()}),this.dragSort={},this.dragSort.classAdded=!1,this.$tipEle=null,this.page.eqxLayerList[0].$ul.find("li.position").remove(),this.resetCompPosition(),this.moving=!1}},{key:"maxMoveDistance",value:function(){var e=this.list[0].getAbsolutePos().top,t=e;return this.list.forEach(function(t){t.group||(e+=t.getAbsolutePos().height)}),{min:t,max:parseInt(e)}}},{key:"computeItemsTopBottom",value:function(e){return{top:parseInt(e[0].getAbsolutePos().top),bottom:parseInt(e[e.length-1].getAbsolutePos().bottom)}}},{key:"checkIsNeedSplice",value:function(e,t,n,i){var o=Math.min(t.height/2,30);return e.top<t.bottom-o&&e.top>t.top&&n-this.dragSort.lastPosition<0&&(!this.dragSort.toUpItem||this.dragSort.toUpItem!=i)?(this.dragSort.curPos=n,this.dragSort.toUpItem=i,this.dragSort.toDwonItem=null,"toDown"):e.bottom>t.top+o&&e.bottom<t.bottom&&n-this.dragSort.lastPosition>0&&(!this.dragSort.toDwonItem||this.dragSort.toDwonItem!=i)&&(this.dragSort.curPos=n,this.dragSort.toDwonItem=i,this.dragSort.toUpItem=null,"toUp")}},{key:"resetCompPosition",value:function(e,t){if(0!=this.list.length){var n=0;return this.list.forEach(function(t,i){t.setArrIndex(i+1),t.group||((!e||e&&e.findIndex(function(e){return t===e})===-1)&&(t.isGroupItem()?t.updateItemCss(n):t.updateCss({top:n}),t.autoSize(),t.isNewAdd||t.addMoveClass(),t.isNewAdd&&delete t.isNewAdd),n+=parseFloat(t.getAbsolutePos().height))}),this.page.combineEqxItems(),n}}},{key:"showMovePosition",value:function(e,t){var n=e.getAbsolutePos(),i="toDown"==t?n.top:n.top+n.height;this.$tipEle?this.$tipEle.css({top:i+"px"}):(this.$tipEle=$('<li class="position" style="top:'+i+'px;height:2px"></li>'),this.page.eqxLayerList[0].$ul.append(this.$tipEle))}}]),e}();e.exports=r},function(e,t,n){function i(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r={id:_(),pageId:i,sceneId:n,num:1,type:"messageBoard",arrIndex:999999999998,content:"写留言",title:null,css:{height:200,width:"320px",backgroundColor:"#FFFFFF",color:"#333333",fontSize:"14px",top:o,zIndex:9999999998},properties:{initType:1,appendElement:!0,anim:[]}};return r}function o(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.pageIndex,a=w.SERVER_1+"eqs/link?id="+n+"&url="+encodeURIComponent(k),s='\n<div style="text-align: center;transform: translateY(-2px);-webkit-animation: fadeIn 2s ease 1s both;-webkit-animation-play-state: initial;">\n    <a href="'+a+'" target="_blank"\n       style="font-size: x-small;display:block;line-height: 10px;">\n        <font color="#ffffff">'+E+"</font>\n    </a>\n</div>";return{id:_(),pageId:i,sceneId:n,num:r,type:2,content:s,status:1,css:{zIndex:9999999999,height:"20",width:"129",left:"97px",top:418+o+"px",backgroundColor:"rgba(0,0,0,0.6)",borderBottomLeftRadius:20,borderBottomRightRadius:20,borderTopRightRadius:20,borderTopLeftRadius:20,borderRadius:20},properties:{anim:{type:0,direction:0,duration:2,delay:0}}}}function r(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.type,a=e.config,s=e.labelConfig,c=126,u="Ad";switch(r){case"ad01":c=126;break;case"ad02":c=136,S=w.FILE+a.adPic;break;case"ad03":c=286,S=O}var l={id:_(),pageId:i,sceneId:n,num:1,type:r,arrIndex:999999999997,content:u,css:{height:c,zIndex:"7771",width:"320px",fontSize:"14px",top:o,left:"0",textAlign:"center",backgroundColor:"#ffffff"},properties:{scratch:!1,src:S,imgStyle:{width:320,height:c-36,marginTop:"0",marginLeft:"0"},initType:1,maskSrc:"",anim:[],config:a,labelConfig:s}};return l}function a(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.config,a={id:_(),pageId:i,sceneId:n,num:1,type:"lpBtMark",arrIndex:999999999999998,content:"",css:{height:30,zIndex:"999999999",width:"320px",fontSize:"12px",top:o,left:"0",textAlign:"center",backgroundColor:"#EEEEEE",color:"#99999",lineHeight:"30px"},properties:{config:r}};return a}function s(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.config,a='<span style="color: #999999; font-size: 12px;" class="button">'+r.labelText+"</span>",s={id:_(),pageId:i,sceneId:n,num:1,type:"301",arrIndex:999999999999998,content:a,title:null,css:{height:30,zIndex:"7774",width:"320px",backgroundColor:"#EEEEEE",color:"#99999",fontSize:"12px",top:o,lineHeight:"20px",textAlign:"center"},properties:{config:r}};return s}function c(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r='<span style="color: #999999; font-size: 12px;" id="reportBtn">举报</span>',a={id:_(),pageId:i,sceneId:n,num:1,type:299,arrIndex:999999999999998,content:r,css:{height:30,zIndex:"7775",width:"54px",color:"#99999",fontSize:"12px",top:o,lineHeight:"23px",textAlign:"right"},properties:{}};return a}function u(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.config,a='<span class="button"><i class="eqf-ywxlogoorgin" style="font-size: 12px;"></i></span>',s={css:{height:30,left:256,top:o,width:54,zIndex:"7776",color:"#99999",lineHeight:"20px"},id:_(),num:1,pageId:i,sceneId:n,content:a,properties:{config:r},type:"301",arrIndex:999999999999998};return s}function l(e){var t=e.pageId,n=void 0===t?1:t,i=e.sceneId,o=void 0===i?1:i,r=e.pageIndex,a=void 0===r?1:r,s=e.center,c='\n<div style="text-align: right;">\n    <span style="line-height: 1; background-color: initial;">\n        <font size="2" color="#888888"><b>举报</b></font>\n    </span>\n</div>';return{id:_(),pageId:n,sceneId:o,num:a,type:299,content:c,status:1,css:{zIndex:999,height:36,width:60,left:s?130:10,top:420},properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}function p(){return{id:_(),pageId:"",sceneId:"",num:1,type:"4",isInput:0,title:null,content:null,status:1,css:{borderRadius:"0",borderStyle:"solid",height:"158",zIndex:"1000",borderColor:"rgba(0,0,0,1)",boxShadow:"0 0px 0px #333333",color:"#000000",backgroundColor:"white",borderWidth:"0px",width:"158",left:"84px",paddingTop:"11px",paddingLeft:"10px",top:"170px"},properties:{height:"100px",imgStyle:{width:139,height:136,marginTop:"0px",marginLeft:"0px"},width:"100px",src:"group1/M00/01/30/yq0JCFQpOR-AOULFAAFBPO1yzBQ984.jpg"}}}function d(){return{id:_(),pageId:129810,sceneId:16060,num:1,type:2,isInput:0,title:null,content:'\n<div class="logo-shadow1" style="text-align: center; \n    cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);\n    position:absolute;left:20px;top:56px;">\n</div>',status:1,css:{height:"257",width:"257",left:"78px",top:"175px"},properties:{}}}function f(){return{id:_(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:'\n<div class="bottom-logo" style="text-align: center;cursor:pointer;height:136px;width:139px;">\n    <em style="color:white;line-height:136px;font-size:120px;" class="eqf-ywx"></em>\n</div>',status:1,css:{height:"158",width:"158",left:"84px",top:"170px",backgroundColor:"white"},properties:{}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"点击此处进行编辑";return{id:_(),pageId:"",sceneId:"",num:1,type:"2",isInput:0,title:null,content:'<div style="text-align: center;"><font color="#ffffff" size="3">'+e+"</font></div>",status:1,css:{zIndex:"102",height:"65",width:"320",left:"0px",top:"70px"},properties:{}}}function g(){var e='<div style="width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;"></div>';return{id:_(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:e,status:1,css:{height:"24",width:"280",left:"21px",top:"122px"},properties:{}}}function m(){var e='<div class="logo-shadow1" style="text-align: center;cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);position:absolute;left:20px;top:56px;"></div>';return{id:_(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:e,status:1,css:{height:257,width:257,left:"78px",top:"175px"},properties:{}}}function v(e,t,n){var i=e.id,o=void 0===i?16060:i,r=e.name,a=e.num,s=e.cover,c=void 0===s?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":s,u=(e.code,e.isDeepShare),l=e.href;r=r||"",t=t||{};var p=129810,d=o;l=l?w.SERVER_1+"eqs/link?id="+o+"&url="+encodeURIComponent(l):I()?"":w.SERVER_1+"eqs/link?id="+o+"&url="+encodeURIComponent(k),t&&!t.brandSrc&&t.brandLink&&(l=t.brandLink);var f="点我免费制作云微秀",h="#23a3d3",g="",m='<div style="text-align: center;">\n                        <span style="line-height: 1; background-color: initial;">\n                            <font size="4" color="#888888"><b>'+(t.sceneName||r)+"</b></font>\n                        </span>\n                    </div>",v='<div style="width:280px;\n                                height:1px;\n                                background-color:rgba(60,60,60,0.4);\n                                cursor:pointer;\n                                position:absolute;\n                                left:0;\n                                -webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));\n                                top:12px;"></div>',y='<div style="text-align: center;padding-top: 0;">\n                        <span style="font-size: small; line-height: 1; background-color: initial;">\n                            <a href="'+l+'" target="_blank">\n                                <font color="#888888">'+g+'</font>\n                                <font color="'+h+'">'+f+"</font>\n                            </a>\n                        </span>\n                    </div>",b='<a class="element comp_anchor editable-text deepShareHref" \n                       data-event="1120601"\n                       style="cursor: default; \n                              width: 100px; \n                              height: 36px; \n                              display: block;\n                              background: #08c3fd; \n                              color:#ffffff;\n                              font-size:13px;\n                              border-radius: 4px;">使用该模板</a>',x={id:"",sceneId:d,num:a,name:r,properties:{},elements:[]},E={id:_(),pageId:p,sceneId:d,num:0,type:"3",css:{},properties:{}};t.backgroundSrc?E.properties.imgSrc=t.backgroundSrc:E.properties.bgColor="#E6E9EE",x.elements.push(E);var S={id:_(),pageId:p,sceneId:d,num:1,type:"2",content:m,css:{height:"65",zIndex:"10",width:"320",left:"0px",top:"77px"},properties:{}};x.elements.push(S);var O={id:_(),pageId:p,sceneId:d,num:2,type:"4",isInput:0,title:null,content:null,status:1,css:{borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"142",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"142",left:"92px",paddingBottom:"0px",top:"177px"},properties:{height:"100px",imgStyle:{width:142,height:142,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:c}};t.logoSrc&&(O.properties.src=t.logoSrc),t.logoLink&&(O.properties.url=t.logoLink),x.elements.push(O);var P={id:_(),pageId:129810,sceneId:d,num:1,type:"2",content:v,css:{height:"24",width:"280",left:"21px",top:"122px"},properties:{}};x.elements.push(P);var $={id:_(),pageId:p,sceneId:d,num:1,type:u&&!I()?"298":"2",content:u?b:"",css:{height:"36",width:"120",left:"98px",top:"350px",zIndex:"13"},properties:{}};if(x.elements.push($),t.brandSrc){var T='<a style="position: absolute;\n                               display: block;\n                               width: 100%;\n                               height: 100%;\n                               background-image: url('+(w.FILE+t.brandSrc)+');    \n                               background-repeat: no-repeat;\n                               background-position: center;\n                               background-size: cover;" \n                           href="'+t.brandLink+'"\n                           target="_blank"></a>',C={id:_(),pageId:p,sceneId:d,num:2,type:"7",content:T,css:{height:"40px",width:"320px",left:"0",top:"420px",zIndex:"13"},properties:{}};x.elements.push(C)}else{var q={id:439885,pageId:p,sceneId:d,num:1,type:u&&!I()?"298":"2",content:y,css:{borderRadius:"0px",borderStyle:"solid",height:"30",paddingTop:"0px",borderColor:"rgba(222,220,227,1)",zIndex:"12",boxShadow:"0px 0px 0px rgba(200,200,200,0.6)",color:"",backgroundColor:"rgba(255,255,255,0)",borderWidth:"0px",width:"320",left:"1px",bottom:"36px",paddingBottom:"20px"},properties:{anim:[{type:1,direction:3,duration:"1",delay:"0.6"}]}};x.elements.push(q)}return x}function y(){return{id:849219621,sceneId:87910723,num:1,name:null,properties:{},elements:[{css:{top:-132,left:-270,width:873,height:692,zIndex:1,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",imgStyle:{width:873,height:1376.3390625,marginTop:-342.16953125,marginLeft:0},maskSrc:"",originSrc:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",anim:[],initType:0},type:4,id:4791539496,pageId:849219621,sceneId:87910723,num:1,name:"图片1"},{css:{top:-197.5,left:-118,width:579.5,height:388,zIndex:2,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fie_7zLKX1jFwnowjnupl0uxuRzf",imgStyle:{width:579.5,height:388,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"Fie_7zLKX1jFwnowjnupl0uxuRzf",anim:[{type:0,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1200"}],initType:0},type:4,id:2648920976,pageId:849219621,sceneId:87910723,num:2,name:"图片2"},{css:{top:283.5,left:78,width:165,height:50.5,zIndex:5,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",imgStyle:{width:165,height:50.5,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",anim:[{type:24,direction:0,duration:1,delay:0.2,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1336"}],initType:0},type:4,id:6696803295,pageId:849219621,sceneId:87910723,num:5,name:"图片4"},{css:{top:118.5,left:86,width:148,height:148,zIndex:4,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FvqrpftukXbdDhFScUbzUuFZEIkz",imgStyle:{width:148,height:148,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FvqrpftukXbdDhFScUbzUuFZEIkz",anim:[{type:4,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1268"}],initType:0},type:4,id:8888432263,pageId:849219621,sceneId:87910723,num:4,name:"图片5"}],price:null,isPaid:null,forms:null}}function b(e,t){var n=e.id,i=void 0===n?16060:n,o=e.name,r=e.num,a=e.cover,s=void 0===a?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":a,c=(e.code,e.isDeepShare),u=e.href;o=o||"",t=t||{};var l=129810,p=i;u=u?w.SERVER_1+"eqs/link?id="+i+"&url="+encodeURIComponent(u):I()?"":w.SERVER_1+"eqs/link?id="+i+"&url="+encodeURIComponent(k),t&&!t.brandSrc&&t.brandLink&&(u=t.brandLink);var d="点我免费制作云微秀",f="#23a3d3",h="",g='<div style="text-align: center;">\n                        <span style="line-height: 1.5; background-color: initial;text-shadow: 0px 0px 4px rgba(0, 0, 0, 0.6) !important;color:#FFFFFF">\n                            '+(t.sceneName||o)+"\n                        </span>\n                    </div>",m='<div style="text-align: center;padding-top: 0;">\n                        <span style="font-size: small; line-height: 1; background-color: initial;">\n                            <a href="'+u+'" target="_blank">\n                                <font color="#888888">'+h+'</font>\n                                <font color="'+f+'">'+d+"</font>\n                            </a>\n                        </span>\n                    </div>",v={id:"",sceneId:p,num:r,name:o,properties:{},elements:[]},y={id:_(),pageId:l,sceneId:p,num:0,type:"3",css:{left:0,opacity:0.7,top:0,zIndex:-1,filter:"blur(6px)"},properties:{imgSrc:window.scene?window.scene.cover:"group2/M00/7F/9B/yq0KXlZNGfWAbZo_AAAdI0Feqt0138.png",originSrc:window.scene?window.scene.cover:"group2/M00/7F/9B/yq0KXlZNGfWAbZo_AAAdI0Feqt0138.png"}},b={content:"",css:{color:"#555",height:"700px",left:-27,top:-107,width:374,zIndex:1},id:_(),num:1,pageId:l,sceneId:p,type:"h",properties:{anim:[],id:144877595,initType:1,items:[{element:[0],fill:"rgba(0,0,0,0.6)",svgFill:"#08A1EF"}],src:"group1/M00/B1/A3/yq0KXFZysi-ACYaKAAACDQH4Nes625.svg",translate3dZ:0,type:"rect"}};t.backgroundSrc?(y.properties.imgSrc=t.backgroundSrc,y.css={left:0,opacity:0.7,top:0,zIndex:-1}):v.elements.push(b),v.elements.push(y);var x={id:_(),pageId:l,sceneId:p,num:2,type:"2",content:g,css:{height:"65px",zIndex:"10",width:"320px",left:"0px",top:"205px",fontSize:"18px",lineHeihgt:1.5},properties:{}};v.elements.push(x);var E={id:_(),pageId:l,sceneId:p,num:3,type:"4",isInput:0,title:null,content:null,status:1,css:{borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"142",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"144px",left:"88px",paddingBottom:"0px",top:"47px"},properties:{height:"100px",imgStyle:{width:142,height:142,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:s}};if(t.logoSrc&&(E.properties.src=t.logoSrc),t.logoLink&&(E.properties.url=t.logoLink),v.elements.push(E),!I()){if(t.brandSrc){var S=w.FILE+t.brandSrc+"?imageMogr2/auto-orient/thumbnail/620x92>",O='<a style="position: absolute;\n                               display: block;\n                               width: 310px;\n                               height: 100%;\n                               background-image: url('+S+');    \n                               background-repeat: no-repeat;\n                               background-position: center;\n                               background-size: cover;" \n                           href="'+t.brandLink+'"\n                           target="_blank"></a>',P={id:_(),pageId:l,sceneId:p,num:5,type:"2",content:O,css:{height:"46px",width:"320px",left:"0px",bottom:"92px",zIndex:"13"},properties:{}};v.elements.push(P)}else{var $={id:439885,pageId:l,sceneId:p,num:6,type:c&&!I()?"298":"2",content:m,css:{borderRadius:"0px",borderStyle:"solid",height:"30",paddingTop:"0px",borderColor:"rgba(222,220,227,1)",zIndex:"12",boxShadow:"0px 0px 0px rgba(200,200,200,0.6)",color:"",backgroundColor:"rgba(255,255,255,0)",borderWidth:"0px",width:"320px",left:"0px",bottom:"92px",paddingBottom:"20px"},properties:{anim:[{type:1,direction:3,duration:"1",delay:"0.6"}]}};v.elements.push($)}}var T={css:{height:26,left:237,top:456,width:67,borderStyle:"solid",borderWidth:6,borderColor:"rgba(255, 255, 255, 0)",borderRadius:"4px",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},id:_(),num:6,pageId:l,sceneId:p,properties:{anim:[],id:144899161,initType:1,items:[{elements:[0],fill:"rgba(255, 255, 255, 0.6)",svgFill:"#08A1EF"},{elements:[1],fill:"rgba(0, 0, 0, 0.4)",svgFill:"#08A1EF"}],src:"group2/M00/94/6B/yq0KXlZyt2WAERDfAAAVxmdQJtQ706.svg",translate3dZ:0,type:"rect"},type:"h"};return v.elements.push(T),v}function x(e){var t=e.pageId,n=void 0===t?1:t,i=e.sceneId,o=void 0===i?1:i,r=e.pageIndex,a=void 0===r?1:r,s=e.center,c='\n<div style="text-align: center;width: 44px;height: 26px;\nfont-size: 12px; color: rgba(255, 255, 255, 0.6); line-height: 26px; border-radius: 4px;">\n        举报\n</div>';return{id:_(),pageId:n,sceneId:o,num:a,type:299,content:c,status:1,css:{zIndex:999,height:41,width:74,left:s?130:1,top:449},properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}var w=n(21),k=n(23).redirectUrl(),E="云微秀技术支持",I=n(24).isApp,_=n(55).randomId,S=n(410),O=n(411);n(412),e.exports={bottomLabel:o,report:l,image1:p,image2:d,eqxLogo:f,title:h,line:g,shadow:m,lastPage:v,lastPageBlur:b,bizType40Page:y,addReportBlur:x,bottomReport:c,bottomSupport:s,bottomLogo:u,lpAdvertise:r,lpBottomMark:a,messageBoard:i}},function(e,t,n){e.exports=n.p+"images/bottomMark-9d8231.gif"},function(e,t,n){e.exports=n.p+"images/flowAd-65fd3e.jpg"},function(e,t){},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.baseElementQueue=t.baseElementQueue,this.overlayElementQueue=t.overlayElementQueue,this.eqxPage=t}return i(e,[{key:"addBaeItem",value:function(e,t){var n=this.baseElementQueue.indexOf(t);n?this.baseElementQueue.splice(n,0,e):this.baseElementQueue.push(e),this.updatePosition()}},{key:"addOverlayItem",value:function(e){var t=this,n=this.baseElementQueue.indexOf(e);n&&this.baseElementQueue.forEach(function(n,i){n.findTopGroup()==e&&t.baseElementQueue.splice(i,1)}),this.overlayElementQueue.push(e)}},{key:"deleteItem",value:function(e){}},{key:"moveTop",value:function(e){var t=this.baseElementQueue.indexOf(e);if(0!=t){for(var n=t-1;n>=0;n--){if(this.baseElementQueue[n].findTopGroup()==this.baseElementQueue[n]){var i=this.baseElementQueue[n];this.baseElementQueue[n]=e,this.baseElementQueue[t]=i;break}}this.updatePosition()}}},{key:"moveBottom",value:function(e){var t=this.baseElementQueue.indexOf(e),n=this.baseElementQueue.length;if(t!=n-1){for(var i=t+1;i<n;i++){if(this.baseElementQueue[i].findTopGroup()==this.baseElementQueue[i]){var o=this.baseElementQueue[i];this.baseElementQueue[i]=e,this.baseElementQueue[t]=o;break}}this.updatePosition()}}},{key:"updatePosition",value:function(){this.eqxPage.EqxDragManager.resetCompPosition()}},{key:"findIndex",value:function(e){var t=e.isBaseLayerElement;return t?this.baseElementQueue.indexOf(e.findTopGroup()):this.overlayElementQueue.indexOf(e.findTopGroup())}},{key:"replaceItem",value:function(e,t,n){var i=this.findIndex(t);e.deleteEqxComp(t);var o=e.initEqxCompByJson(n);return o&&e.renderEqxComp(o),o.isBaseLayerElement?(this.baseElementQueue.splice(i,0,o),this.updatePosition()):this.overlayElementQueue.splice(i,0,o),o}}]),e}();e.exports=o},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(72).FORM_RULES,s=a.relative,c=a["switch"],u=function(){function e(t){o(this,e),this.page=t,this._list=t.pageJson.properties.formRules,this.init()}return r(e,[{key:"init",value:function(){var e,t=this;this.index=1,this.rules=(e={},i(e,s,[]),i(e,c,[]),e),this._list.forEach(function(e){if(t.rules[e.type].push(e),t.index=Math.max(t.index,parseInt(e.id)+1),e.type===s){var n=t.page.getEqxCompById(e.sourceId);n&&n.addRelativeTag()}else{if(e.type===c){var i=t.page.getEqxCompById(e.sourceId);i&&i.addSwitchTag()}}})}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=this.getRules(t,n);i||(i={id:this.index++},this.rules[n].push(i)),Object.assign(i,e),0===i.items.length&&this.remove(t,n),this.updateCompStatus(t),this.updateList()}},{key:"getRules",value:function(e,t){return void 0===t?{relative:this.getRules(e,s),"switch":this.getRules(e,c)}:this.rules[t].find(function(t){return t.sourceId==e})}},{key:"updateList",value:function(){this._list=this.rules[s].concat(this.rules[c]),this.page.pageJson.properties.formRules=this._list}},{key:"pasteRules",value:function(e,t,n){this.remove(t,n);var i=this.getRules(e,n);if(i){var o=JSON.parse(JSON.stringify(i));o.id=this.index++,o.sourceId=t,this.rules[n].push(o)}this.updateCompStatus(t),this.updateList()}},{key:"remove",value:function(e,t){var n=this;if(e){var i=isNaN(parseInt(t))?[s,c]:[t];i.forEach(function(t){var i=n.rules[t].findIndex(function(t){return t.sourceId==e});i>-1&&n.rules[t].splice(i,1)}),this.updateCompStatus(e),this.updateList()}}},{key:"getRulesDescrip",value:function(e){return{formRules:this.getRelativeRules(e),switchRules:this.getSwitchRules(e)}}},{key:"getRelativeRules",value:function(e,t){var n=this;if(t=t||this.getRules(e,s),!t||!t.items.length){return !1}var i="",o=t.isAnd?'<br><span class="remind">并且</span> ':'<br><span class="remind">或</span> ';return t.items.forEach(function(e,t){t>0&&(i+=o);var r=n.page.getEqxCompById(e.targetId),a=r.getTextDetail(e.targetOpt),s=e.targetOpt.length>0?"中的任何一个选项":"";i+='当题目 <span class="msg">'+a.title+'</span> 选择 <span class="msg">'+a.options.join("、")+"</span> "+s+"时，"}),i+"此题才显示"}},{key:"getSwitchRules",value:function(e){var t=this,n=this.getRules(e,c);if(!n||!n.items.length){return !1}var i=n.items,o="";if(i[0].withoutCondition){var r=i[0];if(r.isEnd){o='<span class="msg">跳到末尾结束作答</span>'}else{var a=this.page.getEqxCompById(r.targetId);o='跳转到题目<span class="msg">'+a.getTipTitle()+"</span>"}}else{var s=this.page.getEqxCompById(n.sourceId),u=s.getOptionHash();i.forEach(function(e){var n=t.page.getEqxCompById(e.targetId);o+=e.isEnd?'当选择选项 <span class="msg">'+u[e.optId].label+'</span> 时，<span class="msg">跳到末尾结束作答</span>;':'当选择选项 <span class="msg">'+u[e.optId].label+'</span> 时，跳转到题目 <span class="msg">'+n.getTipTitle()+"</span>;"})}return o}},{key:"updateCompStatus",value:function(e){var t=this.getRules(e),n=t.relative,i=t["switch"],o=i?"addSwitchTag":"removeSwitchTag",r=n?"addRelativeTag":"removeRelativeTag",a=this.page.getEqxCompById(e);a[r](),a[o]()}},{key:"getAffectedRules",value:function(e){for(var t=JSON.parse(JSON.stringify(this._list)),n=t.length,i=0;i<n;i++){for(var o=t[i],r=o.items,a=r.length,s=0;s<a;s++){if(r[s].targetId==e){return{type:o.type,sourceId:o.sourceId,opt:r[s].targetOpt,optId:r[s].optId}}}}return !1}},{key:"list",get:function(){return this.rules[s].concat(this.rules[c])}}]),e}();e.exports=u},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(72).FORM_RULES,l=u.relative,p=u["switch"],d=(n(64).FORM_COMPS,n(416)),f=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.list={},i.eleList={},n||i.init(),i}return s(t,e),c(t,[{key:"init",value:function(){var e,t=this,n=this.page.pageJson.properties.formRules;if(n.length){this.switchRules=[],this.rules=(e={},o(e,l,[]),o(e,p,[]),e),n.forEach(function(e){var n={};Array.isArray(e.items)||(e.items=Object.values(e.items)),e.items.forEach(function(t){e.type==l?n[t.targetId]=t:t.withoutCondition?n.withoutCondition=t:n[t.optId]=t}),e.items=n;var i=e.id;if(t.list[i]=e,e.type===l){Object.values(e.items).forEach(function(e){var n=t.page.getEqxCompById(e.targetId);n&&n.bindRuleEvent(i)});var o=t.page.getEqxCompById(e.sourceId)||{};o.ruleHide=!0,t.rules[l].push(e)}else{if(e.type===p){var r=t.page.getEqxCompById(e.sourceId);r&&r.bindRuleEvent(i),t.rules[p].push(e)}}});var i=this.page.getEqxComps();i.forEach(function(e){6!=e.type&&601!=e.type||(t.submitId=e.id)}),setTimeout(function(){t.updatePage("ruleChange")},0)}}},{key:"listen",value:function(e,t,n){var i=this,o=[];e.forEach(function(e){var r=i.list[e];i.updateRule(r,t,n),o.push(i.list[e])}),o.sort(function(e,t){return e.type-t.type}).forEach(function(e){var t=i.validateRule(e);if(e.type==l){var n=i.page.getEqxCompById(e.sourceId);i.trigger(t,n)}else{i.triggerSwitchRule(e,t)}}),setTimeout(function(){i.operateComp(),i.updatePage()},100)}},{key:"operateComp",value:function(){var e=this,t=Object.values(this.eleList).slice(0);t.forEach(function(t){var n=t.isShow?"eleShow":"eleHide";t.comp[n](),t.comp.ruleHide=!t.isShow,delete e.eleList[t.comp.id]})}},{key:"validateRule",value:function(e){var t=e.items,n=Object.values(t);switch(e.type){case l:var i=0;if(n.forEach(function(e){e.isOpen&&i++}),e.isAnd&&i===n.length||!e.isAnd&&i>0){return !0}break;case p:var o=void 0;return n.forEach(function(e){e.isOpen&&(o=e.optId)}),o;default:}}},{key:"triggerSwitchRule",value:function(e,t){var n=this,o=Object.values(e.items),r=e.sourceId;o.forEach(function(e){if(e.optId==t){var o=e.isEnd?n.submitId:e.targetId;setTimeout(function(){n.trigger.apply(n,[!1].concat(i(n.findItems(r,o)))),n.trigger(!0,n.page.getEqxCompById(o))},0)}else{var a=e.isEnd?n.submitId:e.targetId,s=n.findItems(r,a);if(!s.length){return}for(var c=s.length,u=c-1;u>=0;u--){var p=s[u],d=n.getRules(p.id,l);d&&(n.trigger(n.validateRule(d),p),s.splice(u,1))}n.trigger.apply(n,[!0].concat(i(s)))}})}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}i.forEach(function(n){t.eleList[n.id]={comp:n,isShow:e}})}},{key:"findItems",value:function(e,t){var n=this.page.getEqxComps(),i=this.page.getEqxCompById(e).getArrIndex(),o=this.page.getEqxCompById(t).getArrIndex(),r=[];return n.forEach(function(e){var t=e.getArrIndex();t>i&&t<o&&r.push(e)}),r}},{key:"updateRule",value:function(e,t,n){var i=n.split(",");!function(){switch(e.type){case l:var o=e.items[t],r=o.targetOpt,a=r.length;o.isOpen=!1;for(var s=function(e){if(i.find(function(t){return t==r[e]})){return o.isOpen=!0,"break"}},c=0;c<a;c++){var u=s(c);if("break"===u){break}}break;case p:Object.values(e.items).forEach(function(e){e.isOpen=!1,i.find(function(t){return !e.withoutCondition&&t==e.optId||e.withoutCondition&&i.length>0})&&(e.isOpen=!0)});break;default:}}()}},{key:"getRules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return this.rules[t].find(function(t){return t.sourceId===e})}},{key:"updatePage",value:function(){this.page.updateCompPosition("ruleChange"),this.page.appendLogo(this.page.renderMode),this.page.triggerEleShow()}}]),t}(d);e.exports=f},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.page=t}return i(e,[{key:"init",value:function(){}},{key:"updateRules",value:function(){}},{key:"listen",value:function(){}},{key:"validateRule",value:function(){}},{key:"triggerEvent",value:function(){}}]),e}();e.exports=o},function(e,t){var n={showFormSetting:[1],formDelete:[1],formRuleTrigger:[1],formOverlayJudge:[1],compDeleteRule:[1],verifyRules:[1]};e.exports={category:n}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(419);var r=n(420),a=n(421),s=n(90),c=n(422),u=c.AnimationStart,l=c.AnimationEnd,p=function(){function e(t,n){i(this,e),this.bgAudioJson=t,this.eqxScene=n,this.$bgmBtn=$(r),this.bgAudioJson&&(this.soundAgent=new a(this,this.eqxScene.soundManager))}return o(e,[{key:"destroy",value:function(){this.$bgmBtn&&(this.soundAgent.destroy(),this.soundAgent=null,this.$bgmBtn.remove(),this.$bgmBtn=null)}},{key:"updateJson",value:function(e){this.soundAgent.update(new s("src",e))}},{key:"show",value:function(){this.$bgmBtn&&this.$bgmBtn.show()}},{key:"resumePlay",value:function(){this.soundAgent&&this.soundAgent.update(new s("end"))}},{key:"stopPlay",value:function(){this.soundAgent&&this.soundAgent.update(new s("stop"))}},{key:"hide",value:function(){this.$bgmBtn&&this.$bgmBtn.hide()}},{key:"startRotate",value:function(){this.$bgmBtn&&u(this.$bgmBtn.find(".bgm-btn"),"rotate")}},{key:"stopRotate",value:function(){this.$bgmBtn&&l(this.$bgmBtn.find(".bgm-btn").get(0),this.$bgmBtn.get(0),"rotate")}}]),e}();e.exports=p},function(e,t){},function(e,t){e.exports='<div class="bgm-btn-wraper"><div class="bgm-btn" data-event="11205"><audio loop="loop" src="" id="media" autoplay="autoplay"></audio></div><script>function ywxPlay(){var audio=document.getElementById("media"),play=function(){audio.play();document.removeEventListener("touchstart",play,false)};audio.play();document.addEventListener("WeixinJSBridgeReady",function(){play()},false);document.addEventListener("touchstart",play,false)}ywxPlay();document.querySelectorAll("body")[0].click();</script></div>'},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(92),c=n(21),u=n(23).resolveUrl,l=n(24).mobilecheck,p=n(93).getWxJSSDK,d=n(24).isWeixin,f=n(24).isIOS,h=l()?"touchend":"click",g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.isManualPause=!1,r.$audio=r.master.$bgmBtn.find("audio"),r.audio=r.$audio[0],r.type=3,d()&&(r.wxJssdk=p()),window.EQX={startBgm:r.startPlay.bind(r),pauseBgm:r.stopPlay.bind(r)},r.init(),r}return r(t,e),a(t,[{key:"destroy",value:function(){this.$audio.attr("src","").off("canplay play pause"),this.$audio.remove(),this.$audio=null,this.audio=null,this.master.$bgmBtn.off(h),window.EQX.startBgm=function(){},window.EQX.pauseBgm=function(){},this.deregister()}},{key:"init",value:function(){var e=this.master.bgAudioJson;this.$audio.attr("src",u(c.FILE,e.url||e.src)),this.audio.load(),this.addEventListeners(),this.register(),this.master.show()}},{key:"update",value:function(e){var t=this;switch(e.type){case"src":var n=e.data;this.$audio.attr("src",u(c.FILE,n.url||n.src)),this.audio.load(),this.$audio.on("canplay",function(){t.audio.play()});break;case"hide":this.hide();break;case"show":this.show();break;case"stop":this.stopPlay();break;case"end":this.isManualPause||this.startPlay();break;case"down":f()?this.stopPlay():this.audio.volume=0.1;break;case"restore":f()?this.startPlay():this.audio.volume=1;break;case"play":this.startPlay()}}},{key:"addEventListeners",value:function(){function e(){n.audio.paused&&n.startPlay(!0)}var t=this,n=this;this.$audio.on("play",function(){$(document.body).unbind(h,e),t.master.startRotate()}),this.$audio.on("pause",function(){t.master.stopRotate()}),this.master.$bgmBtn.on(h,function(e){e.cancelBubble=!0,e.stopPropagation(),t.isManualPause=!t.audio.paused,t.audio.paused?t.startPlay(!0):t.stopPlay(!0)}),$(document.body).bind(h,e),this.startPlay()}},{key:"startPlay",value:function(e){function t(e){4===e.readyState?e.paused&&(e.play(),n.manager.onPlay(n)):(e.load(),$(e).on("canplay",function(){n.$audio.off("canplay"),e.paused&&e.play(),n.manager.onPlay(n)}))}this.show();var n=this,i=n.audio;d()&&!e?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){i.paused&&t(i)}})}):i.paused&&t(i)}},{key:"hide",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.hide(),this.stopPlay()}},{key:"show",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.show()}},{key:"stopPlay",value:function(e){function t(e){4===e.readyState?e.pause():(e.load(),$(e).on("canplay",function(){n.$audio.off("canplay"),e.pause()}))}var n=this;if(d()&&!e){this.wxJssdk.then(function(){var e=n.audio;wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){t(e)}})})}else{var i=n.audio;t(i)}}}]),t}(s);e.exports=g},function(e,t,n){function i(e,t){e instanceof jQuery||(e=$(e)),e.addClass(t).css("-webkit-animation-play-state","running")}function o(e,t,n){if(a("animation-play-state")&&!r()){e instanceof jQuery||(e=$(e)),e.css("-webkit-animation-play-state","paused")}else{var i=e instanceof jQuery?e.get(0):e,o=t instanceof jQuery?t.get(0):t,s=getComputedStyle(i).transform,c=getComputedStyle(o).transform;o.style.transform="none"===c?s:s.concat(" ",c),$(i).removeClass(n)}}var r=n(24).iphoneCheck,a=function(){var e=document.createElement("div"),t="Ms O Moz Webkit".split(" "),n=t.length;return function(i){if(i in e.style){return !0}for(i=i.replace(/^[a-z]/,function(e){return e.toUpperCase()});n--;){if(t[n]+i in e.style){return !0}}return !1}}();e.exports={AnimationStart:i,AnimationEnd:o,supportCss3:a}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(90),a=function(){function e(){i(this,e),this.subscriberMap={}}return o(e,[{key:"subscribe",value:function(e,t){var n=this.subscriberMap[e];n||(n=this.subscriberMap[e]=[]),n.includes(t)||n.push(t)}},{key:"removeAll",value:function(e){for(var t in this.subscriberMap){this.subscriberMap.hasOwnProperty(t)&&this.remove(t,e)}}},{key:"remove",value:function(e,t){var n=this.subscriberMap[e];if(!n){return void (_DEBUG_)}var i=n.indexOf(t);i>-1&&n.splice(i,1)}},{key:"publish",value:function(e,t){var n=this.subscriberMap[e];return n?void n.forEach(function(n){return n.update(new r(e,t))}):void (_DEBUG_)}}]),e}();e.exports=a},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){return JSON.stringify(e)===JSON.stringify(t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(425).$postComment,s=n(425).$getCommentList,c=function(){function e(t){i(this,e),this.sceneId=t,this.comments=[],this.canLoadMore=!0,this.lastTime=0,this.registers=[],this.promise=null}return r(e,[{key:"addComment",value:function(e){return !this.comments.find(function(t){return o(t,e)})&&(this.comments.push(e),!0)}},{key:"getComments",value:function(){return this.comments.sort(function(e,t){return t.createTime-e.createTime}),this.comments}},{key:"postComment",value:function(e){var t=this;return a(e).then(function(e){var n=e.obj;return t.addComment(n),t.publish(),n})}},{key:"publish",value:function(){this.registers.forEach(function(e){return e.updateComments()})}},{key:"loadInitComments",value:function(e){return this.promise?this.promise:(this.promise=this.loadMoreComments(e)["catch"](function(){}),this.promise)}},{key:"loadMoreComments",value:function(e){var t=this;return s({sceneId:this.sceneId,time:this.lastTime,size:e}).then(function(e){var n=e.list;return n.length?(t.lastTime=n[n.length-1].createTime,n=n.filter(function(e){return t.addComment(e)}),t.publish(),n):Promise.reject("")})}},{key:"register",value:function(e){this.registers.includes(e)||this.registers.push(e)}}]),e}();e.exports=c},function(e,t,n){function i(e){var t=e.sceneId,n=e.size,i=e.time,o=r.SERVER_1+"scene/msg/list?sceneId="+t;return n&&(o+="&size="+n),i&&(o+="&lastTime="+i),o+="&date="+(new Date).getTime(),a({type:"GET",url:o})}function o(e){return a({type:"POST",url:r.SERVER_1+"scene/send/msg",data:e})}var r=n(21),a=n(20).ajax;e.exports={$getCommentList:i,$postComment:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e){return a.includes(""+e.type)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(64).FORM_COMPS,s=function(){function e(){i(this,e),this.submited=!1,this.fromCompList=[]}return r(e,[{key:"add",value:function(e){if(o(e)){if(this.fromCompList.includes(e)){if(_DEBUG_){throw new Error("Duplicate EQX form element "+e)}}else{this.fromCompList.push(e)}}else{if(_DEBUG_){throw new Error("Invalid EQX Form Element "+e+", type: "+e.type)}}}},{key:"check",value:function(){for(var e={sms:[]},t=this.fromCompList.map(function(e){return e.check()}),n=0,i=!1,o=0;o<t.length;o++){var r=t[o],a=r.success,s=r.key,c=r.value,u=r.score;if(!a){return r}r.type&&12==r.type?e[s]=c.phoneValue:e[s]=c,r.type&&12==r.type&&(r.ruleHide?delete e.sms:e.sms.push(c)),u&&(n+=u,i=!0)}return Object.values(e).every(function(e){return !e})?{success:!1,message:"请填写表单"}:(i&&(n+="分",e["eq[f_score_123456]"]=n),{success:!0,form:e})}}]),e}();e.exports=s},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value" in i){return i.value}var r=i.get;if(void 0!==r){return r.call(n)}},c=n(389),u=n(209).$getCountValues,l=n(64).COMP_TYPE,p=function(e){function t(e){i(this,t);var n=e.list.reduce(function(e,t){return e.concat(t.elements)},[]),r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.sceneJson=e,r.countIdArr=[],r.countValuesPromise=null,r}return r(t,e),a(t,[{key:"iterate",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"iterate",this).call(this),this.compJsonList.forEach(function(t){var n=l[t.type];"EqxCount"!==n||e.countIdArr.includes(t.id)||e.countIdArr.push(t.id)})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"getCounterValues",value:function(){if(this.countValuesPromise){return this.countValuesPromise}var e=this.getCountIds();if(e){var t=this.sceneJson.meta.id;this.countValuesPromise=u({sceneId:t,fieldIds:e}).then(function(e){return e.map})["catch"](function(){return{}})}else{this.countValuesPromise=Promise.resolve({})}return this.countValuesPromise}}]),t}(c);e.exports=p},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(429),c=n(90),u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),a(t,[{key:"onPlay",value:function(e){if(this.agents.includes(e)){switch(e.type){case 3:this.agents.forEach(function(t){5!==t.type||t.master.$context[0].paused||e.update(new c("stop"))});break;case 5:this.agents.forEach(function(e){3===e.type&&e.update(new c("stop"))});break;case 1:this.agents.forEach(function(t){t!==e&&(2===t.type||3===t.type?t.update(new c("down")):1===t.type&&(t.update(new c("stop")),t.update(new c("reset"))))});break;case 2:this.agents.forEach(function(t){3===t.type&&t.update(new c("down")),1!==t.type||t.audio.paused||e.update(new c("down"))});break;case 4:this.agents.forEach(function(e){2===e.type||3===e.type?e.update(new c("down")):1===e.type&&(e.update(new c("stop")),e.update(new c("reset")))})}}}},{key:"onEnd",value:function(e){if(e||this.agents.includes(e)){switch(e.type){case 5:this.agents.forEach(function(e){3!==e.type||e.isManualPause||e.update(new c("play"))});break;case 1:var t=null;t=this.agents.findIndex(function(e){return 1===e.type&&!e.audio.paused})!==-1,this.agents.forEach(function(e){2!==e.type||t||e.update(new c("restore"))}),t=this.agents.findIndex(function(e){return(1===e.type||2===e.type)&&!e.audio.paused})!==-1,!t&&this.agents.forEach(function(e){3===e.type&&e.update(new c("restore"))});break;case 2:var n=!1;this.agents.forEach(function(t){t===e||1!==t.type&&2!==t.type||t.audio.paused||(n=!0)}),!n&&this.agents.forEach(function(e){3===e.type&&e.update(new c("restore"))});break;case 4:var i=null;i=this.agents.findIndex(function(e){return 1===e.type&&!e.audio.paused})!==-1,this.agents.forEach(function(e){2!==e.type||i||e.update(new c("restore"))}),i=this.agents.findIndex(function(e){return(1===e.type||2===e.type)&&!e.audio.paused})!==-1,!i&&this.agents.forEach(function(e){3===e.type&&e.update(new c("restore"))})}}}},{key:"stopAll",value:function(){this.agents.forEach(function(e){e.audio&&!e.audio.paused&&e.update(new c("stop"))})}},{key:"restoreAll",value:function(){this.agents.forEach(function(e){3===e.type&&e.audio.paused&&!e.isManualPause&&e.update(new c("play"))})}}]),t}(s);e.exports=u},function(e,t){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.agents=[],this.predict=t}return i(e,[{key:"add",value:function(e){this.predict&&!this.predict.call(this,e)||this.agents.includes(e)||this.agents.push(e)}},{key:"remove",value:function(e){var t=this.agents.indexOf(e);t>-1&&this.agents.splice(t,1)}}]),e}();e.exports=o},function(e,t,n){var i,o,r;!function(a,s){o=[t,n(431),n(433),n(434),n(435),n(436)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o,r){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.detailedDiff=e.updatedDiff=e.deletedDiff=e.diff=e.addedDiff=void 0;var s=a(t),c=a(n),u=a(i),l=a(o),p=a(r);e.addedDiff=c["default"],e.diff=s["default"],e.deletedDiff=u["default"],e.updatedDiff=l["default"],e.detailedDiff=p["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(432)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}return e},r=function a(e,t){if(e===t){return{}}if(!(0,n.isObject)(e)||!(0,n.isObject)(t)){return t}var r=(0,n.properObject)(e),s=(0,n.properObject)(t),c=Object.keys(r).reduce(function(e,t){return s.hasOwnProperty(t)?e:o({},e,i({},t,void 0))},{});return(0,n.isDate)(r)||(0,n.isDate)(s)?r.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce(function(e,t){if(!r.hasOwnProperty(t)){return o({},e,i({},t,s[t]))}var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)&&!(0,n.isDate)(c)?e:o({},e,i({},t,c))},c)};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(n,a){o=[t],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e.isDate=function(e){return e instanceof Date},e.isEmpty=function(e){return 0===Object.keys(e).length},e.isObject=function(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":n(e))});e.properObject=function(e){return i(e)&&!e.hasOwnProperty?t({},e):e}})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(432)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}return e},r=function a(e,t){if(e===t||!(0,n.isObject)(e)||!(0,n.isObject)(t)){return{}}var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return Object.keys(s).reduce(function(e,t){if(r.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)?e:o({},e,i({},t,c))}return o({},e,i({},t,s[t]))},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(432)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}return e},r=function a(e,t){if(e===t||!(0,n.isObject)(e)||!(0,n.isObject)(t)){return{}}var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return Object.keys(r).reduce(function(e,t){if(s.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)?e:o({},e,i({},t,c))}return o({},e,i({},t,void 0))},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(432)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}return e},r=function a(e,t){if(e===t){return{}}if(!(0,n.isObject)(e)||!(0,n.isObject)(t)){return t}var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return(0,n.isDate)(r)||(0,n.isDate)(s)?r.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce(function(e,t){if(r.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)&&!(0,n.isDate)(c)?e:o({},e,i({},t,c))}return e},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(433),n(434),n(435)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),c=r(o),u=function(e,t){return{added:(0,a["default"])(e,t),deleted:(0,s["default"])(e,t),updated:(0,c["default"])(e,t)}};t["default"]=u,e.exports=t["default"]})},function(e,t,n){function i(e){return e.meta?e.obj=e.meta:e.obj=e.obj||{},e.meta=e.obj,e.map=e.map||{},e.list=e.list||[],e.list.forEach(function(e,t){e.num=t+1}),e}function o(e){if(e.meta.property&&e.meta.property.openMsg){var t=l.messageBoard({sceneId:e.list[0].sceneId,pageId:e.list[0].id,top:0});e.list[0].elements.push(t)}return e}function r(e,t,n,i,o){if(!t){return void (e.obj&&(e.obj.adHeight=0))}var r=n,a=e.list[0].sceneId,s="lpAdvertise",c=l[s]({sceneId:a,top:0,pageId:e.list[0].id,type:t,config:r,labelConfig:o});"ad01"==t&&e.list[0].properties.triggerGroup.push({delay:0,eventType:1,sourceId:c.id,sourceType:"e",targetContent:p.LONG_HOST+"mobile/create.html?sourceId="+i+"&type=lc",targetId:c.id,targetState:5,targetType:"e"}),e.obj&&(e.obj.adHeight=c.css.height),c.properties.appendElement=!0,e.list[0].elements.push(c)}function a(e,t,n,i){var o=e.list[0].sceneId,r={clickType:1,labelText:"长页提供技术支持",adLink:"",isShowReport:i.disableReport};if(n&&Object.keys(n).length){if(!/(http|https):\/\/([\w.]+\/?)\S*/.test(n.adLink)){var a=n.adLink.replace(/，/g,",").split(","),s=Math.floor(Math.random()*a.length);a[s]&&!isNaN(a[s])?n.adLink=p.LONG_HOST+"mobile/create.html?sourceId="+a[s]+"&type=lc":n.adLink=r.adLink}Object.assign(r,{labelText:n.label,popUpPic:n.popUpPic,adLink:n.adLink,clickType:n.clickType})}var c="lpBottomMark",u=l[c]({sceneId:o,top:0,pageId:e.list[0].id,config:r});u.properties.appendElement=!0,e.list[0].groups||(e.list[0].groups=[]),e.list[0].elements.push(u)}function s(e,t){if(f()&&m("MicroServiceRenderView")){e.obj.adHeight=0}else{var n=JSON.parse(JSON.stringify(p.BOTTOM_MARK_TEMPLATEID)),i=Math.floor(Math.random()*n.length),o=n[i],s=c("label",e);a(e,o,s,t);var l=null,d=u(e);d&&Object.keys(d).length&&d.isAd?l="ad03":(d=c("ad",e),d&&Object.keys(d).length&&(l="ad02")),r(e,l,d,o,s)}return e}function c(e,t){var n="b";if(n=g()?"b":h()?"c":"a",window._configure&&window._configure[n]){return window._configure[n][e]}var i={};return t.obj&&(i="string"==typeof t.obj.configure&&""!=t.obj.configure?JSON.parse(t.obj.configure):t.obj.configure),i&&i[n]&&i[n][e]}function u(e){if(window._adConfigForFlow){return window._adConfigForFlow}var t={};return e.obj&&(t="string"==typeof e.obj.adConfigForFlow&&""!=e.obj.adConfigForFlow?JSON.parse(e.obj.adConfigForFlow):e.obj.adConfigForFlow),t}var l=n(409),p=n(21),d=n(24),f=d.isMiniProm,h=d.mobilecheck,g=d.isWeixin,m=n(23).getUrlParam;e.exports={perfectScene:i,initMarkSceneJson:s,initMessageBoard:o}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(439),a=r.ObjAdaptor,s=r.ListAdaptor,c=n(437).perfectScene,u=function(){function e(t){i(this,e),c(t),this.sceneJson={map:t.map,meta:t.meta,list:t.list},this.mapAdaptor=new a(t.map),this.metaAdaptor=new a(t.meta),this.pageAdaptor=new s(t.list),this.eleAdptorList=t.list.map(function(e){return e.elements||(e.elements=[]),new s(e.elements)})}return o(e,[{key:"addMapFn",value:function(e){return this.mapAdaptor.addFn(e),this}},{key:"addMetaFn",value:function(e){return this.metaAdaptor.addFn(e),this}},{key:"addPageFn",value:function(e){return this.pageAdaptor.addFn(e),this}},{key:"addEleFn",value:function(e){return this.eleAdptorList.forEach(function(t){return t.addFn(e)}),this}},{key:"start",value:function(){var e=this;this.mapAdaptor.start(this.sceneJson),this.metaAdaptor.start(this.sceneJson),this.pageAdaptor.start(this.sceneJson),this.eleAdptorList.forEach(function(t,n){return t.start(e.sceneJson,e.sceneJson.list[n])})}}]),e}();e.exports=u},function(e,t){function n(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.fns=t}return r(e,[{key:"addFns",value:function(e){var t=this;return e.forEach(function(e){return t.addFn(e)}),this}},{key:"addFn",value:function(e){return this.fns.includes(e)||this.fns.push(e),this}},{key:"removeFn",value:function(e){var t=this.fns.indexOf(e);return t>-1&&this.fns.splice(t,1),this}},{key:"clearFns",value:function(){return this.fns.length=0,this}},{key:"start",value:function(){return this}}]),e}(),s=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return r.data=e,r}return i(t,e),r(t,[{key:"start",value:function(e){var t=this;return this.fns.forEach(function(n){return n.call(null,t.data,e)}),this}}]),t}(a),c=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return Array.isArray(e)||(_DEBUG_,e=[]),r.list=e,r}return i(t,e),r(t,[{key:"start",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}return this.fns.forEach(function(t){return e.list.forEach(function(e){return t.call.apply(t,[null,e].concat(n))})}),this}}]),t}(a);e.exports={ObjAdaptor:s,ListAdaptor:c}},function(e,t){function n(){i(),o()}function i(){"miniprogram"==window.__wxjs_environment&&document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&$(".bgm-btn audio")[0].pause()})}function o(){var e=window.location.href;e.indexOf("tg.ywx.im")>-1&&(window.onresize=function(){window.screen.width<450&&window.location.reload()})}e.exports={sceneLoadEnd:n}},function(e,t,n){function i(e){if(e.isPwd){var t=new Promise(function(t){new r(e.cover,$("#nr"),t)})}else{t=a()}var n=t.then(function(t){return t.meta=e,new l(t,[p]).start(),t});return Promise.all([n]).then(function(e){var t=o(e,2),n=t[0],i=t[1];return i instanceof Object&&n.list.push(i),n}).then(function(e){var t=e.meta;if(!h(t)){return e}var n=t.ext;return c(n.yqc.ad).then(function(t){return t&&t.list&&t.list.length?(t.list.filter(function(e){return !!e.scenePage||!!e.scenePageDTO}).forEach(function(t){for(var n=t.scenePage,i=t.scenePageDTO,o=t.pageNum,r=i||n,a=r.elements||[],s=0;s<a.length;s++){var c=a[s];if(c&&"EqxAdvertise"==g[c.type]){c.content="tpl";break}}var u=o-1,l=e.list;u>l.length?l.push(r):l.splice(u,0,r)}),e):e})["catch"](function(t){return"",e})}).then(function(e){return new u(e).addPageFn(d).addEleFn(f).start(),e})}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0){}}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o){throw r}}}return n}return function(t,n){if(Array.isArray(t)){return t}if(Symbol.iterator in Object(t)){return e(t,n)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(442).Guess,a=n(55).$getSceneData,s=n(48).$getActivityPage,c=n(221).$getYqcAd,u=n(438),l=n(439).ObjAdaptor,p=n(437).perfectScene,d=n(62).perfectPage,f=n(68).perfectComp,h=n(42).isEqxAdScene,g=(n(445).addEqAdInfo,n(64).COMP_TYPE);e.exports={getPerfectSceneData:i,$getActivityPage:s}},function(e,t,n){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value" in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(443);var r=n(444),a=n(44).parse,s=n(55).$getSceneData,c=n(24),u=c.mobilecheck,l=c.isAndroidPhone,p=c.tabletCheck,d=c.isPc,f=n(21),h=function(){function e(t,n,o){if(i(this,e),this.callBack=o,this.password="",t.startsWith("http")||(t=f.FILE+t),n.append(a(r,{cover:t})),$("#loading").hide(),$("#verifyCode").show(),d()||l()?($(".password-numbers>span").on("click",this.passwordEventListener.bind(this)),$("#btnClear").on("click",this.btnClearEventListener.bind(this)),$("#btnCancel").on("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").on("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").on("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").on("touchstart",this.btnCancelEventListener.bind(this))),u()||p()){var s,c=$(".container"),h=c.width(),g=c.height();s=Math.floor(10*Math.min(document.documentElement.clientHeight/g,document.documentElement.clientWidth/h))/10,c.css("transform","scale("+s+", "+s+")")}}return o(e,[{key:"requestSceneDataWithPassword",value:function(e){var t=this;s(e).then(function(e){t.clearGuess(),t.callBack(e)})["catch"](function(){t.warnGuess()})}},{key:"animateVerifyTip",value:function(){var e=this;$("#verifyTip").addClass("shake").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("shake"),e.syncronizeTheIndicator()})}},{key:"syncronizeTheIndicator",value:function(){var e=this;$(".password-indicator li").each(function(t,n){t<e.password.length?$(n).addClass("active"):$(n).removeClass("active")})}},{key:"passwordEventListener",value:function(e){var t=$(e.target);t.addClass("active"),this.password+=t.text(),this.syncronizeTheIndicator(),4==this.password.length&&(this.requestSceneDataWithPassword(this.password),this.password=""),setTimeout(function(){t.removeClass("active")},100)}},{key:"btnClearEventListener",value:function(e){this.password="",this.syncronizeTheIndicator()}},{key:"btnCancelEventListener",value:function(e){this.password&&(this.password=this.password.substring(0,this.password.length-1),this.syncronizeTheIndicator())}},{key:"clearGuess",value:function(){$("#verifyCode").remove(),d()||l()?($(".password-numbers>span").off("click",this.passwordEventListener.bind(this)),$("#btnClear").off("click",this.btnClearEventListener.bind(this)),$("#btnCancel").off("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").off("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").off("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").off("touchstart",this.btnCancelEventListener.bind(this)))}},{key:"warnGuess",value:function(){$("#verifyCode").show(),this.animateVerifyTip()}}]),e}();e.exports={Guess:h}},function(e,t){},function(e,t){e.exports='<div id="verifyCode" class="verifyCode"><div class="container"><div class="scene-cover"><img class="cover-img" src="#{cover}"></div><div class="scene-name">场景名称</div><div class="confirm-password"><div class="verify-label">请输入访问密码</div><div class="verify-tips" id="verifyTip"><ul class="password-indicator"><li></li><li></li><li></li><li></li></ul></div><div class="password-numbers"><span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>0</span></div><div class="password-operation"><span class="btn-clear" id="btnClear">清空</span> <span class="btn-cancel" id="btnCancel">取消</span></div></div></div></div>'},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function o(e,t){var n={};return new Promise(function(i){return e?b(e).then(function(e){return h(t,e.obj)}).then(function(e){return s(e),i(e)}):(n=l(t),s(n),i(n))})}function r(e){var t=e.meta,n=t.id,o=t.property,r=o.lastPageId,u=o.eqAdType,d=t.bizType,g=t.isTemplate,m=(t.ext,e.list),w=m.length;return new Promise(function(t){function o(){return k().then(function(n){return E=l(e,n),c(E),m.push(E),t(e)})["catch"](function(){return E=l(e),c(E),m.push(E),t(e)})}var E=void 0;if(w&&(E=m[w-1],E.elements=E.elements||[]),!(x()||30!=d&&2!=g||u!=v["deepshare尾页"]&&(u!=v["技术支持尾页"]||r))){return k().then(function(e){return e}).then(function(n){return E=a(e,n),c(E),m.push(E),t(e)})["catch"](function(){return E=a(e),c(E),m.push(E),t(e)})}switch(""+u){case v["无尾页无底标"]:return t(e);case v["技术支持尾页"]:return r?b(r).then(function(t){return h(e,t.obj)}).then(function(n){return s(n),m.push(n),t(e)})["catch"](function(){return o()}):o();case v["技术支持底标"]:try{var I=p(E),_=y.bottomLabel({sceneId:n,pageId:E.pageId,top:I,pageIndex:w});return E.elements.push(_),t(e)}catch(S){return"",o()}case v["品牌联合底标"]:try{return f(e).then(function(n){return E.elements=[].concat(i(E.elements),i(n)),t(e)})}catch(S){return"",o()}default:return o()}})}function a(e,t){var n=e.meta,i=n.id,o=n.cover,r=n.name,a=n.code,s=e.list.length+1;return y.lastPageBlur({id:i,name:r,num:s,cover:o,code:a,isDeepShare:!0},t)}function s(e,t){var n=e.pageId,i=e.sceneId,o=e.num,r=y.report({pageId:n,sceneId:i,pageIndex:o,center:t});e.elements.push(r)}function c(e,t){var n=e.pageId,i=e.sceneId,o=e.num,r=y.addReportBlur({pageId:n,sceneId:i,pageIndex:o,center:t});e.elements.push(r)}function u(e){var t=e.sceneId,n=e.url;return m.SERVER_1+"eqs/link?id="+t+"&url="+encodeURIComponent(n)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.meta,i=n.id,o=n.cover,r=n.name,a=e.list.length+1;return y.lastPageBlur({id:i,name:r,num:a,cover:o},t)}function p(e){var t=(e.properties||{}).longPage||1;return t<10?486*(t-1):t-486}function d(e,t,n){var i=p(e),o=y.bottomLabel({sceneId:t,pageId:e.pageId,top:i,pageIndex:n});return o}function f(e){var t=e.meta,n=t.id,i=t.property.bottomLabel,o=i.id,r=i.name,a=i.url;if(!o){throw new Error("No bottomLabel's id")}var s=e.list,c=s[s.length-1],u=p(c),l=c.pageId;return b(o).then(function(e){return(e.obj.elements||[]).map(function(e){return g({ele:e,sceneId:n,pageId:l,url:a,top:u,name:r})})},function(){return[]})}function h(e,t){var n=e.list,o=e.meta,r=o.cover,a=o.id,s=o.name;t.properties=t.properties||{},t.sceneId=a;var c=function(e){var t=e.properties.src;return 4==e.type&&!!t&&["group1/M00/A5/5E/yq0KA1QmePmAKr7yAAEByp5jyLc752.jpg","group1/M00/C5/9D/yq0KA1SH1zuAFgkLAAAFgBR8hJs456.png","group1/M00/C5/3F/yq0KA1SHp-2AQZZZAAB-7rIaK6I743.png","group1/M00/C5/9D/yq0KA1SH1zuAeQuFAAAFfUkeXDc110.png"].includes(t)},u=function(e){2==e.type&&/http:\/\/service.ywx.im\/eqs\/link/.test(e.content)&&(e.content=e.content.replace(/;url=.*com"/,";url="+encodeURIComponent(w)))};if("group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==r){var l=y.image1();l.properties.src=r}else{l=y.eqxLogo()}return t.elements=t.elements.filter(function(e){return !c(e)}),t.elements.forEach(u),t.elements=[].concat(i(t.elements),[y.shadow(),l,y.line(),y.title(s)]),t.num=n.length+1,t}function g(e){var t=e.ele,n=e.sceneId,i=(e.pageId,e.url),o=e.top,r=e.name;t.sceneId=n,t.pageId=129811;var a="科技公司",s=t.type;return 2==s&&(r&&i&&"http://"!==i&&(t.content=t.content.replace(new RegExp(a),'<a href="'+u({sceneId:n,url:i})+'" target=_blank data-event="1120203">'+r+"</a>")),r?t.content=t.content.replace(new RegExp(a),r):/云微秀技术支持/.test(t.content)&&(Object.assign(t.css,{zIndex:1000,height:33,width:129,left:97}),t.content='<div style="text-align: center;">'+t.content+"</div>")),t.css.top+=o,t.css.zIndex=200,t}var m=n(21),v=n(57).AD_TYPE,y=n(409),b=n(48).$getPageInfo,x=(n(221).$getYqcTail,n(24).isApp),w=n(23).redirectUrl(),k=n(47).getLastPageConfig;e.exports={addEqAdInfo:r,getLastPage:o,getDefaultBottom:d,getCustomBottomLabel:f}},function(e,t,n){function i(e,t){return r()||t||e.map.wxComponent?function(n){var i=n.type,o=n.id,r=n.properties.type;if(t){var s=t.headimgurl,c=t.nickname;"201"==i&&"own"==r&&(n.content=c),"401"==i&&"own"==r&&(n.properties.src=s,delete n.properties.imgStyle)}var u=e.map.wxComponent,l=void 0===u?{shareUserName:"",shareUserHeader:""}:u,p=l.shareUserName,d=l.shareUserHeader;(p||d)&&("201"==i&&"share"==r&&p&&(n.content=p),"401"==i&&"share"==r&&d&&(n.properties.src=d,delete n.properties.imgStyle)),"201"!=i&&"401"!=i||"share"!=r||a.generateUserKey(),l[o]&&(n.serverId=l[o])}:o}var o=n(26).noop,r=n(24).isWeixin,a=n(93);e.exports={wxAdaptor:i}},function(e,t,n){function i(){}var o=n(21);e.exports={putTracker:i}}]);